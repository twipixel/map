webpackJsonp([0],{0:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();r(1);var s=r(327),a=n(s),u=r(365),f=n(u);!function(){window.onload=function(){new c}}();var c=function(){function t(){i(this,t),this.init(),this.addEvent(),this.onresize()}return o(t,[{key:"init",value:function(){this.app=new a.default}},{key:"addEvent",value:function(){window.onresize=this.onresize.bind(this),window.addEventListener("keyup",this.onkeyup.bind(this)),window.addEventListener("keydown",this.onkeydown.bind(this))}},{key:"onresize",value:function(){this.app.resize()}},{key:"getIntervalFunction",value:function(t,e){function r(){e.apply(t,i),clearTimeout(this.keyIntervalId),this.keyIntervalId=setTimeout(r.bind(this),200)}for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return r.bind(this)}},{key:"clearInterFunction",value:function(){clearTimeout(this.keyIntervalId)}},{key:"onkeydown",value:function(t){switch(t.keyCode){case f.default.UP:this.getIntervalFunction(this.app,this.app.moveCamera,"y",-1)();break;case f.default.DOWN:this.getIntervalFunction(this.app,this.app.moveCamera,"y",1)();break;case f.default.LEFT:this.getIntervalFunction(this.app,this.app.moveCamera,"x",-1)();break;case f.default.RIGHT:this.getIntervalFunction(this.app,this.app.moveCamera,"x",1)();break;case f.default.PAGE_UP:this.getIntervalFunction(this.app,this.app.moveCamera,"z",1)();break;case f.default.PAGE_DOWN:this.getIntervalFunction(this.app,this.app.moveCamera,"z",-1)();break;case f.default.NUMBER_4:this.getIntervalFunction(this.app,this.app.rotateWorld,"y",-.01)();break;case f.default.NUMBER_6:this.getIntervalFunction(this.app,this.app.rotateWorld,"y",.01)();break;case f.default.NUMBER_8:this.getIntervalFunction(this.app,this.app.rotateWorld,"x",-.01)();break;case f.default.NUMBER_2:this.getIntervalFunction(this.app,this.app.rotateWorld,"x",.01)();break;case f.default.NUMBER_7:this.getIntervalFunction(this.app,this.app.rotateWorld,"z",-.01)();break;case f.default.NUMBER_1:this.getIntervalFunction(this.app,this.app.rotateWorld,"z",.01)();break;case f.default.NUMBER_9:this.getIntervalFunction(this.app,this.app.rotateWorld,"z",-.01)();break;case f.default.NUMBER_3:this.getIntervalFunction(this.app,this.app.rotateWorld,"z",.01)();break;case f.default.NUMPAD_ADD:this.app.zoomIn();break;case f.default.NUMPAD_SUBTRACT:this.app.zoomOut();break;case f.default.NUMPAD_ENTER:this.app.zoomOut();break;case f.default.NUMBER_0:this.app.reset();break;case f.default.W:break;case f.default.S:break;case f.default.A:break;case f.default.D:}}},{key:"onkeyup",value:function(t){switch(t.keyCode){case f.default.ESCAPE:console.clear();break;case f.default.SPACE:this.app.gui.closed?this.app.gui.open():this.app.gui.close();break;case f.default.UP:case f.default.DOWN:case f.default.LEFT:case f.default.RIGHT:case f.default.PAGE_UP:case f.default.PAGE_DOWN:case f.default.NUMBER_4:case f.default.NUMBER_6:case f.default.NUMBER_8:case f.default.NUMBER_2:case f.default.NUMBER_7:case f.default.NUMBER_1:case f.default.NUMBER_9:case f.default.NUMBER_3:case f.default.NUMPAD_ADD:case f.default.NUMPAD_SUBTRACT:case f.default.W:case f.default.S:case f.default.A:case f.default.D:this.clearInterFunction();break;case f.default.BACKSPACE:}}}]),t}()},327:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(328),u=n(a),f=r(355),c=(n(f),r(358)),h=n(c),l=r(360),p={x:27953,y:12711,z:15},d="https://map.pstatic.net/nvb/wmts/poi_web/8fe6883e-5525-45f8-8f55-5e30bc4981f1/getTile/27953/12711/15/pbf",y=function(){function t(){i(this,t),this.loadVector()}return s(t,[{key:"loadVector",value:function(){var t=this;this.load({url:d,responseType:"arraybuffer"}).then(function(e){var r=new l.VectorTile(new h.default(e));console.log("tile",r);var n=t.getFeatures(r);console.log("features",n.features)})}},{key:"load",value:function(t){var e=t.url,r=t.responseType,n=void 0===r?"json":r,i=function(){return(0,u.default)({url:e,responseType:n}).then(function(t){var e=t.data;return e})};return i()}},{key:"getFeatures",value:function(t){var e={type:"FeatureCollection",features:[]},r=Object.keys(t.layers);return Array.isArray(r)||(r=[r]),r.forEach(function(r){for(var n=t.layers[r],i=n.length,s=0;s<i;s++){var a=o({},n.feature(s).toGeoJSON(p.x,p.y,p.z));e.features.push(a)}}),e}},{key:"resize",value:function(){}}]),t}();e.default=y},328:function(t,e,r){t.exports=r(329)},329:function(t,e,r){"use strict";function n(t){var e=new s(t),r=o(s.prototype.request,e);return i.extend(r,s.prototype,e),i.extend(r,e),r}var i=r(330),o=r(331),s=r(333),a=r(351),u=r(339),f=n(u);f.Axios=s,f.create=function(t){return n(a(f.defaults,t))},f.Cancel=r(352),f.CancelToken=r(353),f.isCancel=r(338),f.all=function(t){return Promise.all(t)},f.spread=r(354),t.exports=f,t.exports.default=f},330:function(t,e,r){"use strict";function n(t){return"[object Array]"===k.call(t)}function i(t){return"[object ArrayBuffer]"===k.call(t)}function o(t){return"undefined"!=typeof FormData&&t instanceof FormData}function s(t){var e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function a(t){return"string"==typeof t}function u(t){return"number"==typeof t}function f(t){return"undefined"==typeof t}function c(t){return null!==t&&"object"==typeof t}function h(t){return"[object Date]"===k.call(t)}function l(t){return"[object File]"===k.call(t)}function p(t){return"[object Blob]"===k.call(t)}function d(t){return"[object Function]"===k.call(t)}function y(t){return c(t)&&d(t.pipe)}function g(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function v(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function w(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function m(t,e){if(null!==t&&"undefined"!=typeof t)if("object"!=typeof t&&(t=[t]),n(t))for(var r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function b(){function t(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=b(e[r],t):e[r]=t}for(var e={},r=0,n=arguments.length;r<n;r++)m(arguments[r],t);return e}function x(){function t(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=x(e[r],t):"object"==typeof t?e[r]=x({},t):e[r]=t}for(var e={},r=0,n=arguments.length;r<n;r++)m(arguments[r],t);return e}function F(t,e,r){return m(e,function(e,n){r&&"function"==typeof e?t[n]=S(e,r):t[n]=e}),t}var S=r(331),M=r(332),k=Object.prototype.toString;t.exports={isArray:n,isArrayBuffer:i,isBuffer:M,isFormData:o,isArrayBufferView:s,isString:a,isNumber:u,isObject:c,isUndefined:f,isDate:h,isFile:l,isBlob:p,isFunction:d,isStream:y,isURLSearchParams:g,isStandardBrowserEnv:w,forEach:m,merge:b,deepMerge:x,extend:F,trim:v}},331:function(t,e){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},332:function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function n(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}t.exports=function(t){return null!=t&&(r(t)||n(t)||!!t._isBuffer)}},333:function(t,e,r){"use strict";function n(t){this.defaults=t,this.interceptors={request:new s,response:new s}}var i=r(330),o=r(334),s=r(335),a=r(336),u=r(351);n.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=u(this.defaults,t),t.method=t.method?t.method.toLowerCase():"get";var e=[a,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)r=r.then(e.shift(),e.shift());return r},n.prototype.getUri=function(t){return t=u(this.defaults,t),o(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(t){n.prototype[t]=function(e,r){return this.request(i.merge(r||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){n.prototype[t]=function(e,r,n){return this.request(i.merge(n||{},{method:t,url:e,data:r}))}}),t.exports=n},334:function(t,e,r){"use strict";function n(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=r(330);t.exports=function(t,e,r){if(!e)return t;var o;if(r)o=r(e);else if(i.isURLSearchParams(e))o=e.toString();else{var s=[];i.forEach(e,function(t,e){null!==t&&"undefined"!=typeof t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),s.push(n(e)+"="+n(t))}))}),o=s.join("&")}if(o){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}},335:function(t,e,r){"use strict";function n(){this.handlers=[]}var i=r(330);n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=n},336:function(t,e,r){"use strict";function n(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var i=r(330),o=r(337),s=r(338),a=r(339),u=r(349),f=r(350);t.exports=function(t){n(t),t.baseURL&&!u(t.url)&&(t.url=f(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]});var e=t.adapter||a.adapter;return e(t).then(function(e){return n(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return s(e)||(n(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},337:function(t,e,r){"use strict";var n=r(330);t.exports=function(t,e,r){return n.forEach(r,function(r){t=r(t,e)}),t}},338:function(t,e){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},339:function(t,e,r){(function(e){"use strict";function n(t,e){!o.isUndefined(t)&&o.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function i(){var t;return"undefined"!=typeof e&&"[object process]"===Object.prototype.toString.call(e)?t=r(342):"undefined"!=typeof XMLHttpRequest&&(t=r(342)),t}var o=r(330),s=r(341),a={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:i(),transformRequest:[function(t,e){return s(e,"Accept"),s(e,"Content-Type"),o.isFormData(t)||o.isArrayBuffer(t)||o.isBuffer(t)||o.isStream(t)||o.isFile(t)||o.isBlob(t)?t:o.isArrayBufferView(t)?t.buffer:o.isURLSearchParams(t)?(n(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):o.isObject(t)?(n(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(t){u.headers[t]={}}),o.forEach(["post","put","patch"],function(t){u.headers[t]=o.merge(a)}),t.exports=u}).call(e,r(340))},340:function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){y&&p&&(y=!1,p.length?d=p.concat(d):g=-1,d.length&&a())}function a(){if(!y){var t=i(s);y=!0;for(var e=d.length;e;){for(p=d,d=[];++g<e;)p&&p[g].run();g=-1,e=d.length}p=null,y=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function f(){}var c,h,l=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(t){h=n}}();var p,d=[],y=!1,g=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new u(t,e)),1!==d.length||y||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=f,l.addListener=f,l.once=f,l.off=f,l.removeListener=f,l.removeAllListeners=f,l.emit=f,l.prependListener=f,l.prependOnceListener=f,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},341:function(t,e,r){"use strict";var n=r(330);t.exports=function(t,e){n.forEach(t,function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])})}},342:function(t,e,r){"use strict";var n=r(330),i=r(343),o=r(334),s=r(346),a=r(347),u=r(344);t.exports=function(t){return new Promise(function(e,f){var c=t.data,h=t.headers;n.isFormData(c)&&delete h["Content-Type"];var l=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",d=t.auth.password||"";h.Authorization="Basic "+btoa(p+":"+d)}if(l.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),l.timeout=t.timeout,l.onreadystatechange=function(){if(l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in l?s(l.getAllResponseHeaders()):null,n=t.responseType&&"text"!==t.responseType?l.response:l.responseText,o={data:n,status:l.status,statusText:l.statusText,headers:r,config:t,request:l};i(e,f,o),l=null}},l.onabort=function(){l&&(f(u("Request aborted",t,"ECONNABORTED",l)),l=null)},l.onerror=function(){f(u("Network Error",t,null,l)),l=null},l.ontimeout=function(){f(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",l)),l=null},n.isStandardBrowserEnv()){var y=r(348),g=(t.withCredentials||a(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;g&&(h[t.xsrfHeaderName]=g)}if("setRequestHeader"in l&&n.forEach(h,function(t,e){"undefined"==typeof c&&"content-type"===e.toLowerCase()?delete h[e]:l.setRequestHeader(e,t)}),t.withCredentials&&(l.withCredentials=!0),t.responseType)try{l.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&l.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){l&&(l.abort(),f(t),l=null)}),void 0===c&&(c=null),l.send(c)})}},343:function(t,e,r){"use strict";var n=r(344);t.exports=function(t,e,r){var i=r.config.validateStatus;!i||i(r.status)?t(r):e(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},344:function(t,e,r){"use strict";var n=r(345);t.exports=function(t,e,r,i,o){var s=new Error(t);return n(s,e,r,i,o)}},345:function(t,e){"use strict";t.exports=function(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},346:function(t,e,r){"use strict";var n=r(330),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,o,s={};return t?(n.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=n.trim(t.substr(0,o)).toLowerCase(),r=n.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;"set-cookie"===e?s[e]=(s[e]?s[e]:[]).concat([r]):s[e]=s[e]?s[e]+", "+r:r}}),s):s}},347:function(t,e,r){"use strict";var n=r(330);t.exports=n.isStandardBrowserEnv()?function(){function t(t){var e=t;return r&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var e,r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return e=t(window.location.href),function(r){var i=n.isString(r)?t(r):r;return i.protocol===e.protocol&&i.host===e.host}}():function(){return function(){return!0}}()},348:function(t,e,r){"use strict";var n=r(330);t.exports=n.isStandardBrowserEnv()?function(){return{write:function(t,e,r,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(o)&&a.push("domain="+o),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},349:function(t,e){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},350:function(t,e){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},351:function(t,e,r){"use strict";var n=r(330);t.exports=function(t,e){e=e||{};var r={};return n.forEach(["url","method","params","data"],function(t){"undefined"!=typeof e[t]&&(r[t]=e[t])}),n.forEach(["headers","auth","proxy"],function(i){n.isObject(e[i])?r[i]=n.deepMerge(t[i],e[i]):"undefined"!=typeof e[i]?r[i]=e[i]:n.isObject(t[i])?r[i]=n.deepMerge(t[i]):"undefined"!=typeof t[i]&&(r[i]=t[i])}),n.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(n){"undefined"!=typeof e[n]?r[n]=e[n]:"undefined"!=typeof t[n]&&(r[n]=t[n])}),r}},352:function(t,e){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},353:function(t,e,r){"use strict";function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var r=this;t(function(t){r.reason||(r.reason=new i(t),e(r.reason))})}var i=r(352);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t,e=new n(function(e){t=e});return{token:e,cancel:t}},t.exports=n},354:function(t,e){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},355:function(t,e,r){"use strict";e.encode=r(356),e.decode=r(357)},356:function(t,e){"use strict";function r(t,e){m={},x=[],b=0,F=0,S=1,n(t),S=Math.min(S,M);for(var r=Math.ceil(Math.log(S)/Math.LN10),i=0;i<x.length;i++)e.writeStringField(1,x[i]);return 2!==F&&e.writeVarintField(2,F),6!==r&&e.writeVarintField(3,r),"FeatureCollection"===t.type?e.writeMessage(4,u,t):"Feature"===t.type?e.writeMessage(5,f,t):e.writeMessage(6,c,t),m=null,e.finish()}function n(t){var e,r;if("FeatureCollection"===t.type)for(e=0;e<t.features.length;e++)n(t.features[e]);else if("Feature"===t.type){null!==t.geometry&&n(t.geometry);for(r in t.properties)a(r)}else if("Point"===t.type)s(t.coordinates);else if("MultiPoint"===t.type)o(t.coordinates);else if("GeometryCollection"===t.type)for(e=0;e<t.geometries.length;e++)n(t.geometries[e]);else if("LineString"===t.type)o(t.coordinates);else if("Polygon"===t.type||"MultiLineString"===t.type)i(t.coordinates);else if("MultiPolygon"===t.type)for(e=0;e<t.coordinates.length;e++)i(t.coordinates[e]);for(r in t)w(r,t.type)||a(r)}function i(t){for(var e=0;e<t.length;e++)o(t[e])}function o(t){for(var e=0;e<t.length;e++)s(t[e])}function s(t){F=Math.max(F,t.length);for(var e=0;e<t.length;e++)for(;Math.round(t[e]*S)/S!==t[e]&&S<M;)S*=10}function a(t){void 0===m[t]&&(x.push(t),m[t]=b++)}function u(t,e){for(var r=0;r<t.features.length;r++)e.writeMessage(1,f,t.features[r]);h(t,e,!0)}function f(t,e){null!==t.geometry&&e.writeMessage(1,c,t.geometry),void 0!==t.id&&("number"==typeof t.id&&t.id%1===0?e.writeSVarintField(12,t.id):e.writeStringField(11,t.id)),t.properties&&h(t.properties,e),h(t,e,!0)}function c(t,e){e.writeVarintField(1,k[t.type]);var r=t.coordinates;if("Point"===t.type)p(r,e);else if("MultiPoint"===t.type)d(r,e,!0);else if("LineString"===t.type)d(r,e);else if("MultiLineString"===t.type)y(r,e);else if("Polygon"===t.type)y(r,e,!0);else if("MultiPolygon"===t.type)g(r,e);else if("GeometryCollection"===t.type)for(var n=0;n<t.geometries.length;n++)e.writeMessage(4,c,t.geometries[n]);h(t,e,!0)}function h(t,e,r){var n=[],i=0;for(var o in t)r&&w(o,t.type)||(e.writeMessage(13,l,t[o]),n.push(m[o]),n.push(i++));e.writePackedVarint(r?15:14,n)}function l(t,e){if(null!==t){var r=typeof t;"string"===r?e.writeStringField(1,t):"boolean"===r?e.writeBooleanField(5,t):"object"===r?e.writeStringField(6,JSON.stringify(t)):"number"===r&&(t%1!==0?e.writeDoubleField(2,t):t>=0?e.writeVarintField(3,t):e.writeVarintField(4,-t))}}function p(t,e){for(var r=[],n=0;n<F;n++)r.push(Math.round(t[n]*S));e.writePackedSVarint(3,r)}function d(t,e){var r=[];v(r,t),e.writePackedSVarint(3,r)}function y(t,e,r){var n,i=t.length;if(1!==i){var o=[];for(n=0;n<i;n++)o.push(t[n].length-(r?1:0));e.writePackedVarint(2,o)}var s=[];for(n=0;n<i;n++)v(s,t[n],r);e.writePackedSVarint(3,s)}function g(t,e){var r,n,i=t.length;if(1!==i||1!==t[0].length){var o=[i];for(r=0;r<i;r++)for(o.push(t[r].length),n=0;n<t[r].length;n++)o.push(t[r][n].length-1);e.writePackedVarint(2,o)}var s=[];for(r=0;r<i;r++)for(n=0;n<t[r].length;n++)v(s,t[r][n],!0);e.writePackedSVarint(3,s)}function v(t,e,r){var n,i,o=e.length-(r?1:0),s=new Array(F);for(i=0;i<F;i++)s[i]=0;for(n=0;n<o;n++)for(i=0;i<F;i++){var a=Math.round(e[n][i]*S)-s[i];t.push(a),s[i]+=a}}function w(t,e){if("type"===t)return!0;if("FeatureCollection"===e){if("features"===t)return!0}else if("Feature"===e){if("id"===t||"properties"===t||"geometry"===t)return!0}else if("GeometryCollection"===e){if("geometries"===t)return!0}else if("coordinates"===t)return!0;return!1}t.exports=r;var m,b,x,F,S,M=1e6,k={Point:0,MultiPoint:1,LineString:2,MultiLineString:3,Polygon:4,MultiPolygon:5,GeometryCollection:6}},357:function(t,e){"use strict";function r(t){x=2,F=Math.pow(10,6),b=null,w=[],m=[];var e=t.readFields(n,{});return w=null,e}function n(t,e,r){1===t?w.push(r.readString()):2===t?x=r.readVarint():3===t?F=Math.pow(10,r.readVarint()):4===t?i(r,e):5===t?o(r,e):6===t&&s(r,e)}function i(t,e){return e.type="FeatureCollection",e.features=[],t.readMessage(a,e)}function o(t,e){e.type="Feature";var r=t.readMessage(u,e);return r.hasOwnProperty("geometry")||(r.geometry=null),r}function s(t,e){return t.readMessage(f,e)}function a(t,e,r){1===t?e.features.push(o(r,{})):13===t?m.push(h(r)):15===t&&l(r,e)}function u(t,e,r){1===t?e.geometry=s(r,{}):11===t?e.id=r.readString():12===t?e.id=r.readSVarint():13===t?m.push(h(r)):14===t?e.properties=l(r,{}):15===t&&l(r,e)}function f(t,e,r){1===t?e.type=S[r.readVarint()]:2===t?b=r.readPackedVarint():3===t?c(e,r,e.type):4===t?(e.geometries=e.geometries||[],e.geometries.push(s(r,{}))):13===t?m.push(h(r)):15===t&&l(r,e)}function c(t,e,r){"Point"===r?t.coordinates=p(e):"MultiPoint"===r?t.coordinates=y(e,!0):"LineString"===r?t.coordinates=y(e):"MultiLineString"===r?t.coordinates=g(e):"Polygon"===r?t.coordinates=g(e,!0):"MultiPolygon"===r&&(t.coordinates=v(e))}function h(t){for(var e=t.readVarint()+t.pos,r=null;t.pos<e;){var n=t.readVarint(),i=n>>3;1===i?r=t.readString():2===i?r=t.readDouble():3===i?r=t.readVarint():4===i?r=-t.readVarint():5===i?r=t.readBoolean():6===i&&(r=JSON.parse(t.readString()))}return r}function l(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;)e[w[t.readVarint()]]=m[t.readVarint()];return m=[],e}function p(t){for(var e=t.readVarint()+t.pos,r=[];t.pos<e;)r.push(t.readSVarint()/F);return r}function d(t,e,r,n){var i,o,s=0,a=[],u=[];for(o=0;o<x;o++)u[o]=0;for(;r?s<r:t.pos<e;){for(i=[],o=0;o<x;o++)u[o]+=t.readSVarint(),i[o]=u[o]/F;a.push(i),s++}return n&&a.push(a[0]),a}function y(t){return d(t,t.readVarint()+t.pos)}function g(t,e){var r=t.readVarint()+t.pos;if(!b)return[d(t,r,null,e)];for(var n=[],i=0;i<b.length;i++)n.push(d(t,r,b[i],e));return b=null,n}function v(t){var e=t.readVarint()+t.pos;if(!b)return[[d(t,e,null,!0)]];for(var r=[],n=1,i=0;i<b[0];i++){for(var o=[],s=0;s<b[n];s++)o.push(d(t,e,b[n+1+s],!0));n+=b[n]+1,r.push(o)}return b=null,r}t.exports=r;var w,m,b,x,F,S=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection"]},358:function(t,e,r){"use strict";function n(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function i(t,e,r){var n,i,o=r.buf;if(i=o[r.pos++],n=(112&i)>>4,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<3,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<10,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<17,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<24,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(1&i)<<31,i<128)return s(t,n,e);throw new Error("Expected varint not more than 10 bytes")}function o(t){return t.type===n.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function a(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(r=~(-t%4294967296),n=~(-t/4294967296),4294967295^r?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),u(r,n,e),f(n,e)}function u(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}function f(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function c(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function h(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function l(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function g(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function v(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function w(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function m(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function x(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function F(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function S(t,e,r){for(var n="",i=e;i<r;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a>r)break;var u,f,c;1===a?o<128&&(s=o):2===a?(u=t[i+1],128===(192&u)&&(s=(31&o)<<6|63&u,s<=127&&(s=null))):3===a?(u=t[i+1],f=t[i+2],128===(192&u)&&128===(192&f)&&(s=(15&o)<<12|(63&u)<<6|63&f,(s<=2047||s>=55296&&s<=57343)&&(s=null))):4===a&&(u=t[i+1],f=t[i+2],c=t[i+3],128===(192&u)&&128===(192&f)&&128===(192&c)&&(s=(15&o)<<18|(63&u)<<12|(63&f)<<6|63&c,(s<=65535||s>=1114112)&&(s=null))),null===s?(s=65533,a=1):s>65535&&(s-=65536,n+=String.fromCharCode(s>>>10&1023|55296),s=56320|1023&s),n+=String.fromCharCode(s),i+=a}return n}function M(t,e,r){for(var n,i,o=0;o<e.length;o++){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}t.exports=n;var k=r(359);n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var V=4294967296,P=1/V;n.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=F(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+b(this.buf,this.pos+4)*V;return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+F(this.buf,this.pos+4)*V;return this.pos+=8,t},readFloat:function(){var t=k.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=k.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return r=n[this.pos++],e=127&r,r<128?e:(r=n[this.pos++],e|=(127&r)<<7,r<128?e:(r=n[this.pos++],e|=(127&r)<<14,r<128?e:(r=n[this.pos++],e|=(127&r)<<21,r<128?e:(r=n[this.pos],e|=(15&r)<<28,i(e,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=S(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==n.Bytes)return t.push(this.readVarint(e));var r=o(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==n.Bytes)return t.push(this.readSVarint());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==n.Bytes)return t.push(this.readBoolean());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==n.Bytes)return t.push(this.readFloat());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){
if(this.type!==n.Bytes)return t.push(this.readDouble());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==n.Bytes)return t.push(this.readFixed32());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==n.Bytes)return t.push(this.readSFixed32());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==n.Bytes)return t.push(this.readFixed64());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==n.Bytes)return t.push(this.readSFixed64());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===n.Varint)for(;this.buf[this.pos++]>127;);else if(e===n.Bytes)this.pos=this.readVarint()+this.pos;else if(e===n.Fixed32)this.pos+=4;else{if(e!==n.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),x(this.buf,t&-1,this.pos),x(this.buf,Math.floor(t*P),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),x(this.buf,t&-1,this.pos),x(this.buf,Math.floor(t*P),this.pos+4),this.pos+=8},writeVarint:function(t){return t=+t||0,t>268435455||t<0?void a(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),void(t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=M(this.buf,t,this.pos);var r=this.pos-e;r>=128&&c(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),k.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),k.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&c(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,n.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,w,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,m,e)},writeBytesField:function(t,e){this.writeTag(t,n.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,n.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,n.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,n.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},359:function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,f=u>>1,c=-7,h=r?i-1:0,l=r?-1:1,p=t[e+h];for(h+=l,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+h],h+=l,c-=8);if(0===o)o=1-f;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,n),o-=f}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,f=8*o-i-1,c=(1<<f)-1,h=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?l/u:l*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[r+p]=255&s,p+=d,s/=256,f-=8);t[r+p-d]|=128*y}},360:function(t,e,r){t.exports.VectorTile=r(361),t.exports.VectorTileFeature=r(363),t.exports.VectorTileLayer=r(362)},361:function(t,e,r){"use strict";function n(t,e){this.layers=t.readFields(i,{},e)}function i(t,e,r){if(3===t){var n=new o(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}var o=r(362);t.exports=n},362:function(t,e,r){"use strict";function n(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,e),this.length=this._features.length}function i(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(o(r))}function o(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}var s=r(363);t.exports=n,n.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new s(this._pbf,e,this.extent,this._keys,this._values)}},363:function(t,e,r){"use strict";function n(t,e,r,n,o){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=o,t.readFields(i,this,e)}function i(t,e,r){1==t?e.id=r.readVarint():2==t?o(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function o(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}function s(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],o=0;o<e;o++){var s=a(t[o]);0!==s&&(void 0===n&&(n=s<0),n===s<0?(r&&i.push(r),r=[t[o]]):r.push(t[o]))}return r&&i.push(r),i}function a(t){for(var e,r,n=0,i=0,o=t.length,s=o-1;i<o;s=i++)e=t[i],r=t[s],n+=(r.x-e.x)*(e.y+r.y);return n}var u=r(364);t.exports=n,n.types=["Unknown","Point","LineString","Polygon"],n.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,i=0,o=0,s=0,a=[];t.pos<r;){if(i<=0){var f=t.readVarint();n=7&f,i=f>>3}if(i--,1===n||2===n)o+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&a.push(e),e=[]),e.push(new u(o,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&a.push(e),a},n.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,o=0,s=1/0,a=-(1/0),u=1/0,f=-(1/0);t.pos<e;){if(n<=0){var c=t.readVarint();r=7&c,n=c>>3}if(n--,1===r||2===r)i+=t.readSVarint(),o+=t.readSVarint(),i<s&&(s=i),i>a&&(a=i),o<u&&(u=o),o>f&&(f=o);else if(7!==r)throw new Error("unknown command "+r)}return[s,u,a,f]},n.prototype.toGeoJSON=function(t,e,r){function i(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+c)/u;t[e]=[360*(r.x+f)/u-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}var o,a,u=this.extent*Math.pow(2,r),f=this.extent*t,c=this.extent*e,h=this.loadGeometry(),l=n.types[this.type];switch(this.type){case 1:var p=[];for(o=0;o<h.length;o++)p[o]=h[o][0];h=p,i(h);break;case 2:for(o=0;o<h.length;o++)i(h[o]);break;case 3:for(h=s(h),o=0;o<h.length;o++)for(a=0;a<h[o].length;a++)i(h[o][a])}1===h.length?h=h[0]:l="Multi"+l;var d={type:"Feature",geometry:{type:l,coordinates:h},properties:this.properties};return"id"in this&&(d.id=this.id),d}},364:function(t,e){"use strict";function r(t,e){this.x=t,this.y=e}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.x+r*(this.x-e.x)-n*(this.y-e.y),o=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbG9hZC5qcyIsIndlYnBhY2s6Ly8vLi9tYXAvcGJmL2xvYWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbWFwL3BiZi9sb2FkL0FwcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2F4aW9zLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL3V0aWxzLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2hlbHBlcnMvYmluZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2lzLWJ1ZmZlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9jb3JlL0F4aW9zLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS9JbnRlcmNlcHRvck1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS9kaXNwYXRjaFJlcXVlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS90cmFuc2Zvcm1EYXRhLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NhbmNlbC9pc0NhbmNlbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9kZWZhdWx0cy5qcyIsIndlYnBhY2s6Ly8vLi9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvY3JlYXRlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS9lbmhhbmNlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9wYXJzZUhlYWRlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9pc1VSTFNhbWVPcmlnaW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2NvbWJpbmVVUkxzLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvbWVyZ2VDb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY2FuY2VsL0NhbmNlbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9zcHJlYWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9nZW9idWYvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9nZW9idWYvZW5jb2RlLmpzIiwid2VicGFjazovLy8uL34vZ2VvYnVmL2RlY29kZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3BiZi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2llZWU3NTQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9AbWFwYm94L3ZlY3Rvci10aWxlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vQG1hcGJveC92ZWN0b3ItdGlsZS9saWIvdmVjdG9ydGlsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L0BtYXBib3gvdmVjdG9yLXRpbGUvbGliL3ZlY3RvcnRpbGVsYXllci5qcyIsIndlYnBhY2s6Ly8vLi9+L0BtYXBib3gvdmVjdG9yLXRpbGUvbGliL3ZlY3RvcnRpbGVmZWF0dXJlLmpzIiwid2VicGFjazovLy8uL34vQG1hcGJveC9wb2ludC1nZW9tZXRyeS9pbmRleC5qcyJdLCJuYW1lcyI6WyJ3ZWJwYWNrSnNvbnAiLCIwIiwibW9kdWxlIiwiZXhwb3J0cyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIl9BcHAiLCJfQXBwMiIsIl9LZXlDb2RlIiwiX0tleUNvZGUyIiwid2luZG93Iiwib25sb2FkIiwiTWFpbiIsInRoaXMiLCJpbml0IiwiYWRkRXZlbnQiLCJvbnJlc2l6ZSIsInZhbHVlIiwiYXBwIiwiQXBwIiwiYmluZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbmtleXVwIiwib25rZXlkb3duIiwicmVzaXplIiwidGhlQXJnIiwiZnVuYyIsImludGVydmFsRnVuYyIsImFwcGx5IiwicGFyYW1zIiwiY2xlYXJUaW1lb3V0Iiwia2V5SW50ZXJ2YWxJZCIsInNldFRpbWVvdXQiLCJfbGVuIiwiYXJndW1lbnRzIiwiQXJyYXkiLCJfa2V5IiwiZXZlbnQiLCJrZXlDb2RlIiwiS2V5Q29kZSIsIlVQIiwiZ2V0SW50ZXJ2YWxGdW5jdGlvbiIsIm1vdmVDYW1lcmEiLCJET1dOIiwiTEVGVCIsIlJJR0hUIiwiUEFHRV9VUCIsIlBBR0VfRE9XTiIsIk5VTUJFUl80Iiwicm90YXRlV29ybGQiLCJOVU1CRVJfNiIsIk5VTUJFUl84IiwiTlVNQkVSXzIiLCJOVU1CRVJfNyIsIk5VTUJFUl8xIiwiTlVNQkVSXzkiLCJOVU1CRVJfMyIsIk5VTVBBRF9BREQiLCJ6b29tSW4iLCJOVU1QQURfU1VCVFJBQ1QiLCJ6b29tT3V0IiwiTlVNUEFEX0VOVEVSIiwiTlVNQkVSXzAiLCJyZXNldCIsIlciLCJTIiwiQSIsIkQiLCJFU0NBUEUiLCJjb25zb2xlIiwiY2xlYXIiLCJTUEFDRSIsImd1aSIsImNsb3NlZCIsIm9wZW4iLCJjbG9zZSIsImNsZWFySW50ZXJGdW5jdGlvbiIsIkJBQ0tTUEFDRSIsIjMyNyIsIl9leHRlbmRzIiwiYXNzaWduIiwic291cmNlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiX2F4aW9zIiwiX2F4aW9zMiIsIl9nZW9idWYiLCJfcGJmIiwiX3BiZjIiLCJfdmVjdG9yVGlsZSIsInh5eiIsIngiLCJ5IiwieiIsInBvaV93ZWIiLCJsb2FkVmVjdG9yIiwiX3RoaXMiLCJsb2FkIiwidXJsIiwicmVzcG9uc2VUeXBlIiwidGhlbiIsImJ1ZmZlciIsInRpbGUiLCJWZWN0b3JUaWxlIiwiUHJvdG9CdWYiLCJsb2ciLCJjb2xsZWN0aW9uIiwiZ2V0RmVhdHVyZXMiLCJmZWF0dXJlcyIsIl9yZWYiLCJfcmVmJHJlc3BvbnNlVHlwZSIsInVuZGVmaW5lZCIsImZldGNoRGF0YSIsIl9yZWYyIiwiZGF0YSIsInR5cGUiLCJsYXllcnMiLCJrZXlzIiwiaXNBcnJheSIsImZvckVhY2giLCJsYXllcklEIiwibGF5ZXIiLCJsZW4iLCJmZWF0dXJlIiwidG9HZW9KU09OIiwicHVzaCIsIjMyOCIsIjMyOSIsImNyZWF0ZUluc3RhbmNlIiwiZGVmYXVsdENvbmZpZyIsImNvbnRleHQiLCJBeGlvcyIsInJlcXVlc3QiLCJ1dGlscyIsImV4dGVuZCIsIm1lcmdlQ29uZmlnIiwiZGVmYXVsdHMiLCJheGlvcyIsImNyZWF0ZSIsImluc3RhbmNlQ29uZmlnIiwiQ2FuY2VsIiwiQ2FuY2VsVG9rZW4iLCJpc0NhbmNlbCIsImFsbCIsInByb21pc2VzIiwiUHJvbWlzZSIsInNwcmVhZCIsIjMzMCIsInZhbCIsInRvU3RyaW5nIiwiaXNBcnJheUJ1ZmZlciIsImlzRm9ybURhdGEiLCJGb3JtRGF0YSIsImlzQXJyYXlCdWZmZXJWaWV3IiwicmVzdWx0IiwiQXJyYXlCdWZmZXIiLCJpc1ZpZXciLCJpc1N0cmluZyIsImlzTnVtYmVyIiwiaXNVbmRlZmluZWQiLCJpc09iamVjdCIsImlzRGF0ZSIsImlzRmlsZSIsImlzQmxvYiIsImlzRnVuY3Rpb24iLCJpc1N0cmVhbSIsInBpcGUiLCJpc1VSTFNlYXJjaFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsInRyaW0iLCJzdHIiLCJyZXBsYWNlIiwiaXNTdGFuZGFyZEJyb3dzZXJFbnYiLCJuYXZpZ2F0b3IiLCJwcm9kdWN0IiwiZG9jdW1lbnQiLCJmbiIsImwiLCJtZXJnZSIsImFzc2lnblZhbHVlIiwiZGVlcE1lcmdlIiwiYSIsImIiLCJ0aGlzQXJnIiwiaXNCdWZmZXIiLCIzMzEiLCJhcmdzIiwiMzMyIiwiY29uc3RydWN0b3IiLCJpc1Nsb3dCdWZmZXIiLCJyZWFkRmxvYXRMRSIsInNsaWNlIiwiX2lzQnVmZmVyIiwiMzMzIiwiaW50ZXJjZXB0b3JzIiwiSW50ZXJjZXB0b3JNYW5hZ2VyIiwicmVzcG9uc2UiLCJidWlsZFVSTCIsImRpc3BhdGNoUmVxdWVzdCIsImNvbmZpZyIsIm1ldGhvZCIsInRvTG93ZXJDYXNlIiwiY2hhaW4iLCJwcm9taXNlIiwicmVzb2x2ZSIsImludGVyY2VwdG9yIiwidW5zaGlmdCIsImZ1bGZpbGxlZCIsInJlamVjdGVkIiwic2hpZnQiLCJnZXRVcmkiLCJwYXJhbXNTZXJpYWxpemVyIiwiMzM0IiwiZW5jb2RlIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic2VyaWFsaXplZFBhcmFtcyIsInBhcnRzIiwidiIsInRvSVNPU3RyaW5nIiwiSlNPTiIsInN0cmluZ2lmeSIsImpvaW4iLCJoYXNobWFya0luZGV4IiwiaW5kZXhPZiIsIjMzNSIsImhhbmRsZXJzIiwidXNlIiwiZWplY3QiLCJpZCIsImgiLCIzMzYiLCJ0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkIiwiY2FuY2VsVG9rZW4iLCJ0aHJvd0lmUmVxdWVzdGVkIiwidHJhbnNmb3JtRGF0YSIsImlzQWJzb2x1dGVVUkwiLCJjb21iaW5lVVJMcyIsImJhc2VVUkwiLCJoZWFkZXJzIiwidHJhbnNmb3JtUmVxdWVzdCIsImNvbW1vbiIsImFkYXB0ZXIiLCJ0cmFuc2Zvcm1SZXNwb25zZSIsInJlYXNvbiIsInJlamVjdCIsIjMzNyIsImZucyIsIjMzOCIsIl9fQ0FOQ0VMX18iLCIzMzkiLCJwcm9jZXNzIiwic2V0Q29udGVudFR5cGVJZlVuc2V0IiwiZ2V0RGVmYXVsdEFkYXB0ZXIiLCJYTUxIdHRwUmVxdWVzdCIsIm5vcm1hbGl6ZUhlYWRlck5hbWUiLCJERUZBVUxUX0NPTlRFTlRfVFlQRSIsIkNvbnRlbnQtVHlwZSIsInBhcnNlIiwiZSIsInRpbWVvdXQiLCJ4c3JmQ29va2llTmFtZSIsInhzcmZIZWFkZXJOYW1lIiwibWF4Q29udGVudExlbmd0aCIsInZhbGlkYXRlU3RhdHVzIiwic3RhdHVzIiwiQWNjZXB0IiwiMzQwIiwiZGVmYXVsdFNldFRpbW91dCIsIkVycm9yIiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjYWNoZWRTZXRUaW1lb3V0IiwicnVuQ2xlYXJUaW1lb3V0IiwibWFya2VyIiwiY2FjaGVkQ2xlYXJUaW1lb3V0IiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsImNvbmNhdCIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwicnVuIiwiSXRlbSIsImFycmF5Iiwibm9vcCIsIm5leHRUaWNrIiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImxpc3RlbmVycyIsIm5hbWUiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsIjM0MSIsIm5vcm1hbGl6ZWROYW1lIiwidG9VcHBlckNhc2UiLCIzNDIiLCJzZXR0bGUiLCJwYXJzZUhlYWRlcnMiLCJpc1VSTFNhbWVPcmlnaW4iLCJjcmVhdGVFcnJvciIsInJlcXVlc3REYXRhIiwicmVxdWVzdEhlYWRlcnMiLCJhdXRoIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsIkF1dGhvcml6YXRpb24iLCJidG9hIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInJlc3BvbnNlVVJMIiwicmVzcG9uc2VIZWFkZXJzIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwicmVzcG9uc2VEYXRhIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzVGV4dCIsIm9uYWJvcnQiLCJvbmVycm9yIiwib250aW1lb3V0IiwiY29va2llcyIsInhzcmZWYWx1ZSIsIndpdGhDcmVkZW50aWFscyIsInJlYWQiLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25Eb3dubG9hZFByb2dyZXNzIiwib25VcGxvYWRQcm9ncmVzcyIsInVwbG9hZCIsImNhbmNlbCIsImFib3J0Iiwic2VuZCIsIjM0MyIsIjM0NCIsImVuaGFuY2VFcnJvciIsIm1lc3NhZ2UiLCJjb2RlIiwiZXJyb3IiLCIzNDUiLCJpc0F4aW9zRXJyb3IiLCJ0b0pTT04iLCJkZXNjcmlwdGlvbiIsIm51bWJlciIsImZpbGVOYW1lIiwibGluZU51bWJlciIsImNvbHVtbk51bWJlciIsInN0YWNrIiwiMzQ2IiwiaWdub3JlRHVwbGljYXRlT2YiLCJwYXJzZWQiLCJzcGxpdCIsImxpbmUiLCJzdWJzdHIiLCIzNDciLCJyZXNvbHZlVVJMIiwiaHJlZiIsIm1zaWUiLCJ1cmxQYXJzaW5nTm9kZSIsInNldEF0dHJpYnV0ZSIsInByb3RvY29sIiwiaG9zdCIsInNlYXJjaCIsImhhc2giLCJob3N0bmFtZSIsInBvcnQiLCJwYXRobmFtZSIsImNoYXJBdCIsIm9yaWdpblVSTCIsInRlc3QiLCJ1c2VyQWdlbnQiLCJjcmVhdGVFbGVtZW50IiwibG9jYXRpb24iLCJyZXF1ZXN0VVJMIiwiMzQ4Iiwid3JpdGUiLCJleHBpcmVzIiwicGF0aCIsImRvbWFpbiIsInNlY3VyZSIsImNvb2tpZSIsIkRhdGUiLCJ0b0dNVFN0cmluZyIsIm1hdGNoIiwiUmVnRXhwIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicmVtb3ZlIiwibm93IiwiMzQ5IiwiMzUwIiwicmVsYXRpdmVVUkwiLCIzNTEiLCJjb25maWcxIiwiY29uZmlnMiIsInByb3AiLCIzNTIiLCIzNTMiLCJleGVjdXRvciIsInJlc29sdmVQcm9taXNlIiwidG9rZW4iLCJjIiwiMzU0IiwiY2FsbGJhY2siLCJhcnIiLCIzNTUiLCJkZWNvZGUiLCIzNTYiLCJwYmYiLCJrZXlzQXJyIiwia2V5c051bSIsImRpbSIsImFuYWx5emUiLCJNYXRoIiwibWluIiwibWF4UHJlY2lzaW9uIiwicHJlY2lzaW9uIiwiY2VpbCIsIkxOMTAiLCJ3cml0ZVN0cmluZ0ZpZWxkIiwid3JpdGVWYXJpbnRGaWVsZCIsIndyaXRlTWVzc2FnZSIsIndyaXRlRmVhdHVyZUNvbGxlY3Rpb24iLCJ3cml0ZUZlYXR1cmUiLCJ3cml0ZUdlb21ldHJ5IiwiZmluaXNoIiwiZ2VvbWV0cnkiLCJwcm9wZXJ0aWVzIiwic2F2ZUtleSIsImFuYWx5emVQb2ludCIsImNvb3JkaW5hdGVzIiwiYW5hbHl6ZVBvaW50cyIsImdlb21ldHJpZXMiLCJhbmFseXplTXVsdGlMaW5lIiwiaXNTcGVjaWFsS2V5IiwiY29vcmRzIiwicG9pbnQiLCJtYXgiLCJyb3VuZCIsIndyaXRlUHJvcHMiLCJ3cml0ZVNWYXJpbnRGaWVsZCIsImdlb20iLCJnZW9tZXRyeVR5cGVzIiwid3JpdGVQb2ludCIsIndyaXRlTGluZSIsIndyaXRlTXVsdGlMaW5lIiwid3JpdGVNdWx0aVBvbHlnb24iLCJpc0N1c3RvbSIsImluZGV4ZXMiLCJ2YWx1ZUluZGV4Iiwid3JpdGVWYWx1ZSIsIndyaXRlUGFja2VkVmFyaW50Iiwid3JpdGVCb29sZWFuRmllbGQiLCJ3cml0ZURvdWJsZUZpZWxkIiwid3JpdGVQYWNrZWRTVmFyaW50IiwicG9wdWxhdGVMaW5lIiwibGluZXMiLCJsZW5ndGhzIiwicG9seWdvbnMiLCJqIiwic3VtIiwibiIsIlBvaW50IiwiTXVsdGlQb2ludCIsIkxpbmVTdHJpbmciLCJNdWx0aUxpbmVTdHJpbmciLCJQb2x5Z29uIiwiTXVsdGlQb2x5Z29uIiwiR2VvbWV0cnlDb2xsZWN0aW9uIiwiMzU3IiwicG93IiwidmFsdWVzIiwicmVhZEZpZWxkcyIsInJlYWREYXRhRmllbGQiLCJ0YWciLCJyZWFkU3RyaW5nIiwicmVhZFZhcmludCIsInJlYWRGZWF0dXJlQ29sbGVjdGlvbiIsInJlYWRGZWF0dXJlIiwicmVhZEdlb21ldHJ5IiwicmVhZE1lc3NhZ2UiLCJyZWFkRmVhdHVyZUNvbGxlY3Rpb25GaWVsZCIsImYiLCJyZWFkRmVhdHVyZUZpZWxkIiwicmVhZEdlb21ldHJ5RmllbGQiLCJyZWFkVmFsdWUiLCJyZWFkUHJvcHMiLCJyZWFkU1ZhcmludCIsInJlYWRQYWNrZWRWYXJpbnQiLCJyZWFkQ29vcmRzIiwicmVhZFBvaW50IiwicmVhZExpbmUiLCJyZWFkTXVsdGlMaW5lIiwicmVhZE11bHRpUG9seWdvbiIsImVuZCIsInBvcyIsInJlYWREb3VibGUiLCJyZWFkQm9vbGVhbiIsInJlYWRMaW5lUGFydCIsInAiLCJkIiwicHJldlAiLCJyaW5ncyIsImsiLCIzNTgiLCJQYmYiLCJidWYiLCJVaW50OEFycmF5IiwicmVhZFZhcmludFJlbWFpbmRlciIsInMiLCJ0b051bSIsInJlYWRQYWNrZWRFbmQiLCJCeXRlcyIsImxvdyIsImhpZ2giLCJpc1NpZ25lZCIsIndyaXRlQmlnVmFyaW50IiwicmVhbGxvYyIsIndyaXRlQmlnVmFyaW50TG93Iiwid3JpdGVCaWdWYXJpbnRIaWdoIiwibHNiIiwibWFrZVJvb21Gb3JFeHRyYUxlbmd0aCIsInN0YXJ0UG9zIiwiZXh0cmFMZW4iLCJmbG9vciIsIkxOMiIsIndyaXRlVmFyaW50Iiwid3JpdGVTVmFyaW50Iiwid3JpdGVQYWNrZWRGbG9hdCIsIndyaXRlRmxvYXQiLCJ3cml0ZVBhY2tlZERvdWJsZSIsIndyaXRlRG91YmxlIiwid3JpdGVQYWNrZWRCb29sZWFuIiwid3JpdGVCb29sZWFuIiwid3JpdGVQYWNrZWRGaXhlZDMyIiwid3JpdGVGaXhlZDMyIiwid3JpdGVQYWNrZWRTRml4ZWQzMiIsIndyaXRlU0ZpeGVkMzIiLCJ3cml0ZVBhY2tlZEZpeGVkNjQiLCJ3cml0ZUZpeGVkNjQiLCJ3cml0ZVBhY2tlZFNGaXhlZDY0Iiwid3JpdGVTRml4ZWQ2NCIsInJlYWRVSW50MzIiLCJ3cml0ZUludDMyIiwicmVhZEludDMyIiwicmVhZFV0ZjgiLCJiMCIsImJ5dGVzUGVyU2VxdWVuY2UiLCJiMSIsImIyIiwiYjMiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJ3cml0ZVV0ZjgiLCJsZWFkIiwiY2hhckNvZGVBdCIsImllZWU3NTQiLCJWYXJpbnQiLCJGaXhlZDY0IiwiRml4ZWQzMiIsIlNISUZUX0xFRlRfMzIiLCJTSElGVF9SSUdIVF8zMiIsImRlc3Ryb3kiLCJyZWFkRmllbGQiLCJza2lwIiwicmVhZEZpeGVkMzIiLCJyZWFkU0ZpeGVkMzIiLCJyZWFkRml4ZWQ2NCIsInJlYWRTRml4ZWQ2NCIsInJlYWRGbG9hdCIsInJlYWRWYXJpbnQ2NCIsIm51bSIsIkJvb2xlYW4iLCJyZWFkQnl0ZXMiLCJzdWJhcnJheSIsInJlYWRQYWNrZWRTVmFyaW50IiwicmVhZFBhY2tlZEJvb2xlYW4iLCJyZWFkUGFja2VkRmxvYXQiLCJyZWFkUGFja2VkRG91YmxlIiwicmVhZFBhY2tlZEZpeGVkMzIiLCJyZWFkUGFja2VkU0ZpeGVkMzIiLCJyZWFkUGFja2VkRml4ZWQ2NCIsInJlYWRQYWNrZWRTRml4ZWQ2NCIsIndyaXRlVGFnIiwic2V0Iiwid3JpdGVTdHJpbmciLCJ3cml0ZUJ5dGVzIiwid3JpdGVSYXdNZXNzYWdlIiwid3JpdGVCeXRlc0ZpZWxkIiwid3JpdGVGaXhlZDMyRmllbGQiLCJ3cml0ZVNGaXhlZDMyRmllbGQiLCJ3cml0ZUZpeGVkNjRGaWVsZCIsIndyaXRlU0ZpeGVkNjRGaWVsZCIsIndyaXRlRmxvYXRGaWVsZCIsIjM1OSIsIm9mZnNldCIsImlzTEUiLCJtTGVuIiwibkJ5dGVzIiwibSIsImVMZW4iLCJlTWF4IiwiZUJpYXMiLCJuQml0cyIsIk5hTiIsIkluZmluaXR5IiwicnQiLCJhYnMiLCJpc05hTiIsIjM2MCIsIlZlY3RvclRpbGVGZWF0dXJlIiwiVmVjdG9yVGlsZUxheWVyIiwiMzYxIiwicmVhZFRpbGUiLCIzNjIiLCJleHRlbnQiLCJfa2V5cyIsIl92YWx1ZXMiLCJfZmVhdHVyZXMiLCJyZWFkTGF5ZXIiLCJyZWFkVmFsdWVNZXNzYWdlIiwiMzYzIiwiX2dlb21ldHJ5IiwicmVhZFRhZyIsImNsYXNzaWZ5UmluZ3MiLCJwb2x5Z29uIiwiY2N3IiwiYXJlYSIsInNpZ25lZEFyZWEiLCJyaW5nIiwicDEiLCJwMiIsInR5cGVzIiwibG9hZEdlb21ldHJ5IiwiY21kIiwiY21kTGVuIiwiY2xvbmUiLCJiYm94IiwieDEiLCJ4MiIsInkxIiwieTIiLCJwcm9qZWN0IiwieTAiLCJzaXplIiwieDAiLCJQSSIsImF0YW4iLCJleHAiLCJwb2ludHMiLCIzNjQiLCJhZGQiLCJfYWRkIiwic3ViIiwiX3N1YiIsIm11bHRCeVBvaW50IiwiX211bHRCeVBvaW50IiwiZGl2QnlQb2ludCIsIl9kaXZCeVBvaW50IiwibXVsdCIsIl9tdWx0IiwiZGl2IiwiX2RpdiIsInJvdGF0ZSIsIl9yb3RhdGUiLCJyb3RhdGVBcm91bmQiLCJfcm90YXRlQXJvdW5kIiwibWF0TXVsdCIsIl9tYXRNdWx0IiwidW5pdCIsIl91bml0IiwicGVycCIsIl9wZXJwIiwiX3JvdW5kIiwibWFnIiwic3FydCIsImVxdWFscyIsIm90aGVyIiwiZGlzdCIsImRpc3RTcXIiLCJkeCIsImR5IiwiYW5nbGUiLCJhdGFuMiIsImFuZ2xlVG8iLCJhbmdsZVdpdGgiLCJhbmdsZVdpdGhTZXAiLCJjb3MiLCJzaW4iLCJjb252ZXJ0Il0sIm1hcHBpbmdzIjoiQUFBQUEsY0FBYyxJQUVSQyxFQUNBLFNBQVVDLEVBQVFDLEVB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RSxJQUNBOUUsS0FBQStFLElBQ0EvRSxNQUdBMHBCLGNBQUEsU0FBQWdCLEVBQUF2TCxHQUNBLEdBQUE0TCxHQUFBbFIsS0FBQWtSLElBQUFMLEdBQ0FNLEVBQUFuUixLQUFBbVIsSUFBQU4sR0FDQTVsQixFQUFBcWEsRUFBQXJhLEVBQUFpbUIsR0FBQS9xQixLQUFBOEUsRUFBQXFhLEVBQUFyYSxHQUFBa21CLEdBQUFockIsS0FBQStFLEVBQUFvYSxFQUFBcGEsR0FDQUEsRUFBQW9hLEVBQUFwYSxFQUFBaW1CLEdBQUFockIsS0FBQThFLEVBQUFxYSxFQUFBcmEsR0FBQWltQixHQUFBL3FCLEtBQUErRSxFQUFBb2EsRUFBQXBhLEVBR0EsT0FGQS9FLE1BQUE4RSxJQUNBOUUsS0FBQStFLElBQ0EvRSxNQUdBaXFCLE9BQUEsV0FHQSxNQUZBanFCLE1BQUE4RSxFQUFBK1UsS0FBQXlCLE1BQUF0YixLQUFBOEUsR0FDQTlFLEtBQUErRSxFQUFBOFUsS0FBQXlCLE1BQUF0YixLQUFBK0UsR0FDQS9FLE9BZUE4YyxFQUFBbU8sUUFBQSxTQUFBemdCLEdBQ0EsTUFBQUEsYUFBQXNTLEdBQ0F0UyxFQUVBbEosTUFBQW1GLFFBQUErRCxHQUNBLEdBQUFzUyxHQUFBdFMsRUFBQSxHQUFBQSxFQUFBLElBRUFBIiwiZmlsZSI6ImxvYWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3ZWJwYWNrSnNvbnAoWzBdLHtcblxuLyoqKi8gMDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0X193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblx0XG5cdHZhciBfQXBwID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMjcpO1xuXHRcblx0dmFyIF9BcHAyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfQXBwKTtcblx0XG5cdHZhciBfS2V5Q29kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzY1KTtcblx0XG5cdHZhciBfS2V5Q29kZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9LZXlDb2RlKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0KGZ1bmN0aW9uICgpIHtcblx0ICAgIHdpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgdmFyIG1haW4gPSBuZXcgTWFpbigpO1xuXHQgICAgfTtcblx0fSkoKTtcblx0XG5cdHZhciBNYWluID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gTWFpbigpIHtcblx0ICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWFpbik7XG5cdFxuXHQgICAgICAgIHRoaXMuaW5pdCgpO1xuXHQgICAgICAgIHRoaXMuYWRkRXZlbnQoKTtcblx0ICAgICAgICB0aGlzLm9ucmVzaXplKCk7XG5cdCAgICB9XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKE1haW4sIFt7XG5cdCAgICAgICAga2V5OiAnaW5pdCcsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYXBwID0gbmV3IF9BcHAyLmRlZmF1bHQoKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnYWRkRXZlbnQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRFdmVudCgpIHtcblx0ICAgICAgICAgICAgd2luZG93Lm9ucmVzaXplID0gdGhpcy5vbnJlc2l6ZS5iaW5kKHRoaXMpO1xuXHQgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLm9ua2V5dXAuYmluZCh0aGlzKSk7XG5cdCAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbmtleWRvd24uYmluZCh0aGlzKSk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ29ucmVzaXplJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25yZXNpemUoKSB7XG5cdCAgICAgICAgICAgIHRoaXMuYXBwLnJlc2l6ZSgpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICpcblx0ICAgICAgICAgKiBAcGFyYW0gZnVuYyB7RnVuY3Rpb259XG5cdCAgICAgICAgICogQHBhcmFtIHBhcmFtc1xuXHQgICAgICAgICAqIEByZXR1cm5zIHtpbnRlcnZhbEZ1bmN9XG5cdCAgICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2dldEludGVydmFsRnVuY3Rpb24nLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnRlcnZhbEZ1bmN0aW9uKHRoZUFyZywgZnVuYykge1xuXHQgICAgICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgcGFyYW1zID0gQXJyYXkoX2xlbiA+IDIgPyBfbGVuIC0gMiA6IDApLCBfa2V5ID0gMjsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgICAgICAgICAgICAgcGFyYW1zW19rZXkgLSAyXSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgZnVuY3Rpb24gaW50ZXJ2YWxGdW5jKCkge1xuXHQgICAgICAgICAgICAgICAgZnVuYy5hcHBseSh0aGVBcmcsIHBhcmFtcyk7XG5cdCAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5rZXlJbnRlcnZhbElkKTtcblx0ICAgICAgICAgICAgICAgIHRoaXMua2V5SW50ZXJ2YWxJZCA9IHNldFRpbWVvdXQoaW50ZXJ2YWxGdW5jLmJpbmQodGhpcyksIDIwMCk7XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIHJldHVybiBpbnRlcnZhbEZ1bmMuYmluZCh0aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnY2xlYXJJbnRlckZ1bmN0aW9uJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJJbnRlckZ1bmN0aW9uKCkge1xuXHQgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5rZXlJbnRlcnZhbElkKTtcblx0ICAgICAgICB9XG5cdCAgICB9LCB7XG5cdCAgICAgICAga2V5OiAnb25rZXlkb3duJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25rZXlkb3duKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5VUDpcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLm1vdmVDYW1lcmEsICd5JywgLTEpKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LkRPV046XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5tb3ZlQ2FtZXJhLCAneScsIDEpKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LkxFRlQ6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5tb3ZlQ2FtZXJhLCAneCcsIC0xKSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5SSUdIVDpcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLm1vdmVDYW1lcmEsICd4JywgMSkoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuUEFHRV9VUDpcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLm1vdmVDYW1lcmEsICd6JywgMSkoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuUEFHRV9ET1dOOlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAubW92ZUNhbWVyYSwgJ3onLCAtMSkoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNQkVSXzQ6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5yb3RhdGVXb3JsZCwgJ3knLCAtMC4wMSkoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNQkVSXzY6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5yb3RhdGVXb3JsZCwgJ3knLCAwLjAxKSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1CRVJfODpcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLnJvdGF0ZVdvcmxkLCAneCcsIC0wLjAxKSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1CRVJfMjpcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLnJvdGF0ZVdvcmxkLCAneCcsIDAuMDEpKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0Lk5VTUJFUl83OlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd6JywgLTAuMDEpKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0Lk5VTUJFUl8xOlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd6JywgMC4wMSkoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNQkVSXzk6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5yb3RhdGVXb3JsZCwgJ3onLCAtMC4wMSkoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNQkVSXzM6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5yb3RhdGVXb3JsZCwgJ3onLCAwLjAxKSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1QQURfQUREOlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLnpvb21JbigpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1QQURfU1VCVFJBQ1Q6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAuem9vbU91dCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1QQURfRU5URVI6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAuem9vbU91dCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1CRVJfMDpcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC5yZXNldCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5XOlxuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5TOlxuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5BOlxuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5EOlxuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ29ua2V5dXAnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbmtleXVwKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5FU0NBUEU6XG5cdCAgICAgICAgICAgICAgICAgICAgY29uc29sZS5jbGVhcigpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHRcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuU1BBQ0U6XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXBwLmd1aS5jbG9zZWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAuZ3VpLm9wZW4oKTtcblx0ICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC5ndWkuY2xvc2UoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdFxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5VUDpcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuRE9XTjpcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTEVGVDpcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuUklHSFQ6XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LlBBR0VfVVA6XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LlBBR0VfRE9XTjpcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNQkVSXzQ6XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0Lk5VTUJFUl82OlxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1CRVJfODpcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNQkVSXzI6XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0Lk5VTUJFUl83OlxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1CRVJfMTpcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNQkVSXzk6XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0Lk5VTUJFUl8zOlxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1QQURfQUREOlxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1QQURfU1VCVFJBQ1Q6XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0Llc6XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LlM6XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LkE6XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LkQ6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckludGVyRnVuY3Rpb24oKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LkJBQ0tTUEFDRTpcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH1dKTtcblxuXHQgICAgcmV0dXJuIE1haW47XG5cdH0oKTtcblxuLyoqKi8gfSksXG5cbi8qKiovIDMyNzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0dmFyIF9heGlvcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzI4KTtcblx0XG5cdHZhciBfYXhpb3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXhpb3MpO1xuXHRcblx0dmFyIF9nZW9idWYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1NSk7XG5cdFxuXHR2YXIgX2dlb2J1ZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9nZW9idWYpO1xuXHRcblx0dmFyIF9wYmYgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1OCk7XG5cdFxuXHR2YXIgX3BiZjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9wYmYpO1xuXHRcblx0dmFyIF92ZWN0b3JUaWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjApO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgeHl6ID0geyB4OiAyNzk1MywgeTogMTI3MTEsIHo6IDE1IH07XG5cdHZhciBidXMgPSAnaHR0cHM6Ly9tYXAucHN0YXRpYy5uZXQvbnZiL3dtdHMvYnVzL2QyZTM2NGM5LWI3NWUtNGZkNy04MDIwLWM0YjI2ZjgyYjljZS9nZXRUaWxlLzI3OTUzLzEyNzExLzE1L3BiZic7XG5cdHZhciBwb2lfd2ViID0gJ2h0dHBzOi8vbWFwLnBzdGF0aWMubmV0L252Yi93bXRzL3BvaV93ZWIvOGZlNjg4M2UtNTUyNS00NWY4LThmNTUtNWUzMGJjNDk4MWYxL2dldFRpbGUvMjc5NTMvMTI3MTEvMTUvcGJmJztcblx0XG5cdHZhciBBcHAgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gQXBwKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFwcCk7XG5cdFxuXHQgICAgdGhpcy5sb2FkVmVjdG9yKCk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoQXBwLCBbe1xuXHQgICAga2V5OiAnbG9hZFZlY3RvcicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gbG9hZFZlY3RvcigpIHtcblx0ICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgIHRoaXMubG9hZCh7XG5cdCAgICAgICAgdXJsOiBwb2lfd2ViLFxuXHQgICAgICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJ1xuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uIChidWZmZXIpIHtcblx0ICAgICAgICAvLyBjb25zdCBwYmYgPSBuZXcgUGJmKG5ldyBVaW50OEFycmF5KHJlc3BvbnNlKSk7XG5cdCAgICAgICAgLy8gY29uc3QgdGlsZSA9IG5ldyBWZWN0b3JUaWxlKHBiZik7XG5cdCAgICAgICAgdmFyIHRpbGUgPSBuZXcgX3ZlY3RvclRpbGUuVmVjdG9yVGlsZShuZXcgX3BiZjIuZGVmYXVsdChidWZmZXIpKTtcblx0ICAgICAgICBjb25zb2xlLmxvZygndGlsZScsIHRpbGUpO1xuXHRcblx0ICAgICAgICB2YXIgY29sbGVjdGlvbiA9IF90aGlzLmdldEZlYXR1cmVzKHRpbGUpO1xuXHQgICAgICAgIGNvbnNvbGUubG9nKCdmZWF0dXJlcycsIGNvbGxlY3Rpb24uZmVhdHVyZXMpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdsb2FkJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkKF9yZWYpIHtcblx0ICAgICAgdmFyIHVybCA9IF9yZWYudXJsLFxuXHQgICAgICAgICAgX3JlZiRyZXNwb25zZVR5cGUgPSBfcmVmLnJlc3BvbnNlVHlwZSxcblx0ICAgICAgICAgIHJlc3BvbnNlVHlwZSA9IF9yZWYkcmVzcG9uc2VUeXBlID09PSB1bmRlZmluZWQgPyAnanNvbicgOiBfcmVmJHJlc3BvbnNlVHlwZTtcblx0XG5cdCAgICAgIHZhciBmZXRjaERhdGEgPSBmdW5jdGlvbiBmZXRjaERhdGEoKSB7XG5cdCAgICAgICAgcmV0dXJuICgwLCBfYXhpb3MyLmRlZmF1bHQpKHtcblx0ICAgICAgICAgIHVybDogdXJsLFxuXHQgICAgICAgICAgcmVzcG9uc2VUeXBlOiByZXNwb25zZVR5cGVcblx0ICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmMikge1xuXHQgICAgICAgICAgdmFyIGRhdGEgPSBfcmVmMi5kYXRhO1xuXHRcblx0ICAgICAgICAgIHJldHVybiBkYXRhO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9O1xuXHQgICAgICByZXR1cm4gZmV0Y2hEYXRhKCk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0RmVhdHVyZXMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZlYXR1cmVzKHRpbGUpIHtcblx0ICAgICAgdmFyIGNvbGxlY3Rpb24gPSB7XG5cdCAgICAgICAgdHlwZTogJ0ZlYXR1cmVDb2xsZWN0aW9uJyxcblx0ICAgICAgICBmZWF0dXJlczogW11cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHZhciBsYXllcnMgPSBPYmplY3Qua2V5cyh0aWxlLmxheWVycyk7XG5cdFxuXHQgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobGF5ZXJzKSkge1xuXHQgICAgICAgIGxheWVycyA9IFtsYXllcnNdO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBsYXllcnMuZm9yRWFjaChmdW5jdGlvbiAobGF5ZXJJRCkge1xuXHQgICAgICAgIHZhciBsYXllciA9IHRpbGUubGF5ZXJzW2xheWVySURdO1xuXHRcblx0ICAgICAgICB2YXIgbGVuID0gbGF5ZXIubGVuZ3RoO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0XG5cdCAgICAgICAgICB2YXIgZmVhdHVyZSA9IF9leHRlbmRzKHt9LCBsYXllci5mZWF0dXJlKGkpLnRvR2VvSlNPTih4eXoueCwgeHl6LnksIHh5ei56KSk7XG5cdFxuXHQgICAgICAgICAgY29sbGVjdGlvbi5mZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICByZXR1cm4gY29sbGVjdGlvbjtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdyZXNpemUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2l6ZSgpIHt9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gQXBwO1xuXHR9KCk7XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSBBcHA7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMjg6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyOSk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMjk6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzApO1xuXHR2YXIgYmluZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMxKTtcblx0dmFyIEF4aW9zID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzMpO1xuXHR2YXIgbWVyZ2VDb25maWcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1MSk7XG5cdHZhciBkZWZhdWx0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgQXhpb3Ncblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGRlZmF1bHRDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2Vcblx0ICogQHJldHVybiB7QXhpb3N9IEEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG5cdCAqL1xuXHRmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShkZWZhdWx0Q29uZmlnKSB7XG5cdCAgdmFyIGNvbnRleHQgPSBuZXcgQXhpb3MoZGVmYXVsdENvbmZpZyk7XG5cdCAgdmFyIGluc3RhbmNlID0gYmluZChBeGlvcy5wcm90b3R5cGUucmVxdWVzdCwgY29udGV4dCk7XG5cdFxuXHQgIC8vIENvcHkgYXhpb3MucHJvdG90eXBlIHRvIGluc3RhbmNlXG5cdCAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBBeGlvcy5wcm90b3R5cGUsIGNvbnRleHQpO1xuXHRcblx0ICAvLyBDb3B5IGNvbnRleHQgdG8gaW5zdGFuY2Vcblx0ICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQpO1xuXHRcblx0ICByZXR1cm4gaW5zdGFuY2U7XG5cdH1cblx0XG5cdC8vIENyZWF0ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB0byBiZSBleHBvcnRlZFxuXHR2YXIgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0cyk7XG5cdFxuXHQvLyBFeHBvc2UgQXhpb3MgY2xhc3MgdG8gYWxsb3cgY2xhc3MgaW5oZXJpdGFuY2Vcblx0YXhpb3MuQXhpb3MgPSBBeGlvcztcblx0XG5cdC8vIEZhY3RvcnkgZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZXNcblx0YXhpb3MuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGluc3RhbmNlQ29uZmlnKSB7XG5cdCAgcmV0dXJuIGNyZWF0ZUluc3RhbmNlKG1lcmdlQ29uZmlnKGF4aW9zLmRlZmF1bHRzLCBpbnN0YW5jZUNvbmZpZykpO1xuXHR9O1xuXHRcblx0Ly8gRXhwb3NlIENhbmNlbCAmIENhbmNlbFRva2VuXG5cdGF4aW9zLkNhbmNlbCA9IF9fd2VicGFja19yZXF1aXJlX18oMzUyKTtcblx0YXhpb3MuQ2FuY2VsVG9rZW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1Myk7XG5cdGF4aW9zLmlzQ2FuY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHRcblx0Ly8gRXhwb3NlIGFsbC9zcHJlYWRcblx0YXhpb3MuYWxsID0gZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7XG5cdCAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcblx0fTtcblx0YXhpb3Muc3ByZWFkID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNTQpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBheGlvcztcblx0XG5cdC8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdFxuXHRtb2R1bGUuZXhwb3J0cy5kZWZhdWx0ID0gYXhpb3M7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDMzMDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgYmluZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzMxKTtcblx0dmFyIGlzQnVmZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzIpO1xuXHRcblx0LypnbG9iYWwgdG9TdHJpbmc6dHJ1ZSovXG5cdFxuXHQvLyB1dGlscyBpcyBhIGxpYnJhcnkgb2YgZ2VuZXJpYyBoZWxwZXIgZnVuY3Rpb25zIG5vbi1zcGVjaWZpYyB0byBheGlvc1xuXHRcblx0dmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJyYXkodmFsKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcih2YWwpIHtcblx0ICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGb3JtRGF0YVxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEZvcm1EYXRhLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzRm9ybURhdGEodmFsKSB7XG5cdCAgcmV0dXJuICh0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnKSAmJiAodmFsIGluc3RhbmNlb2YgRm9ybURhdGEpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJyYXlCdWZmZXJWaWV3KHZhbCkge1xuXHQgIHZhciByZXN1bHQ7XG5cdCAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSAmJiAoQXJyYXlCdWZmZXIuaXNWaWV3KSkge1xuXHQgICAgcmVzdWx0ID0gQXJyYXlCdWZmZXIuaXNWaWV3KHZhbCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJlc3VsdCA9ICh2YWwpICYmICh2YWwuYnVmZmVyKSAmJiAodmFsLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTdHJpbmcodmFsKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBOdW1iZXJcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIE51bWJlciwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc051bWJlcih2YWwpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ251bWJlcic7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB1bmRlZmluZWRcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzVW5kZWZpbmVkKHZhbCkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIE9iamVjdFxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcblx0ICByZXR1cm4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBEYXRlXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBEYXRlLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzRGF0ZSh2YWwpIHtcblx0ICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBEYXRlXSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNGaWxlKHZhbCkge1xuXHQgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZpbGVdJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQmxvYiwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0Jsb2IodmFsKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQmxvYl0nO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGdW5jdGlvblxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRnVuY3Rpb24sIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHtcblx0ICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJlYW1cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1N0cmVhbSh2YWwpIHtcblx0ICByZXR1cm4gaXNPYmplY3QodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC5waXBlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdFxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1VSTFNlYXJjaFBhcmFtcyh2YWwpIHtcblx0ICByZXR1cm4gdHlwZW9mIFVSTFNlYXJjaFBhcmFtcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVHJpbSBleGNlc3Mgd2hpdGVzcGFjZSBvZmYgdGhlIGJlZ2lubmluZyBhbmQgZW5kIG9mIGEgc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIFN0cmluZyB0byB0cmltXG5cdCAqIEByZXR1cm5zIHtTdHJpbmd9IFRoZSBTdHJpbmcgZnJlZWQgb2YgZXhjZXNzIHdoaXRlc3BhY2Vcblx0ICovXG5cdGZ1bmN0aW9uIHRyaW0oc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eXFxzKi8sICcnKS5yZXBsYWNlKC9cXHMqJC8sICcnKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiB3ZSdyZSBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudFxuXHQgKlxuXHQgKiBUaGlzIGFsbG93cyBheGlvcyB0byBydW4gaW4gYSB3ZWIgd29ya2VyLCBhbmQgcmVhY3QtbmF0aXZlLlxuXHQgKiBCb3RoIGVudmlyb25tZW50cyBzdXBwb3J0IFhNTEh0dHBSZXF1ZXN0LCBidXQgbm90IGZ1bGx5IHN0YW5kYXJkIGdsb2JhbHMuXG5cdCAqXG5cdCAqIHdlYiB3b3JrZXJzOlxuXHQgKiAgdHlwZW9mIHdpbmRvdyAtPiB1bmRlZmluZWRcblx0ICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcblx0ICpcblx0ICogcmVhY3QtbmF0aXZlOlxuXHQgKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuXHQgKiBuYXRpdmVzY3JpcHRcblx0ICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdOYXRpdmVTY3JpcHQnIG9yICdOUydcblx0ICovXG5cdGZ1bmN0aW9uIGlzU3RhbmRhcmRCcm93c2VyRW52KCkge1xuXHQgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAobmF2aWdhdG9yLnByb2R1Y3QgPT09ICdSZWFjdE5hdGl2ZScgfHxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTmF0aXZlU2NyaXB0JyB8fFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmF2aWdhdG9yLnByb2R1Y3QgPT09ICdOUycpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHJldHVybiAoXG5cdCAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ1xuXHQgICk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJdGVyYXRlIG92ZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0IGludm9raW5nIGEgZnVuY3Rpb24gZm9yIGVhY2ggaXRlbS5cblx0ICpcblx0ICogSWYgYG9iamAgaXMgYW4gQXJyYXkgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuXHQgKiB0aGUgdmFsdWUsIGluZGV4LCBhbmQgY29tcGxldGUgYXJyYXkgZm9yIGVhY2ggaXRlbS5cblx0ICpcblx0ICogSWYgJ29iaicgaXMgYW4gT2JqZWN0IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3Npbmdcblx0ICogdGhlIHZhbHVlLCBrZXksIGFuZCBjb21wbGV0ZSBvYmplY3QgZm9yIGVhY2ggcHJvcGVydHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBvYmogVGhlIG9iamVjdCB0byBpdGVyYXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBjYWxsYmFjayB0byBpbnZva2UgZm9yIGVhY2ggaXRlbVxuXHQgKi9cblx0ZnVuY3Rpb24gZm9yRWFjaChvYmosIGZuKSB7XG5cdCAgLy8gRG9uJ3QgYm90aGVyIGlmIG5vIHZhbHVlIHByb3ZpZGVkXG5cdCAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgLy8gRm9yY2UgYW4gYXJyYXkgaWYgbm90IGFscmVhZHkgc29tZXRoaW5nIGl0ZXJhYmxlXG5cdCAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG5cdCAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cblx0ICAgIG9iaiA9IFtvYmpdO1xuXHQgIH1cblx0XG5cdCAgaWYgKGlzQXJyYXkob2JqKSkge1xuXHQgICAgLy8gSXRlcmF0ZSBvdmVyIGFycmF5IHZhbHVlc1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2ldLCBpLCBvYmopO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBJdGVyYXRlIG92ZXIgb2JqZWN0IGtleXNcblx0ICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcblx0ICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcblx0ICAgICAgICBmbi5jYWxsKG51bGwsIG9ialtrZXldLCBrZXksIG9iaik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuXG5cdCAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LlxuXHQgKlxuXHQgKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpblxuXHQgKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG5cdCAqXG5cdCAqIEV4YW1wbGU6XG5cdCAqXG5cdCAqIGBgYGpzXG5cdCAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTtcblx0ICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2XG5cdCAqIGBgYFxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2Vcblx0ICogQHJldHVybnMge09iamVjdH0gUmVzdWx0IG9mIGFsbCBtZXJnZSBwcm9wZXJ0aWVzXG5cdCAqL1xuXHRmdW5jdGlvbiBtZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcblx0ICB2YXIgcmVzdWx0ID0ge307XG5cdCAgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcblx0ICAgIGlmICh0eXBlb2YgcmVzdWx0W2tleV0gPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHJlc3VsdFtrZXldID0gbWVyZ2UocmVzdWx0W2tleV0sIHZhbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXN1bHRba2V5XSA9IHZhbDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZ1bmN0aW9uIGVxdWFsIHRvIG1lcmdlIHdpdGggdGhlIGRpZmZlcmVuY2UgYmVpbmcgdGhhdCBubyByZWZlcmVuY2Vcblx0ICogdG8gb3JpZ2luYWwgb2JqZWN0cyBpcyBrZXB0LlxuXHQgKlxuXHQgKiBAc2VlIG1lcmdlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmoxIE9iamVjdCB0byBtZXJnZVxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXN1bHQgb2YgYWxsIG1lcmdlIHByb3BlcnRpZXNcblx0ICovXG5cdGZ1bmN0aW9uIGRlZXBNZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcblx0ICB2YXIgcmVzdWx0ID0ge307XG5cdCAgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcblx0ICAgIGlmICh0eXBlb2YgcmVzdWx0W2tleV0gPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHJlc3VsdFtrZXldID0gZGVlcE1lcmdlKHJlc3VsdFtrZXldLCB2YWwpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuXHQgICAgICByZXN1bHRba2V5XSA9IGRlZXBNZXJnZSh7fSwgdmFsKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlc3VsdFtrZXldID0gdmFsO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBmb3JFYWNoKGFyZ3VtZW50c1tpXSwgYXNzaWduVmFsdWUpO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogRXh0ZW5kcyBvYmplY3QgYSBieSBtdXRhYmx5IGFkZGluZyB0byBpdCB0aGUgcHJvcGVydGllcyBvZiBvYmplY3QgYi5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGEgVGhlIG9iamVjdCB0byBiZSBleHRlbmRlZFxuXHQgKiBAcGFyYW0ge09iamVjdH0gYiBUaGUgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzQXJnIFRoZSBvYmplY3QgdG8gYmluZCBmdW5jdGlvbiB0b1xuXHQgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSByZXN1bHRpbmcgdmFsdWUgb2Ygb2JqZWN0IGFcblx0ICovXG5cdGZ1bmN0aW9uIGV4dGVuZChhLCBiLCB0aGlzQXJnKSB7XG5cdCAgZm9yRWFjaChiLCBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuXHQgICAgaWYgKHRoaXNBcmcgJiYgdHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBhW2tleV0gPSBiaW5kKHZhbCwgdGhpc0FyZyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBhW2tleV0gPSB2YWw7XG5cdCAgICB9XG5cdCAgfSk7XG5cdCAgcmV0dXJuIGE7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgIGlzQXJyYXk6IGlzQXJyYXksXG5cdCAgaXNBcnJheUJ1ZmZlcjogaXNBcnJheUJ1ZmZlcixcblx0ICBpc0J1ZmZlcjogaXNCdWZmZXIsXG5cdCAgaXNGb3JtRGF0YTogaXNGb3JtRGF0YSxcblx0ICBpc0FycmF5QnVmZmVyVmlldzogaXNBcnJheUJ1ZmZlclZpZXcsXG5cdCAgaXNTdHJpbmc6IGlzU3RyaW5nLFxuXHQgIGlzTnVtYmVyOiBpc051bWJlcixcblx0ICBpc09iamVjdDogaXNPYmplY3QsXG5cdCAgaXNVbmRlZmluZWQ6IGlzVW5kZWZpbmVkLFxuXHQgIGlzRGF0ZTogaXNEYXRlLFxuXHQgIGlzRmlsZTogaXNGaWxlLFxuXHQgIGlzQmxvYjogaXNCbG9iLFxuXHQgIGlzRnVuY3Rpb246IGlzRnVuY3Rpb24sXG5cdCAgaXNTdHJlYW06IGlzU3RyZWFtLFxuXHQgIGlzVVJMU2VhcmNoUGFyYW1zOiBpc1VSTFNlYXJjaFBhcmFtcyxcblx0ICBpc1N0YW5kYXJkQnJvd3NlckVudjogaXNTdGFuZGFyZEJyb3dzZXJFbnYsXG5cdCAgZm9yRWFjaDogZm9yRWFjaCxcblx0ICBtZXJnZTogbWVyZ2UsXG5cdCAgZGVlcE1lcmdlOiBkZWVwTWVyZ2UsXG5cdCAgZXh0ZW5kOiBleHRlbmQsXG5cdCAgdHJpbTogdHJpbVxuXHR9O1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMzE6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoKTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDMzMjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiFcblx0ICogRGV0ZXJtaW5lIGlmIGFuIG9iamVjdCBpcyBhIEJ1ZmZlclxuXHQgKlxuXHQgKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnPlxuXHQgKiBAbGljZW5zZSAgTUlUXG5cdCAqL1xuXHRcblx0Ly8gVGhlIF9pc0J1ZmZlciBjaGVjayBpcyBmb3IgU2FmYXJpIDUtNyBzdXBwb3J0LCBiZWNhdXNlIGl0J3MgbWlzc2luZ1xuXHQvLyBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yLiBSZW1vdmUgdGhpcyBldmVudHVhbGx5XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaikge1xuXHQgIHJldHVybiBvYmogIT0gbnVsbCAmJiAoaXNCdWZmZXIob2JqKSB8fCBpc1Nsb3dCdWZmZXIob2JqKSB8fCAhIW9iai5faXNCdWZmZXIpXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzQnVmZmVyIChvYmopIHtcblx0ICByZXR1cm4gISFvYmouY29uc3RydWN0b3IgJiYgdHlwZW9mIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIob2JqKVxuXHR9XG5cdFxuXHQvLyBGb3IgTm9kZSB2MC4xMCBzdXBwb3J0LiBSZW1vdmUgdGhpcyBldmVudHVhbGx5LlxuXHRmdW5jdGlvbiBpc1Nsb3dCdWZmZXIgKG9iaikge1xuXHQgIHJldHVybiB0eXBlb2Ygb2JqLnJlYWRGbG9hdExFID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvYmouc2xpY2UgPT09ICdmdW5jdGlvbicgJiYgaXNCdWZmZXIob2JqLnNsaWNlKDAsIDApKVxuXHR9XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDMzMzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMCk7XG5cdHZhciBidWlsZFVSTCA9IF9fd2VicGFja19yZXF1aXJlX18oMzM0KTtcblx0dmFyIEludGVyY2VwdG9yTWFuYWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzM1KTtcblx0dmFyIGRpc3BhdGNoUmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzM2KTtcblx0dmFyIG1lcmdlQ29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNTEpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gaW5zdGFuY2VDb25maWcgVGhlIGRlZmF1bHQgY29uZmlnIGZvciB0aGUgaW5zdGFuY2Vcblx0ICovXG5cdGZ1bmN0aW9uIEF4aW9zKGluc3RhbmNlQ29uZmlnKSB7XG5cdCAgdGhpcy5kZWZhdWx0cyA9IGluc3RhbmNlQ29uZmlnO1xuXHQgIHRoaXMuaW50ZXJjZXB0b3JzID0ge1xuXHQgICAgcmVxdWVzdDogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpLFxuXHQgICAgcmVzcG9uc2U6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEaXNwYXRjaCBhIHJlcXVlc3Rcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHNwZWNpZmljIGZvciB0aGlzIHJlcXVlc3QgKG1lcmdlZCB3aXRoIHRoaXMuZGVmYXVsdHMpXG5cdCAqL1xuXHRBeGlvcy5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QoY29uZmlnKSB7XG5cdCAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG5cdCAgLy8gQWxsb3cgZm9yIGF4aW9zKCdleGFtcGxlL3VybCdbLCBjb25maWddKSBhIGxhIGZldGNoIEFQSVxuXHQgIGlmICh0eXBlb2YgY29uZmlnID09PSAnc3RyaW5nJykge1xuXHQgICAgY29uZmlnID0gYXJndW1lbnRzWzFdIHx8IHt9O1xuXHQgICAgY29uZmlnLnVybCA9IGFyZ3VtZW50c1swXTtcblx0ICB9IGVsc2Uge1xuXHQgICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuXHQgIH1cblx0XG5cdCAgY29uZmlnID0gbWVyZ2VDb25maWcodGhpcy5kZWZhdWx0cywgY29uZmlnKTtcblx0ICBjb25maWcubWV0aG9kID0gY29uZmlnLm1ldGhvZCA/IGNvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKSA6ICdnZXQnO1xuXHRcblx0ICAvLyBIb29rIHVwIGludGVyY2VwdG9ycyBtaWRkbGV3YXJlXG5cdCAgdmFyIGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdCwgdW5kZWZpbmVkXTtcblx0ICB2YXIgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShjb25maWcpO1xuXHRcblx0ICB0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goZnVuY3Rpb24gdW5zaGlmdFJlcXVlc3RJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHtcblx0ICAgIGNoYWluLnVuc2hpZnQoaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG5cdCAgfSk7XG5cdFxuXHQgIHRoaXMuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24gcHVzaFJlc3BvbnNlSW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG5cdCAgICBjaGFpbi5wdXNoKGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuXHQgIH0pO1xuXHRcblx0ICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7XG5cdCAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluLnNoaWZ0KCksIGNoYWluLnNoaWZ0KCkpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHByb21pc2U7XG5cdH07XG5cdFxuXHRBeGlvcy5wcm90b3R5cGUuZ2V0VXJpID0gZnVuY3Rpb24gZ2V0VXJpKGNvbmZpZykge1xuXHQgIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7XG5cdCAgcmV0dXJuIGJ1aWxkVVJMKGNvbmZpZy51cmwsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKS5yZXBsYWNlKC9eXFw/LywgJycpO1xuXHR9O1xuXHRcblx0Ly8gUHJvdmlkZSBhbGlhc2VzIGZvciBzdXBwb3J0ZWQgcmVxdWVzdCBtZXRob2RzXG5cdHV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAnb3B0aW9ucyddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuXHQgIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG5cdCAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGNvbmZpZykge1xuXHQgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1dGlscy5tZXJnZShjb25maWcgfHwge30sIHtcblx0ICAgICAgbWV0aG9kOiBtZXRob2QsXG5cdCAgICAgIHVybDogdXJsXG5cdCAgICB9KSk7XG5cdCAgfTtcblx0fSk7XG5cdFxuXHR1dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuXHQgIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG5cdCAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGRhdGEsIGNvbmZpZykge1xuXHQgICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1dGlscy5tZXJnZShjb25maWcgfHwge30sIHtcblx0ICAgICAgbWV0aG9kOiBtZXRob2QsXG5cdCAgICAgIHVybDogdXJsLFxuXHQgICAgICBkYXRhOiBkYXRhXG5cdCAgICB9KSk7XG5cdCAgfTtcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEF4aW9zO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMzQ6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzApO1xuXHRcblx0ZnVuY3Rpb24gZW5jb2RlKHZhbCkge1xuXHQgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5cblx0ICAgIHJlcGxhY2UoLyU0MC9naSwgJ0AnKS5cblx0ICAgIHJlcGxhY2UoLyUzQS9naSwgJzonKS5cblx0ICAgIHJlcGxhY2UoLyUyNC9nLCAnJCcpLlxuXHQgICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxuXHQgICAgcmVwbGFjZSgvJTIwL2csICcrJykuXG5cdCAgICByZXBsYWNlKC8lNUIvZ2ksICdbJykuXG5cdCAgICByZXBsYWNlKC8lNUQvZ2ksICddJyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIFVSTCBieSBhcHBlbmRpbmcgcGFyYW1zIHRvIHRoZSBlbmRcblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBbcGFyYW1zXSBUaGUgcGFyYW1zIHRvIGJlIGFwcGVuZGVkXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgdXJsXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkVVJMKHVybCwgcGFyYW1zLCBwYXJhbXNTZXJpYWxpemVyKSB7XG5cdCAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG5cdCAgaWYgKCFwYXJhbXMpIHtcblx0ICAgIHJldHVybiB1cmw7XG5cdCAgfVxuXHRcblx0ICB2YXIgc2VyaWFsaXplZFBhcmFtcztcblx0ICBpZiAocGFyYW1zU2VyaWFsaXplcikge1xuXHQgICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtc1NlcmlhbGl6ZXIocGFyYW1zKTtcblx0ICB9IGVsc2UgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKHBhcmFtcykpIHtcblx0ICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXMudG9TdHJpbmcoKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHBhcnRzID0gW107XG5cdFxuXHQgICAgdXRpbHMuZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uIHNlcmlhbGl6ZSh2YWwsIGtleSkge1xuXHQgICAgICBpZiAodmFsID09PSBudWxsIHx8IHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodXRpbHMuaXNBcnJheSh2YWwpKSB7XG5cdCAgICAgICAga2V5ID0ga2V5ICsgJ1tdJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YWwgPSBbdmFsXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdXRpbHMuZm9yRWFjaCh2YWwsIGZ1bmN0aW9uIHBhcnNlVmFsdWUodikge1xuXHQgICAgICAgIGlmICh1dGlscy5pc0RhdGUodikpIHtcblx0ICAgICAgICAgIHYgPSB2LnRvSVNPU3RyaW5nKCk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh1dGlscy5pc09iamVjdCh2KSkge1xuXHQgICAgICAgICAgdiA9IEpTT04uc3RyaW5naWZ5KHYpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKHYpKTtcblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0XG5cdCAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFydHMuam9pbignJicpO1xuXHQgIH1cblx0XG5cdCAgaWYgKHNlcmlhbGl6ZWRQYXJhbXMpIHtcblx0ICAgIHZhciBoYXNobWFya0luZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcblx0ICAgIGlmIChoYXNobWFya0luZGV4ICE9PSAtMSkge1xuXHQgICAgICB1cmwgPSB1cmwuc2xpY2UoMCwgaGFzaG1hcmtJbmRleCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdXJsICs9ICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIHVybDtcblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzM1OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMwKTtcblx0XG5cdGZ1bmN0aW9uIEludGVyY2VwdG9yTWFuYWdlcigpIHtcblx0ICB0aGlzLmhhbmRsZXJzID0gW107XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBZGQgYSBuZXcgaW50ZXJjZXB0b3IgdG8gdGhlIHN0YWNrXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWBcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0ZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgcmVqZWN0YCBmb3IgYSBgUHJvbWlzZWBcblx0ICpcblx0ICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlclxuXHQgKi9cblx0SW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiB1c2UoZnVsZmlsbGVkLCByZWplY3RlZCkge1xuXHQgIHRoaXMuaGFuZGxlcnMucHVzaCh7XG5cdCAgICBmdWxmaWxsZWQ6IGZ1bGZpbGxlZCxcblx0ICAgIHJlamVjdGVkOiByZWplY3RlZFxuXHQgIH0pO1xuXHQgIHJldHVybiB0aGlzLmhhbmRsZXJzLmxlbmd0aCAtIDE7XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGFuIGludGVyY2VwdG9yIGZyb20gdGhlIHN0YWNrXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBpZCBUaGUgSUQgdGhhdCB3YXMgcmV0dXJuZWQgYnkgYHVzZWBcblx0ICovXG5cdEludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3QgPSBmdW5jdGlvbiBlamVjdChpZCkge1xuXHQgIGlmICh0aGlzLmhhbmRsZXJzW2lkXSkge1xuXHQgICAgdGhpcy5oYW5kbGVyc1tpZF0gPSBudWxsO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBJdGVyYXRlIG92ZXIgYWxsIHRoZSByZWdpc3RlcmVkIGludGVyY2VwdG9yc1xuXHQgKlxuXHQgKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueVxuXHQgKiBpbnRlcmNlcHRvcnMgdGhhdCBtYXkgaGF2ZSBiZWNvbWUgYG51bGxgIGNhbGxpbmcgYGVqZWN0YC5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3Jcblx0ICovXG5cdEludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2goZm4pIHtcblx0ICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcblx0ICAgIGlmIChoICE9PSBudWxsKSB7XG5cdCAgICAgIGZuKGgpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBJbnRlcmNlcHRvck1hbmFnZXI7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDMzNjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMCk7XG5cdHZhciB0cmFuc2Zvcm1EYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzcpO1xuXHR2YXIgaXNDYW5jZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOCk7XG5cdHZhciBkZWZhdWx0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzM5KTtcblx0dmFyIGlzQWJzb2x1dGVVUkwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0OSk7XG5cdHZhciBjb21iaW5lVVJMcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzUwKTtcblx0XG5cdC8qKlxuXHQgKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuXHQgKi9cblx0ZnVuY3Rpb24gdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpIHtcblx0ICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG5cdCAgICBjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIERpc3BhdGNoIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyIHVzaW5nIHRoZSBjb25maWd1cmVkIGFkYXB0ZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7b2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyB0aGF0IGlzIHRvIGJlIHVzZWQgZm9yIHRoZSByZXF1ZXN0XG5cdCAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWRcblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGlzcGF0Y2hSZXF1ZXN0KGNvbmZpZykge1xuXHQgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblx0XG5cdCAgLy8gU3VwcG9ydCBiYXNlVVJMIGNvbmZpZ1xuXHQgIGlmIChjb25maWcuYmFzZVVSTCAmJiAhaXNBYnNvbHV0ZVVSTChjb25maWcudXJsKSkge1xuXHQgICAgY29uZmlnLnVybCA9IGNvbWJpbmVVUkxzKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsKTtcblx0ICB9XG5cdFxuXHQgIC8vIEVuc3VyZSBoZWFkZXJzIGV4aXN0XG5cdCAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcblx0XG5cdCAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuXHQgIGNvbmZpZy5kYXRhID0gdHJhbnNmb3JtRGF0YShcblx0ICAgIGNvbmZpZy5kYXRhLFxuXHQgICAgY29uZmlnLmhlYWRlcnMsXG5cdCAgICBjb25maWcudHJhbnNmb3JtUmVxdWVzdFxuXHQgICk7XG5cdFxuXHQgIC8vIEZsYXR0ZW4gaGVhZGVyc1xuXHQgIGNvbmZpZy5oZWFkZXJzID0gdXRpbHMubWVyZ2UoXG5cdCAgICBjb25maWcuaGVhZGVycy5jb21tb24gfHwge30sXG5cdCAgICBjb25maWcuaGVhZGVyc1tjb25maWcubWV0aG9kXSB8fCB7fSxcblx0ICAgIGNvbmZpZy5oZWFkZXJzIHx8IHt9XG5cdCAgKTtcblx0XG5cdCAgdXRpbHMuZm9yRWFjaChcblx0ICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuXHQgICAgZnVuY3Rpb24gY2xlYW5IZWFkZXJDb25maWcobWV0aG9kKSB7XG5cdCAgICAgIGRlbGV0ZSBjb25maWcuaGVhZGVyc1ttZXRob2RdO1xuXHQgICAgfVxuXHQgICk7XG5cdFxuXHQgIHZhciBhZGFwdGVyID0gY29uZmlnLmFkYXB0ZXIgfHwgZGVmYXVsdHMuYWRhcHRlcjtcblx0XG5cdCAgcmV0dXJuIGFkYXB0ZXIoY29uZmlnKS50aGVuKGZ1bmN0aW9uIG9uQWRhcHRlclJlc29sdXRpb24ocmVzcG9uc2UpIHtcblx0ICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblx0XG5cdCAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuXHQgICAgcmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG5cdCAgICAgIHJlc3BvbnNlLmRhdGEsXG5cdCAgICAgIHJlc3BvbnNlLmhlYWRlcnMsXG5cdCAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuXHQgICAgKTtcblx0XG5cdCAgICByZXR1cm4gcmVzcG9uc2U7XG5cdCAgfSwgZnVuY3Rpb24gb25BZGFwdGVyUmVqZWN0aW9uKHJlYXNvbikge1xuXHQgICAgaWYgKCFpc0NhbmNlbChyZWFzb24pKSB7XG5cdCAgICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblx0XG5cdCAgICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG5cdCAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLnJlc3BvbnNlKSB7XG5cdCAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuXHQgICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEsXG5cdCAgICAgICAgICByZWFzb24ucmVzcG9uc2UuaGVhZGVycyxcblx0ICAgICAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuXHQgICAgICAgICk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcblx0ICB9KTtcblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzM3OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMwKTtcblx0XG5cdC8qKlxuXHQgKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gZGF0YSBUaGUgZGF0YSB0byBiZSB0cmFuc2Zvcm1lZFxuXHQgKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIFRoZSBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdCBvciByZXNwb25zZVxuXHQgKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBmbnMgQSBzaW5nbGUgZnVuY3Rpb24gb3IgQXJyYXkgb2YgZnVuY3Rpb25zXG5cdCAqIEByZXR1cm5zIHsqfSBUaGUgcmVzdWx0aW5nIHRyYW5zZm9ybWVkIGRhdGFcblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLCBoZWFkZXJzLCBmbnMpIHtcblx0ICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cblx0ICB1dGlscy5mb3JFYWNoKGZucywgZnVuY3Rpb24gdHJhbnNmb3JtKGZuKSB7XG5cdCAgICBkYXRhID0gZm4oZGF0YSwgaGVhZGVycyk7XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiBkYXRhO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMzg6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0NhbmNlbCh2YWx1ZSkge1xuXHQgIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTtcblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzM5OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihwcm9jZXNzKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzApO1xuXHR2YXIgbm9ybWFsaXplSGVhZGVyTmFtZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQxKTtcblx0XG5cdHZhciBERUZBVUxUX0NPTlRFTlRfVFlQRSA9IHtcblx0ICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcblx0fTtcblx0XG5cdGZ1bmN0aW9uIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCB2YWx1ZSkge1xuXHQgIGlmICghdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVycykgJiYgdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVyc1snQ29udGVudC1UeXBlJ10pKSB7XG5cdCAgICBoZWFkZXJzWydDb250ZW50LVR5cGUnXSA9IHZhbHVlO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZ2V0RGVmYXVsdEFkYXB0ZXIoKSB7XG5cdCAgdmFyIGFkYXB0ZXI7XG5cdCAgLy8gT25seSBOb2RlLkpTIGhhcyBhIHByb2Nlc3MgdmFyaWFibGUgdGhhdCBpcyBvZiBbW0NsYXNzXV0gcHJvY2Vzc1xuXHQgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpIHtcblx0ICAgIC8vIEZvciBub2RlIHVzZSBIVFRQIGFkYXB0ZXJcblx0ICAgIGFkYXB0ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0Mik7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAvLyBGb3IgYnJvd3NlcnMgdXNlIFhIUiBhZGFwdGVyXG5cdCAgICBhZGFwdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDIpO1xuXHQgIH1cblx0ICByZXR1cm4gYWRhcHRlcjtcblx0fVxuXHRcblx0dmFyIGRlZmF1bHRzID0ge1xuXHQgIGFkYXB0ZXI6IGdldERlZmF1bHRBZGFwdGVyKCksXG5cdFxuXHQgIHRyYW5zZm9ybVJlcXVlc3Q6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXF1ZXN0KGRhdGEsIGhlYWRlcnMpIHtcblx0ICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0FjY2VwdCcpO1xuXHQgICAgbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCAnQ29udGVudC1UeXBlJyk7XG5cdCAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShkYXRhKSB8fFxuXHQgICAgICB1dGlscy5pc0FycmF5QnVmZmVyKGRhdGEpIHx8XG5cdCAgICAgIHV0aWxzLmlzQnVmZmVyKGRhdGEpIHx8XG5cdCAgICAgIHV0aWxzLmlzU3RyZWFtKGRhdGEpIHx8XG5cdCAgICAgIHV0aWxzLmlzRmlsZShkYXRhKSB8fFxuXHQgICAgICB1dGlscy5pc0Jsb2IoZGF0YSlcblx0ICAgICkge1xuXHQgICAgICByZXR1cm4gZGF0YTtcblx0ICAgIH1cblx0ICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyVmlldyhkYXRhKSkge1xuXHQgICAgICByZXR1cm4gZGF0YS5idWZmZXI7XG5cdCAgICB9XG5cdCAgICBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMoZGF0YSkpIHtcblx0ICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOCcpO1xuXHQgICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpO1xuXHQgICAgfVxuXHQgICAgaWYgKHV0aWxzLmlzT2JqZWN0KGRhdGEpKSB7XG5cdCAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04Jyk7XG5cdCAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBkYXRhO1xuXHQgIH1dLFxuXHRcblx0ICB0cmFuc2Zvcm1SZXNwb25zZTogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKGRhdGEpIHtcblx0ICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuXHQgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7IC8qIElnbm9yZSAqLyB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGF0YTtcblx0ICB9XSxcblx0XG5cdCAgLyoqXG5cdCAgICogQSB0aW1lb3V0IGluIG1pbGxpc2Vjb25kcyB0byBhYm9ydCBhIHJlcXVlc3QuIElmIHNldCB0byAwIChkZWZhdWx0KSBhXG5cdCAgICogdGltZW91dCBpcyBub3QgY3JlYXRlZC5cblx0ICAgKi9cblx0ICB0aW1lb3V0OiAwLFxuXHRcblx0ICB4c3JmQ29va2llTmFtZTogJ1hTUkYtVE9LRU4nLFxuXHQgIHhzcmZIZWFkZXJOYW1lOiAnWC1YU1JGLVRPS0VOJyxcblx0XG5cdCAgbWF4Q29udGVudExlbmd0aDogLTEsXG5cdFxuXHQgIHZhbGlkYXRlU3RhdHVzOiBmdW5jdGlvbiB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpIHtcblx0ICAgIHJldHVybiBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMDtcblx0ICB9XG5cdH07XG5cdFxuXHRkZWZhdWx0cy5oZWFkZXJzID0ge1xuXHQgIGNvbW1vbjoge1xuXHQgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonXG5cdCAgfVxuXHR9O1xuXHRcblx0dXRpbHMuZm9yRWFjaChbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuXHQgIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHt9O1xuXHR9KTtcblx0XG5cdHV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG5cdCAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0gdXRpbHMubWVyZ2UoREVGQVVMVF9DT05URU5UX1RZUEUpO1xuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZGVmYXVsdHM7XG5cdFxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygzNDApKSlcblxuLyoqKi8gfSksXG5cbi8qKiovIDM0MDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblx0dmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXHRcblx0Ly8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG5cdC8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuXHQvLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG5cdC8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cdFxuXHR2YXIgY2FjaGVkU2V0VGltZW91dDtcblx0dmFyIGNhY2hlZENsZWFyVGltZW91dDtcblx0XG5cdGZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcblx0fVxuXHRmdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0KGZ1bmN0aW9uICgpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgfVxuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG5cdCAgICB9XG5cdH0gKCkpXG5cdGZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG5cdCAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuXHQgICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcblx0ICAgIH1cblx0ICAgIHRyeSB7XG5cdCAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuXHQgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9IGNhdGNoKGUpe1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG5cdCAgICAgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3Jcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdFxuXHR9XG5cdGZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcblx0ICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuXHQgICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcblx0ICAgIH1cblx0ICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9IGNhdGNoIChlKXtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpe1xuXHQgICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cblx0ICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHRcblx0XG5cdH1cblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciBkcmFpbmluZyA9IGZhbHNlO1xuXHR2YXIgY3VycmVudFF1ZXVlO1xuXHR2YXIgcXVldWVJbmRleCA9IC0xO1xuXHRcblx0ZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuXHQgICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgfVxuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIGRyYWluUXVldWUoKTtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcblx0ICAgIGlmIChkcmFpbmluZykge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuXHQgICAgZHJhaW5pbmcgPSB0cnVlO1xuXHRcblx0ICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB3aGlsZShsZW4pIHtcblx0ICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcblx0ICAgICAgICBxdWV1ZSA9IFtdO1xuXHQgICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcblx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG5cdCAgICB9XG5cdCAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuXHQgICAgZHJhaW5pbmcgPSBmYWxzZTtcblx0ICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcblx0fVxuXHRcblx0cHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcblx0ICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG5cdCAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuXHQgICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG5cdCAgICB9XG5cdH07XG5cdFxuXHQvLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5cdGZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuXHQgICAgdGhpcy5mdW4gPSBmdW47XG5cdCAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG5cdH1cblx0SXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG5cdH07XG5cdHByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5cdHByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5cdHByb2Nlc3MuZW52ID0ge307XG5cdHByb2Nlc3MuYXJndiA9IFtdO1xuXHRwcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcblx0cHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHRwcm9jZXNzLm9uID0gbm9vcDtcblx0cHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3Mub25jZSA9IG5vb3A7XG5cdHByb2Nlc3Mub2ZmID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcblx0cHJvY2Vzcy5lbWl0ID0gbm9vcDtcblx0cHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXHRcblx0cHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXHRcblx0cHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0XG5cdHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5cdHByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNDE6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzApO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsIG5vcm1hbGl6ZWROYW1lKSB7XG5cdCAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbiBwcm9jZXNzSGVhZGVyKHZhbHVlLCBuYW1lKSB7XG5cdCAgICBpZiAobmFtZSAhPT0gbm9ybWFsaXplZE5hbWUgJiYgbmFtZS50b1VwcGVyQ2FzZSgpID09PSBub3JtYWxpemVkTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG5cdCAgICAgIGhlYWRlcnNbbm9ybWFsaXplZE5hbWVdID0gdmFsdWU7XG5cdCAgICAgIGRlbGV0ZSBoZWFkZXJzW25hbWVdO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNDI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzApO1xuXHR2YXIgc2V0dGxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDMpO1xuXHR2YXIgYnVpbGRVUkwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNCk7XG5cdHZhciBwYXJzZUhlYWRlcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0Nik7XG5cdHZhciBpc1VSTFNhbWVPcmlnaW4gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0Nyk7XG5cdHZhciBjcmVhdGVFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ0KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpIHtcblx0ICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gZGlzcGF0Y2hYaHJSZXF1ZXN0KHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgdmFyIHJlcXVlc3REYXRhID0gY29uZmlnLmRhdGE7XG5cdCAgICB2YXIgcmVxdWVzdEhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcblx0XG5cdCAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShyZXF1ZXN0RGF0YSkpIHtcblx0ICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzWydDb250ZW50LVR5cGUnXTsgLy8gTGV0IHRoZSBicm93c2VyIHNldCBpdFxuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdFxuXHQgICAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuXHQgICAgaWYgKGNvbmZpZy5hdXRoKSB7XG5cdCAgICAgIHZhciB1c2VybmFtZSA9IGNvbmZpZy5hdXRoLnVzZXJuYW1lIHx8ICcnO1xuXHQgICAgICB2YXIgcGFzc3dvcmQgPSBjb25maWcuYXV0aC5wYXNzd29yZCB8fCAnJztcblx0ICAgICAgcmVxdWVzdEhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCYXNpYyAnICsgYnRvYSh1c2VybmFtZSArICc6JyArIHBhc3N3b3JkKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXF1ZXN0Lm9wZW4oY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCBidWlsZFVSTChjb25maWcudXJsLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplciksIHRydWUpO1xuXHRcblx0ICAgIC8vIFNldCB0aGUgcmVxdWVzdCB0aW1lb3V0IGluIE1TXG5cdCAgICByZXF1ZXN0LnRpbWVvdXQgPSBjb25maWcudGltZW91dDtcblx0XG5cdCAgICAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlXG5cdCAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUxvYWQoKSB7XG5cdCAgICAgIGlmICghcmVxdWVzdCB8fCByZXF1ZXN0LnJlYWR5U3RhdGUgIT09IDQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZVxuXHQgICAgICAvLyBoYW5kbGVkIGJ5IG9uZXJyb3IgaW5zdGVhZFxuXHQgICAgICAvLyBXaXRoIG9uZSBleGNlcHRpb246IHJlcXVlc3QgdGhhdCB1c2luZyBmaWxlOiBwcm90b2NvbCwgbW9zdCBicm93c2Vyc1xuXHQgICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0XG5cdCAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMCAmJiAhKHJlcXVlc3QucmVzcG9uc2VVUkwgJiYgcmVxdWVzdC5yZXNwb25zZVVSTC5pbmRleE9mKCdmaWxlOicpID09PSAwKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gUHJlcGFyZSB0aGUgcmVzcG9uc2Vcblx0ICAgICAgdmFyIHJlc3BvbnNlSGVhZGVycyA9ICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgPyBwYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkgOiBudWxsO1xuXHQgICAgICB2YXIgcmVzcG9uc2VEYXRhID0gIWNvbmZpZy5yZXNwb25zZVR5cGUgfHwgY29uZmlnLnJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnID8gcmVxdWVzdC5yZXNwb25zZVRleHQgOiByZXF1ZXN0LnJlc3BvbnNlO1xuXHQgICAgICB2YXIgcmVzcG9uc2UgPSB7XG5cdCAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuXHQgICAgICAgIHN0YXR1czogcmVxdWVzdC5zdGF0dXMsXG5cdCAgICAgICAgc3RhdHVzVGV4dDogcmVxdWVzdC5zdGF0dXNUZXh0LFxuXHQgICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcblx0ICAgICAgICBjb25maWc6IGNvbmZpZyxcblx0ICAgICAgICByZXF1ZXN0OiByZXF1ZXN0XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSk7XG5cdFxuXHQgICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG5cdCAgICAgIHJlcXVlc3QgPSBudWxsO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBIYW5kbGUgYnJvd3NlciByZXF1ZXN0IGNhbmNlbGxhdGlvbiAoYXMgb3Bwb3NlZCB0byBhIG1hbnVhbCBjYW5jZWxsYXRpb24pXG5cdCAgICByZXF1ZXN0Lm9uYWJvcnQgPSBmdW5jdGlvbiBoYW5kbGVBYm9ydCgpIHtcblx0ICAgICAgaWYgKCFyZXF1ZXN0KSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ1JlcXVlc3QgYWJvcnRlZCcsIGNvbmZpZywgJ0VDT05OQUJPUlRFRCcsIHJlcXVlc3QpKTtcblx0XG5cdCAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3Rcblx0ICAgICAgcmVxdWVzdCA9IG51bGw7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEhhbmRsZSBsb3cgbGV2ZWwgbmV0d29yayBlcnJvcnNcblx0ICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkge1xuXHQgICAgICAvLyBSZWFsIGVycm9ycyBhcmUgaGlkZGVuIGZyb20gdXMgYnkgdGhlIGJyb3dzZXJcblx0ICAgICAgLy8gb25lcnJvciBzaG91bGQgb25seSBmaXJlIGlmIGl0J3MgYSBuZXR3b3JrIGVycm9yXG5cdCAgICAgIHJlamVjdChjcmVhdGVFcnJvcignTmV0d29yayBFcnJvcicsIGNvbmZpZywgbnVsbCwgcmVxdWVzdCkpO1xuXHRcblx0ICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuXHQgICAgICByZXF1ZXN0ID0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gSGFuZGxlIHRpbWVvdXRcblx0ICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHtcblx0ICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCd0aW1lb3V0IG9mICcgKyBjb25maWcudGltZW91dCArICdtcyBleGNlZWRlZCcsIGNvbmZpZywgJ0VDT05OQUJPUlRFRCcsXG5cdCAgICAgICAgcmVxdWVzdCkpO1xuXHRcblx0ICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuXHQgICAgICByZXF1ZXN0ID0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gQWRkIHhzcmYgaGVhZGVyXG5cdCAgICAvLyBUaGlzIGlzIG9ubHkgZG9uZSBpZiBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudC5cblx0ICAgIC8vIFNwZWNpZmljYWxseSBub3QgaWYgd2UncmUgaW4gYSB3ZWIgd29ya2VyLCBvciByZWFjdC1uYXRpdmUuXG5cdCAgICBpZiAodXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSkge1xuXHQgICAgICB2YXIgY29va2llcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ4KTtcblx0XG5cdCAgICAgIC8vIEFkZCB4c3JmIGhlYWRlclxuXHQgICAgICB2YXIgeHNyZlZhbHVlID0gKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMgfHwgaXNVUkxTYW1lT3JpZ2luKGNvbmZpZy51cmwpKSAmJiBjb25maWcueHNyZkNvb2tpZU5hbWUgP1xuXHQgICAgICAgIGNvb2tpZXMucmVhZChjb25maWcueHNyZkNvb2tpZU5hbWUpIDpcblx0ICAgICAgICB1bmRlZmluZWQ7XG5cdFxuXHQgICAgICBpZiAoeHNyZlZhbHVlKSB7XG5cdCAgICAgICAgcmVxdWVzdEhlYWRlcnNbY29uZmlnLnhzcmZIZWFkZXJOYW1lXSA9IHhzcmZWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIEFkZCBoZWFkZXJzIHRvIHRoZSByZXF1ZXN0XG5cdCAgICBpZiAoJ3NldFJlcXVlc3RIZWFkZXInIGluIHJlcXVlc3QpIHtcblx0ICAgICAgdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycywgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgcmVxdWVzdERhdGEgPT09ICd1bmRlZmluZWQnICYmIGtleS50b0xvd2VyQ2FzZSgpID09PSAnY29udGVudC10eXBlJykge1xuXHQgICAgICAgICAgLy8gUmVtb3ZlIENvbnRlbnQtVHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuXHQgICAgICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzW2tleV07XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIE90aGVyd2lzZSBhZGQgaGVhZGVyIHRvIHRoZSByZXF1ZXN0XG5cdCAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gQWRkIHdpdGhDcmVkZW50aWFscyB0byByZXF1ZXN0IGlmIG5lZWRlZFxuXHQgICAgaWYgKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpIHtcblx0ICAgICAgcmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEFkZCByZXNwb25zZVR5cGUgdG8gcmVxdWVzdCBpZiBuZWVkZWRcblx0ICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmVxdWVzdC5yZXNwb25zZVR5cGUgPSBjb25maWcucmVzcG9uc2VUeXBlO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgLy8gRXhwZWN0ZWQgRE9NRXhjZXB0aW9uIHRocm93biBieSBicm93c2VycyBub3QgY29tcGF0aWJsZSBYTUxIdHRwUmVxdWVzdCBMZXZlbCAyLlxuXHQgICAgICAgIC8vIEJ1dCwgdGhpcyBjYW4gYmUgc3VwcHJlc3NlZCBmb3IgJ2pzb24nIHR5cGUgYXMgaXQgY2FuIGJlIHBhcnNlZCBieSBkZWZhdWx0ICd0cmFuc2Zvcm1SZXNwb25zZScgZnVuY3Rpb24uXG5cdCAgICAgICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUgIT09ICdqc29uJykge1xuXHQgICAgICAgICAgdGhyb3cgZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBIYW5kbGUgcHJvZ3Jlc3MgaWYgbmVlZGVkXG5cdCAgICBpZiAodHlwZW9mIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIE5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCB1cGxvYWQgZXZlbnRzXG5cdCAgICBpZiAodHlwZW9mIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nICYmIHJlcXVlc3QudXBsb2FkKSB7XG5cdCAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MpO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcblx0ICAgICAgLy8gSGFuZGxlIGNhbmNlbGxhdGlvblxuXHQgICAgICBjb25maWcuY2FuY2VsVG9rZW4ucHJvbWlzZS50aGVuKGZ1bmN0aW9uIG9uQ2FuY2VsZWQoY2FuY2VsKSB7XG5cdCAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXF1ZXN0LmFib3J0KCk7XG5cdCAgICAgICAgcmVqZWN0KGNhbmNlbCk7XG5cdCAgICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuXHQgICAgICAgIHJlcXVlc3QgPSBudWxsO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAocmVxdWVzdERhdGEgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICByZXF1ZXN0RGF0YSA9IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gU2VuZCB0aGUgcmVxdWVzdFxuXHQgICAgcmVxdWVzdC5zZW5kKHJlcXVlc3REYXRhKTtcblx0ICB9KTtcblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzQzOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBjcmVhdGVFcnJvciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQ0KTtcblx0XG5cdC8qKlxuXHQgKiBSZXNvbHZlIG9yIHJlamVjdCBhIFByb21pc2UgYmFzZWQgb24gcmVzcG9uc2Ugc3RhdHVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIEEgZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgcHJvbWlzZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gcmVqZWN0IEEgZnVuY3Rpb24gdGhhdCByZWplY3RzIHRoZSBwcm9taXNlLlxuXHQgKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgVGhlIHJlc3BvbnNlLlxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCByZXNwb25zZSkge1xuXHQgIHZhciB2YWxpZGF0ZVN0YXR1cyA9IHJlc3BvbnNlLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztcblx0ICBpZiAoIXZhbGlkYXRlU3RhdHVzIHx8IHZhbGlkYXRlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHtcblx0ICAgIHJlc29sdmUocmVzcG9uc2UpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZWplY3QoY3JlYXRlRXJyb3IoXG5cdCAgICAgICdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1cyBjb2RlICcgKyByZXNwb25zZS5zdGF0dXMsXG5cdCAgICAgIHJlc3BvbnNlLmNvbmZpZyxcblx0ICAgICAgbnVsbCxcblx0ICAgICAgcmVzcG9uc2UucmVxdWVzdCxcblx0ICAgICAgcmVzcG9uc2Vcblx0ICAgICkpO1xuXHQgIH1cblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzQ0OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBlbmhhbmNlRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0NSk7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBtZXNzYWdlLCBjb25maWcsIGVycm9yIGNvZGUsIHJlcXVlc3QgYW5kIHJlc3BvbnNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cblx0ICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG5cdCAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGNyZWF0ZWQgZXJyb3IuXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKG1lc3NhZ2UsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcblx0ICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSk7XG5cdCAgcmV0dXJuIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSk7XG5cdH07XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM0NTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogVXBkYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBjb25maWcsIGVycm9yIGNvZGUsIGFuZCByZXNwb25zZS5cblx0ICpcblx0ICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgVGhlIGVycm9yIHRvIHVwZGF0ZS5cblx0ICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gW2NvZGVdIFRoZSBlcnJvciBjb2RlIChmb3IgZXhhbXBsZSwgJ0VDT05OQUJPUlRFRCcpLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG5cdCAqIEByZXR1cm5zIHtFcnJvcn0gVGhlIGVycm9yLlxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcblx0ICBlcnJvci5jb25maWcgPSBjb25maWc7XG5cdCAgaWYgKGNvZGUpIHtcblx0ICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuXHQgIH1cblx0XG5cdCAgZXJyb3IucmVxdWVzdCA9IHJlcXVlc3Q7XG5cdCAgZXJyb3IucmVzcG9uc2UgPSByZXNwb25zZTtcblx0ICBlcnJvci5pc0F4aW9zRXJyb3IgPSB0cnVlO1xuXHRcblx0ICBlcnJvci50b0pTT04gPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIC8vIFN0YW5kYXJkXG5cdCAgICAgIG1lc3NhZ2U6IHRoaXMubWVzc2FnZSxcblx0ICAgICAgbmFtZTogdGhpcy5uYW1lLFxuXHQgICAgICAvLyBNaWNyb3NvZnRcblx0ICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sXG5cdCAgICAgIG51bWJlcjogdGhpcy5udW1iZXIsXG5cdCAgICAgIC8vIE1vemlsbGFcblx0ICAgICAgZmlsZU5hbWU6IHRoaXMuZmlsZU5hbWUsXG5cdCAgICAgIGxpbmVOdW1iZXI6IHRoaXMubGluZU51bWJlcixcblx0ICAgICAgY29sdW1uTnVtYmVyOiB0aGlzLmNvbHVtbk51bWJlcixcblx0ICAgICAgc3RhY2s6IHRoaXMuc3RhY2ssXG5cdCAgICAgIC8vIEF4aW9zXG5cdCAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG5cdCAgICAgIGNvZGU6IHRoaXMuY29kZVxuXHQgICAgfTtcblx0ICB9O1xuXHQgIHJldHVybiBlcnJvcjtcblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzQ2OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMwKTtcblx0XG5cdC8vIEhlYWRlcnMgd2hvc2UgZHVwbGljYXRlcyBhcmUgaWdub3JlZCBieSBub2RlXG5cdC8vIGMuZi4gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9odHRwLmh0bWwjaHR0cF9tZXNzYWdlX2hlYWRlcnNcblx0dmFyIGlnbm9yZUR1cGxpY2F0ZU9mID0gW1xuXHQgICdhZ2UnLCAnYXV0aG9yaXphdGlvbicsICdjb250ZW50LWxlbmd0aCcsICdjb250ZW50LXR5cGUnLCAnZXRhZycsXG5cdCAgJ2V4cGlyZXMnLCAnZnJvbScsICdob3N0JywgJ2lmLW1vZGlmaWVkLXNpbmNlJywgJ2lmLXVubW9kaWZpZWQtc2luY2UnLFxuXHQgICdsYXN0LW1vZGlmaWVkJywgJ2xvY2F0aW9uJywgJ21heC1mb3J3YXJkcycsICdwcm94eS1hdXRob3JpemF0aW9uJyxcblx0ICAncmVmZXJlcicsICdyZXRyeS1hZnRlcicsICd1c2VyLWFnZW50J1xuXHRdO1xuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGhlYWRlcnMgaW50byBhbiBvYmplY3Rcblx0ICpcblx0ICogYGBgXG5cdCAqIERhdGU6IFdlZCwgMjcgQXVnIDIwMTQgMDg6NTg6NDkgR01UXG5cdCAqIENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvblxuXHQgKiBDb25uZWN0aW9uOiBrZWVwLWFsaXZlXG5cdCAqIFRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkXG5cdCAqIGBgYFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaGVhZGVycyBIZWFkZXJzIG5lZWRpbmcgdG8gYmUgcGFyc2VkXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlcnMgcGFyc2VkIGludG8gYW4gb2JqZWN0XG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhoZWFkZXJzKSB7XG5cdCAgdmFyIHBhcnNlZCA9IHt9O1xuXHQgIHZhciBrZXk7XG5cdCAgdmFyIHZhbDtcblx0ICB2YXIgaTtcblx0XG5cdCAgaWYgKCFoZWFkZXJzKSB7IHJldHVybiBwYXJzZWQ7IH1cblx0XG5cdCAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLnNwbGl0KCdcXG4nKSwgZnVuY3Rpb24gcGFyc2VyKGxpbmUpIHtcblx0ICAgIGkgPSBsaW5lLmluZGV4T2YoJzonKTtcblx0ICAgIGtleSA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoMCwgaSkpLnRvTG93ZXJDYXNlKCk7XG5cdCAgICB2YWwgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKGkgKyAxKSk7XG5cdFxuXHQgICAgaWYgKGtleSkge1xuXHQgICAgICBpZiAocGFyc2VkW2tleV0gJiYgaWdub3JlRHVwbGljYXRlT2YuaW5kZXhPZihrZXkpID49IDApIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGtleSA9PT0gJ3NldC1jb29raWUnKSB7XG5cdCAgICAgICAgcGFyc2VkW2tleV0gPSAocGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSA6IFtdKS5jb25jYXQoW3ZhbF0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArICcsICcgKyB2YWwgOiB2YWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIHBhcnNlZDtcblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzQ3OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMwKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKFxuXHQgIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXHRcblx0ICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgaGF2ZSBmdWxsIHN1cHBvcnQgb2YgdGhlIEFQSXMgbmVlZGVkIHRvIHRlc3Rcblx0ICAvLyB3aGV0aGVyIHRoZSByZXF1ZXN0IFVSTCBpcyBvZiB0aGUgc2FtZSBvcmlnaW4gYXMgY3VycmVudCBsb2NhdGlvbi5cblx0ICAgIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG5cdCAgICAgIHZhciBtc2llID0gLyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcblx0ICAgICAgdmFyIHVybFBhcnNpbmdOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXHQgICAgICB2YXIgb3JpZ2luVVJMO1xuXHRcblx0ICAgICAgLyoqXG5cdCAgICAqIFBhcnNlIGEgVVJMIHRvIGRpc2NvdmVyIGl0J3MgY29tcG9uZW50c1xuXHQgICAgKlxuXHQgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsIFRoZSBVUkwgdG8gYmUgcGFyc2VkXG5cdCAgICAqIEByZXR1cm5zIHtPYmplY3R9XG5cdCAgICAqL1xuXHQgICAgICBmdW5jdGlvbiByZXNvbHZlVVJMKHVybCkge1xuXHQgICAgICAgIHZhciBocmVmID0gdXJsO1xuXHRcblx0ICAgICAgICBpZiAobXNpZSkge1xuXHQgICAgICAgIC8vIElFIG5lZWRzIGF0dHJpYnV0ZSBzZXQgdHdpY2UgdG8gbm9ybWFsaXplIHByb3BlcnRpZXNcblx0ICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuXHQgICAgICAgICAgaHJlZiA9IHVybFBhcnNpbmdOb2RlLmhyZWY7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcblx0XG5cdCAgICAgICAgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuXHQgICAgICAgIHJldHVybiB7XG5cdCAgICAgICAgICBocmVmOiB1cmxQYXJzaW5nTm9kZS5ocmVmLFxuXHQgICAgICAgICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcblx0ICAgICAgICAgIGhvc3Q6IHVybFBhcnNpbmdOb2RlLmhvc3QsXG5cdCAgICAgICAgICBzZWFyY2g6IHVybFBhcnNpbmdOb2RlLnNlYXJjaCA/IHVybFBhcnNpbmdOb2RlLnNlYXJjaC5yZXBsYWNlKC9eXFw/LywgJycpIDogJycsXG5cdCAgICAgICAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLFxuXHQgICAgICAgICAgaG9zdG5hbWU6IHVybFBhcnNpbmdOb2RlLmhvc3RuYW1lLFxuXHQgICAgICAgICAgcG9ydDogdXJsUGFyc2luZ05vZGUucG9ydCxcblx0ICAgICAgICAgIHBhdGhuYW1lOiAodXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpID9cblx0ICAgICAgICAgICAgdXJsUGFyc2luZ05vZGUucGF0aG5hbWUgOlxuXHQgICAgICAgICAgICAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxuXHQgICAgICAgIH07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXHRcblx0ICAgICAgLyoqXG5cdCAgICAqIERldGVybWluZSBpZiBhIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luIGFzIHRoZSBjdXJyZW50IGxvY2F0aW9uXG5cdCAgICAqXG5cdCAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0VVJMIFRoZSBVUkwgdG8gdGVzdFxuXHQgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAgICAqL1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKHJlcXVlc3RVUkwpIHtcblx0ICAgICAgICB2YXIgcGFyc2VkID0gKHV0aWxzLmlzU3RyaW5nKHJlcXVlc3RVUkwpKSA/IHJlc29sdmVVUkwocmVxdWVzdFVSTCkgOiByZXF1ZXN0VVJMO1xuXHQgICAgICAgIHJldHVybiAocGFyc2VkLnByb3RvY29sID09PSBvcmlnaW5VUkwucHJvdG9jb2wgJiZcblx0ICAgICAgICAgICAgcGFyc2VkLmhvc3QgPT09IG9yaWdpblVSTC5ob3N0KTtcblx0ICAgICAgfTtcblx0ICAgIH0pKCkgOlxuXHRcblx0ICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnZzICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuXHQgICAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbigpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfTtcblx0ICAgIH0pKClcblx0KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzQ4OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMwKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gKFxuXHQgIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXHRcblx0ICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWVcblx0ICAgIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkge1xuXHQgICAgICAgICAgdmFyIGNvb2tpZSA9IFtdO1xuXHQgICAgICAgICAgY29va2llLnB1c2gobmFtZSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xuXHRcblx0ICAgICAgICAgIGlmICh1dGlscy5pc051bWJlcihleHBpcmVzKSkge1xuXHQgICAgICAgICAgICBjb29raWUucHVzaCgnZXhwaXJlcz0nICsgbmV3IERhdGUoZXhwaXJlcykudG9HTVRTdHJpbmcoKSk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKHBhdGgpKSB7XG5cdCAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdwYXRoPScgKyBwYXRoKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoZG9tYWluKSkge1xuXHQgICAgICAgICAgICBjb29raWUucHVzaCgnZG9tYWluPScgKyBkb21haW4pO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGlmIChzZWN1cmUgPT09IHRydWUpIHtcblx0ICAgICAgICAgICAgY29va2llLnB1c2goJ3NlY3VyZScpO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGRvY3VtZW50LmNvb2tpZSA9IGNvb2tpZS5qb2luKCc7ICcpO1xuXHQgICAgICAgIH0sXG5cdFxuXHQgICAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQobmFtZSkge1xuXHQgICAgICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcblx0ICAgICAgICAgIHJldHVybiAobWF0Y2ggPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbM10pIDogbnVsbCk7XG5cdCAgICAgICAgfSxcblx0XG5cdCAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUobmFtZSkge1xuXHQgICAgICAgICAgdGhpcy53cml0ZShuYW1lLCAnJywgRGF0ZS5ub3coKSAtIDg2NDAwMDAwKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICB9KSgpIDpcblx0XG5cdCAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52ICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuXHQgICAgKGZ1bmN0aW9uIG5vblN0YW5kYXJkQnJvd3NlckVudigpIHtcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUoKSB7fSxcblx0ICAgICAgICByZWFkOiBmdW5jdGlvbiByZWFkKCkgeyByZXR1cm4gbnVsbDsgfSxcblx0ICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9XG5cdCAgICAgIH07XG5cdCAgICB9KSgpXG5cdCk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM0OTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlXG5cdCAqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBzcGVjaWZpZWQgVVJMIGlzIGFic29sdXRlLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNBYnNvbHV0ZVVSTCh1cmwpIHtcblx0ICAvLyBBIFVSTCBpcyBjb25zaWRlcmVkIGFic29sdXRlIGlmIGl0IGJlZ2lucyB3aXRoIFwiPHNjaGVtZT46Ly9cIiBvciBcIi8vXCIgKHByb3RvY29sLXJlbGF0aXZlIFVSTCkuXG5cdCAgLy8gUkZDIDM5ODYgZGVmaW5lcyBzY2hlbWUgbmFtZSBhcyBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgYmVnaW5uaW5nIHdpdGggYSBsZXR0ZXIgYW5kIGZvbGxvd2VkXG5cdCAgLy8gYnkgYW55IGNvbWJpbmF0aW9uIG9mIGxldHRlcnMsIGRpZ2l0cywgcGx1cywgcGVyaW9kLCBvciBoeXBoZW4uXG5cdCAgcmV0dXJuIC9eKFthLXpdW2EtelxcZFxcK1xcLVxcLl0qOik/XFwvXFwvL2kudGVzdCh1cmwpO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNTA6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBuZXcgVVJMIGJ5IGNvbWJpbmluZyB0aGUgc3BlY2lmaWVkIFVSTHNcblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVSTCBUaGUgcmVsYXRpdmUgVVJMXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21iaW5lZCBVUkxcblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY29tYmluZVVSTHMoYmFzZVVSTCwgcmVsYXRpdmVVUkwpIHtcblx0ICByZXR1cm4gcmVsYXRpdmVVUkxcblx0ICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8rJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG5cdCAgICA6IGJhc2VVUkw7XG5cdH07XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM1MTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMCk7XG5cdFxuXHQvKipcblx0ICogQ29uZmlnLXNwZWNpZmljIG1lcmdlLWZ1bmN0aW9uIHdoaWNoIGNyZWF0ZXMgYSBuZXcgY29uZmlnLW9iamVjdFxuXHQgKiBieSBtZXJnaW5nIHR3byBjb25maWd1cmF0aW9uIG9iamVjdHMgdG9nZXRoZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcxXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcyXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IE5ldyBvYmplY3QgcmVzdWx0aW5nIGZyb20gbWVyZ2luZyBjb25maWcyIHRvIGNvbmZpZzFcblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbWVyZ2VDb25maWcoY29uZmlnMSwgY29uZmlnMikge1xuXHQgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuXHQgIGNvbmZpZzIgPSBjb25maWcyIHx8IHt9O1xuXHQgIHZhciBjb25maWcgPSB7fTtcblx0XG5cdCAgdXRpbHMuZm9yRWFjaChbJ3VybCcsICdtZXRob2QnLCAncGFyYW1zJywgJ2RhdGEnXSwgZnVuY3Rpb24gdmFsdWVGcm9tQ29uZmlnMihwcm9wKSB7XG5cdCAgICBpZiAodHlwZW9mIGNvbmZpZzJbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzJbcHJvcF07XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIHV0aWxzLmZvckVhY2goWydoZWFkZXJzJywgJ2F1dGgnLCAncHJveHknXSwgZnVuY3Rpb24gbWVyZ2VEZWVwUHJvcGVydGllcyhwcm9wKSB7XG5cdCAgICBpZiAodXRpbHMuaXNPYmplY3QoY29uZmlnMltwcm9wXSkpIHtcblx0ICAgICAgY29uZmlnW3Byb3BdID0gdXRpbHMuZGVlcE1lcmdlKGNvbmZpZzFbcHJvcF0sIGNvbmZpZzJbcHJvcF0pO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnMltwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMltwcm9wXTtcblx0ICAgIH0gZWxzZSBpZiAodXRpbHMuaXNPYmplY3QoY29uZmlnMVtwcm9wXSkpIHtcblx0ICAgICAgY29uZmlnW3Byb3BdID0gdXRpbHMuZGVlcE1lcmdlKGNvbmZpZzFbcHJvcF0pO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnMVtwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMVtwcm9wXTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgdXRpbHMuZm9yRWFjaChbXG5cdCAgICAnYmFzZVVSTCcsICd0cmFuc2Zvcm1SZXF1ZXN0JywgJ3RyYW5zZm9ybVJlc3BvbnNlJywgJ3BhcmFtc1NlcmlhbGl6ZXInLFxuXHQgICAgJ3RpbWVvdXQnLCAnd2l0aENyZWRlbnRpYWxzJywgJ2FkYXB0ZXInLCAncmVzcG9uc2VUeXBlJywgJ3hzcmZDb29raWVOYW1lJyxcblx0ICAgICd4c3JmSGVhZGVyTmFtZScsICdvblVwbG9hZFByb2dyZXNzJywgJ29uRG93bmxvYWRQcm9ncmVzcycsICdtYXhDb250ZW50TGVuZ3RoJyxcblx0ICAgICd2YWxpZGF0ZVN0YXR1cycsICdtYXhSZWRpcmVjdHMnLCAnaHR0cEFnZW50JywgJ2h0dHBzQWdlbnQnLCAnY2FuY2VsVG9rZW4nLFxuXHQgICAgJ3NvY2tldFBhdGgnXG5cdCAgXSwgZnVuY3Rpb24gZGVmYXVsdFRvQ29uZmlnMihwcm9wKSB7XG5cdCAgICBpZiAodHlwZW9mIGNvbmZpZzJbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzJbcHJvcF07XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWcxW3Byb3BdICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICBjb25maWdbcHJvcF0gPSBjb25maWcxW3Byb3BdO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICByZXR1cm4gY29uZmlnO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNTI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIEEgYENhbmNlbGAgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gb3BlcmF0aW9uIGlzIGNhbmNlbGVkLlxuXHQgKlxuXHQgKiBAY2xhc3Ncblx0ICogQHBhcmFtIHtzdHJpbmc9fSBtZXNzYWdlIFRoZSBtZXNzYWdlLlxuXHQgKi9cblx0ZnVuY3Rpb24gQ2FuY2VsKG1lc3NhZ2UpIHtcblx0ICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuXHR9XG5cdFxuXHRDYW5jZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG5cdCAgcmV0dXJuICdDYW5jZWwnICsgKHRoaXMubWVzc2FnZSA/ICc6ICcgKyB0aGlzLm1lc3NhZ2UgOiAnJyk7XG5cdH07XG5cdFxuXHRDYW5jZWwucHJvdG90eXBlLl9fQ0FOQ0VMX18gPSB0cnVlO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBDYW5jZWw7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM1Mzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgQ2FuY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNTIpO1xuXHRcblx0LyoqXG5cdCAqIEEgYENhbmNlbFRva2VuYCBpcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZXF1ZXN0IGNhbmNlbGxhdGlvbiBvZiBhbiBvcGVyYXRpb24uXG5cdCAqXG5cdCAqIEBjbGFzc1xuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBDYW5jZWxUb2tlbihleGVjdXRvcikge1xuXHQgIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcblx0ICB9XG5cdFxuXHQgIHZhciByZXNvbHZlUHJvbWlzZTtcblx0ICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiBwcm9taXNlRXhlY3V0b3IocmVzb2x2ZSkge1xuXHQgICAgcmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xuXHQgIH0pO1xuXHRcblx0ICB2YXIgdG9rZW4gPSB0aGlzO1xuXHQgIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlKSB7XG5cdCAgICBpZiAodG9rZW4ucmVhc29uKSB7XG5cdCAgICAgIC8vIENhbmNlbGxhdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlcXVlc3RlZFxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbChtZXNzYWdlKTtcblx0ICAgIHJlc29sdmVQcm9taXNlKHRva2VuLnJlYXNvbik7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuXHQgKi9cblx0Q2FuY2VsVG9rZW4ucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQgPSBmdW5jdGlvbiB0aHJvd0lmUmVxdWVzdGVkKCkge1xuXHQgIGlmICh0aGlzLnJlYXNvbikge1xuXHQgICAgdGhyb3cgdGhpcy5yZWFzb247XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJldHVybnMgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYSBuZXcgYENhbmNlbFRva2VuYCBhbmQgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCxcblx0ICogY2FuY2VscyB0aGUgYENhbmNlbFRva2VuYC5cblx0ICovXG5cdENhbmNlbFRva2VuLnNvdXJjZSA9IGZ1bmN0aW9uIHNvdXJjZSgpIHtcblx0ICB2YXIgY2FuY2VsO1xuXHQgIHZhciB0b2tlbiA9IG5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKSB7XG5cdCAgICBjYW5jZWwgPSBjO1xuXHQgIH0pO1xuXHQgIHJldHVybiB7XG5cdCAgICB0b2tlbjogdG9rZW4sXG5cdCAgICBjYW5jZWw6IGNhbmNlbFxuXHQgIH07XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IENhbmNlbFRva2VuO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNTQ6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIFN5bnRhY3RpYyBzdWdhciBmb3IgaW52b2tpbmcgYSBmdW5jdGlvbiBhbmQgZXhwYW5kaW5nIGFuIGFycmF5IGZvciBhcmd1bWVudHMuXG5cdCAqXG5cdCAqIENvbW1vbiB1c2UgY2FzZSB3b3VsZCBiZSB0byB1c2UgYEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseWAuXG5cdCAqXG5cdCAqICBgYGBqc1xuXHQgKiAgZnVuY3Rpb24gZih4LCB5LCB6KSB7fVxuXHQgKiAgdmFyIGFyZ3MgPSBbMSwgMiwgM107XG5cdCAqICBmLmFwcGx5KG51bGwsIGFyZ3MpO1xuXHQgKiAgYGBgXG5cdCAqXG5cdCAqIFdpdGggYHNwcmVhZGAgdGhpcyBleGFtcGxlIGNhbiBiZSByZS13cml0dGVuLlxuXHQgKlxuXHQgKiAgYGBganNcblx0ICogIHNwcmVhZChmdW5jdGlvbih4LCB5LCB6KSB7fSkoWzEsIDIsIDNdKTtcblx0ICogIGBgYFxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259XG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNwcmVhZChjYWxsYmFjaykge1xuXHQgIHJldHVybiBmdW5jdGlvbiB3cmFwKGFycikge1xuXHQgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFycik7XG5cdCAgfTtcblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzU1OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGV4cG9ydHMuZW5jb2RlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNTYpO1xuXHRleHBvcnRzLmRlY29kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzU3KTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzU2OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZW5jb2RlO1xuXHRcblx0dmFyIGtleXMsIGtleXNOdW0sIGtleXNBcnIsIGRpbSwgZSxcblx0ICAgIG1heFByZWNpc2lvbiA9IDFlNjtcblx0XG5cdHZhciBnZW9tZXRyeVR5cGVzID0ge1xuXHQgICAgJ1BvaW50JzogMCxcblx0ICAgICdNdWx0aVBvaW50JzogMSxcblx0ICAgICdMaW5lU3RyaW5nJzogMixcblx0ICAgICdNdWx0aUxpbmVTdHJpbmcnOiAzLFxuXHQgICAgJ1BvbHlnb24nOiA0LFxuXHQgICAgJ011bHRpUG9seWdvbic6IDUsXG5cdCAgICAnR2VvbWV0cnlDb2xsZWN0aW9uJzogNlxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gZW5jb2RlKG9iaiwgcGJmKSB7XG5cdCAgICBrZXlzID0ge307XG5cdCAgICBrZXlzQXJyID0gW107XG5cdCAgICBrZXlzTnVtID0gMDtcblx0ICAgIGRpbSA9IDA7XG5cdCAgICBlID0gMTtcblx0XG5cdCAgICBhbmFseXplKG9iaik7XG5cdFxuXHQgICAgZSA9IE1hdGgubWluKGUsIG1heFByZWNpc2lvbik7XG5cdCAgICB2YXIgcHJlY2lzaW9uID0gTWF0aC5jZWlsKE1hdGgubG9nKGUpIC8gTWF0aC5MTjEwKTtcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXNBcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZVN0cmluZ0ZpZWxkKDEsIGtleXNBcnJbaV0pO1xuXHQgICAgaWYgKGRpbSAhPT0gMikgcGJmLndyaXRlVmFyaW50RmllbGQoMiwgZGltKTtcblx0ICAgIGlmIChwcmVjaXNpb24gIT09IDYpIHBiZi53cml0ZVZhcmludEZpZWxkKDMsIHByZWNpc2lvbik7XG5cdFxuXHQgICAgaWYgKG9iai50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSBwYmYud3JpdGVNZXNzYWdlKDQsIHdyaXRlRmVhdHVyZUNvbGxlY3Rpb24sIG9iaik7XG5cdCAgICBlbHNlIGlmIChvYmoudHlwZSA9PT0gJ0ZlYXR1cmUnKSBwYmYud3JpdGVNZXNzYWdlKDUsIHdyaXRlRmVhdHVyZSwgb2JqKTtcblx0ICAgIGVsc2UgcGJmLndyaXRlTWVzc2FnZSg2LCB3cml0ZUdlb21ldHJ5LCBvYmopO1xuXHRcblx0ICAgIGtleXMgPSBudWxsO1xuXHRcblx0ICAgIHJldHVybiBwYmYuZmluaXNoKCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFuYWx5emUob2JqKSB7XG5cdCAgICB2YXIgaSwga2V5O1xuXHRcblx0ICAgIGlmIChvYmoudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBvYmouZmVhdHVyZXMubGVuZ3RoOyBpKyspIGFuYWx5emUob2JqLmZlYXR1cmVzW2ldKTtcblx0XG5cdCAgICB9IGVsc2UgaWYgKG9iai50eXBlID09PSAnRmVhdHVyZScpIHtcblx0ICAgICAgICBpZiAob2JqLmdlb21ldHJ5ICE9PSBudWxsKSBhbmFseXplKG9iai5nZW9tZXRyeSk7XG5cdCAgICAgICAgZm9yIChrZXkgaW4gb2JqLnByb3BlcnRpZXMpIHNhdmVLZXkoa2V5KTtcblx0XG5cdCAgICB9IGVsc2UgaWYgKG9iai50eXBlID09PSAnUG9pbnQnKSBhbmFseXplUG9pbnQob2JqLmNvb3JkaW5hdGVzKTtcblx0ICAgIGVsc2UgaWYgKG9iai50eXBlID09PSAnTXVsdGlQb2ludCcpIGFuYWx5emVQb2ludHMob2JqLmNvb3JkaW5hdGVzKTtcblx0ICAgIGVsc2UgaWYgKG9iai50eXBlID09PSAnR2VvbWV0cnlDb2xsZWN0aW9uJykge1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBvYmouZ2VvbWV0cmllcy5sZW5ndGg7IGkrKykgYW5hbHl6ZShvYmouZ2VvbWV0cmllc1tpXSk7XG5cdCAgICB9XG5cdCAgICBlbHNlIGlmIChvYmoudHlwZSA9PT0gJ0xpbmVTdHJpbmcnKSBhbmFseXplUG9pbnRzKG9iai5jb29yZGluYXRlcyk7XG5cdCAgICBlbHNlIGlmIChvYmoudHlwZSA9PT0gJ1BvbHlnb24nIHx8IG9iai50eXBlID09PSAnTXVsdGlMaW5lU3RyaW5nJykgYW5hbHl6ZU11bHRpTGluZShvYmouY29vcmRpbmF0ZXMpO1xuXHQgICAgZWxzZSBpZiAob2JqLnR5cGUgPT09ICdNdWx0aVBvbHlnb24nKSB7XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IG9iai5jb29yZGluYXRlcy5sZW5ndGg7IGkrKykgYW5hbHl6ZU11bHRpTGluZShvYmouY29vcmRpbmF0ZXNbaV0pO1xuXHQgICAgfVxuXHRcblx0ICAgIGZvciAoa2V5IGluIG9iaikge1xuXHQgICAgICAgIGlmICghaXNTcGVjaWFsS2V5KGtleSwgb2JqLnR5cGUpKSBzYXZlS2V5KGtleSk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGFuYWx5emVNdWx0aUxpbmUoY29vcmRzKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykgYW5hbHl6ZVBvaW50cyhjb29yZHNbaV0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhbmFseXplUG9pbnRzKGNvb3Jkcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIGFuYWx5emVQb2ludChjb29yZHNbaV0pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhbmFseXplUG9pbnQocG9pbnQpIHtcblx0ICAgIGRpbSA9IE1hdGgubWF4KGRpbSwgcG9pbnQubGVuZ3RoKTtcblx0XG5cdCAgICAvLyBmaW5kIG1heCBwcmVjaXNpb25cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnQubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB3aGlsZSAoTWF0aC5yb3VuZChwb2ludFtpXSAqIGUpIC8gZSAhPT0gcG9pbnRbaV0gJiYgZSA8IG1heFByZWNpc2lvbikgZSAqPSAxMDtcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gc2F2ZUtleShrZXkpIHtcblx0ICAgIGlmIChrZXlzW2tleV0gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIGtleXNBcnIucHVzaChrZXkpO1xuXHQgICAgICAgIGtleXNba2V5XSA9IGtleXNOdW0rKztcblx0ICAgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gd3JpdGVGZWF0dXJlQ29sbGVjdGlvbihvYmosIHBiZikge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmouZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBwYmYud3JpdGVNZXNzYWdlKDEsIHdyaXRlRmVhdHVyZSwgb2JqLmZlYXR1cmVzW2ldKTtcblx0ICAgIH1cblx0ICAgIHdyaXRlUHJvcHMob2JqLCBwYmYsIHRydWUpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZUZlYXR1cmUoZmVhdHVyZSwgcGJmKSB7XG5cdCAgICBpZiAoZmVhdHVyZS5nZW9tZXRyeSAhPT0gbnVsbCkgcGJmLndyaXRlTWVzc2FnZSgxLCB3cml0ZUdlb21ldHJ5LCBmZWF0dXJlLmdlb21ldHJ5KTtcblx0XG5cdCAgICBpZiAoZmVhdHVyZS5pZCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBmZWF0dXJlLmlkID09PSAnbnVtYmVyJyAmJiBmZWF0dXJlLmlkICUgMSA9PT0gMCkgcGJmLndyaXRlU1ZhcmludEZpZWxkKDEyLCBmZWF0dXJlLmlkKTtcblx0ICAgICAgICBlbHNlIHBiZi53cml0ZVN0cmluZ0ZpZWxkKDExLCBmZWF0dXJlLmlkKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoZmVhdHVyZS5wcm9wZXJ0aWVzKSB3cml0ZVByb3BzKGZlYXR1cmUucHJvcGVydGllcywgcGJmKTtcblx0ICAgIHdyaXRlUHJvcHMoZmVhdHVyZSwgcGJmLCB0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gd3JpdGVHZW9tZXRyeShnZW9tLCBwYmYpIHtcblx0ICAgIHBiZi53cml0ZVZhcmludEZpZWxkKDEsIGdlb21ldHJ5VHlwZXNbZ2VvbS50eXBlXSk7XG5cdFxuXHQgICAgdmFyIGNvb3JkcyA9IGdlb20uY29vcmRpbmF0ZXM7XG5cdFxuXHQgICAgaWYgKGdlb20udHlwZSA9PT0gJ1BvaW50Jykgd3JpdGVQb2ludChjb29yZHMsIHBiZik7XG5cdCAgICBlbHNlIGlmIChnZW9tLnR5cGUgPT09ICdNdWx0aVBvaW50Jykgd3JpdGVMaW5lKGNvb3JkcywgcGJmLCB0cnVlKTtcblx0ICAgIGVsc2UgaWYgKGdlb20udHlwZSA9PT0gJ0xpbmVTdHJpbmcnKSB3cml0ZUxpbmUoY29vcmRzLCBwYmYpO1xuXHQgICAgZWxzZSBpZiAoZ2VvbS50eXBlID09PSAnTXVsdGlMaW5lU3RyaW5nJykgd3JpdGVNdWx0aUxpbmUoY29vcmRzLCBwYmYpO1xuXHQgICAgZWxzZSBpZiAoZ2VvbS50eXBlID09PSAnUG9seWdvbicpIHdyaXRlTXVsdGlMaW5lKGNvb3JkcywgcGJmLCB0cnVlKTtcblx0ICAgIGVsc2UgaWYgKGdlb20udHlwZSA9PT0gJ011bHRpUG9seWdvbicpIHdyaXRlTXVsdGlQb2x5Z29uKGNvb3JkcywgcGJmKTtcblx0ICAgIGVsc2UgaWYgKGdlb20udHlwZSA9PT0gJ0dlb21ldHJ5Q29sbGVjdGlvbicpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdlb20uZ2VvbWV0cmllcy5sZW5ndGg7IGkrKykgcGJmLndyaXRlTWVzc2FnZSg0LCB3cml0ZUdlb21ldHJ5LCBnZW9tLmdlb21ldHJpZXNbaV0pO1xuXHQgICAgfVxuXHRcblx0ICAgIHdyaXRlUHJvcHMoZ2VvbSwgcGJmLCB0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gd3JpdGVQcm9wcyhwcm9wcywgcGJmLCBpc0N1c3RvbSkge1xuXHQgICAgdmFyIGluZGV4ZXMgPSBbXSxcblx0ICAgICAgICB2YWx1ZUluZGV4ID0gMDtcblx0XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHtcblx0ICAgICAgICBpZiAoaXNDdXN0b20gJiYgaXNTcGVjaWFsS2V5KGtleSwgcHJvcHMudHlwZSkpIHtcblx0ICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHBiZi53cml0ZU1lc3NhZ2UoMTMsIHdyaXRlVmFsdWUsIHByb3BzW2tleV0pO1xuXHQgICAgICAgIGluZGV4ZXMucHVzaChrZXlzW2tleV0pO1xuXHQgICAgICAgIGluZGV4ZXMucHVzaCh2YWx1ZUluZGV4KyspO1xuXHQgICAgfVxuXHQgICAgcGJmLndyaXRlUGFja2VkVmFyaW50KGlzQ3VzdG9tID8gMTUgOiAxNCwgaW5kZXhlcyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlVmFsdWUodmFsdWUsIHBiZikge1xuXHQgICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm47XG5cdFxuXHQgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdFxuXHQgICAgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSBwYmYud3JpdGVTdHJpbmdGaWVsZCgxLCB2YWx1ZSk7XG5cdCAgICBlbHNlIGlmICh0eXBlID09PSAnYm9vbGVhbicpIHBiZi53cml0ZUJvb2xlYW5GaWVsZCg1LCB2YWx1ZSk7XG5cdCAgICBlbHNlIGlmICh0eXBlID09PSAnb2JqZWN0JykgcGJmLndyaXRlU3RyaW5nRmllbGQoNiwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcblx0ICAgIGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XG5cdCAgICAgICAgaWYgKHZhbHVlICUgMSAhPT0gMCkgcGJmLndyaXRlRG91YmxlRmllbGQoMiwgdmFsdWUpO1xuXHQgICAgICAgIGVsc2UgaWYgKHZhbHVlID49IDApIHBiZi53cml0ZVZhcmludEZpZWxkKDMsIHZhbHVlKTtcblx0ICAgICAgICBlbHNlIHBiZi53cml0ZVZhcmludEZpZWxkKDQsIC12YWx1ZSk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlUG9pbnQocG9pbnQsIHBiZikge1xuXHQgICAgdmFyIGNvb3JkcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaW07IGkrKykgY29vcmRzLnB1c2goTWF0aC5yb3VuZChwb2ludFtpXSAqIGUpKTtcblx0ICAgIHBiZi53cml0ZVBhY2tlZFNWYXJpbnQoMywgY29vcmRzKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gd3JpdGVMaW5lKGxpbmUsIHBiZikge1xuXHQgICAgdmFyIGNvb3JkcyA9IFtdO1xuXHQgICAgcG9wdWxhdGVMaW5lKGNvb3JkcywgbGluZSk7XG5cdCAgICBwYmYud3JpdGVQYWNrZWRTVmFyaW50KDMsIGNvb3Jkcyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlTXVsdGlMaW5lKGxpbmVzLCBwYmYsIGNsb3NlZCkge1xuXHQgICAgdmFyIGxlbiA9IGxpbmVzLmxlbmd0aCxcblx0ICAgICAgICBpO1xuXHQgICAgaWYgKGxlbiAhPT0gMSkge1xuXHQgICAgICAgIHZhciBsZW5ndGhzID0gW107XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSBsZW5ndGhzLnB1c2gobGluZXNbaV0ubGVuZ3RoIC0gKGNsb3NlZCA/IDEgOiAwKSk7XG5cdCAgICAgICAgcGJmLndyaXRlUGFja2VkVmFyaW50KDIsIGxlbmd0aHMpO1xuXHQgICAgICAgIC8vIFRPRE8gZmFzdGVyIHdpdGggY3VzdG9tIHdyaXRlTWVzc2FnZT9cblx0ICAgIH1cblx0ICAgIHZhciBjb29yZHMgPSBbXTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgcG9wdWxhdGVMaW5lKGNvb3JkcywgbGluZXNbaV0sIGNsb3NlZCk7XG5cdCAgICBwYmYud3JpdGVQYWNrZWRTVmFyaW50KDMsIGNvb3Jkcyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlTXVsdGlQb2x5Z29uKHBvbHlnb25zLCBwYmYpIHtcblx0ICAgIHZhciBsZW4gPSBwb2x5Z29ucy5sZW5ndGgsXG5cdCAgICAgICAgaSwgajtcblx0ICAgIGlmIChsZW4gIT09IDEgfHwgcG9seWdvbnNbMF0ubGVuZ3RoICE9PSAxKSB7XG5cdCAgICAgICAgdmFyIGxlbmd0aHMgPSBbbGVuXTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICAgICAgbGVuZ3Rocy5wdXNoKHBvbHlnb25zW2ldLmxlbmd0aCk7XG5cdCAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBwb2x5Z29uc1tpXS5sZW5ndGg7IGorKykgbGVuZ3Rocy5wdXNoKHBvbHlnb25zW2ldW2pdLmxlbmd0aCAtIDEpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBwYmYud3JpdGVQYWNrZWRWYXJpbnQoMiwgbGVuZ3Rocyk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGNvb3JkcyA9IFtdO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgZm9yIChqID0gMDsgaiA8IHBvbHlnb25zW2ldLmxlbmd0aDsgaisrKSBwb3B1bGF0ZUxpbmUoY29vcmRzLCBwb2x5Z29uc1tpXVtqXSwgdHJ1ZSk7XG5cdCAgICB9XG5cdCAgICBwYmYud3JpdGVQYWNrZWRTVmFyaW50KDMsIGNvb3Jkcyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHBvcHVsYXRlTGluZShjb29yZHMsIGxpbmUsIGNsb3NlZCkge1xuXHQgICAgdmFyIGksIGosXG5cdCAgICAgICAgbGVuID0gbGluZS5sZW5ndGggLSAoY2xvc2VkID8gMSA6IDApLFxuXHQgICAgICAgIHN1bSA9IG5ldyBBcnJheShkaW0pO1xuXHQgICAgZm9yIChqID0gMDsgaiA8IGRpbTsgaisrKSBzdW1bal0gPSAwO1xuXHQgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgZm9yIChqID0gMDsgaiA8IGRpbTsgaisrKSB7XG5cdCAgICAgICAgICAgIHZhciBuID0gTWF0aC5yb3VuZChsaW5lW2ldW2pdICogZSkgLSBzdW1bal07XG5cdCAgICAgICAgICAgIGNvb3Jkcy5wdXNoKG4pO1xuXHQgICAgICAgICAgICBzdW1bal0gKz0gbjtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzU3BlY2lhbEtleShrZXksIHR5cGUpIHtcblx0ICAgIGlmIChrZXkgPT09ICd0eXBlJykgcmV0dXJuIHRydWU7XG5cdCAgICBlbHNlIGlmICh0eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG5cdCAgICAgICAgaWYgKGtleSA9PT0gJ2ZlYXR1cmVzJykgcmV0dXJuIHRydWU7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdGZWF0dXJlJykge1xuXHQgICAgICAgIGlmIChrZXkgPT09ICdpZCcgfHwga2V5ID09PSAncHJvcGVydGllcycgfHwga2V5ID09PSAnZ2VvbWV0cnknKSByZXR1cm4gdHJ1ZTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ0dlb21ldHJ5Q29sbGVjdGlvbicpIHtcblx0ICAgICAgICBpZiAoa2V5ID09PSAnZ2VvbWV0cmllcycpIHJldHVybiB0cnVlO1xuXHQgICAgfSBlbHNlIGlmIChrZXkgPT09ICdjb29yZGluYXRlcycpIHJldHVybiB0cnVlO1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHR9XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM1Nzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGRlY29kZTtcblx0XG5cdHZhciBrZXlzLCB2YWx1ZXMsIGxlbmd0aHMsIGRpbSwgZTtcblx0XG5cdHZhciBnZW9tZXRyeVR5cGVzID0gW1xuXHQgICAgJ1BvaW50JywgJ011bHRpUG9pbnQnLCAnTGluZVN0cmluZycsICdNdWx0aUxpbmVTdHJpbmcnLFxuXHQgICAgJ1BvbHlnb24nLCAnTXVsdGlQb2x5Z29uJywgJ0dlb21ldHJ5Q29sbGVjdGlvbiddO1xuXHRcblx0ZnVuY3Rpb24gZGVjb2RlKHBiZikge1xuXHQgICAgZGltID0gMjtcblx0ICAgIGUgPSBNYXRoLnBvdygxMCwgNik7XG5cdCAgICBsZW5ndGhzID0gbnVsbDtcblx0XG5cdCAgICBrZXlzID0gW107XG5cdCAgICB2YWx1ZXMgPSBbXTtcblx0ICAgIHZhciBvYmogPSBwYmYucmVhZEZpZWxkcyhyZWFkRGF0YUZpZWxkLCB7fSk7XG5cdCAgICBrZXlzID0gbnVsbDtcblx0XG5cdCAgICByZXR1cm4gb2JqO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkRGF0YUZpZWxkKHRhZywgb2JqLCBwYmYpIHtcblx0ICAgIGlmICh0YWcgPT09IDEpIGtleXMucHVzaChwYmYucmVhZFN0cmluZygpKTtcblx0ICAgIGVsc2UgaWYgKHRhZyA9PT0gMikgZGltID0gcGJmLnJlYWRWYXJpbnQoKTtcblx0ICAgIGVsc2UgaWYgKHRhZyA9PT0gMykgZSA9IE1hdGgucG93KDEwLCBwYmYucmVhZFZhcmludCgpKTtcblx0XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDQpIHJlYWRGZWF0dXJlQ29sbGVjdGlvbihwYmYsIG9iaik7XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDUpIHJlYWRGZWF0dXJlKHBiZiwgb2JqKTtcblx0ICAgIGVsc2UgaWYgKHRhZyA9PT0gNikgcmVhZEdlb21ldHJ5KHBiZiwgb2JqKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZEZlYXR1cmVDb2xsZWN0aW9uKHBiZiwgb2JqKSB7XG5cdCAgICBvYmoudHlwZSA9ICdGZWF0dXJlQ29sbGVjdGlvbic7XG5cdCAgICBvYmouZmVhdHVyZXMgPSBbXTtcblx0ICAgIHJldHVybiBwYmYucmVhZE1lc3NhZ2UocmVhZEZlYXR1cmVDb2xsZWN0aW9uRmllbGQsIG9iaik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRGZWF0dXJlKHBiZiwgZmVhdHVyZSkge1xuXHQgICAgZmVhdHVyZS50eXBlID0gJ0ZlYXR1cmUnO1xuXHQgICAgdmFyIGYgPSBwYmYucmVhZE1lc3NhZ2UocmVhZEZlYXR1cmVGaWVsZCwgZmVhdHVyZSk7XG5cdCAgICBpZiAoIWYuaGFzT3duUHJvcGVydHkoJ2dlb21ldHJ5JykpIGYuZ2VvbWV0cnkgPSBudWxsO1xuXHQgICAgcmV0dXJuIGY7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRHZW9tZXRyeShwYmYsIGdlb20pIHtcblx0ICAgIHJldHVybiBwYmYucmVhZE1lc3NhZ2UocmVhZEdlb21ldHJ5RmllbGQsIGdlb20pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkRmVhdHVyZUNvbGxlY3Rpb25GaWVsZCh0YWcsIG9iaiwgcGJmKSB7XG5cdCAgICBpZiAodGFnID09PSAxKSBvYmouZmVhdHVyZXMucHVzaChyZWFkRmVhdHVyZShwYmYsIHt9KSk7XG5cdFxuXHQgICAgZWxzZSBpZiAodGFnID09PSAxMykgdmFsdWVzLnB1c2gocmVhZFZhbHVlKHBiZikpO1xuXHQgICAgZWxzZSBpZiAodGFnID09PSAxNSkgcmVhZFByb3BzKHBiZiwgb2JqKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZEZlYXR1cmVGaWVsZCh0YWcsIGZlYXR1cmUsIHBiZikge1xuXHQgICAgaWYgKHRhZyA9PT0gMSkgZmVhdHVyZS5nZW9tZXRyeSA9IHJlYWRHZW9tZXRyeShwYmYsIHt9KTtcblx0XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDExKSBmZWF0dXJlLmlkID0gcGJmLnJlYWRTdHJpbmcoKTtcblx0ICAgIGVsc2UgaWYgKHRhZyA9PT0gMTIpIGZlYXR1cmUuaWQgPSBwYmYucmVhZFNWYXJpbnQoKTtcblx0XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDEzKSB2YWx1ZXMucHVzaChyZWFkVmFsdWUocGJmKSk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDE0KSBmZWF0dXJlLnByb3BlcnRpZXMgPSByZWFkUHJvcHMocGJmLCB7fSk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDE1KSByZWFkUHJvcHMocGJmLCBmZWF0dXJlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZEdlb21ldHJ5RmllbGQodGFnLCBnZW9tLCBwYmYpIHtcblx0ICAgIGlmICh0YWcgPT09IDEpIGdlb20udHlwZSA9IGdlb21ldHJ5VHlwZXNbcGJmLnJlYWRWYXJpbnQoKV07XG5cdFxuXHQgICAgZWxzZSBpZiAodGFnID09PSAyKSBsZW5ndGhzID0gcGJmLnJlYWRQYWNrZWRWYXJpbnQoKTtcblx0ICAgIGVsc2UgaWYgKHRhZyA9PT0gMykgcmVhZENvb3JkcyhnZW9tLCBwYmYsIGdlb20udHlwZSk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDQpIHtcblx0ICAgICAgICBnZW9tLmdlb21ldHJpZXMgPSBnZW9tLmdlb21ldHJpZXMgfHwgW107XG5cdCAgICAgICAgZ2VvbS5nZW9tZXRyaWVzLnB1c2gocmVhZEdlb21ldHJ5KHBiZiwge30pKTtcblx0ICAgIH1cblx0ICAgIGVsc2UgaWYgKHRhZyA9PT0gMTMpIHZhbHVlcy5wdXNoKHJlYWRWYWx1ZShwYmYpKTtcblx0ICAgIGVsc2UgaWYgKHRhZyA9PT0gMTUpIHJlYWRQcm9wcyhwYmYsIGdlb20pO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkQ29vcmRzKGdlb20sIHBiZiwgdHlwZSkge1xuXHQgICAgaWYgKHR5cGUgPT09ICdQb2ludCcpIGdlb20uY29vcmRpbmF0ZXMgPSByZWFkUG9pbnQocGJmKTtcblx0ICAgIGVsc2UgaWYgKHR5cGUgPT09ICdNdWx0aVBvaW50JykgZ2VvbS5jb29yZGluYXRlcyA9IHJlYWRMaW5lKHBiZiwgdHJ1ZSk7XG5cdCAgICBlbHNlIGlmICh0eXBlID09PSAnTGluZVN0cmluZycpIGdlb20uY29vcmRpbmF0ZXMgPSByZWFkTGluZShwYmYpO1xuXHQgICAgZWxzZSBpZiAodHlwZSA9PT0gJ011bHRpTGluZVN0cmluZycpIGdlb20uY29vcmRpbmF0ZXMgPSByZWFkTXVsdGlMaW5lKHBiZik7XG5cdCAgICBlbHNlIGlmICh0eXBlID09PSAnUG9seWdvbicpIGdlb20uY29vcmRpbmF0ZXMgPSByZWFkTXVsdGlMaW5lKHBiZiwgdHJ1ZSk7XG5cdCAgICBlbHNlIGlmICh0eXBlID09PSAnTXVsdGlQb2x5Z29uJykgZ2VvbS5jb29yZGluYXRlcyA9IHJlYWRNdWx0aVBvbHlnb24ocGJmKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZFZhbHVlKHBiZikge1xuXHQgICAgdmFyIGVuZCA9IHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zLFxuXHQgICAgICAgIHZhbHVlID0gbnVsbDtcblx0XG5cdCAgICB3aGlsZSAocGJmLnBvcyA8IGVuZCkge1xuXHQgICAgICAgIHZhciB2YWwgPSBwYmYucmVhZFZhcmludCgpLFxuXHQgICAgICAgICAgICB0YWcgPSB2YWwgPj4gMztcblx0XG5cdCAgICAgICAgaWYgKHRhZyA9PT0gMSkgdmFsdWUgPSBwYmYucmVhZFN0cmluZygpO1xuXHQgICAgICAgIGVsc2UgaWYgKHRhZyA9PT0gMikgdmFsdWUgPSBwYmYucmVhZERvdWJsZSgpO1xuXHQgICAgICAgIGVsc2UgaWYgKHRhZyA9PT0gMykgdmFsdWUgPSBwYmYucmVhZFZhcmludCgpO1xuXHQgICAgICAgIGVsc2UgaWYgKHRhZyA9PT0gNCkgdmFsdWUgPSAtcGJmLnJlYWRWYXJpbnQoKTtcblx0ICAgICAgICBlbHNlIGlmICh0YWcgPT09IDUpIHZhbHVlID0gcGJmLnJlYWRCb29sZWFuKCk7XG5cdCAgICAgICAgZWxzZSBpZiAodGFnID09PSA2KSB2YWx1ZSA9IEpTT04ucGFyc2UocGJmLnJlYWRTdHJpbmcoKSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRQcm9wcyhwYmYsIHByb3BzKSB7XG5cdCAgICB2YXIgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3M7XG5cdCAgICB3aGlsZSAocGJmLnBvcyA8IGVuZCkgcHJvcHNba2V5c1twYmYucmVhZFZhcmludCgpXV0gPSB2YWx1ZXNbcGJmLnJlYWRWYXJpbnQoKV07XG5cdCAgICB2YWx1ZXMgPSBbXTtcblx0ICAgIHJldHVybiBwcm9wcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZFBvaW50KHBiZikge1xuXHQgICAgdmFyIGVuZCA9IHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zLFxuXHQgICAgICAgIGNvb3JkcyA9IFtdO1xuXHQgICAgd2hpbGUgKHBiZi5wb3MgPCBlbmQpIGNvb3Jkcy5wdXNoKHBiZi5yZWFkU1ZhcmludCgpIC8gZSk7XG5cdCAgICByZXR1cm4gY29vcmRzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkTGluZVBhcnQocGJmLCBlbmQsIGxlbiwgY2xvc2VkKSB7XG5cdCAgICB2YXIgaSA9IDAsXG5cdCAgICAgICAgY29vcmRzID0gW10sXG5cdCAgICAgICAgcCwgZDtcblx0XG5cdCAgICB2YXIgcHJldlAgPSBbXTtcblx0ICAgIGZvciAoZCA9IDA7IGQgPCBkaW07IGQrKykgcHJldlBbZF0gPSAwO1xuXHRcblx0ICAgIHdoaWxlIChsZW4gPyBpIDwgbGVuIDogcGJmLnBvcyA8IGVuZCkge1xuXHQgICAgICAgIHAgPSBbXTtcblx0ICAgICAgICBmb3IgKGQgPSAwOyBkIDwgZGltOyBkKyspIHtcblx0ICAgICAgICAgICAgcHJldlBbZF0gKz0gcGJmLnJlYWRTVmFyaW50KCk7XG5cdCAgICAgICAgICAgIHBbZF0gPSBwcmV2UFtkXSAvIGU7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNvb3Jkcy5wdXNoKHApO1xuXHQgICAgICAgIGkrKztcblx0ICAgIH1cblx0ICAgIGlmIChjbG9zZWQpIGNvb3Jkcy5wdXNoKGNvb3Jkc1swXSk7XG5cdFxuXHQgICAgcmV0dXJuIGNvb3Jkcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZExpbmUocGJmKSB7XG5cdCAgICByZXR1cm4gcmVhZExpbmVQYXJ0KHBiZiwgcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3MpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkTXVsdGlMaW5lKHBiZiwgY2xvc2VkKSB7XG5cdCAgICB2YXIgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3M7XG5cdCAgICBpZiAoIWxlbmd0aHMpIHJldHVybiBbcmVhZExpbmVQYXJ0KHBiZiwgZW5kLCBudWxsLCBjbG9zZWQpXTtcblx0XG5cdCAgICB2YXIgY29vcmRzID0gW107XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aHMubGVuZ3RoOyBpKyspIGNvb3Jkcy5wdXNoKHJlYWRMaW5lUGFydChwYmYsIGVuZCwgbGVuZ3Roc1tpXSwgY2xvc2VkKSk7XG5cdCAgICBsZW5ndGhzID0gbnVsbDtcblx0ICAgIHJldHVybiBjb29yZHM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRNdWx0aVBvbHlnb24ocGJmKSB7XG5cdCAgICB2YXIgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3M7XG5cdCAgICBpZiAoIWxlbmd0aHMpIHJldHVybiBbW3JlYWRMaW5lUGFydChwYmYsIGVuZCwgbnVsbCwgdHJ1ZSldXTtcblx0XG5cdCAgICB2YXIgY29vcmRzID0gW107XG5cdCAgICB2YXIgaiA9IDE7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aHNbMF07IGkrKykge1xuXHQgICAgICAgIHZhciByaW5ncyA9IFtdO1xuXHQgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgbGVuZ3Roc1tqXTsgaysrKSByaW5ncy5wdXNoKHJlYWRMaW5lUGFydChwYmYsIGVuZCwgbGVuZ3Roc1tqICsgMSArIGtdLCB0cnVlKSk7XG5cdCAgICAgICAgaiArPSBsZW5ndGhzW2pdICsgMTtcblx0ICAgICAgICBjb29yZHMucHVzaChyaW5ncyk7XG5cdCAgICB9XG5cdCAgICBsZW5ndGhzID0gbnVsbDtcblx0ICAgIHJldHVybiBjb29yZHM7XG5cdH1cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzU4OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUGJmO1xuXHRcblx0dmFyIGllZWU3NTQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1OSk7XG5cdFxuXHRmdW5jdGlvbiBQYmYoYnVmKSB7XG5cdCAgICB0aGlzLmJ1ZiA9IEFycmF5QnVmZmVyLmlzVmlldyAmJiBBcnJheUJ1ZmZlci5pc1ZpZXcoYnVmKSA/IGJ1ZiA6IG5ldyBVaW50OEFycmF5KGJ1ZiB8fCAwKTtcblx0ICAgIHRoaXMucG9zID0gMDtcblx0ICAgIHRoaXMudHlwZSA9IDA7XG5cdCAgICB0aGlzLmxlbmd0aCA9IHRoaXMuYnVmLmxlbmd0aDtcblx0fVxuXHRcblx0UGJmLlZhcmludCAgPSAwOyAvLyB2YXJpbnQ6IGludDMyLCBpbnQ2NCwgdWludDMyLCB1aW50NjQsIHNpbnQzMiwgc2ludDY0LCBib29sLCBlbnVtXG5cdFBiZi5GaXhlZDY0ID0gMTsgLy8gNjQtYml0OiBkb3VibGUsIGZpeGVkNjQsIHNmaXhlZDY0XG5cdFBiZi5CeXRlcyAgID0gMjsgLy8gbGVuZ3RoLWRlbGltaXRlZDogc3RyaW5nLCBieXRlcywgZW1iZWRkZWQgbWVzc2FnZXMsIHBhY2tlZCByZXBlYXRlZCBmaWVsZHNcblx0UGJmLkZpeGVkMzIgPSA1OyAvLyAzMi1iaXQ6IGZsb2F0LCBmaXhlZDMyLCBzZml4ZWQzMlxuXHRcblx0dmFyIFNISUZUX0xFRlRfMzIgPSAoMSA8PCAxNikgKiAoMSA8PCAxNiksXG5cdCAgICBTSElGVF9SSUdIVF8zMiA9IDEgLyBTSElGVF9MRUZUXzMyO1xuXHRcblx0UGJmLnByb3RvdHlwZSA9IHtcblx0XG5cdCAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB0aGlzLmJ1ZiA9IG51bGw7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vID09PSBSRUFESU5HID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgICAgcmVhZEZpZWxkczogZnVuY3Rpb24ocmVhZEZpZWxkLCByZXN1bHQsIGVuZCkge1xuXHQgICAgICAgIGVuZCA9IGVuZCB8fCB0aGlzLmxlbmd0aDtcblx0XG5cdCAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSB7XG5cdCAgICAgICAgICAgIHZhciB2YWwgPSB0aGlzLnJlYWRWYXJpbnQoKSxcblx0ICAgICAgICAgICAgICAgIHRhZyA9IHZhbCA+PiAzLFxuXHQgICAgICAgICAgICAgICAgc3RhcnRQb3MgPSB0aGlzLnBvcztcblx0XG5cdCAgICAgICAgICAgIHRoaXMudHlwZSA9IHZhbCAmIDB4Nztcblx0ICAgICAgICAgICAgcmVhZEZpZWxkKHRhZywgcmVzdWx0LCB0aGlzKTtcblx0XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnBvcyA9PT0gc3RhcnRQb3MpIHRoaXMuc2tpcCh2YWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgfSxcblx0XG5cdCAgICByZWFkTWVzc2FnZTogZnVuY3Rpb24ocmVhZEZpZWxkLCByZXN1bHQpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5yZWFkRmllbGRzKHJlYWRGaWVsZCwgcmVzdWx0LCB0aGlzLnJlYWRWYXJpbnQoKSArIHRoaXMucG9zKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVhZEZpeGVkMzI6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciB2YWwgPSByZWFkVUludDMyKHRoaXMuYnVmLCB0aGlzLnBvcyk7XG5cdCAgICAgICAgdGhpcy5wb3MgKz0gNDtcblx0ICAgICAgICByZXR1cm4gdmFsO1xuXHQgICAgfSxcblx0XG5cdCAgICByZWFkU0ZpeGVkMzI6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciB2YWwgPSByZWFkSW50MzIodGhpcy5idWYsIHRoaXMucG9zKTtcblx0ICAgICAgICB0aGlzLnBvcyArPSA0O1xuXHQgICAgICAgIHJldHVybiB2YWw7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIDY0LWJpdCBpbnQgaGFuZGxpbmcgaXMgYmFzZWQgb24gZ2l0aHViLmNvbS9kcHcvbm9kZS1idWZmZXItbW9yZS1pbnRzIChNSVQtbGljZW5zZWQpXG5cdFxuXHQgICAgcmVhZEZpeGVkNjQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciB2YWwgPSByZWFkVUludDMyKHRoaXMuYnVmLCB0aGlzLnBvcykgKyByZWFkVUludDMyKHRoaXMuYnVmLCB0aGlzLnBvcyArIDQpICogU0hJRlRfTEVGVF8zMjtcblx0ICAgICAgICB0aGlzLnBvcyArPSA4O1xuXHQgICAgICAgIHJldHVybiB2YWw7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlYWRTRml4ZWQ2NDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHZhbCA9IHJlYWRVSW50MzIodGhpcy5idWYsIHRoaXMucG9zKSArIHJlYWRJbnQzMih0aGlzLmJ1ZiwgdGhpcy5wb3MgKyA0KSAqIFNISUZUX0xFRlRfMzI7XG5cdCAgICAgICAgdGhpcy5wb3MgKz0gODtcblx0ICAgICAgICByZXR1cm4gdmFsO1xuXHQgICAgfSxcblx0XG5cdCAgICByZWFkRmxvYXQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciB2YWwgPSBpZWVlNzU0LnJlYWQodGhpcy5idWYsIHRoaXMucG9zLCB0cnVlLCAyMywgNCk7XG5cdCAgICAgICAgdGhpcy5wb3MgKz0gNDtcblx0ICAgICAgICByZXR1cm4gdmFsO1xuXHQgICAgfSxcblx0XG5cdCAgICByZWFkRG91YmxlOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgdmFsID0gaWVlZTc1NC5yZWFkKHRoaXMuYnVmLCB0aGlzLnBvcywgdHJ1ZSwgNTIsIDgpO1xuXHQgICAgICAgIHRoaXMucG9zICs9IDg7XG5cdCAgICAgICAgcmV0dXJuIHZhbDtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVhZFZhcmludDogZnVuY3Rpb24oaXNTaWduZWQpIHtcblx0ICAgICAgICB2YXIgYnVmID0gdGhpcy5idWYsXG5cdCAgICAgICAgICAgIHZhbCwgYjtcblx0XG5cdCAgICAgICAgYiA9IGJ1Zlt0aGlzLnBvcysrXTsgdmFsICA9ICBiICYgMHg3ZjsgICAgICAgIGlmIChiIDwgMHg4MCkgcmV0dXJuIHZhbDtcblx0ICAgICAgICBiID0gYnVmW3RoaXMucG9zKytdOyB2YWwgfD0gKGIgJiAweDdmKSA8PCA3OyAgaWYgKGIgPCAweDgwKSByZXR1cm4gdmFsO1xuXHQgICAgICAgIGIgPSBidWZbdGhpcy5wb3MrK107IHZhbCB8PSAoYiAmIDB4N2YpIDw8IDE0OyBpZiAoYiA8IDB4ODApIHJldHVybiB2YWw7XG5cdCAgICAgICAgYiA9IGJ1Zlt0aGlzLnBvcysrXTsgdmFsIHw9IChiICYgMHg3ZikgPDwgMjE7IGlmIChiIDwgMHg4MCkgcmV0dXJuIHZhbDtcblx0ICAgICAgICBiID0gYnVmW3RoaXMucG9zXTsgICB2YWwgfD0gKGIgJiAweDBmKSA8PCAyODtcblx0XG5cdCAgICAgICAgcmV0dXJuIHJlYWRWYXJpbnRSZW1haW5kZXIodmFsLCBpc1NpZ25lZCwgdGhpcyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlYWRWYXJpbnQ2NDogZnVuY3Rpb24oKSB7IC8vIGZvciBjb21wYXRpYmlsaXR5IHdpdGggdjIuMC4xXG5cdCAgICAgICAgcmV0dXJuIHRoaXMucmVhZFZhcmludCh0cnVlKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVhZFNWYXJpbnQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciBudW0gPSB0aGlzLnJlYWRWYXJpbnQoKTtcblx0ICAgICAgICByZXR1cm4gbnVtICUgMiA9PT0gMSA/IChudW0gKyAxKSAvIC0yIDogbnVtIC8gMjsgLy8gemlnemFnIGVuY29kaW5nXG5cdCAgICB9LFxuXHRcblx0ICAgIHJlYWRCb29sZWFuOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLnJlYWRWYXJpbnQoKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlYWRTdHJpbmc6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciBlbmQgPSB0aGlzLnJlYWRWYXJpbnQoKSArIHRoaXMucG9zLFxuXHQgICAgICAgICAgICBzdHIgPSByZWFkVXRmOCh0aGlzLmJ1ZiwgdGhpcy5wb3MsIGVuZCk7XG5cdCAgICAgICAgdGhpcy5wb3MgPSBlbmQ7XG5cdCAgICAgICAgcmV0dXJuIHN0cjtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVhZEJ5dGVzOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgZW5kID0gdGhpcy5yZWFkVmFyaW50KCkgKyB0aGlzLnBvcyxcblx0ICAgICAgICAgICAgYnVmZmVyID0gdGhpcy5idWYuc3ViYXJyYXkodGhpcy5wb3MsIGVuZCk7XG5cdCAgICAgICAgdGhpcy5wb3MgPSBlbmQ7XG5cdCAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gdmVyYm9zZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uczsgZG9lc24ndCBhZmZlY3QgZ3ppcHBlZCBzaXplXG5cdFxuXHQgICAgcmVhZFBhY2tlZFZhcmludDogZnVuY3Rpb24oYXJyLCBpc1NpZ25lZCkge1xuXHQgICAgICAgIGlmICh0aGlzLnR5cGUgIT09IFBiZi5CeXRlcykgcmV0dXJuIGFyci5wdXNoKHRoaXMucmVhZFZhcmludChpc1NpZ25lZCkpO1xuXHQgICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuXHQgICAgICAgIGFyciA9IGFyciB8fCBbXTtcblx0ICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZFZhcmludChpc1NpZ25lZCkpO1xuXHQgICAgICAgIHJldHVybiBhcnI7XG5cdCAgICB9LFxuXHQgICAgcmVhZFBhY2tlZFNWYXJpbnQ6IGZ1bmN0aW9uKGFycikge1xuXHQgICAgICAgIGlmICh0aGlzLnR5cGUgIT09IFBiZi5CeXRlcykgcmV0dXJuIGFyci5wdXNoKHRoaXMucmVhZFNWYXJpbnQoKSk7XG5cdCAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG5cdCAgICAgICAgYXJyID0gYXJyIHx8IFtdO1xuXHQgICAgICAgIHdoaWxlICh0aGlzLnBvcyA8IGVuZCkgYXJyLnB1c2godGhpcy5yZWFkU1ZhcmludCgpKTtcblx0ICAgICAgICByZXR1cm4gYXJyO1xuXHQgICAgfSxcblx0ICAgIHJlYWRQYWNrZWRCb29sZWFuOiBmdW5jdGlvbihhcnIpIHtcblx0ICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRCb29sZWFuKCkpO1xuXHQgICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuXHQgICAgICAgIGFyciA9IGFyciB8fCBbXTtcblx0ICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZEJvb2xlYW4oKSk7XG5cdCAgICAgICAgcmV0dXJuIGFycjtcblx0ICAgIH0sXG5cdCAgICByZWFkUGFja2VkRmxvYXQ6IGZ1bmN0aW9uKGFycikge1xuXHQgICAgICAgIGlmICh0aGlzLnR5cGUgIT09IFBiZi5CeXRlcykgcmV0dXJuIGFyci5wdXNoKHRoaXMucmVhZEZsb2F0KCkpO1xuXHQgICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuXHQgICAgICAgIGFyciA9IGFyciB8fCBbXTtcblx0ICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZEZsb2F0KCkpO1xuXHQgICAgICAgIHJldHVybiBhcnI7XG5cdCAgICB9LFxuXHQgICAgcmVhZFBhY2tlZERvdWJsZTogZnVuY3Rpb24oYXJyKSB7XG5cdCAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkRG91YmxlKCkpO1xuXHQgICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuXHQgICAgICAgIGFyciA9IGFyciB8fCBbXTtcblx0ICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZERvdWJsZSgpKTtcblx0ICAgICAgICByZXR1cm4gYXJyO1xuXHQgICAgfSxcblx0ICAgIHJlYWRQYWNrZWRGaXhlZDMyOiBmdW5jdGlvbihhcnIpIHtcblx0ICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRGaXhlZDMyKCkpO1xuXHQgICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuXHQgICAgICAgIGFyciA9IGFyciB8fCBbXTtcblx0ICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZEZpeGVkMzIoKSk7XG5cdCAgICAgICAgcmV0dXJuIGFycjtcblx0ICAgIH0sXG5cdCAgICByZWFkUGFja2VkU0ZpeGVkMzI6IGZ1bmN0aW9uKGFycikge1xuXHQgICAgICAgIGlmICh0aGlzLnR5cGUgIT09IFBiZi5CeXRlcykgcmV0dXJuIGFyci5wdXNoKHRoaXMucmVhZFNGaXhlZDMyKCkpO1xuXHQgICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuXHQgICAgICAgIGFyciA9IGFyciB8fCBbXTtcblx0ICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZFNGaXhlZDMyKCkpO1xuXHQgICAgICAgIHJldHVybiBhcnI7XG5cdCAgICB9LFxuXHQgICAgcmVhZFBhY2tlZEZpeGVkNjQ6IGZ1bmN0aW9uKGFycikge1xuXHQgICAgICAgIGlmICh0aGlzLnR5cGUgIT09IFBiZi5CeXRlcykgcmV0dXJuIGFyci5wdXNoKHRoaXMucmVhZEZpeGVkNjQoKSk7XG5cdCAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG5cdCAgICAgICAgYXJyID0gYXJyIHx8IFtdO1xuXHQgICAgICAgIHdoaWxlICh0aGlzLnBvcyA8IGVuZCkgYXJyLnB1c2godGhpcy5yZWFkRml4ZWQ2NCgpKTtcblx0ICAgICAgICByZXR1cm4gYXJyO1xuXHQgICAgfSxcblx0ICAgIHJlYWRQYWNrZWRTRml4ZWQ2NDogZnVuY3Rpb24oYXJyKSB7XG5cdCAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkU0ZpeGVkNjQoKSk7XG5cdCAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG5cdCAgICAgICAgYXJyID0gYXJyIHx8IFtdO1xuXHQgICAgICAgIHdoaWxlICh0aGlzLnBvcyA8IGVuZCkgYXJyLnB1c2godGhpcy5yZWFkU0ZpeGVkNjQoKSk7XG5cdCAgICAgICAgcmV0dXJuIGFycjtcblx0ICAgIH0sXG5cdFxuXHQgICAgc2tpcDogZnVuY3Rpb24odmFsKSB7XG5cdCAgICAgICAgdmFyIHR5cGUgPSB2YWwgJiAweDc7XG5cdCAgICAgICAgaWYgKHR5cGUgPT09IFBiZi5WYXJpbnQpIHdoaWxlICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA+IDB4N2YpIHt9XG5cdCAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gUGJmLkJ5dGVzKSB0aGlzLnBvcyA9IHRoaXMucmVhZFZhcmludCgpICsgdGhpcy5wb3M7XG5cdCAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gUGJmLkZpeGVkMzIpIHRoaXMucG9zICs9IDQ7XG5cdCAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gUGJmLkZpeGVkNjQpIHRoaXMucG9zICs9IDg7XG5cdCAgICAgICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ1VuaW1wbGVtZW50ZWQgdHlwZTogJyArIHR5cGUpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyA9PT0gV1JJVElORyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcblx0ICAgIHdyaXRlVGFnOiBmdW5jdGlvbih0YWcsIHR5cGUpIHtcblx0ICAgICAgICB0aGlzLndyaXRlVmFyaW50KCh0YWcgPDwgMykgfCB0eXBlKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVhbGxvYzogZnVuY3Rpb24obWluKSB7XG5cdCAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDE2O1xuXHRcblx0ICAgICAgICB3aGlsZSAobGVuZ3RoIDwgdGhpcy5wb3MgKyBtaW4pIGxlbmd0aCAqPSAyO1xuXHRcblx0ICAgICAgICBpZiAobGVuZ3RoICE9PSB0aGlzLmxlbmd0aCkge1xuXHQgICAgICAgICAgICB2YXIgYnVmID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoKTtcblx0ICAgICAgICAgICAgYnVmLnNldCh0aGlzLmJ1Zik7XG5cdCAgICAgICAgICAgIHRoaXMuYnVmID0gYnVmO1xuXHQgICAgICAgICAgICB0aGlzLmxlbmd0aCA9IGxlbmd0aDtcblx0ICAgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIGZpbmlzaDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLnBvcztcblx0ICAgICAgICB0aGlzLnBvcyA9IDA7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuYnVmLnN1YmFycmF5KDAsIHRoaXMubGVuZ3RoKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgd3JpdGVGaXhlZDMyOiBmdW5jdGlvbih2YWwpIHtcblx0ICAgICAgICB0aGlzLnJlYWxsb2MoNCk7XG5cdCAgICAgICAgd3JpdGVJbnQzMih0aGlzLmJ1ZiwgdmFsLCB0aGlzLnBvcyk7XG5cdCAgICAgICAgdGhpcy5wb3MgKz0gNDtcblx0ICAgIH0sXG5cdFxuXHQgICAgd3JpdGVTRml4ZWQzMjogZnVuY3Rpb24odmFsKSB7XG5cdCAgICAgICAgdGhpcy5yZWFsbG9jKDQpO1xuXHQgICAgICAgIHdyaXRlSW50MzIodGhpcy5idWYsIHZhbCwgdGhpcy5wb3MpO1xuXHQgICAgICAgIHRoaXMucG9zICs9IDQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIHdyaXRlRml4ZWQ2NDogZnVuY3Rpb24odmFsKSB7XG5cdCAgICAgICAgdGhpcy5yZWFsbG9jKDgpO1xuXHQgICAgICAgIHdyaXRlSW50MzIodGhpcy5idWYsIHZhbCAmIC0xLCB0aGlzLnBvcyk7XG5cdCAgICAgICAgd3JpdGVJbnQzMih0aGlzLmJ1ZiwgTWF0aC5mbG9vcih2YWwgKiBTSElGVF9SSUdIVF8zMiksIHRoaXMucG9zICsgNCk7XG5cdCAgICAgICAgdGhpcy5wb3MgKz0gODtcblx0ICAgIH0sXG5cdFxuXHQgICAgd3JpdGVTRml4ZWQ2NDogZnVuY3Rpb24odmFsKSB7XG5cdCAgICAgICAgdGhpcy5yZWFsbG9jKDgpO1xuXHQgICAgICAgIHdyaXRlSW50MzIodGhpcy5idWYsIHZhbCAmIC0xLCB0aGlzLnBvcyk7XG5cdCAgICAgICAgd3JpdGVJbnQzMih0aGlzLmJ1ZiwgTWF0aC5mbG9vcih2YWwgKiBTSElGVF9SSUdIVF8zMiksIHRoaXMucG9zICsgNCk7XG5cdCAgICAgICAgdGhpcy5wb3MgKz0gODtcblx0ICAgIH0sXG5cdFxuXHQgICAgd3JpdGVWYXJpbnQ6IGZ1bmN0aW9uKHZhbCkge1xuXHQgICAgICAgIHZhbCA9ICt2YWwgfHwgMDtcblx0XG5cdCAgICAgICAgaWYgKHZhbCA+IDB4ZmZmZmZmZiB8fCB2YWwgPCAwKSB7XG5cdCAgICAgICAgICAgIHdyaXRlQmlnVmFyaW50KHZhbCwgdGhpcyk7XG5cdCAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHRoaXMucmVhbGxvYyg0KTtcblx0XG5cdCAgICAgICAgdGhpcy5idWZbdGhpcy5wb3MrK10gPSAgICAgICAgICAgdmFsICYgMHg3ZiAgfCAodmFsID4gMHg3ZiA/IDB4ODAgOiAwKTsgaWYgKHZhbCA8PSAweDdmKSByZXR1cm47XG5cdCAgICAgICAgdGhpcy5idWZbdGhpcy5wb3MrK10gPSAoKHZhbCA+Pj49IDcpICYgMHg3ZikgfCAodmFsID4gMHg3ZiA/IDB4ODAgOiAwKTsgaWYgKHZhbCA8PSAweDdmKSByZXR1cm47XG5cdCAgICAgICAgdGhpcy5idWZbdGhpcy5wb3MrK10gPSAoKHZhbCA+Pj49IDcpICYgMHg3ZikgfCAodmFsID4gMHg3ZiA/IDB4ODAgOiAwKTsgaWYgKHZhbCA8PSAweDdmKSByZXR1cm47XG5cdCAgICAgICAgdGhpcy5idWZbdGhpcy5wb3MrK10gPSAgICh2YWwgPj4+IDcpICYgMHg3Zjtcblx0ICAgIH0sXG5cdFxuXHQgICAgd3JpdGVTVmFyaW50OiBmdW5jdGlvbih2YWwpIHtcblx0ICAgICAgICB0aGlzLndyaXRlVmFyaW50KHZhbCA8IDAgPyAtdmFsICogMiAtIDEgOiB2YWwgKiAyKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgd3JpdGVCb29sZWFuOiBmdW5jdGlvbih2YWwpIHtcblx0ICAgICAgICB0aGlzLndyaXRlVmFyaW50KEJvb2xlYW4odmFsKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHdyaXRlU3RyaW5nOiBmdW5jdGlvbihzdHIpIHtcblx0ICAgICAgICBzdHIgPSBTdHJpbmcoc3RyKTtcblx0ICAgICAgICB0aGlzLnJlYWxsb2Moc3RyLmxlbmd0aCAqIDQpO1xuXHRcblx0ICAgICAgICB0aGlzLnBvcysrOyAvLyByZXNlcnZlIDEgYnl0ZSBmb3Igc2hvcnQgc3RyaW5nIGxlbmd0aFxuXHRcblx0ICAgICAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnBvcztcblx0ICAgICAgICAvLyB3cml0ZSB0aGUgc3RyaW5nIGRpcmVjdGx5IHRvIHRoZSBidWZmZXIgYW5kIHNlZSBob3cgbXVjaCB3YXMgd3JpdHRlblxuXHQgICAgICAgIHRoaXMucG9zID0gd3JpdGVVdGY4KHRoaXMuYnVmLCBzdHIsIHRoaXMucG9zKTtcblx0ICAgICAgICB2YXIgbGVuID0gdGhpcy5wb3MgLSBzdGFydFBvcztcblx0XG5cdCAgICAgICAgaWYgKGxlbiA+PSAweDgwKSBtYWtlUm9vbUZvckV4dHJhTGVuZ3RoKHN0YXJ0UG9zLCBsZW4sIHRoaXMpO1xuXHRcblx0ICAgICAgICAvLyBmaW5hbGx5LCB3cml0ZSB0aGUgbWVzc2FnZSBsZW5ndGggaW4gdGhlIHJlc2VydmVkIHBsYWNlIGFuZCByZXN0b3JlIHRoZSBwb3NpdGlvblxuXHQgICAgICAgIHRoaXMucG9zID0gc3RhcnRQb3MgLSAxO1xuXHQgICAgICAgIHRoaXMud3JpdGVWYXJpbnQobGVuKTtcblx0ICAgICAgICB0aGlzLnBvcyArPSBsZW47XG5cdCAgICB9LFxuXHRcblx0ICAgIHdyaXRlRmxvYXQ6IGZ1bmN0aW9uKHZhbCkge1xuXHQgICAgICAgIHRoaXMucmVhbGxvYyg0KTtcblx0ICAgICAgICBpZWVlNzU0LndyaXRlKHRoaXMuYnVmLCB2YWwsIHRoaXMucG9zLCB0cnVlLCAyMywgNCk7XG5cdCAgICAgICAgdGhpcy5wb3MgKz0gNDtcblx0ICAgIH0sXG5cdFxuXHQgICAgd3JpdGVEb3VibGU6IGZ1bmN0aW9uKHZhbCkge1xuXHQgICAgICAgIHRoaXMucmVhbGxvYyg4KTtcblx0ICAgICAgICBpZWVlNzU0LndyaXRlKHRoaXMuYnVmLCB2YWwsIHRoaXMucG9zLCB0cnVlLCA1MiwgOCk7XG5cdCAgICAgICAgdGhpcy5wb3MgKz0gODtcblx0ICAgIH0sXG5cdFxuXHQgICAgd3JpdGVCeXRlczogZnVuY3Rpb24oYnVmZmVyKSB7XG5cdCAgICAgICAgdmFyIGxlbiA9IGJ1ZmZlci5sZW5ndGg7XG5cdCAgICAgICAgdGhpcy53cml0ZVZhcmludChsZW4pO1xuXHQgICAgICAgIHRoaXMucmVhbGxvYyhsZW4pO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHRoaXMuYnVmW3RoaXMucG9zKytdID0gYnVmZmVyW2ldO1xuXHQgICAgfSxcblx0XG5cdCAgICB3cml0ZVJhd01lc3NhZ2U6IGZ1bmN0aW9uKGZuLCBvYmopIHtcblx0ICAgICAgICB0aGlzLnBvcysrOyAvLyByZXNlcnZlIDEgYnl0ZSBmb3Igc2hvcnQgbWVzc2FnZSBsZW5ndGhcblx0XG5cdCAgICAgICAgLy8gd3JpdGUgdGhlIG1lc3NhZ2UgZGlyZWN0bHkgdG8gdGhlIGJ1ZmZlciBhbmQgc2VlIGhvdyBtdWNoIHdhcyB3cml0dGVuXG5cdCAgICAgICAgdmFyIHN0YXJ0UG9zID0gdGhpcy5wb3M7XG5cdCAgICAgICAgZm4ob2JqLCB0aGlzKTtcblx0ICAgICAgICB2YXIgbGVuID0gdGhpcy5wb3MgLSBzdGFydFBvcztcblx0XG5cdCAgICAgICAgaWYgKGxlbiA+PSAweDgwKSBtYWtlUm9vbUZvckV4dHJhTGVuZ3RoKHN0YXJ0UG9zLCBsZW4sIHRoaXMpO1xuXHRcblx0ICAgICAgICAvLyBmaW5hbGx5LCB3cml0ZSB0aGUgbWVzc2FnZSBsZW5ndGggaW4gdGhlIHJlc2VydmVkIHBsYWNlIGFuZCByZXN0b3JlIHRoZSBwb3NpdGlvblxuXHQgICAgICAgIHRoaXMucG9zID0gc3RhcnRQb3MgLSAxO1xuXHQgICAgICAgIHRoaXMud3JpdGVWYXJpbnQobGVuKTtcblx0ICAgICAgICB0aGlzLnBvcyArPSBsZW47XG5cdCAgICB9LFxuXHRcblx0ICAgIHdyaXRlTWVzc2FnZTogZnVuY3Rpb24odGFnLCBmbiwgb2JqKSB7XG5cdCAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5CeXRlcyk7XG5cdCAgICAgICAgdGhpcy53cml0ZVJhd01lc3NhZ2UoZm4sIG9iaik7XG5cdCAgICB9LFxuXHRcblx0ICAgIHdyaXRlUGFja2VkVmFyaW50OiAgIGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkVmFyaW50LCBhcnIpOyAgIH0sXG5cdCAgICB3cml0ZVBhY2tlZFNWYXJpbnQ6ICBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZFNWYXJpbnQsIGFycik7ICB9LFxuXHQgICAgd3JpdGVQYWNrZWRCb29sZWFuOiAgZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWRCb29sZWFuLCBhcnIpOyAgfSxcblx0ICAgIHdyaXRlUGFja2VkRmxvYXQ6ICAgIGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkRmxvYXQsIGFycik7ICAgIH0sXG5cdCAgICB3cml0ZVBhY2tlZERvdWJsZTogICBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZERvdWJsZSwgYXJyKTsgICB9LFxuXHQgICAgd3JpdGVQYWNrZWRGaXhlZDMyOiAgZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWRGaXhlZDMyLCBhcnIpOyAgfSxcblx0ICAgIHdyaXRlUGFja2VkU0ZpeGVkMzI6IGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkU0ZpeGVkMzIsIGFycik7IH0sXG5cdCAgICB3cml0ZVBhY2tlZEZpeGVkNjQ6ICBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZEZpeGVkNjQsIGFycik7ICB9LFxuXHQgICAgd3JpdGVQYWNrZWRTRml4ZWQ2NDogZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWRTRml4ZWQ2NCwgYXJyKTsgfSxcblx0XG5cdCAgICB3cml0ZUJ5dGVzRmllbGQ6IGZ1bmN0aW9uKHRhZywgYnVmZmVyKSB7XG5cdCAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5CeXRlcyk7XG5cdCAgICAgICAgdGhpcy53cml0ZUJ5dGVzKGJ1ZmZlcik7XG5cdCAgICB9LFxuXHQgICAgd3JpdGVGaXhlZDMyRmllbGQ6IGZ1bmN0aW9uKHRhZywgdmFsKSB7XG5cdCAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5GaXhlZDMyKTtcblx0ICAgICAgICB0aGlzLndyaXRlRml4ZWQzMih2YWwpO1xuXHQgICAgfSxcblx0ICAgIHdyaXRlU0ZpeGVkMzJGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcblx0ICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkZpeGVkMzIpO1xuXHQgICAgICAgIHRoaXMud3JpdGVTRml4ZWQzMih2YWwpO1xuXHQgICAgfSxcblx0ICAgIHdyaXRlRml4ZWQ2NEZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuXHQgICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuRml4ZWQ2NCk7XG5cdCAgICAgICAgdGhpcy53cml0ZUZpeGVkNjQodmFsKTtcblx0ICAgIH0sXG5cdCAgICB3cml0ZVNGaXhlZDY0RmllbGQ6IGZ1bmN0aW9uKHRhZywgdmFsKSB7XG5cdCAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5GaXhlZDY0KTtcblx0ICAgICAgICB0aGlzLndyaXRlU0ZpeGVkNjQodmFsKTtcblx0ICAgIH0sXG5cdCAgICB3cml0ZVZhcmludEZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuXHQgICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuVmFyaW50KTtcblx0ICAgICAgICB0aGlzLndyaXRlVmFyaW50KHZhbCk7XG5cdCAgICB9LFxuXHQgICAgd3JpdGVTVmFyaW50RmllbGQ6IGZ1bmN0aW9uKHRhZywgdmFsKSB7XG5cdCAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5WYXJpbnQpO1xuXHQgICAgICAgIHRoaXMud3JpdGVTVmFyaW50KHZhbCk7XG5cdCAgICB9LFxuXHQgICAgd3JpdGVTdHJpbmdGaWVsZDogZnVuY3Rpb24odGFnLCBzdHIpIHtcblx0ICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkJ5dGVzKTtcblx0ICAgICAgICB0aGlzLndyaXRlU3RyaW5nKHN0cik7XG5cdCAgICB9LFxuXHQgICAgd3JpdGVGbG9hdEZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuXHQgICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuRml4ZWQzMik7XG5cdCAgICAgICAgdGhpcy53cml0ZUZsb2F0KHZhbCk7XG5cdCAgICB9LFxuXHQgICAgd3JpdGVEb3VibGVGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcblx0ICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkZpeGVkNjQpO1xuXHQgICAgICAgIHRoaXMud3JpdGVEb3VibGUodmFsKTtcblx0ICAgIH0sXG5cdCAgICB3cml0ZUJvb2xlYW5GaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcblx0ICAgICAgICB0aGlzLndyaXRlVmFyaW50RmllbGQodGFnLCBCb29sZWFuKHZhbCkpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gcmVhZFZhcmludFJlbWFpbmRlcihsLCBzLCBwKSB7XG5cdCAgICB2YXIgYnVmID0gcC5idWYsXG5cdCAgICAgICAgaCwgYjtcblx0XG5cdCAgICBiID0gYnVmW3AucG9zKytdOyBoICA9IChiICYgMHg3MCkgPj4gNDsgIGlmIChiIDwgMHg4MCkgcmV0dXJuIHRvTnVtKGwsIGgsIHMpO1xuXHQgICAgYiA9IGJ1ZltwLnBvcysrXTsgaCB8PSAoYiAmIDB4N2YpIDw8IDM7ICBpZiAoYiA8IDB4ODApIHJldHVybiB0b051bShsLCBoLCBzKTtcblx0ICAgIGIgPSBidWZbcC5wb3MrK107IGggfD0gKGIgJiAweDdmKSA8PCAxMDsgaWYgKGIgPCAweDgwKSByZXR1cm4gdG9OdW0obCwgaCwgcyk7XG5cdCAgICBiID0gYnVmW3AucG9zKytdOyBoIHw9IChiICYgMHg3ZikgPDwgMTc7IGlmIChiIDwgMHg4MCkgcmV0dXJuIHRvTnVtKGwsIGgsIHMpO1xuXHQgICAgYiA9IGJ1ZltwLnBvcysrXTsgaCB8PSAoYiAmIDB4N2YpIDw8IDI0OyBpZiAoYiA8IDB4ODApIHJldHVybiB0b051bShsLCBoLCBzKTtcblx0ICAgIGIgPSBidWZbcC5wb3MrK107IGggfD0gKGIgJiAweDAxKSA8PCAzMTsgaWYgKGIgPCAweDgwKSByZXR1cm4gdG9OdW0obCwgaCwgcyk7XG5cdFxuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB2YXJpbnQgbm90IG1vcmUgdGhhbiAxMCBieXRlcycpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkUGFja2VkRW5kKHBiZikge1xuXHQgICAgcmV0dXJuIHBiZi50eXBlID09PSBQYmYuQnl0ZXMgP1xuXHQgICAgICAgIHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zIDogcGJmLnBvcyArIDE7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvTnVtKGxvdywgaGlnaCwgaXNTaWduZWQpIHtcblx0ICAgIGlmIChpc1NpZ25lZCkge1xuXHQgICAgICAgIHJldHVybiBoaWdoICogMHgxMDAwMDAwMDAgKyAobG93ID4+PiAwKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gKChoaWdoID4+PiAwKSAqIDB4MTAwMDAwMDAwKSArIChsb3cgPj4+IDApO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZUJpZ1ZhcmludCh2YWwsIHBiZikge1xuXHQgICAgdmFyIGxvdywgaGlnaDtcblx0XG5cdCAgICBpZiAodmFsID49IDApIHtcblx0ICAgICAgICBsb3cgID0gKHZhbCAlIDB4MTAwMDAwMDAwKSB8IDA7XG5cdCAgICAgICAgaGlnaCA9ICh2YWwgLyAweDEwMDAwMDAwMCkgfCAwO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBsb3cgID0gfigtdmFsICUgMHgxMDAwMDAwMDApO1xuXHQgICAgICAgIGhpZ2ggPSB+KC12YWwgLyAweDEwMDAwMDAwMCk7XG5cdFxuXHQgICAgICAgIGlmIChsb3cgXiAweGZmZmZmZmZmKSB7XG5cdCAgICAgICAgICAgIGxvdyA9IChsb3cgKyAxKSB8IDA7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgbG93ID0gMDtcblx0ICAgICAgICAgICAgaGlnaCA9IChoaWdoICsgMSkgfCAwO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAodmFsID49IDB4MTAwMDAwMDAwMDAwMDAwMDAgfHwgdmFsIDwgLTB4MTAwMDAwMDAwMDAwMDAwMDApIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dpdmVuIHZhcmludCBkb2VzblxcJ3QgZml0IGludG8gMTAgYnl0ZXMnKTtcblx0ICAgIH1cblx0XG5cdCAgICBwYmYucmVhbGxvYygxMCk7XG5cdFxuXHQgICAgd3JpdGVCaWdWYXJpbnRMb3cobG93LCBoaWdoLCBwYmYpO1xuXHQgICAgd3JpdGVCaWdWYXJpbnRIaWdoKGhpZ2gsIHBiZik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlQmlnVmFyaW50TG93KGxvdywgaGlnaCwgcGJmKSB7XG5cdCAgICBwYmYuYnVmW3BiZi5wb3MrK10gPSBsb3cgJiAweDdmIHwgMHg4MDsgbG93ID4+Pj0gNztcblx0ICAgIHBiZi5idWZbcGJmLnBvcysrXSA9IGxvdyAmIDB4N2YgfCAweDgwOyBsb3cgPj4+PSA3O1xuXHQgICAgcGJmLmJ1ZltwYmYucG9zKytdID0gbG93ICYgMHg3ZiB8IDB4ODA7IGxvdyA+Pj49IDc7XG5cdCAgICBwYmYuYnVmW3BiZi5wb3MrK10gPSBsb3cgJiAweDdmIHwgMHg4MDsgbG93ID4+Pj0gNztcblx0ICAgIHBiZi5idWZbcGJmLnBvc10gICA9IGxvdyAmIDB4N2Y7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlQmlnVmFyaW50SGlnaChoaWdoLCBwYmYpIHtcblx0ICAgIHZhciBsc2IgPSAoaGlnaCAmIDB4MDcpIDw8IDQ7XG5cdFxuXHQgICAgcGJmLmJ1ZltwYmYucG9zKytdIHw9IGxzYiAgICAgICAgIHwgKChoaWdoID4+Pj0gMykgPyAweDgwIDogMCk7IGlmICghaGlnaCkgcmV0dXJuO1xuXHQgICAgcGJmLmJ1ZltwYmYucG9zKytdICA9IGhpZ2ggJiAweDdmIHwgKChoaWdoID4+Pj0gNykgPyAweDgwIDogMCk7IGlmICghaGlnaCkgcmV0dXJuO1xuXHQgICAgcGJmLmJ1ZltwYmYucG9zKytdICA9IGhpZ2ggJiAweDdmIHwgKChoaWdoID4+Pj0gNykgPyAweDgwIDogMCk7IGlmICghaGlnaCkgcmV0dXJuO1xuXHQgICAgcGJmLmJ1ZltwYmYucG9zKytdICA9IGhpZ2ggJiAweDdmIHwgKChoaWdoID4+Pj0gNykgPyAweDgwIDogMCk7IGlmICghaGlnaCkgcmV0dXJuO1xuXHQgICAgcGJmLmJ1ZltwYmYucG9zKytdICA9IGhpZ2ggJiAweDdmIHwgKChoaWdoID4+Pj0gNykgPyAweDgwIDogMCk7IGlmICghaGlnaCkgcmV0dXJuO1xuXHQgICAgcGJmLmJ1ZltwYmYucG9zKytdICA9IGhpZ2ggJiAweDdmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtYWtlUm9vbUZvckV4dHJhTGVuZ3RoKHN0YXJ0UG9zLCBsZW4sIHBiZikge1xuXHQgICAgdmFyIGV4dHJhTGVuID1cblx0ICAgICAgICBsZW4gPD0gMHgzZmZmID8gMSA6XG5cdCAgICAgICAgbGVuIDw9IDB4MWZmZmZmID8gMiA6XG5cdCAgICAgICAgbGVuIDw9IDB4ZmZmZmZmZiA/IDMgOiBNYXRoLmZsb29yKE1hdGgubG9nKGxlbikgLyAoTWF0aC5MTjIgKiA3KSk7XG5cdFxuXHQgICAgLy8gaWYgMSBieXRlIGlzbid0IGVub3VnaCBmb3IgZW5jb2RpbmcgbWVzc2FnZSBsZW5ndGgsIHNoaWZ0IHRoZSBkYXRhIHRvIHRoZSByaWdodFxuXHQgICAgcGJmLnJlYWxsb2MoZXh0cmFMZW4pO1xuXHQgICAgZm9yICh2YXIgaSA9IHBiZi5wb3MgLSAxOyBpID49IHN0YXJ0UG9zOyBpLS0pIHBiZi5idWZbaSArIGV4dHJhTGVuXSA9IHBiZi5idWZbaV07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlUGFja2VkVmFyaW50KGFyciwgcGJmKSAgIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZVZhcmludChhcnJbaV0pOyAgIH1cblx0ZnVuY3Rpb24gd3JpdGVQYWNrZWRTVmFyaW50KGFyciwgcGJmKSAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlU1ZhcmludChhcnJbaV0pOyAgfVxuXHRmdW5jdGlvbiB3cml0ZVBhY2tlZEZsb2F0KGFyciwgcGJmKSAgICB7IGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSBwYmYud3JpdGVGbG9hdChhcnJbaV0pOyAgICB9XG5cdGZ1bmN0aW9uIHdyaXRlUGFja2VkRG91YmxlKGFyciwgcGJmKSAgIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZURvdWJsZShhcnJbaV0pOyAgIH1cblx0ZnVuY3Rpb24gd3JpdGVQYWNrZWRCb29sZWFuKGFyciwgcGJmKSAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlQm9vbGVhbihhcnJbaV0pOyAgfVxuXHRmdW5jdGlvbiB3cml0ZVBhY2tlZEZpeGVkMzIoYXJyLCBwYmYpICB7IGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSBwYmYud3JpdGVGaXhlZDMyKGFycltpXSk7ICB9XG5cdGZ1bmN0aW9uIHdyaXRlUGFja2VkU0ZpeGVkMzIoYXJyLCBwYmYpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZVNGaXhlZDMyKGFycltpXSk7IH1cblx0ZnVuY3Rpb24gd3JpdGVQYWNrZWRGaXhlZDY0KGFyciwgcGJmKSAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlRml4ZWQ2NChhcnJbaV0pOyAgfVxuXHRmdW5jdGlvbiB3cml0ZVBhY2tlZFNGaXhlZDY0KGFyciwgcGJmKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSBwYmYud3JpdGVTRml4ZWQ2NChhcnJbaV0pOyB9XG5cdFxuXHQvLyBCdWZmZXIgY29kZSBiZWxvdyBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyLCBNSVQtbGljZW5zZWRcblx0XG5cdGZ1bmN0aW9uIHJlYWRVSW50MzIoYnVmLCBwb3MpIHtcblx0ICAgIHJldHVybiAoKGJ1Zltwb3NdKSB8XG5cdCAgICAgICAgKGJ1Zltwb3MgKyAxXSA8PCA4KSB8XG5cdCAgICAgICAgKGJ1Zltwb3MgKyAyXSA8PCAxNikpICtcblx0ICAgICAgICAoYnVmW3BvcyArIDNdICogMHgxMDAwMDAwKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gd3JpdGVJbnQzMihidWYsIHZhbCwgcG9zKSB7XG5cdCAgICBidWZbcG9zXSA9IHZhbDtcblx0ICAgIGJ1Zltwb3MgKyAxXSA9ICh2YWwgPj4+IDgpO1xuXHQgICAgYnVmW3BvcyArIDJdID0gKHZhbCA+Pj4gMTYpO1xuXHQgICAgYnVmW3BvcyArIDNdID0gKHZhbCA+Pj4gMjQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkSW50MzIoYnVmLCBwb3MpIHtcblx0ICAgIHJldHVybiAoKGJ1Zltwb3NdKSB8XG5cdCAgICAgICAgKGJ1Zltwb3MgKyAxXSA8PCA4KSB8XG5cdCAgICAgICAgKGJ1Zltwb3MgKyAyXSA8PCAxNikpICtcblx0ICAgICAgICAoYnVmW3BvcyArIDNdIDw8IDI0KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZFV0ZjgoYnVmLCBwb3MsIGVuZCkge1xuXHQgICAgdmFyIHN0ciA9ICcnO1xuXHQgICAgdmFyIGkgPSBwb3M7XG5cdFxuXHQgICAgd2hpbGUgKGkgPCBlbmQpIHtcblx0ICAgICAgICB2YXIgYjAgPSBidWZbaV07XG5cdCAgICAgICAgdmFyIGMgPSBudWxsOyAvLyBjb2RlcG9pbnRcblx0ICAgICAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9XG5cdCAgICAgICAgICAgIGIwID4gMHhFRiA/IDQgOlxuXHQgICAgICAgICAgICBiMCA+IDB4REYgPyAzIDpcblx0ICAgICAgICAgICAgYjAgPiAweEJGID8gMiA6IDE7XG5cdFxuXHQgICAgICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA+IGVuZCkgYnJlYWs7XG5cdFxuXHQgICAgICAgIHZhciBiMSwgYjIsIGIzO1xuXHRcblx0ICAgICAgICBpZiAoYnl0ZXNQZXJTZXF1ZW5jZSA9PT0gMSkge1xuXHQgICAgICAgICAgICBpZiAoYjAgPCAweDgwKSB7XG5cdCAgICAgICAgICAgICAgICBjID0gYjA7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKGJ5dGVzUGVyU2VxdWVuY2UgPT09IDIpIHtcblx0ICAgICAgICAgICAgYjEgPSBidWZbaSArIDFdO1xuXHQgICAgICAgICAgICBpZiAoKGIxICYgMHhDMCkgPT09IDB4ODApIHtcblx0ICAgICAgICAgICAgICAgIGMgPSAoYjAgJiAweDFGKSA8PCAweDYgfCAoYjEgJiAweDNGKTtcblx0ICAgICAgICAgICAgICAgIGlmIChjIDw9IDB4N0YpIHtcblx0ICAgICAgICAgICAgICAgICAgICBjID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAoYnl0ZXNQZXJTZXF1ZW5jZSA9PT0gMykge1xuXHQgICAgICAgICAgICBiMSA9IGJ1ZltpICsgMV07XG5cdCAgICAgICAgICAgIGIyID0gYnVmW2kgKyAyXTtcblx0ICAgICAgICAgICAgaWYgKChiMSAmIDB4QzApID09PSAweDgwICYmIChiMiAmIDB4QzApID09PSAweDgwKSB7XG5cdCAgICAgICAgICAgICAgICBjID0gKGIwICYgMHhGKSA8PCAweEMgfCAoYjEgJiAweDNGKSA8PCAweDYgfCAoYjIgJiAweDNGKTtcblx0ICAgICAgICAgICAgICAgIGlmIChjIDw9IDB4N0ZGIHx8IChjID49IDB4RDgwMCAmJiBjIDw9IDB4REZGRikpIHtcblx0ICAgICAgICAgICAgICAgICAgICBjID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAoYnl0ZXNQZXJTZXF1ZW5jZSA9PT0gNCkge1xuXHQgICAgICAgICAgICBiMSA9IGJ1ZltpICsgMV07XG5cdCAgICAgICAgICAgIGIyID0gYnVmW2kgKyAyXTtcblx0ICAgICAgICAgICAgYjMgPSBidWZbaSArIDNdO1xuXHQgICAgICAgICAgICBpZiAoKGIxICYgMHhDMCkgPT09IDB4ODAgJiYgKGIyICYgMHhDMCkgPT09IDB4ODAgJiYgKGIzICYgMHhDMCkgPT09IDB4ODApIHtcblx0ICAgICAgICAgICAgICAgIGMgPSAoYjAgJiAweEYpIDw8IDB4MTIgfCAoYjEgJiAweDNGKSA8PCAweEMgfCAoYjIgJiAweDNGKSA8PCAweDYgfCAoYjMgJiAweDNGKTtcblx0ICAgICAgICAgICAgICAgIGlmIChjIDw9IDB4RkZGRiB8fCBjID49IDB4MTEwMDAwKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYyA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChjID09PSBudWxsKSB7XG5cdCAgICAgICAgICAgIGMgPSAweEZGRkQ7XG5cdCAgICAgICAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxO1xuXHRcblx0ICAgICAgICB9IGVsc2UgaWYgKGMgPiAweEZGRkYpIHtcblx0ICAgICAgICAgICAgYyAtPSAweDEwMDAwO1xuXHQgICAgICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKTtcblx0ICAgICAgICAgICAgYyA9IDB4REMwMCB8IGMgJiAweDNGRjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHN0ciArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpO1xuXHQgICAgICAgIGkgKz0gYnl0ZXNQZXJTZXF1ZW5jZTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gc3RyO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZVV0ZjgoYnVmLCBzdHIsIHBvcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGMsIGxlYWQ7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7IC8vIGNvZGUgcG9pbnRcblx0XG5cdCAgICAgICAgaWYgKGMgPiAweEQ3RkYgJiYgYyA8IDB4RTAwMCkge1xuXHQgICAgICAgICAgICBpZiAobGVhZCkge1xuXHQgICAgICAgICAgICAgICAgaWYgKGMgPCAweERDMDApIHtcblx0ICAgICAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gMHhFRjtcblx0ICAgICAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gMHhCRjtcblx0ICAgICAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gMHhCRDtcblx0ICAgICAgICAgICAgICAgICAgICBsZWFkID0gYztcblx0ICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYyA9IGxlYWQgLSAweEQ4MDAgPDwgMTAgfCBjIC0gMHhEQzAwIHwgMHgxMDAwMDtcblx0ICAgICAgICAgICAgICAgICAgICBsZWFkID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGlmIChjID4gMHhEQkZGIHx8IChpICsgMSA9PT0gc3RyLmxlbmd0aCkpIHtcblx0ICAgICAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gMHhFRjtcblx0ICAgICAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gMHhCRjtcblx0ICAgICAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gMHhCRDtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgbGVhZCA9IGM7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAobGVhZCkge1xuXHQgICAgICAgICAgICBidWZbcG9zKytdID0gMHhFRjtcblx0ICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4QkY7XG5cdCAgICAgICAgICAgIGJ1Zltwb3MrK10gPSAweEJEO1xuXHQgICAgICAgICAgICBsZWFkID0gbnVsbDtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChjIDwgMHg4MCkge1xuXHQgICAgICAgICAgICBidWZbcG9zKytdID0gYztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBpZiAoYyA8IDB4ODAwKSB7XG5cdCAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gYyA+PiAweDYgfCAweEMwO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgaWYgKGMgPCAweDEwMDAwKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IGMgPj4gMHhDIHwgMHhFMDtcblx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IGMgPj4gMHgxMiB8IDB4RjA7XG5cdCAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IGMgPj4gMHhDICYgMHgzRiB8IDB4ODA7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gYyA+PiAweDYgJiAweDNGIHwgMHg4MDtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICBidWZbcG9zKytdID0gYyAmIDB4M0YgfCAweDgwO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBwb3M7XG5cdH1cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzU5OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdGV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG5cdCAgdmFyIGUsIG1cblx0ICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxXG5cdCAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcblx0ICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcblx0ICB2YXIgbkJpdHMgPSAtN1xuXHQgIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcblx0ICB2YXIgZCA9IGlzTEUgPyAtMSA6IDFcblx0ICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXHRcblx0ICBpICs9IGRcblx0XG5cdCAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcblx0ICBzID4+PSAoLW5CaXRzKVxuXHQgIG5CaXRzICs9IGVMZW5cblx0ICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gKGUgKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cdFxuXHQgIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG5cdCAgZSA+Pj0gKC1uQml0cylcblx0ICBuQml0cyArPSBtTGVuXG5cdCAgZm9yICg7IG5CaXRzID4gMDsgbSA9IChtICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXHRcblx0ICBpZiAoZSA9PT0gMCkge1xuXHQgICAgZSA9IDEgLSBlQmlhc1xuXHQgIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuXHQgICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG5cdCAgfSBlbHNlIHtcblx0ICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcblx0ICAgIGUgPSBlIC0gZUJpYXNcblx0ICB9XG5cdCAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcblx0fVxuXHRcblx0ZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuXHQgIHZhciBlLCBtLCBjXG5cdCAgdmFyIGVMZW4gPSAobkJ5dGVzICogOCkgLSBtTGVuIC0gMVxuXHQgIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG5cdCAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG5cdCAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuXHQgIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcblx0ICB2YXIgZCA9IGlzTEUgPyAxIDogLTFcblx0ICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXHRcblx0ICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKVxuXHRcblx0ICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuXHQgICAgbSA9IGlzTmFOKHZhbHVlKSA/IDEgOiAwXG5cdCAgICBlID0gZU1heFxuXHQgIH0gZWxzZSB7XG5cdCAgICBlID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMilcblx0ICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcblx0ICAgICAgZS0tXG5cdCAgICAgIGMgKj0gMlxuXHQgICAgfVxuXHQgICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG5cdCAgICAgIHZhbHVlICs9IHJ0IC8gY1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG5cdCAgICB9XG5cdCAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcblx0ICAgICAgZSsrXG5cdCAgICAgIGMgLz0gMlxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChlICsgZUJpYXMgPj0gZU1heCkge1xuXHQgICAgICBtID0gMFxuXHQgICAgICBlID0gZU1heFxuXHQgICAgfSBlbHNlIGlmIChlICsgZUJpYXMgPj0gMSkge1xuXHQgICAgICBtID0gKCh2YWx1ZSAqIGMpIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuXHQgICAgICBlID0gZSArIGVCaWFzXG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcblx0ICAgICAgZSA9IDBcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZvciAoOyBtTGVuID49IDg7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IG0gJiAweGZmLCBpICs9IGQsIG0gLz0gMjU2LCBtTGVuIC09IDgpIHt9XG5cdFxuXHQgIGUgPSAoZSA8PCBtTGVuKSB8IG1cblx0ICBlTGVuICs9IG1MZW5cblx0ICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cdFxuXHQgIGJ1ZmZlcltvZmZzZXQgKyBpIC0gZF0gfD0gcyAqIDEyOFxuXHR9XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM2MDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cy5WZWN0b3JUaWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjEpO1xuXHRtb2R1bGUuZXhwb3J0cy5WZWN0b3JUaWxlRmVhdHVyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYzKTtcblx0bW9kdWxlLmV4cG9ydHMuVmVjdG9yVGlsZUxheWVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNjIpO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNjE6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIFZlY3RvclRpbGVMYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMzYyKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gVmVjdG9yVGlsZTtcblx0XG5cdGZ1bmN0aW9uIFZlY3RvclRpbGUocGJmLCBlbmQpIHtcblx0ICAgIHRoaXMubGF5ZXJzID0gcGJmLnJlYWRGaWVsZHMocmVhZFRpbGUsIHt9LCBlbmQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkVGlsZSh0YWcsIGxheWVycywgcGJmKSB7XG5cdCAgICBpZiAodGFnID09PSAzKSB7XG5cdCAgICAgICAgdmFyIGxheWVyID0gbmV3IFZlY3RvclRpbGVMYXllcihwYmYsIHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zKTtcblx0ICAgICAgICBpZiAobGF5ZXIubGVuZ3RoKSBsYXllcnNbbGF5ZXIubmFtZV0gPSBsYXllcjtcblx0ICAgIH1cblx0fVxuXHRcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzYyOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBWZWN0b3JUaWxlRmVhdHVyZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYzKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gVmVjdG9yVGlsZUxheWVyO1xuXHRcblx0ZnVuY3Rpb24gVmVjdG9yVGlsZUxheWVyKHBiZiwgZW5kKSB7XG5cdCAgICAvLyBQdWJsaWNcblx0ICAgIHRoaXMudmVyc2lvbiA9IDE7XG5cdCAgICB0aGlzLm5hbWUgPSBudWxsO1xuXHQgICAgdGhpcy5leHRlbnQgPSA0MDk2O1xuXHQgICAgdGhpcy5sZW5ndGggPSAwO1xuXHRcblx0ICAgIC8vIFByaXZhdGVcblx0ICAgIHRoaXMuX3BiZiA9IHBiZjtcblx0ICAgIHRoaXMuX2tleXMgPSBbXTtcblx0ICAgIHRoaXMuX3ZhbHVlcyA9IFtdO1xuXHQgICAgdGhpcy5fZmVhdHVyZXMgPSBbXTtcblx0XG5cdCAgICBwYmYucmVhZEZpZWxkcyhyZWFkTGF5ZXIsIHRoaXMsIGVuZCk7XG5cdFxuXHQgICAgdGhpcy5sZW5ndGggPSB0aGlzLl9mZWF0dXJlcy5sZW5ndGg7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRMYXllcih0YWcsIGxheWVyLCBwYmYpIHtcblx0ICAgIGlmICh0YWcgPT09IDE1KSBsYXllci52ZXJzaW9uID0gcGJmLnJlYWRWYXJpbnQoKTtcblx0ICAgIGVsc2UgaWYgKHRhZyA9PT0gMSkgbGF5ZXIubmFtZSA9IHBiZi5yZWFkU3RyaW5nKCk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDUpIGxheWVyLmV4dGVudCA9IHBiZi5yZWFkVmFyaW50KCk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDIpIGxheWVyLl9mZWF0dXJlcy5wdXNoKHBiZi5wb3MpO1xuXHQgICAgZWxzZSBpZiAodGFnID09PSAzKSBsYXllci5fa2V5cy5wdXNoKHBiZi5yZWFkU3RyaW5nKCkpO1xuXHQgICAgZWxzZSBpZiAodGFnID09PSA0KSBsYXllci5fdmFsdWVzLnB1c2gocmVhZFZhbHVlTWVzc2FnZShwYmYpKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZFZhbHVlTWVzc2FnZShwYmYpIHtcblx0ICAgIHZhciB2YWx1ZSA9IG51bGwsXG5cdCAgICAgICAgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3M7XG5cdFxuXHQgICAgd2hpbGUgKHBiZi5wb3MgPCBlbmQpIHtcblx0ICAgICAgICB2YXIgdGFnID0gcGJmLnJlYWRWYXJpbnQoKSA+PiAzO1xuXHRcblx0ICAgICAgICB2YWx1ZSA9IHRhZyA9PT0gMSA/IHBiZi5yZWFkU3RyaW5nKCkgOlxuXHQgICAgICAgICAgICB0YWcgPT09IDIgPyBwYmYucmVhZEZsb2F0KCkgOlxuXHQgICAgICAgICAgICB0YWcgPT09IDMgPyBwYmYucmVhZERvdWJsZSgpIDpcblx0ICAgICAgICAgICAgdGFnID09PSA0ID8gcGJmLnJlYWRWYXJpbnQ2NCgpIDpcblx0ICAgICAgICAgICAgdGFnID09PSA1ID8gcGJmLnJlYWRWYXJpbnQoKSA6XG5cdCAgICAgICAgICAgIHRhZyA9PT0gNiA/IHBiZi5yZWFkU1ZhcmludCgpIDpcblx0ICAgICAgICAgICAgdGFnID09PSA3ID8gcGJmLnJlYWRCb29sZWFuKCkgOiBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0fVxuXHRcblx0Ly8gcmV0dXJuIGZlYXR1cmUgYGlgIGZyb20gdGhpcyBsYXllciBhcyBhIGBWZWN0b3JUaWxlRmVhdHVyZWBcblx0VmVjdG9yVGlsZUxheWVyLnByb3RvdHlwZS5mZWF0dXJlID0gZnVuY3Rpb24oaSkge1xuXHQgICAgaWYgKGkgPCAwIHx8IGkgPj0gdGhpcy5fZmVhdHVyZXMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ2ZlYXR1cmUgaW5kZXggb3V0IG9mIGJvdW5kcycpO1xuXHRcblx0ICAgIHRoaXMuX3BiZi5wb3MgPSB0aGlzLl9mZWF0dXJlc1tpXTtcblx0XG5cdCAgICB2YXIgZW5kID0gdGhpcy5fcGJmLnJlYWRWYXJpbnQoKSArIHRoaXMuX3BiZi5wb3M7XG5cdCAgICByZXR1cm4gbmV3IFZlY3RvclRpbGVGZWF0dXJlKHRoaXMuX3BiZiwgZW5kLCB0aGlzLmV4dGVudCwgdGhpcy5fa2V5cywgdGhpcy5fdmFsdWVzKTtcblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzYzOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBQb2ludCA9IF9fd2VicGFja19yZXF1aXJlX18oMzY0KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gVmVjdG9yVGlsZUZlYXR1cmU7XG5cdFxuXHRmdW5jdGlvbiBWZWN0b3JUaWxlRmVhdHVyZShwYmYsIGVuZCwgZXh0ZW50LCBrZXlzLCB2YWx1ZXMpIHtcblx0ICAgIC8vIFB1YmxpY1xuXHQgICAgdGhpcy5wcm9wZXJ0aWVzID0ge307XG5cdCAgICB0aGlzLmV4dGVudCA9IGV4dGVudDtcblx0ICAgIHRoaXMudHlwZSA9IDA7XG5cdFxuXHQgICAgLy8gUHJpdmF0ZVxuXHQgICAgdGhpcy5fcGJmID0gcGJmO1xuXHQgICAgdGhpcy5fZ2VvbWV0cnkgPSAtMTtcblx0ICAgIHRoaXMuX2tleXMgPSBrZXlzO1xuXHQgICAgdGhpcy5fdmFsdWVzID0gdmFsdWVzO1xuXHRcblx0ICAgIHBiZi5yZWFkRmllbGRzKHJlYWRGZWF0dXJlLCB0aGlzLCBlbmQpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkRmVhdHVyZSh0YWcsIGZlYXR1cmUsIHBiZikge1xuXHQgICAgaWYgKHRhZyA9PSAxKSBmZWF0dXJlLmlkID0gcGJmLnJlYWRWYXJpbnQoKTtcblx0ICAgIGVsc2UgaWYgKHRhZyA9PSAyKSByZWFkVGFnKHBiZiwgZmVhdHVyZSk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT0gMykgZmVhdHVyZS50eXBlID0gcGJmLnJlYWRWYXJpbnQoKTtcblx0ICAgIGVsc2UgaWYgKHRhZyA9PSA0KSBmZWF0dXJlLl9nZW9tZXRyeSA9IHBiZi5wb3M7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRUYWcocGJmLCBmZWF0dXJlKSB7XG5cdCAgICB2YXIgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3M7XG5cdFxuXHQgICAgd2hpbGUgKHBiZi5wb3MgPCBlbmQpIHtcblx0ICAgICAgICB2YXIga2V5ID0gZmVhdHVyZS5fa2V5c1twYmYucmVhZFZhcmludCgpXSxcblx0ICAgICAgICAgICAgdmFsdWUgPSBmZWF0dXJlLl92YWx1ZXNbcGJmLnJlYWRWYXJpbnQoKV07XG5cdCAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzW2tleV0gPSB2YWx1ZTtcblx0ICAgIH1cblx0fVxuXHRcblx0VmVjdG9yVGlsZUZlYXR1cmUudHlwZXMgPSBbJ1Vua25vd24nLCAnUG9pbnQnLCAnTGluZVN0cmluZycsICdQb2x5Z29uJ107XG5cdFxuXHRWZWN0b3JUaWxlRmVhdHVyZS5wcm90b3R5cGUubG9hZEdlb21ldHJ5ID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgcGJmID0gdGhpcy5fcGJmO1xuXHQgICAgcGJmLnBvcyA9IHRoaXMuX2dlb21ldHJ5O1xuXHRcblx0ICAgIHZhciBlbmQgPSBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcyxcblx0ICAgICAgICBjbWQgPSAxLFxuXHQgICAgICAgIGxlbmd0aCA9IDAsXG5cdCAgICAgICAgeCA9IDAsXG5cdCAgICAgICAgeSA9IDAsXG5cdCAgICAgICAgbGluZXMgPSBbXSxcblx0ICAgICAgICBsaW5lO1xuXHRcblx0ICAgIHdoaWxlIChwYmYucG9zIDwgZW5kKSB7XG5cdCAgICAgICAgaWYgKGxlbmd0aCA8PSAwKSB7XG5cdCAgICAgICAgICAgIHZhciBjbWRMZW4gPSBwYmYucmVhZFZhcmludCgpO1xuXHQgICAgICAgICAgICBjbWQgPSBjbWRMZW4gJiAweDc7XG5cdCAgICAgICAgICAgIGxlbmd0aCA9IGNtZExlbiA+PiAzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgbGVuZ3RoLS07XG5cdFxuXHQgICAgICAgIGlmIChjbWQgPT09IDEgfHwgY21kID09PSAyKSB7XG5cdCAgICAgICAgICAgIHggKz0gcGJmLnJlYWRTVmFyaW50KCk7XG5cdCAgICAgICAgICAgIHkgKz0gcGJmLnJlYWRTVmFyaW50KCk7XG5cdFxuXHQgICAgICAgICAgICBpZiAoY21kID09PSAxKSB7IC8vIG1vdmVUb1xuXHQgICAgICAgICAgICAgICAgaWYgKGxpbmUpIGxpbmVzLnB1c2gobGluZSk7XG5cdCAgICAgICAgICAgICAgICBsaW5lID0gW107XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIGxpbmUucHVzaChuZXcgUG9pbnQoeCwgeSkpO1xuXHRcblx0ICAgICAgICB9IGVsc2UgaWYgKGNtZCA9PT0gNykge1xuXHRcblx0ICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9tYXBuaWstdmVjdG9yLXRpbGUvaXNzdWVzLzkwXG5cdCAgICAgICAgICAgIGlmIChsaW5lKSB7XG5cdCAgICAgICAgICAgICAgICBsaW5lLnB1c2gobGluZVswXS5jbG9uZSgpKTsgLy8gY2xvc2VQb2x5Z29uXG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGNvbW1hbmQgJyArIGNtZCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChsaW5lKSBsaW5lcy5wdXNoKGxpbmUpO1xuXHRcblx0ICAgIHJldHVybiBsaW5lcztcblx0fTtcblx0XG5cdFZlY3RvclRpbGVGZWF0dXJlLnByb3RvdHlwZS5iYm94ID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgcGJmID0gdGhpcy5fcGJmO1xuXHQgICAgcGJmLnBvcyA9IHRoaXMuX2dlb21ldHJ5O1xuXHRcblx0ICAgIHZhciBlbmQgPSBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcyxcblx0ICAgICAgICBjbWQgPSAxLFxuXHQgICAgICAgIGxlbmd0aCA9IDAsXG5cdCAgICAgICAgeCA9IDAsXG5cdCAgICAgICAgeSA9IDAsXG5cdCAgICAgICAgeDEgPSBJbmZpbml0eSxcblx0ICAgICAgICB4MiA9IC1JbmZpbml0eSxcblx0ICAgICAgICB5MSA9IEluZmluaXR5LFxuXHQgICAgICAgIHkyID0gLUluZmluaXR5O1xuXHRcblx0ICAgIHdoaWxlIChwYmYucG9zIDwgZW5kKSB7XG5cdCAgICAgICAgaWYgKGxlbmd0aCA8PSAwKSB7XG5cdCAgICAgICAgICAgIHZhciBjbWRMZW4gPSBwYmYucmVhZFZhcmludCgpO1xuXHQgICAgICAgICAgICBjbWQgPSBjbWRMZW4gJiAweDc7XG5cdCAgICAgICAgICAgIGxlbmd0aCA9IGNtZExlbiA+PiAzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgbGVuZ3RoLS07XG5cdFxuXHQgICAgICAgIGlmIChjbWQgPT09IDEgfHwgY21kID09PSAyKSB7XG5cdCAgICAgICAgICAgIHggKz0gcGJmLnJlYWRTVmFyaW50KCk7XG5cdCAgICAgICAgICAgIHkgKz0gcGJmLnJlYWRTVmFyaW50KCk7XG5cdCAgICAgICAgICAgIGlmICh4IDwgeDEpIHgxID0geDtcblx0ICAgICAgICAgICAgaWYgKHggPiB4MikgeDIgPSB4O1xuXHQgICAgICAgICAgICBpZiAoeSA8IHkxKSB5MSA9IHk7XG5cdCAgICAgICAgICAgIGlmICh5ID4geTIpIHkyID0geTtcblx0XG5cdCAgICAgICAgfSBlbHNlIGlmIChjbWQgIT09IDcpIHtcblx0ICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGNvbW1hbmQgJyArIGNtZCk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBbeDEsIHkxLCB4MiwgeTJdO1xuXHR9O1xuXHRcblx0VmVjdG9yVGlsZUZlYXR1cmUucHJvdG90eXBlLnRvR2VvSlNPTiA9IGZ1bmN0aW9uKHgsIHksIHopIHtcblx0ICAgIHZhciBzaXplID0gdGhpcy5leHRlbnQgKiBNYXRoLnBvdygyLCB6KSxcblx0ICAgICAgICB4MCA9IHRoaXMuZXh0ZW50ICogeCxcblx0ICAgICAgICB5MCA9IHRoaXMuZXh0ZW50ICogeSxcblx0ICAgICAgICBjb29yZHMgPSB0aGlzLmxvYWRHZW9tZXRyeSgpLFxuXHQgICAgICAgIHR5cGUgPSBWZWN0b3JUaWxlRmVhdHVyZS50eXBlc1t0aGlzLnR5cGVdLFxuXHQgICAgICAgIGksIGo7XG5cdFxuXHQgICAgZnVuY3Rpb24gcHJvamVjdChsaW5lKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsaW5lLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgIHZhciBwID0gbGluZVtqXSwgeTIgPSAxODAgLSAocC55ICsgeTApICogMzYwIC8gc2l6ZTtcblx0ICAgICAgICAgICAgbGluZVtqXSA9IFtcblx0ICAgICAgICAgICAgICAgIChwLnggKyB4MCkgKiAzNjAgLyBzaXplIC0gMTgwLFxuXHQgICAgICAgICAgICAgICAgMzYwIC8gTWF0aC5QSSAqIE1hdGguYXRhbihNYXRoLmV4cCh5MiAqIE1hdGguUEkgLyAxODApKSAtIDkwXG5cdCAgICAgICAgICAgIF07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHN3aXRjaCAodGhpcy50eXBlKSB7XG5cdCAgICBjYXNlIDE6XG5cdCAgICAgICAgdmFyIHBvaW50cyA9IFtdO1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgcG9pbnRzW2ldID0gY29vcmRzW2ldWzBdO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjb29yZHMgPSBwb2ludHM7XG5cdCAgICAgICAgcHJvamVjdChjb29yZHMpO1xuXHQgICAgICAgIGJyZWFrO1xuXHRcblx0ICAgIGNhc2UgMjpcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHByb2plY3QoY29vcmRzW2ldKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgYnJlYWs7XG5cdFxuXHQgICAgY2FzZSAzOlxuXHQgICAgICAgIGNvb3JkcyA9IGNsYXNzaWZ5UmluZ3MoY29vcmRzKTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBjb29yZHNbaV0ubGVuZ3RoOyBqKyspIHtcblx0ICAgICAgICAgICAgICAgIHByb2plY3QoY29vcmRzW2ldW2pdKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBicmVhaztcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoY29vcmRzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgIGNvb3JkcyA9IGNvb3Jkc1swXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdHlwZSA9ICdNdWx0aScgKyB0eXBlO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciByZXN1bHQgPSB7XG5cdCAgICAgICAgdHlwZTogXCJGZWF0dXJlXCIsXG5cdCAgICAgICAgZ2VvbWV0cnk6IHtcblx0ICAgICAgICAgICAgdHlwZTogdHlwZSxcblx0ICAgICAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3Jkc1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgcHJvcGVydGllczogdGhpcy5wcm9wZXJ0aWVzXG5cdCAgICB9O1xuXHRcblx0ICAgIGlmICgnaWQnIGluIHRoaXMpIHtcblx0ICAgICAgICByZXN1bHQuaWQgPSB0aGlzLmlkO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdH07XG5cdFxuXHQvLyBjbGFzc2lmaWVzIGFuIGFycmF5IG9mIHJpbmdzIGludG8gcG9seWdvbnMgd2l0aCBvdXRlciByaW5ncyBhbmQgaG9sZXNcblx0XG5cdGZ1bmN0aW9uIGNsYXNzaWZ5UmluZ3MocmluZ3MpIHtcblx0ICAgIHZhciBsZW4gPSByaW5ncy5sZW5ndGg7XG5cdFxuXHQgICAgaWYgKGxlbiA8PSAxKSByZXR1cm4gW3JpbmdzXTtcblx0XG5cdCAgICB2YXIgcG9seWdvbnMgPSBbXSxcblx0ICAgICAgICBwb2x5Z29uLFxuXHQgICAgICAgIGNjdztcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGFyZWEgPSBzaWduZWRBcmVhKHJpbmdzW2ldKTtcblx0ICAgICAgICBpZiAoYXJlYSA9PT0gMCkgY29udGludWU7XG5cdFxuXHQgICAgICAgIGlmIChjY3cgPT09IHVuZGVmaW5lZCkgY2N3ID0gYXJlYSA8IDA7XG5cdFxuXHQgICAgICAgIGlmIChjY3cgPT09IGFyZWEgPCAwKSB7XG5cdCAgICAgICAgICAgIGlmIChwb2x5Z29uKSBwb2x5Z29ucy5wdXNoKHBvbHlnb24pO1xuXHQgICAgICAgICAgICBwb2x5Z29uID0gW3JpbmdzW2ldXTtcblx0XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcG9seWdvbi5wdXNoKHJpbmdzW2ldKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAocG9seWdvbikgcG9seWdvbnMucHVzaChwb2x5Z29uKTtcblx0XG5cdCAgICByZXR1cm4gcG9seWdvbnM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNpZ25lZEFyZWEocmluZykge1xuXHQgICAgdmFyIHN1bSA9IDA7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmluZy5sZW5ndGgsIGogPSBsZW4gLSAxLCBwMSwgcDI7IGkgPCBsZW47IGogPSBpKyspIHtcblx0ICAgICAgICBwMSA9IHJpbmdbaV07XG5cdCAgICAgICAgcDIgPSByaW5nW2pdO1xuXHQgICAgICAgIHN1bSArPSAocDIueCAtIHAxLngpICogKHAxLnkgKyBwMi55KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBzdW07XG5cdH1cblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzY0OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gUG9pbnQ7XG5cdFxuXHQvKipcblx0ICogQSBzdGFuZGFsb25lIHBvaW50IGdlb21ldHJ5IHdpdGggdXNlZnVsIGFjY2Vzc29yLCBjb21wYXJpc29uLCBhbmRcblx0ICogbW9kaWZpY2F0aW9uIG1ldGhvZHMuXG5cdCAqXG5cdCAqIEBjbGFzcyBQb2ludFxuXHQgKiBAcGFyYW0ge051bWJlcn0geCB0aGUgeC1jb29yZGluYXRlLiB0aGlzIGNvdWxkIGJlIGxvbmdpdHVkZSBvciBzY3JlZW5cblx0ICogcGl4ZWxzLCBvciBhbnkgb3RoZXIgc29ydCBvZiB1bml0LlxuXHQgKiBAcGFyYW0ge051bWJlcn0geSB0aGUgeS1jb29yZGluYXRlLiB0aGlzIGNvdWxkIGJlIGxhdGl0dWRlIG9yIHNjcmVlblxuXHQgKiBwaXhlbHMsIG9yIGFueSBvdGhlciBzb3J0IG9mIHVuaXQuXG5cdCAqIEBleGFtcGxlXG5cdCAqIHZhciBwb2ludCA9IG5ldyBQb2ludCgtNzcsIDM4KTtcblx0ICovXG5cdGZ1bmN0aW9uIFBvaW50KHgsIHkpIHtcblx0ICAgIHRoaXMueCA9IHg7XG5cdCAgICB0aGlzLnkgPSB5O1xuXHR9XG5cdFxuXHRQb2ludC5wcm90b3R5cGUgPSB7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBDbG9uZSB0aGlzIHBvaW50LCByZXR1cm5pbmcgYSBuZXcgcG9pbnQgdGhhdCBjYW4gYmUgbW9kaWZpZWRcblx0ICAgICAqIHdpdGhvdXQgYWZmZWN0aW5nIHRoZSBvbGQgb25lLlxuXHQgICAgICogQHJldHVybiB7UG9pbnR9IHRoZSBjbG9uZVxuXHQgICAgICovXG5cdCAgICBjbG9uZTogZnVuY3Rpb24oKSB7IHJldHVybiBuZXcgUG9pbnQodGhpcy54LCB0aGlzLnkpOyB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQWRkIHRoaXMgcG9pbnQncyB4ICYgeSBjb29yZGluYXRlcyB0byBhbm90aGVyIHBvaW50LFxuXHQgICAgICogeWllbGRpbmcgYSBuZXcgcG9pbnQuXG5cdCAgICAgKiBAcGFyYW0ge1BvaW50fSBwIHRoZSBvdGhlciBwb2ludFxuXHQgICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuXHQgICAgICovXG5cdCAgICBhZGQ6ICAgICBmdW5jdGlvbihwKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX2FkZChwKTsgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFN1YnRyYWN0IHRoaXMgcG9pbnQncyB4ICYgeSBjb29yZGluYXRlcyB0byBmcm9tIHBvaW50LFxuXHQgICAgICogeWllbGRpbmcgYSBuZXcgcG9pbnQuXG5cdCAgICAgKiBAcGFyYW0ge1BvaW50fSBwIHRoZSBvdGhlciBwb2ludFxuXHQgICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuXHQgICAgICovXG5cdCAgICBzdWI6ICAgICBmdW5jdGlvbihwKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX3N1YihwKTsgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIE11bHRpcGx5IHRoaXMgcG9pbnQncyB4ICYgeSBjb29yZGluYXRlcyBieSBwb2ludCxcblx0ICAgICAqIHlpZWxkaW5nIGEgbmV3IHBvaW50LlxuXHQgICAgICogQHBhcmFtIHtQb2ludH0gcCB0aGUgb3RoZXIgcG9pbnRcblx0ICAgICAqIEByZXR1cm4ge1BvaW50fSBvdXRwdXQgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgbXVsdEJ5UG9pbnQ6ICAgIGZ1bmN0aW9uKHApIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fbXVsdEJ5UG9pbnQocCk7IH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBEaXZpZGUgdGhpcyBwb2ludCdzIHggJiB5IGNvb3JkaW5hdGVzIGJ5IHBvaW50LFxuXHQgICAgICogeWllbGRpbmcgYSBuZXcgcG9pbnQuXG5cdCAgICAgKiBAcGFyYW0ge1BvaW50fSBwIHRoZSBvdGhlciBwb2ludFxuXHQgICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuXHQgICAgICovXG5cdCAgICBkaXZCeVBvaW50OiAgICAgZnVuY3Rpb24ocCkgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9kaXZCeVBvaW50KHApOyB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogTXVsdGlwbHkgdGhpcyBwb2ludCdzIHggJiB5IGNvb3JkaW5hdGVzIGJ5IGEgZmFjdG9yLFxuXHQgICAgICogeWllbGRpbmcgYSBuZXcgcG9pbnQuXG5cdCAgICAgKiBAcGFyYW0ge1BvaW50fSBrIGZhY3RvclxuXHQgICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuXHQgICAgICovXG5cdCAgICBtdWx0OiAgICBmdW5jdGlvbihrKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX211bHQoayk7IH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBEaXZpZGUgdGhpcyBwb2ludCdzIHggJiB5IGNvb3JkaW5hdGVzIGJ5IGEgZmFjdG9yLFxuXHQgICAgICogeWllbGRpbmcgYSBuZXcgcG9pbnQuXG5cdCAgICAgKiBAcGFyYW0ge1BvaW50fSBrIGZhY3RvclxuXHQgICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuXHQgICAgICovXG5cdCAgICBkaXY6ICAgICBmdW5jdGlvbihrKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX2RpdihrKTsgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFJvdGF0ZSB0aGlzIHBvaW50IGFyb3VuZCB0aGUgMCwgMCBvcmlnaW4gYnkgYW4gYW5nbGUgYSxcblx0ICAgICAqIGdpdmVuIGluIHJhZGlhbnNcblx0ICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhIGFuZ2xlIHRvIHJvdGF0ZSBhcm91bmQsIGluIHJhZGlhbnNcblx0ICAgICAqIEByZXR1cm4ge1BvaW50fSBvdXRwdXQgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgcm90YXRlOiAgZnVuY3Rpb24oYSkgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9yb3RhdGUoYSk7IH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSb3RhdGUgdGhpcyBwb2ludCBhcm91bmQgcCBwb2ludCBieSBhbiBhbmdsZSBhLFxuXHQgICAgICogZ2l2ZW4gaW4gcmFkaWFuc1xuXHQgICAgICogQHBhcmFtIHtOdW1iZXJ9IGEgYW5nbGUgdG8gcm90YXRlIGFyb3VuZCwgaW4gcmFkaWFuc1xuXHQgICAgICogQHBhcmFtIHtQb2ludH0gcCBQb2ludCB0byByb3RhdGUgYXJvdW5kXG5cdCAgICAgKiBAcmV0dXJuIHtQb2ludH0gb3V0cHV0IHBvaW50XG5cdCAgICAgKi9cblx0ICAgIHJvdGF0ZUFyb3VuZDogIGZ1bmN0aW9uKGEscCkgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9yb3RhdGVBcm91bmQoYSxwKTsgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIE11bHRpcGx5IHRoaXMgcG9pbnQgYnkgYSA0eDEgdHJhbnNmb3JtYXRpb24gbWF0cml4XG5cdCAgICAgKiBAcGFyYW0ge0FycmF5PE51bWJlcj59IG0gdHJhbnNmb3JtYXRpb24gbWF0cml4XG5cdCAgICAgKiBAcmV0dXJuIHtQb2ludH0gb3V0cHV0IHBvaW50XG5cdCAgICAgKi9cblx0ICAgIG1hdE11bHQ6IGZ1bmN0aW9uKG0pIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fbWF0TXVsdChtKTsgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENhbGN1bGF0ZSB0aGlzIHBvaW50IGJ1dCBhcyBhIHVuaXQgdmVjdG9yIGZyb20gMCwgMCwgbWVhbmluZ1xuXHQgICAgICogdGhhdCB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgcmVzdWx0aW5nIHBvaW50IHRvIHRoZSAwLCAwXG5cdCAgICAgKiBjb29yZGluYXRlIHdpbGwgYmUgZXF1YWwgdG8gMSBhbmQgdGhlIGFuZ2xlIGZyb20gdGhlIHJlc3VsdGluZ1xuXHQgICAgICogcG9pbnQgdG8gdGhlIDAsIDAgY29vcmRpbmF0ZSB3aWxsIGJlIHRoZSBzYW1lIGFzIGJlZm9yZS5cblx0ICAgICAqIEByZXR1cm4ge1BvaW50fSB1bml0IHZlY3RvciBwb2ludFxuXHQgICAgICovXG5cdCAgICB1bml0OiAgICBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fdW5pdCgpOyB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQ29tcHV0ZSBhIHBlcnBlbmRpY3VsYXIgcG9pbnQsIHdoZXJlIHRoZSBuZXcgeSBjb29yZGluYXRlXG5cdCAgICAgKiBpcyB0aGUgb2xkIHggY29vcmRpbmF0ZSBhbmQgdGhlIG5ldyB4IGNvb3JkaW5hdGUgaXMgdGhlIG9sZCB5XG5cdCAgICAgKiBjb29yZGluYXRlIG11bHRpcGxpZWQgYnkgLTFcblx0ICAgICAqIEByZXR1cm4ge1BvaW50fSBwZXJwZW5kaWN1bGFyIHBvaW50XG5cdCAgICAgKi9cblx0ICAgIHBlcnA6ICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9wZXJwKCk7IH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZXR1cm4gYSB2ZXJzaW9uIG9mIHRoaXMgcG9pbnQgd2l0aCB0aGUgeCAmIHkgY29vcmRpbmF0ZXNcblx0ICAgICAqIHJvdW5kZWQgdG8gaW50ZWdlcnMuXG5cdCAgICAgKiBAcmV0dXJuIHtQb2ludH0gcm91bmRlZCBwb2ludFxuXHQgICAgICovXG5cdCAgICByb3VuZDogICBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fcm91bmQoKTsgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFJldHVybiB0aGUgbWFnaXR1ZGUgb2YgdGhpcyBwb2ludDogdGhpcyBpcyB0aGUgRXVjbGlkZWFuXG5cdCAgICAgKiBkaXN0YW5jZSBmcm9tIHRoZSAwLCAwIGNvb3JkaW5hdGUgdG8gdGhpcyBwb2ludCdzIHggYW5kIHlcblx0ICAgICAqIGNvb3JkaW5hdGVzLlxuXHQgICAgICogQHJldHVybiB7TnVtYmVyfSBtYWduaXR1ZGVcblx0ICAgICAqL1xuXHQgICAgbWFnOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogSnVkZ2Ugd2hldGhlciB0aGlzIHBvaW50IGlzIGVxdWFsIHRvIGFub3RoZXIgcG9pbnQsIHJldHVybmluZ1xuXHQgICAgICogdHJ1ZSBvciBmYWxzZS5cblx0ICAgICAqIEBwYXJhbSB7UG9pbnR9IG90aGVyIHRoZSBvdGhlciBwb2ludFxuXHQgICAgICogQHJldHVybiB7Ym9vbGVhbn0gd2hldGhlciB0aGUgcG9pbnRzIGFyZSBlcXVhbFxuXHQgICAgICovXG5cdCAgICBlcXVhbHM6IGZ1bmN0aW9uKG90aGVyKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMueCA9PT0gb3RoZXIueCAmJlxuXHQgICAgICAgICAgICAgICB0aGlzLnkgPT09IG90aGVyLnk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQ2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBmcm9tIHRoaXMgcG9pbnQgdG8gYW5vdGhlciBwb2ludFxuXHQgICAgICogQHBhcmFtIHtQb2ludH0gcCB0aGUgb3RoZXIgcG9pbnRcblx0ICAgICAqIEByZXR1cm4ge051bWJlcn0gZGlzdGFuY2Vcblx0ICAgICAqL1xuXHQgICAgZGlzdDogZnVuY3Rpb24ocCkge1xuXHQgICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0U3FyKHApKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBDYWxjdWxhdGUgdGhlIGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50LFxuXHQgICAgICogd2l0aG91dCB0aGUgc3F1YXJlIHJvb3Qgc3RlcC4gVXNlZnVsIGlmIHlvdSdyZSBjb21wYXJpbmdcblx0ICAgICAqIHJlbGF0aXZlIGRpc3RhbmNlcy5cblx0ICAgICAqIEBwYXJhbSB7UG9pbnR9IHAgdGhlIG90aGVyIHBvaW50XG5cdCAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IGRpc3RhbmNlXG5cdCAgICAgKi9cblx0ICAgIGRpc3RTcXI6IGZ1bmN0aW9uKHApIHtcblx0ICAgICAgICB2YXIgZHggPSBwLnggLSB0aGlzLngsXG5cdCAgICAgICAgICAgIGR5ID0gcC55IC0gdGhpcy55O1xuXHQgICAgICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXQgdGhlIGFuZ2xlIGZyb20gdGhlIDAsIDAgY29vcmRpbmF0ZSB0byB0aGlzIHBvaW50LCBpbiByYWRpYW5zXG5cdCAgICAgKiBjb29yZGluYXRlcy5cblx0ICAgICAqIEByZXR1cm4ge051bWJlcn0gYW5nbGVcblx0ICAgICAqL1xuXHQgICAgYW5nbGU6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMueSwgdGhpcy54KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXQgdGhlIGFuZ2xlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50LCBpbiByYWRpYW5zXG5cdCAgICAgKiBAcGFyYW0ge1BvaW50fSBiIHRoZSBvdGhlciBwb2ludFxuXHQgICAgICogQHJldHVybiB7TnVtYmVyfSBhbmdsZVxuXHQgICAgICovXG5cdCAgICBhbmdsZVRvOiBmdW5jdGlvbihiKSB7XG5cdCAgICAgICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy55IC0gYi55LCB0aGlzLnggLSBiLngpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEdldCB0aGUgYW5nbGUgYmV0d2VlbiB0aGlzIHBvaW50IGFuZCBhbm90aGVyIHBvaW50LCBpbiByYWRpYW5zXG5cdCAgICAgKiBAcGFyYW0ge1BvaW50fSBiIHRoZSBvdGhlciBwb2ludFxuXHQgICAgICogQHJldHVybiB7TnVtYmVyfSBhbmdsZVxuXHQgICAgICovXG5cdCAgICBhbmdsZVdpdGg6IGZ1bmN0aW9uKGIpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5hbmdsZVdpdGhTZXAoYi54LCBiLnkpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKlxuXHQgICAgICogRmluZCB0aGUgYW5nbGUgb2YgdGhlIHR3byB2ZWN0b3JzLCBzb2x2aW5nIHRoZSBmb3JtdWxhIGZvclxuXHQgICAgICogdGhlIGNyb3NzIHByb2R1Y3QgYSB4IGIgPSB8YXx8YnxzaW4ozrgpIGZvciDOuC5cblx0ICAgICAqIEBwYXJhbSB7TnVtYmVyfSB4IHRoZSB4LWNvb3JkaW5hdGVcblx0ICAgICAqIEBwYXJhbSB7TnVtYmVyfSB5IHRoZSB5LWNvb3JkaW5hdGVcblx0ICAgICAqIEByZXR1cm4ge051bWJlcn0gdGhlIGFuZ2xlIGluIHJhZGlhbnNcblx0ICAgICAqL1xuXHQgICAgYW5nbGVXaXRoU2VwOiBmdW5jdGlvbih4LCB5KSB7XG5cdCAgICAgICAgcmV0dXJuIE1hdGguYXRhbjIoXG5cdCAgICAgICAgICAgIHRoaXMueCAqIHkgLSB0aGlzLnkgKiB4LFxuXHQgICAgICAgICAgICB0aGlzLnggKiB4ICsgdGhpcy55ICogeSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIF9tYXRNdWx0OiBmdW5jdGlvbihtKSB7XG5cdCAgICAgICAgdmFyIHggPSBtWzBdICogdGhpcy54ICsgbVsxXSAqIHRoaXMueSxcblx0ICAgICAgICAgICAgeSA9IG1bMl0gKiB0aGlzLnggKyBtWzNdICogdGhpcy55O1xuXHQgICAgICAgIHRoaXMueCA9IHg7XG5cdCAgICAgICAgdGhpcy55ID0geTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgX2FkZDogZnVuY3Rpb24ocCkge1xuXHQgICAgICAgIHRoaXMueCArPSBwLng7XG5cdCAgICAgICAgdGhpcy55ICs9IHAueTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgX3N1YjogZnVuY3Rpb24ocCkge1xuXHQgICAgICAgIHRoaXMueCAtPSBwLng7XG5cdCAgICAgICAgdGhpcy55IC09IHAueTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgX211bHQ6IGZ1bmN0aW9uKGspIHtcblx0ICAgICAgICB0aGlzLnggKj0gaztcblx0ICAgICAgICB0aGlzLnkgKj0gaztcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgX2RpdjogZnVuY3Rpb24oaykge1xuXHQgICAgICAgIHRoaXMueCAvPSBrO1xuXHQgICAgICAgIHRoaXMueSAvPSBrO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICBfbXVsdEJ5UG9pbnQ6IGZ1bmN0aW9uKHApIHtcblx0ICAgICAgICB0aGlzLnggKj0gcC54O1xuXHQgICAgICAgIHRoaXMueSAqPSBwLnk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIF9kaXZCeVBvaW50OiBmdW5jdGlvbihwKSB7XG5cdCAgICAgICAgdGhpcy54IC89IHAueDtcblx0ICAgICAgICB0aGlzLnkgLz0gcC55O1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICBfdW5pdDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdGhpcy5fZGl2KHRoaXMubWFnKCkpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICBfcGVycDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHkgPSB0aGlzLnk7XG5cdCAgICAgICAgdGhpcy55ID0gdGhpcy54O1xuXHQgICAgICAgIHRoaXMueCA9IC15O1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICBfcm90YXRlOiBmdW5jdGlvbihhbmdsZSkge1xuXHQgICAgICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSksXG5cdCAgICAgICAgICAgIHNpbiA9IE1hdGguc2luKGFuZ2xlKSxcblx0ICAgICAgICAgICAgeCA9IGNvcyAqIHRoaXMueCAtIHNpbiAqIHRoaXMueSxcblx0ICAgICAgICAgICAgeSA9IHNpbiAqIHRoaXMueCArIGNvcyAqIHRoaXMueTtcblx0ICAgICAgICB0aGlzLnggPSB4O1xuXHQgICAgICAgIHRoaXMueSA9IHk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIF9yb3RhdGVBcm91bmQ6IGZ1bmN0aW9uKGFuZ2xlLCBwKSB7XG5cdCAgICAgICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlKSxcblx0ICAgICAgICAgICAgc2luID0gTWF0aC5zaW4oYW5nbGUpLFxuXHQgICAgICAgICAgICB4ID0gcC54ICsgY29zICogKHRoaXMueCAtIHAueCkgLSBzaW4gKiAodGhpcy55IC0gcC55KSxcblx0ICAgICAgICAgICAgeSA9IHAueSArIHNpbiAqICh0aGlzLnggLSBwLngpICsgY29zICogKHRoaXMueSAtIHAueSk7XG5cdCAgICAgICAgdGhpcy54ID0geDtcblx0ICAgICAgICB0aGlzLnkgPSB5O1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICBfcm91bmQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHRoaXMueCA9IE1hdGgucm91bmQodGhpcy54KTtcblx0ICAgICAgICB0aGlzLnkgPSBNYXRoLnJvdW5kKHRoaXMueSk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ29uc3RydWN0IGEgcG9pbnQgZnJvbSBhbiBhcnJheSBpZiBuZWNlc3NhcnksIG90aGVyd2lzZSBpZiB0aGUgaW5wdXRcblx0ICogaXMgYWxyZWFkeSBhIFBvaW50LCBvciBhbiB1bmtub3duIHR5cGUsIHJldHVybiBpdCB1bmNoYW5nZWRcblx0ICogQHBhcmFtIHtBcnJheTxOdW1iZXI+fFBvaW50fCp9IGEgYW55IGtpbmQgb2YgaW5wdXQgdmFsdWVcblx0ICogQHJldHVybiB7UG9pbnR9IGNvbnN0cnVjdGVkIHBvaW50LCBvciBwYXNzZWQtdGhyb3VnaCB2YWx1ZS5cblx0ICogQGV4YW1wbGVcblx0ICogLy8gdGhpc1xuXHQgKiB2YXIgcG9pbnQgPSBQb2ludC5jb252ZXJ0KFswLCAxXSk7XG5cdCAqIC8vIGlzIGVxdWl2YWxlbnQgdG9cblx0ICogdmFyIHBvaW50ID0gbmV3IFBvaW50KDAsIDEpO1xuXHQgKi9cblx0UG9pbnQuY29udmVydCA9IGZ1bmN0aW9uIChhKSB7XG5cdCAgICBpZiAoYSBpbnN0YW5jZW9mIFBvaW50KSB7XG5cdCAgICAgICAgcmV0dXJuIGE7XG5cdCAgICB9XG5cdCAgICBpZiAoQXJyYXkuaXNBcnJheShhKSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgUG9pbnQoYVswXSwgYVsxXSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gYTtcblx0fTtcblxuXG4vKioqLyB9KVxuXG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gbG9hZC5qcyIsImltcG9ydCAnYmFiZWwtcG9seWZpbGwnO1xuaW1wb3J0IEFwcCBmcm9tICcuL0FwcCc7XG5pbXBvcnQgS2V5Q29kZSBmcm9tICcuLi8uLi8uLi9zcmMvY29uc3RzL0tleUNvZGUnO1xuXG5cbihmdW5jdGlvbiAoKSB7XG4gICAgd2luZG93Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1haW4gPSBuZXcgTWFpbigpO1xuICAgIH1cbn0oKSk7XG5cbmNsYXNzIE1haW4ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICAgICAgdGhpcy5hZGRFdmVudCgpO1xuICAgICAgICB0aGlzLm9ucmVzaXplKCk7XG4gICAgfVxuXG4gICAgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5hcHAgPSBuZXcgQXBwKCk7XG4gICAgfVxuXG4gICAgYWRkRXZlbnQoKSB7XG4gICAgICAgIHdpbmRvdy5vbnJlc2l6ZSA9IHRoaXMub25yZXNpemUuYmluZCh0aGlzKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5vbmtleXVwLmJpbmQodGhpcykpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25rZXlkb3duLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIG9ucmVzaXplKCkge1xuICAgICAgICB0aGlzLmFwcC5yZXNpemUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmdW5jIHtGdW5jdGlvbn1cbiAgICAgKiBAcGFyYW0gcGFyYW1zXG4gICAgICogQHJldHVybnMge2ludGVydmFsRnVuY31cbiAgICAgKi9cbiAgICBnZXRJbnRlcnZhbEZ1bmN0aW9uKHRoZUFyZywgZnVuYywgLi4ucGFyYW1zKSB7XG4gICAgICAgIGZ1bmN0aW9uIGludGVydmFsRnVuYygpIHtcbiAgICAgICAgICAgIGZ1bmMuYXBwbHkodGhlQXJnLCBwYXJhbXMpO1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMua2V5SW50ZXJ2YWxJZCk7XG4gICAgICAgICAgICB0aGlzLmtleUludGVydmFsSWQgPSBzZXRUaW1lb3V0KGludGVydmFsRnVuYy5iaW5kKHRoaXMpLCAyMDApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGludGVydmFsRnVuYy5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIGNsZWFySW50ZXJGdW5jdGlvbigpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMua2V5SW50ZXJ2YWxJZCk7XG4gICAgfVxuXG4gICAgb25rZXlkb3duKGV2ZW50KSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLlVQOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAubW92ZUNhbWVyYSwgJ3knLCAtMSkoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5ET1dOOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAubW92ZUNhbWVyYSwgJ3knLCAxKSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLkxFRlQ6XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5tb3ZlQ2FtZXJhLCAneCcsIC0xKSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLlJJR0hUOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAubW92ZUNhbWVyYSwgJ3gnLCAxKSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLlBBR0VfVVA6XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5tb3ZlQ2FtZXJhLCAneicsIDEpKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuUEFHRV9ET1dOOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAubW92ZUNhbWVyYSwgJ3onLCAtMSkoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5OVU1CRVJfNDpcbiAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLnJvdGF0ZVdvcmxkLCAneScsIC0wLjAxKSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl82OlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd5JywgMC4wMSkoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5OVU1CRVJfODpcbiAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLnJvdGF0ZVdvcmxkLCAneCcsIC0wLjAxKSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl8yOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd4JywgMC4wMSkoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5OVU1CRVJfNzpcbiAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLnJvdGF0ZVdvcmxkLCAneicsIC0wLjAxKSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl8xOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd6JywgMC4wMSkoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5OVU1CRVJfOTpcbiAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLnJvdGF0ZVdvcmxkLCAneicsIC0wLjAxKSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl8zOlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd6JywgMC4wMSkoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5OVU1QQURfQUREOlxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnpvb21JbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTVBBRF9TVUJUUkFDVDpcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC56b29tT3V0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNUEFEX0VOVEVSOlxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnpvb21PdXQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5OVU1CRVJfMDpcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC5yZXNldCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLlc6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuUzpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5BOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLkQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbmtleXVwKGV2ZW50KSB7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLkVTQ0FQRTpcbiAgICAgICAgICAgICAgICBjb25zb2xlLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5TUEFDRTpcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hcHAuZ3VpLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC5ndWkub3BlbigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAuZ3VpLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuVVA6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuRE9XTjpcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5MRUZUOlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLlJJR0hUOlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLlBBR0VfVVA6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuUEFHRV9ET1dOOlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl80OlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl82OlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl84OlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl8yOlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl83OlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl8xOlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl85OlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl8zOlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTVBBRF9BREQ6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNUEFEX1NVQlRSQUNUOlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLlc6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuUzpcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5BOlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLkQ6XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckludGVyRnVuY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLkJBQ0tTUEFDRTpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH07XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9tYXAvcGJmL2xvYWQvaW5kZXguanMiLCJpbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnO1xuaW1wb3J0IGdlb2J1ZiBmcm9tICdnZW9idWYnO1xuaW1wb3J0IFBiZiBmcm9tICdwYmYnO1xuaW1wb3J0IFByb3RvQnVmIGZyb20gJ3BiZic7XG5pbXBvcnQgeyBWZWN0b3JUaWxlIH0gZnJvbSAnQG1hcGJveC92ZWN0b3ItdGlsZSc7XG5cbmNvbnN0IHh5eiA9IHt4OiAyNzk1MywgeTogMTI3MTEsIHo6IDE1fTtcbmNvbnN0IGJ1cyA9ICdodHRwczovL21hcC5wc3RhdGljLm5ldC9udmIvd210cy9idXMvZDJlMzY0YzktYjc1ZS00ZmQ3LTgwMjAtYzRiMjZmODJiOWNlL2dldFRpbGUvMjc5NTMvMTI3MTEvMTUvcGJmJztcbmNvbnN0IHBvaV93ZWIgPSAnaHR0cHM6Ly9tYXAucHN0YXRpYy5uZXQvbnZiL3dtdHMvcG9pX3dlYi84ZmU2ODgzZS01NTI1LTQ1ZjgtOGY1NS01ZTMwYmM0OTgxZjEvZ2V0VGlsZS8yNzk1My8xMjcxMS8xNS9wYmYnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcHAge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmxvYWRWZWN0b3IoKTtcbiAgfVxuXG4gIGxvYWRWZWN0b3IoKSB7XG4gICAgdGhpcy5sb2FkKHtcbiAgICAgIHVybDogcG9pX3dlYixcbiAgICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJyxcbiAgICB9KS50aGVuKGJ1ZmZlciA9PiB7XG4gICAgICAvLyBjb25zdCBwYmYgPSBuZXcgUGJmKG5ldyBVaW50OEFycmF5KHJlc3BvbnNlKSk7XG4gICAgICAvLyBjb25zdCB0aWxlID0gbmV3IFZlY3RvclRpbGUocGJmKTtcbiAgICAgIGNvbnN0IHRpbGUgPSBuZXcgVmVjdG9yVGlsZShuZXcgUHJvdG9CdWYoYnVmZmVyKSk7XG4gICAgICBjb25zb2xlLmxvZygndGlsZScsIHRpbGUpO1xuXG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5nZXRGZWF0dXJlcyh0aWxlKTtcbiAgICAgIGNvbnNvbGUubG9nKCdmZWF0dXJlcycsIGNvbGxlY3Rpb24uZmVhdHVyZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgbG9hZCh7dXJsLCByZXNwb25zZVR5cGUgPSAnanNvbid9KSB7XG4gICAgY29uc3QgZmV0Y2hEYXRhID0gKCkgPT4ge1xuICAgICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgICAgdXJsLFxuICAgICAgICByZXNwb25zZVR5cGUsXG4gICAgICB9KS50aGVuKCh7ZGF0YX0pID0+IHtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBmZXRjaERhdGEoKTtcbiAgfVxuXG4gIGdldEZlYXR1cmVzKHRpbGUpIHtcbiAgICBsZXQgY29sbGVjdGlvbiA9IHtcbiAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICBmZWF0dXJlczogW11cbiAgICB9O1xuXG4gICAgbGV0IGxheWVycyA9IE9iamVjdC5rZXlzKHRpbGUubGF5ZXJzKTtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheShsYXllcnMpKSB7XG4gICAgICBsYXllcnMgPSBbbGF5ZXJzXTtcbiAgICB9XG5cbiAgICBsYXllcnMuZm9yRWFjaCgobGF5ZXJJRCkgPT4ge1xuICAgICAgY29uc3QgbGF5ZXIgPSB0aWxlLmxheWVyc1tsYXllcklEXTtcblxuICAgICAgY29uc3QgbGVuID0gbGF5ZXIubGVuZ3RoO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXG4gICAgICAgIGNvbnN0IGZlYXR1cmUgPSB7XG4gICAgICAgICAgLi4ubGF5ZXIuZmVhdHVyZShpKS50b0dlb0pTT04oeHl6LngsIHh5ei55LCB4eXoueilcbiAgICAgICAgfTtcblxuICAgICAgICBjb2xsZWN0aW9uLmZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY29sbGVjdGlvbjtcbiAgfVxuXG4gIHJlc2l6ZSgpIHtcbiAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL21hcC9wYmYvbG9hZC9BcHAuanMiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL2F4aW9zJyk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgYmluZCA9IHJlcXVpcmUoJy4vaGVscGVycy9iaW5kJyk7XG52YXIgQXhpb3MgPSByZXF1aXJlKCcuL2NvcmUvQXhpb3MnKTtcbnZhciBtZXJnZUNvbmZpZyA9IHJlcXVpcmUoJy4vY29yZS9tZXJnZUNvbmZpZycpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi9kZWZhdWx0cycpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKiBAcmV0dXJuIHtBeGlvc30gQSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3NcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuICB2YXIgY29udGV4dCA9IG5ldyBBeGlvcyhkZWZhdWx0Q29uZmlnKTtcbiAgdmFyIGluc3RhbmNlID0gYmluZChBeGlvcy5wcm90b3R5cGUucmVxdWVzdCwgY29udGV4dCk7XG5cbiAgLy8gQ29weSBheGlvcy5wcm90b3R5cGUgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBBeGlvcy5wcm90b3R5cGUsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgY29udGV4dCB0byBpbnN0YW5jZVxuICB1dGlscy5leHRlbmQoaW5zdGFuY2UsIGNvbnRleHQpO1xuXG4gIHJldHVybiBpbnN0YW5jZTtcbn1cblxuLy8gQ3JlYXRlIHRoZSBkZWZhdWx0IGluc3RhbmNlIHRvIGJlIGV4cG9ydGVkXG52YXIgYXhpb3MgPSBjcmVhdGVJbnN0YW5jZShkZWZhdWx0cyk7XG5cbi8vIEV4cG9zZSBBeGlvcyBjbGFzcyB0byBhbGxvdyBjbGFzcyBpbmhlcml0YW5jZVxuYXhpb3MuQXhpb3MgPSBBeGlvcztcblxuLy8gRmFjdG9yeSBmb3IgY3JlYXRpbmcgbmV3IGluc3RhbmNlc1xuYXhpb3MuY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGluc3RhbmNlQ29uZmlnKSB7XG4gIHJldHVybiBjcmVhdGVJbnN0YW5jZShtZXJnZUNvbmZpZyhheGlvcy5kZWZhdWx0cywgaW5zdGFuY2VDb25maWcpKTtcbn07XG5cbi8vIEV4cG9zZSBDYW5jZWwgJiBDYW5jZWxUb2tlblxuYXhpb3MuQ2FuY2VsID0gcmVxdWlyZSgnLi9jYW5jZWwvQ2FuY2VsJyk7XG5heGlvcy5DYW5jZWxUb2tlbiA9IHJlcXVpcmUoJy4vY2FuY2VsL0NhbmNlbFRva2VuJyk7XG5heGlvcy5pc0NhbmNlbCA9IHJlcXVpcmUoJy4vY2FuY2VsL2lzQ2FuY2VsJyk7XG5cbi8vIEV4cG9zZSBhbGwvc3ByZWFkXG5heGlvcy5hbGwgPSBmdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcbiAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbn07XG5heGlvcy5zcHJlYWQgPSByZXF1aXJlKCcuL2hlbHBlcnMvc3ByZWFkJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gYXhpb3M7XG5cbi8vIEFsbG93IHVzZSBvZiBkZWZhdWx0IGltcG9ydCBzeW50YXggaW4gVHlwZVNjcmlwdFxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGF4aW9zO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9heGlvcy5qc1xuLy8gbW9kdWxlIGlkID0gMzI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGJpbmQgPSByZXF1aXJlKCcuL2hlbHBlcnMvYmluZCcpO1xudmFyIGlzQnVmZmVyID0gcmVxdWlyZSgnaXMtYnVmZmVyJyk7XG5cbi8qZ2xvYmFsIHRvU3RyaW5nOnRydWUqL1xuXG4vLyB1dGlscyBpcyBhIGxpYnJhcnkgb2YgZ2VuZXJpYyBoZWxwZXIgZnVuY3Rpb25zIG5vbi1zcGVjaWZpYyB0byBheGlvc1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXksIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5KHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyKHZhbCkge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRm9ybURhdGFcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBGb3JtRGF0YSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRm9ybURhdGEodmFsKSB7XG4gIHJldHVybiAodHlwZW9mIEZvcm1EYXRhICE9PSAndW5kZWZpbmVkJykgJiYgKHZhbCBpbnN0YW5jZW9mIEZvcm1EYXRhKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXJcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIHZpZXcgb24gYW4gQXJyYXlCdWZmZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHtcbiAgdmFyIHJlc3VsdDtcbiAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnKSAmJiAoQXJyYXlCdWZmZXIuaXNWaWV3KSkge1xuICAgIHJlc3VsdCA9IEFycmF5QnVmZmVyLmlzVmlldyh2YWwpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCA9ICh2YWwpICYmICh2YWwuYnVmZmVyKSAmJiAodmFsLmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyaW5nXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJpbmcsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1N0cmluZyh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBOdW1iZXIsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc051bWJlcih2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIHVuZGVmaW5lZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSB2YWx1ZSBpcyB1bmRlZmluZWQsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICd1bmRlZmluZWQnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGFuIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIE9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuICByZXR1cm4gdmFsICE9PSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRGF0ZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRmlsZVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRmlsZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRmlsZSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRmlsZV0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgQmxvYlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgQmxvYiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQmxvYih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQmxvYl0nO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZ1bmN0aW9uLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmVhbVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyZWFtLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJlYW0odmFsKSB7XG4gIHJldHVybiBpc09iamVjdCh2YWwpICYmIGlzRnVuY3Rpb24odmFsLnBpcGUpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgVVJMU2VhcmNoUGFyYW1zIG9iamVjdCwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVVJMU2VhcmNoUGFyYW1zKHZhbCkge1xuICByZXR1cm4gdHlwZW9mIFVSTFNlYXJjaFBhcmFtcyAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgVVJMU2VhcmNoUGFyYW1zO1xufVxuXG4vKipcbiAqIFRyaW0gZXhjZXNzIHdoaXRlc3BhY2Ugb2ZmIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBhIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIFN0cmluZyB0byB0cmltXG4gKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgU3RyaW5nIGZyZWVkIG9mIGV4Y2VzcyB3aGl0ZXNwYWNlXG4gKi9cbmZ1bmN0aW9uIHRyaW0oc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyovLCAnJykucmVwbGFjZSgvXFxzKiQvLCAnJyk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSBzdGFuZGFyZCBicm93c2VyIGVudmlyb25tZW50XG4gKlxuICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cbiAqIEJvdGggZW52aXJvbm1lbnRzIHN1cHBvcnQgWE1MSHR0cFJlcXVlc3QsIGJ1dCBub3QgZnVsbHkgc3RhbmRhcmQgZ2xvYmFscy5cbiAqXG4gKiB3ZWIgd29ya2VyczpcbiAqICB0eXBlb2Ygd2luZG93IC0+IHVuZGVmaW5lZFxuICogIHR5cGVvZiBkb2N1bWVudCAtPiB1bmRlZmluZWRcbiAqXG4gKiByZWFjdC1uYXRpdmU6XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ1JlYWN0TmF0aXZlJ1xuICogbmF0aXZlc2NyaXB0XG4gKiAgbmF2aWdhdG9yLnByb2R1Y3QgLT4gJ05hdGl2ZVNjcmlwdCcgb3IgJ05TJ1xuICovXG5mdW5jdGlvbiBpc1N0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIChuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTmF0aXZlU2NyaXB0JyB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTlMnKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gKFxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJ1xuICApO1xufVxuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBBcnJheSBvciBhbiBPYmplY3QgaW52b2tpbmcgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3NpbmdcbiAqIHRoZSB2YWx1ZSwgaW5kZXgsIGFuZCBjb21wbGV0ZSBhcnJheSBmb3IgZWFjaCBpdGVtLlxuICpcbiAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGtleSwgYW5kIGNvbXBsZXRlIG9iamVjdCBmb3IgZWFjaCBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGNhbGxiYWNrIHRvIGludm9rZSBmb3IgZWFjaCBpdGVtXG4gKi9cbmZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikge1xuICAvLyBEb24ndCBib3RoZXIgaWYgbm8gdmFsdWUgcHJvdmlkZWRcbiAgaWYgKG9iaiA9PT0gbnVsbCB8fCB0eXBlb2Ygb2JqID09PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBvYmogPSBbb2JqXTtcbiAgfVxuXG4gIGlmIChpc0FycmF5KG9iaikpIHtcbiAgICAvLyBJdGVyYXRlIG92ZXIgYXJyYXkgdmFsdWVzXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBvYmoubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFjY2VwdHMgdmFyYXJncyBleHBlY3RpbmcgZWFjaCBhcmd1bWVudCB0byBiZSBhbiBvYmplY3QsIHRoZW5cbiAqIGltbXV0YWJseSBtZXJnZXMgdGhlIHByb3BlcnRpZXMgb2YgZWFjaCBvYmplY3QgYW5kIHJldHVybnMgcmVzdWx0LlxuICpcbiAqIFdoZW4gbXVsdGlwbGUgb2JqZWN0cyBjb250YWluIHRoZSBzYW1lIGtleSB0aGUgbGF0ZXIgb2JqZWN0IGluXG4gKiB0aGUgYXJndW1lbnRzIGxpc3Qgd2lsbCB0YWtlIHByZWNlZGVuY2UuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBqc1xuICogdmFyIHJlc3VsdCA9IG1lcmdlKHtmb286IDEyM30sIHtmb286IDQ1Nn0pO1xuICogY29uc29sZS5sb2cocmVzdWx0LmZvbyk7IC8vIG91dHB1dHMgNDU2XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBtZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0eXBlb2YgcmVzdWx0W2tleV0gPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXN1bHRba2V5XSA9IG1lcmdlKHJlc3VsdFtrZXldLCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbDtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBmb3JFYWNoKGFyZ3VtZW50c1tpXSwgYXNzaWduVmFsdWUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogRnVuY3Rpb24gZXF1YWwgdG8gbWVyZ2Ugd2l0aCB0aGUgZGlmZmVyZW5jZSBiZWluZyB0aGF0IG5vIHJlZmVyZW5jZVxuICogdG8gb3JpZ2luYWwgb2JqZWN0cyBpcyBrZXB0LlxuICpcbiAqIEBzZWUgbWVyZ2VcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmoxIE9iamVjdCB0byBtZXJnZVxuICogQHJldHVybnMge09iamVjdH0gUmVzdWx0IG9mIGFsbCBtZXJnZSBwcm9wZXJ0aWVzXG4gKi9cbmZ1bmN0aW9uIGRlZXBNZXJnZSgvKiBvYmoxLCBvYmoyLCBvYmozLCAuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuICBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0eXBlb2YgcmVzdWx0W2tleV0gPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXN1bHRba2V5XSA9IGRlZXBNZXJnZShyZXN1bHRba2V5XSwgdmFsKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdvYmplY3QnKSB7XG4gICAgICByZXN1bHRba2V5XSA9IGRlZXBNZXJnZSh7fSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWw7XG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEV4dGVuZHMgb2JqZWN0IGEgYnkgbXV0YWJseSBhZGRpbmcgdG8gaXQgdGhlIHByb3BlcnRpZXMgb2Ygb2JqZWN0IGIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGEgVGhlIG9iamVjdCB0byBiZSBleHRlbmRlZFxuICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbVxuICogQHBhcmFtIHtPYmplY3R9IHRoaXNBcmcgVGhlIG9iamVjdCB0byBiaW5kIGZ1bmN0aW9uIHRvXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSByZXN1bHRpbmcgdmFsdWUgb2Ygb2JqZWN0IGFcbiAqL1xuZnVuY3Rpb24gZXh0ZW5kKGEsIGIsIHRoaXNBcmcpIHtcbiAgZm9yRWFjaChiLCBmdW5jdGlvbiBhc3NpZ25WYWx1ZSh2YWwsIGtleSkge1xuICAgIGlmICh0aGlzQXJnICYmIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGFba2V5XSA9IGJpbmQodmFsLCB0aGlzQXJnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYVtrZXldID0gdmFsO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBhO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaXNBcnJheTogaXNBcnJheSxcbiAgaXNBcnJheUJ1ZmZlcjogaXNBcnJheUJ1ZmZlcixcbiAgaXNCdWZmZXI6IGlzQnVmZmVyLFxuICBpc0Zvcm1EYXRhOiBpc0Zvcm1EYXRhLFxuICBpc0FycmF5QnVmZmVyVmlldzogaXNBcnJheUJ1ZmZlclZpZXcsXG4gIGlzU3RyaW5nOiBpc1N0cmluZyxcbiAgaXNOdW1iZXI6IGlzTnVtYmVyLFxuICBpc09iamVjdDogaXNPYmplY3QsXG4gIGlzVW5kZWZpbmVkOiBpc1VuZGVmaW5lZCxcbiAgaXNEYXRlOiBpc0RhdGUsXG4gIGlzRmlsZTogaXNGaWxlLFxuICBpc0Jsb2I6IGlzQmxvYixcbiAgaXNGdW5jdGlvbjogaXNGdW5jdGlvbixcbiAgaXNTdHJlYW06IGlzU3RyZWFtLFxuICBpc1VSTFNlYXJjaFBhcmFtczogaXNVUkxTZWFyY2hQYXJhbXMsXG4gIGlzU3RhbmRhcmRCcm93c2VyRW52OiBpc1N0YW5kYXJkQnJvd3NlckVudixcbiAgZm9yRWFjaDogZm9yRWFjaCxcbiAgbWVyZ2U6IG1lcmdlLFxuICBkZWVwTWVyZ2U6IGRlZXBNZXJnZSxcbiAgZXh0ZW5kOiBleHRlbmQsXG4gIHRyaW06IHRyaW1cbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL3V0aWxzLmpzXG4vLyBtb2R1bGUgaWQgPSAzMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJpbmQoZm4sIHRoaXNBcmcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXAoKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuICAgIH1cbiAgICByZXR1cm4gZm4uYXBwbHkodGhpc0FyZywgYXJncyk7XG4gIH07XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2JpbmQuanNcbi8vIG1vZHVsZSBpZCA9IDMzMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiFcbiAqIERldGVybWluZSBpZiBhbiBvYmplY3QgaXMgYSBCdWZmZXJcbiAqXG4gKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8aHR0cHM6Ly9mZXJvc3Mub3JnPlxuICogQGxpY2Vuc2UgIE1JVFxuICovXG5cbi8vIFRoZSBfaXNCdWZmZXIgY2hlY2sgaXMgZm9yIFNhZmFyaSA1LTcgc3VwcG9ydCwgYmVjYXVzZSBpdCdzIG1pc3Npbmdcbi8vIE9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IuIFJlbW92ZSB0aGlzIGV2ZW50dWFsbHlcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICE9IG51bGwgJiYgKGlzQnVmZmVyKG9iaikgfHwgaXNTbG93QnVmZmVyKG9iaikgfHwgISFvYmouX2lzQnVmZmVyKVxufVxuXG5mdW5jdGlvbiBpc0J1ZmZlciAob2JqKSB7XG4gIHJldHVybiAhIW9iai5jb25zdHJ1Y3RvciAmJiB0eXBlb2Ygb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyID09PSAnZnVuY3Rpb24nICYmIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlcihvYmopXG59XG5cbi8vIEZvciBOb2RlIHYwLjEwIHN1cHBvcnQuIFJlbW92ZSB0aGlzIGV2ZW50dWFsbHkuXG5mdW5jdGlvbiBpc1Nsb3dCdWZmZXIgKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iai5yZWFkRmxvYXRMRSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygb2JqLnNsaWNlID09PSAnZnVuY3Rpb24nICYmIGlzQnVmZmVyKG9iai5zbGljZSgwLCAwKSlcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9pcy1idWZmZXIvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDMzMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBidWlsZFVSTCA9IHJlcXVpcmUoJy4uL2hlbHBlcnMvYnVpbGRVUkwnKTtcbnZhciBJbnRlcmNlcHRvck1hbmFnZXIgPSByZXF1aXJlKCcuL0ludGVyY2VwdG9yTWFuYWdlcicpO1xudmFyIGRpc3BhdGNoUmVxdWVzdCA9IHJlcXVpcmUoJy4vZGlzcGF0Y2hSZXF1ZXN0Jyk7XG52YXIgbWVyZ2VDb25maWcgPSByZXF1aXJlKCcuL21lcmdlQ29uZmlnJyk7XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlQ29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIEF4aW9zKGluc3RhbmNlQ29uZmlnKSB7XG4gIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZztcbiAgdGhpcy5pbnRlcmNlcHRvcnMgPSB7XG4gICAgcmVxdWVzdDogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpLFxuICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKClcbiAgfTtcbn1cblxuLyoqXG4gKiBEaXNwYXRjaCBhIHJlcXVlc3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIFRoZSBjb25maWcgc3BlY2lmaWMgZm9yIHRoaXMgcmVxdWVzdCAobWVyZ2VkIHdpdGggdGhpcy5kZWZhdWx0cylcbiAqL1xuQXhpb3MucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGNvbmZpZykge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgLy8gQWxsb3cgZm9yIGF4aW9zKCdleGFtcGxlL3VybCdbLCBjb25maWddKSBhIGxhIGZldGNoIEFQSVxuICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcbiAgICBjb25maWcgPSBhcmd1bWVudHNbMV0gfHwge307XG4gICAgY29uZmlnLnVybCA9IGFyZ3VtZW50c1swXTtcbiAgfSBlbHNlIHtcbiAgICBjb25maWcgPSBjb25maWcgfHwge307XG4gIH1cblxuICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuICBjb25maWcubWV0aG9kID0gY29uZmlnLm1ldGhvZCA/IGNvbmZpZy5tZXRob2QudG9Mb3dlckNhc2UoKSA6ICdnZXQnO1xuXG4gIC8vIEhvb2sgdXAgaW50ZXJjZXB0b3JzIG1pZGRsZXdhcmVcbiAgdmFyIGNoYWluID0gW2Rpc3BhdGNoUmVxdWVzdCwgdW5kZWZpbmVkXTtcbiAgdmFyIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29uZmlnKTtcblxuICB0aGlzLmludGVyY2VwdG9ycy5yZXF1ZXN0LmZvckVhY2goZnVuY3Rpb24gdW5zaGlmdFJlcXVlc3RJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHtcbiAgICBjaGFpbi51bnNoaWZ0KGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uIHB1c2hSZXNwb25zZUludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikge1xuICAgIGNoYWluLnB1c2goaW50ZXJjZXB0b3IuZnVsZmlsbGVkLCBpbnRlcmNlcHRvci5yZWplY3RlZCk7XG4gIH0pO1xuXG4gIHdoaWxlIChjaGFpbi5sZW5ndGgpIHtcbiAgICBwcm9taXNlID0gcHJvbWlzZS50aGVuKGNoYWluLnNoaWZ0KCksIGNoYWluLnNoaWZ0KCkpO1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2U7XG59O1xuXG5BeGlvcy5wcm90b3R5cGUuZ2V0VXJpID0gZnVuY3Rpb24gZ2V0VXJpKGNvbmZpZykge1xuICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuICByZXR1cm4gYnVpbGRVUkwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLnJlcGxhY2UoL15cXD8vLCAnJyk7XG59O1xuXG4vLyBQcm92aWRlIGFsaWFzZXMgZm9yIHN1cHBvcnRlZCByZXF1ZXN0IG1ldGhvZHNcbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnLCAnb3B0aW9ucyddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kTm9EYXRhKG1ldGhvZCkge1xuICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuICBBeGlvcy5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHVybCwgY29uZmlnKSB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdCh1dGlscy5tZXJnZShjb25maWcgfHwge30sIHtcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgdXJsOiB1cmxcbiAgICB9KSk7XG4gIH07XG59KTtcblxudXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHtcbiAgLyplc2xpbnQgZnVuYy1uYW1lczowKi9cbiAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGRhdGEsIGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7XG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIHVybDogdXJsLFxuICAgICAgZGF0YTogZGF0YVxuICAgIH0pKTtcbiAgfTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEF4aW9zO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL0F4aW9zLmpzXG4vLyBtb2R1bGUgaWQgPSAzMzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIGVuY29kZSh2YWwpIHtcbiAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWwpLlxuICAgIHJlcGxhY2UoLyU0MC9naSwgJ0AnKS5cbiAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXG4gICAgcmVwbGFjZSgvJTI0L2csICckJykuXG4gICAgcmVwbGFjZSgvJTJDL2dpLCAnLCcpLlxuICAgIHJlcGxhY2UoLyUyMC9nLCAnKycpLlxuICAgIHJlcGxhY2UoLyU1Qi9naSwgJ1snKS5cbiAgICByZXBsYWNlKC8lNUQvZ2ksICddJyk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBVUkwgYnkgYXBwZW5kaW5nIHBhcmFtcyB0byB0aGUgZW5kXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBUaGUgYmFzZSBvZiB0aGUgdXJsIChlLmcuLCBodHRwOi8vd3d3Lmdvb2dsZS5jb20pXG4gKiBAcGFyYW0ge29iamVjdH0gW3BhcmFtc10gVGhlIHBhcmFtcyB0byBiZSBhcHBlbmRlZFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGZvcm1hdHRlZCB1cmxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBidWlsZFVSTCh1cmwsIHBhcmFtcywgcGFyYW1zU2VyaWFsaXplcikge1xuICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgaWYgKCFwYXJhbXMpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgdmFyIHNlcmlhbGl6ZWRQYXJhbXM7XG4gIGlmIChwYXJhbXNTZXJpYWxpemVyKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtc1NlcmlhbGl6ZXIocGFyYW1zKTtcbiAgfSBlbHNlIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMpKSB7XG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcmFtcy50b1N0cmluZygpO1xuICB9IGVsc2Uge1xuICAgIHZhciBwYXJ0cyA9IFtdO1xuXG4gICAgdXRpbHMuZm9yRWFjaChwYXJhbXMsIGZ1bmN0aW9uIHNlcmlhbGl6ZSh2YWwsIGtleSkge1xuICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICh1dGlscy5pc0FycmF5KHZhbCkpIHtcbiAgICAgICAga2V5ID0ga2V5ICsgJ1tdJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbCA9IFt2YWxdO1xuICAgICAgfVxuXG4gICAgICB1dGlscy5mb3JFYWNoKHZhbCwgZnVuY3Rpb24gcGFyc2VWYWx1ZSh2KSB7XG4gICAgICAgIGlmICh1dGlscy5pc0RhdGUodikpIHtcbiAgICAgICAgICB2ID0gdi50b0lTT1N0cmluZygpO1xuICAgICAgICB9IGVsc2UgaWYgKHV0aWxzLmlzT2JqZWN0KHYpKSB7XG4gICAgICAgICAgdiA9IEpTT04uc3RyaW5naWZ5KHYpO1xuICAgICAgICB9XG4gICAgICAgIHBhcnRzLnB1c2goZW5jb2RlKGtleSkgKyAnPScgKyBlbmNvZGUodikpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFydHMuam9pbignJicpO1xuICB9XG5cbiAgaWYgKHNlcmlhbGl6ZWRQYXJhbXMpIHtcbiAgICB2YXIgaGFzaG1hcmtJbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XG4gICAgaWYgKGhhc2htYXJrSW5kZXggIT09IC0xKSB7XG4gICAgICB1cmwgPSB1cmwuc2xpY2UoMCwgaGFzaG1hcmtJbmRleCk7XG4gICAgfVxuXG4gICAgdXJsICs9ICh1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJykgKyBzZXJpYWxpemVkUGFyYW1zO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanNcbi8vIG1vZHVsZSBpZCA9IDMzNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuZnVuY3Rpb24gSW50ZXJjZXB0b3JNYW5hZ2VyKCkge1xuICB0aGlzLmhhbmRsZXJzID0gW107XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bGZpbGxlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGB0aGVuYCBmb3IgYSBgUHJvbWlzZWBcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG4gKlxuICogQHJldHVybiB7TnVtYmVyfSBBbiBJRCB1c2VkIHRvIHJlbW92ZSBpbnRlcmNlcHRvciBsYXRlclxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShmdWxmaWxsZWQsIHJlamVjdGVkKSB7XG4gIHRoaXMuaGFuZGxlcnMucHVzaCh7XG4gICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG4gICAgcmVqZWN0ZWQ6IHJlamVjdGVkXG4gIH0pO1xuICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gaW50ZXJjZXB0b3IgZnJvbSB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZWplY3QgPSBmdW5jdGlvbiBlamVjdChpZCkge1xuICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcbiAgICB0aGlzLmhhbmRsZXJzW2lkXSA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyBwYXJ0aWN1bGFybHkgdXNlZnVsIGZvciBza2lwcGluZyBvdmVyIGFueVxuICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgZm9yIGVhY2ggaW50ZXJjZXB0b3JcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gZm9yRWFjaChmbikge1xuICB1dGlscy5mb3JFYWNoKHRoaXMuaGFuZGxlcnMsIGZ1bmN0aW9uIGZvckVhY2hIYW5kbGVyKGgpIHtcbiAgICBpZiAoaCAhPT0gbnVsbCkge1xuICAgICAgZm4oaCk7XG4gICAgfVxuICB9KTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJjZXB0b3JNYW5hZ2VyO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL0ludGVyY2VwdG9yTWFuYWdlci5qc1xuLy8gbW9kdWxlIGlkID0gMzM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHRyYW5zZm9ybURhdGEgPSByZXF1aXJlKCcuL3RyYW5zZm9ybURhdGEnKTtcbnZhciBpc0NhbmNlbCA9IHJlcXVpcmUoJy4uL2NhbmNlbC9pc0NhbmNlbCcpO1xudmFyIGRlZmF1bHRzID0gcmVxdWlyZSgnLi4vZGVmYXVsdHMnKTtcbnZhciBpc0Fic29sdXRlVVJMID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwnKTtcbnZhciBjb21iaW5lVVJMcyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9jb21iaW5lVVJMcycpO1xuXG4vKipcbiAqIFRocm93cyBhIGBDYW5jZWxgIGlmIGNhbmNlbGxhdGlvbiBoYXMgYmVlbiByZXF1ZXN0ZWQuXG4gKi9cbmZ1bmN0aW9uIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKSB7XG4gIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICBjb25maWcuY2FuY2VsVG9rZW4udGhyb3dJZlJlcXVlc3RlZCgpO1xuICB9XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0IHRvIHRoZSBzZXJ2ZXIgdXNpbmcgdGhlIGNvbmZpZ3VyZWQgYWRhcHRlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuICogQHJldHVybnMge1Byb21pc2V9IFRoZSBQcm9taXNlIHRvIGJlIGZ1bGZpbGxlZFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRpc3BhdGNoUmVxdWVzdChjb25maWcpIHtcbiAgdGhyb3dJZkNhbmNlbGxhdGlvblJlcXVlc3RlZChjb25maWcpO1xuXG4gIC8vIFN1cHBvcnQgYmFzZVVSTCBjb25maWdcbiAgaWYgKGNvbmZpZy5iYXNlVVJMICYmICFpc0Fic29sdXRlVVJMKGNvbmZpZy51cmwpKSB7XG4gICAgY29uZmlnLnVybCA9IGNvbWJpbmVVUkxzKGNvbmZpZy5iYXNlVVJMLCBjb25maWcudXJsKTtcbiAgfVxuXG4gIC8vIEVuc3VyZSBoZWFkZXJzIGV4aXN0XG4gIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG5cbiAgLy8gVHJhbnNmb3JtIHJlcXVlc3QgZGF0YVxuICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgY29uZmlnLmRhdGEsXG4gICAgY29uZmlnLmhlYWRlcnMsXG4gICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3RcbiAgKTtcblxuICAvLyBGbGF0dGVuIGhlYWRlcnNcbiAgY29uZmlnLmhlYWRlcnMgPSB1dGlscy5tZXJnZShcbiAgICBjb25maWcuaGVhZGVycy5jb21tb24gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnNbY29uZmlnLm1ldGhvZF0gfHwge30sXG4gICAgY29uZmlnLmhlYWRlcnMgfHwge31cbiAgKTtcblxuICB1dGlscy5mb3JFYWNoKFxuICAgIFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJywgJ2NvbW1vbiddLFxuICAgIGZ1bmN0aW9uIGNsZWFuSGVhZGVyQ29uZmlnKG1ldGhvZCkge1xuICAgICAgZGVsZXRlIGNvbmZpZy5oZWFkZXJzW21ldGhvZF07XG4gICAgfVxuICApO1xuXG4gIHZhciBhZGFwdGVyID0gY29uZmlnLmFkYXB0ZXIgfHwgZGVmYXVsdHMuYWRhcHRlcjtcblxuICByZXR1cm4gYWRhcHRlcihjb25maWcpLnRoZW4oZnVuY3Rpb24gb25BZGFwdGVyUmVzb2x1dGlvbihyZXNwb25zZSkge1xuICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgcmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgICByZXNwb25zZS5kYXRhLFxuICAgICAgcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgIGNvbmZpZy50cmFuc2Zvcm1SZXNwb25zZVxuICAgICk7XG5cbiAgICByZXR1cm4gcmVzcG9uc2U7XG4gIH0sIGZ1bmN0aW9uIG9uQWRhcHRlclJlamVjdGlvbihyZWFzb24pIHtcbiAgICBpZiAoIWlzQ2FuY2VsKHJlYXNvbikpIHtcbiAgICAgIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAgICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcbiAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLnJlc3BvbnNlKSB7XG4gICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YShcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSxcbiAgICAgICAgICByZWFzb24ucmVzcG9uc2UuaGVhZGVycyxcbiAgICAgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2VcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVhc29uKTtcbiAgfSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL2Rpc3BhdGNoUmVxdWVzdC5qc1xuLy8gbW9kdWxlIGlkID0gMzM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG4vKipcbiAqIFRyYW5zZm9ybSB0aGUgZGF0YSBmb3IgYSByZXF1ZXN0IG9yIGEgcmVzcG9uc2VcbiAqXG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGRhdGEgVGhlIGRhdGEgdG8gYmUgdHJhbnNmb3JtZWRcbiAqIEBwYXJhbSB7QXJyYXl9IGhlYWRlcnMgVGhlIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0IG9yIHJlc3BvbnNlXG4gKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufSBmbnMgQSBzaW5nbGUgZnVuY3Rpb24gb3IgQXJyYXkgb2YgZnVuY3Rpb25zXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1lZCBkYXRhXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJhbnNmb3JtRGF0YShkYXRhLCBoZWFkZXJzLCBmbnMpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIHV0aWxzLmZvckVhY2goZm5zLCBmdW5jdGlvbiB0cmFuc2Zvcm0oZm4pIHtcbiAgICBkYXRhID0gZm4oZGF0YSwgaGVhZGVycyk7XG4gIH0pO1xuXG4gIHJldHVybiBkYXRhO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY29yZS90cmFuc2Zvcm1EYXRhLmpzXG4vLyBtb2R1bGUgaWQgPSAzMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQ2FuY2VsKHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiB2YWx1ZS5fX0NBTkNFTF9fKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NhbmNlbC9pc0NhbmNlbC5qc1xuLy8gbW9kdWxlIGlkID0gMzM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIG5vcm1hbGl6ZUhlYWRlck5hbWUgPSByZXF1aXJlKCcuL2hlbHBlcnMvbm9ybWFsaXplSGVhZGVyTmFtZScpO1xuXG52YXIgREVGQVVMVF9DT05URU5UX1RZUEUgPSB7XG4gICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJ1xufTtcblxuZnVuY3Rpb24gc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsIHZhbHVlKSB7XG4gIGlmICghdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVycykgJiYgdXRpbHMuaXNVbmRlZmluZWQoaGVhZGVyc1snQ29udGVudC1UeXBlJ10pKSB7XG4gICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSB2YWx1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXREZWZhdWx0QWRhcHRlcigpIHtcbiAgdmFyIGFkYXB0ZXI7XG4gIC8vIE9ubHkgTm9kZS5KUyBoYXMgYSBwcm9jZXNzIHZhcmlhYmxlIHRoYXQgaXMgb2YgW1tDbGFzc11dIHByb2Nlc3NcbiAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJykge1xuICAgIC8vIEZvciBub2RlIHVzZSBIVFRQIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi9hZGFwdGVycy9odHRwJyk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEZvciBicm93c2VycyB1c2UgWEhSIGFkYXB0ZXJcbiAgICBhZGFwdGVyID0gcmVxdWlyZSgnLi9hZGFwdGVycy94aHInKTtcbiAgfVxuICByZXR1cm4gYWRhcHRlcjtcbn1cblxudmFyIGRlZmF1bHRzID0ge1xuICBhZGFwdGVyOiBnZXREZWZhdWx0QWRhcHRlcigpLFxuXG4gIHRyYW5zZm9ybVJlcXVlc3Q6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXF1ZXN0KGRhdGEsIGhlYWRlcnMpIHtcbiAgICBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsICdBY2NlcHQnKTtcbiAgICBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsICdDb250ZW50LVR5cGUnKTtcbiAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNBcnJheUJ1ZmZlcihkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzU3RyZWFtKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0ZpbGUoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQmxvYihkYXRhKVxuICAgICkge1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc0FycmF5QnVmZmVyVmlldyhkYXRhKSkge1xuICAgICAgcmV0dXJuIGRhdGEuYnVmZmVyO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMoZGF0YSkpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgnKTtcbiAgICAgIHJldHVybiBkYXRhLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGlmICh1dGlscy5pc09iamVjdChkYXRhKSkge1xuICAgICAgc2V0Q29udGVudFR5cGVJZlVuc2V0KGhlYWRlcnMsICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnKTtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIHRyYW5zZm9ybVJlc3BvbnNlOiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVzcG9uc2UoZGF0YSkge1xuICAgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKGRhdGEpO1xuICAgICAgfSBjYXRjaCAoZSkgeyAvKiBJZ25vcmUgKi8gfVxuICAgIH1cbiAgICByZXR1cm4gZGF0YTtcbiAgfV0sXG5cbiAgLyoqXG4gICAqIEEgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gYWJvcnQgYSByZXF1ZXN0LiBJZiBzZXQgdG8gMCAoZGVmYXVsdCkgYVxuICAgKiB0aW1lb3V0IGlzIG5vdCBjcmVhdGVkLlxuICAgKi9cbiAgdGltZW91dDogMCxcblxuICB4c3JmQ29va2llTmFtZTogJ1hTUkYtVE9LRU4nLFxuICB4c3JmSGVhZGVyTmFtZTogJ1gtWFNSRi1UT0tFTicsXG5cbiAgbWF4Q29udGVudExlbmd0aDogLTEsXG5cbiAgdmFsaWRhdGVTdGF0dXM6IGZ1bmN0aW9uIHZhbGlkYXRlU3RhdHVzKHN0YXR1cykge1xuICAgIHJldHVybiBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMDtcbiAgfVxufTtcblxuZGVmYXVsdHMuaGVhZGVycyA9IHtcbiAgY29tbW9uOiB7XG4gICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluLCAqLyonXG4gIH1cbn07XG5cbnV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcbiAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0ge307XG59KTtcblxudXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHtcbiAgZGVmYXVsdHMuaGVhZGVyc1ttZXRob2RdID0gdXRpbHMubWVyZ2UoREVGQVVMVF9DT05URU5UX1RZUEUpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZGVmYXVsdHM7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2RlZmF1bHRzLmpzXG4vLyBtb2R1bGUgaWQgPSAzMzlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9wcm9jZXNzL2Jyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDM0MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCBub3JtYWxpemVkTmFtZSkge1xuICB1dGlscy5mb3JFYWNoKGhlYWRlcnMsIGZ1bmN0aW9uIHByb2Nlc3NIZWFkZXIodmFsdWUsIG5hbWUpIHtcbiAgICBpZiAobmFtZSAhPT0gbm9ybWFsaXplZE5hbWUgJiYgbmFtZS50b1VwcGVyQ2FzZSgpID09PSBub3JtYWxpemVkTmFtZS50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICBoZWFkZXJzW25vcm1hbGl6ZWROYW1lXSA9IHZhbHVlO1xuICAgICAgZGVsZXRlIGhlYWRlcnNbbmFtZV07XG4gICAgfVxuICB9KTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvbm9ybWFsaXplSGVhZGVyTmFtZS5qc1xuLy8gbW9kdWxlIGlkID0gMzQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xudmFyIHNldHRsZSA9IHJlcXVpcmUoJy4vLi4vY29yZS9zZXR0bGUnKTtcbnZhciBidWlsZFVSTCA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9idWlsZFVSTCcpO1xudmFyIHBhcnNlSGVhZGVycyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9wYXJzZUhlYWRlcnMnKTtcbnZhciBpc1VSTFNhbWVPcmlnaW4gPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luJyk7XG52YXIgY3JlYXRlRXJyb3IgPSByZXF1aXJlKCcuLi9jb3JlL2NyZWF0ZUVycm9yJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24geGhyQWRhcHRlcihjb25maWcpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgcmVxdWVzdERhdGEgPSBjb25maWcuZGF0YTtcbiAgICB2YXIgcmVxdWVzdEhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcblxuICAgIGlmICh1dGlscy5pc0Zvcm1EYXRhKHJlcXVlc3REYXRhKSkge1xuICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzWydDb250ZW50LVR5cGUnXTsgLy8gTGV0IHRoZSBicm93c2VyIHNldCBpdFxuICAgIH1cblxuICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAvLyBIVFRQIGJhc2ljIGF1dGhlbnRpY2F0aW9uXG4gICAgaWYgKGNvbmZpZy5hdXRoKSB7XG4gICAgICB2YXIgdXNlcm5hbWUgPSBjb25maWcuYXV0aC51c2VybmFtZSB8fCAnJztcbiAgICAgIHZhciBwYXNzd29yZCA9IGNvbmZpZy5hdXRoLnBhc3N3b3JkIHx8ICcnO1xuICAgICAgcmVxdWVzdEhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCYXNpYyAnICsgYnRvYSh1c2VybmFtZSArICc6JyArIHBhc3N3b3JkKTtcbiAgICB9XG5cbiAgICByZXF1ZXN0Lm9wZW4oY29uZmlnLm1ldGhvZC50b1VwcGVyQ2FzZSgpLCBidWlsZFVSTChjb25maWcudXJsLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplciksIHRydWUpO1xuXG4gICAgLy8gU2V0IHRoZSByZXF1ZXN0IHRpbWVvdXQgaW4gTVNcbiAgICByZXF1ZXN0LnRpbWVvdXQgPSBjb25maWcudGltZW91dDtcblxuICAgIC8vIExpc3RlbiBmb3IgcmVhZHkgc3RhdGVcbiAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uIGhhbmRsZUxvYWQoKSB7XG4gICAgICBpZiAoIXJlcXVlc3QgfHwgcmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gVGhlIHJlcXVlc3QgZXJyb3JlZCBvdXQgYW5kIHdlIGRpZG4ndCBnZXQgYSByZXNwb25zZSwgdGhpcyB3aWxsIGJlXG4gICAgICAvLyBoYW5kbGVkIGJ5IG9uZXJyb3IgaW5zdGVhZFxuICAgICAgLy8gV2l0aCBvbmUgZXhjZXB0aW9uOiByZXF1ZXN0IHRoYXQgdXNpbmcgZmlsZTogcHJvdG9jb2wsIG1vc3QgYnJvd3NlcnNcbiAgICAgIC8vIHdpbGwgcmV0dXJuIHN0YXR1cyBhcyAwIGV2ZW4gdGhvdWdoIGl0J3MgYSBzdWNjZXNzZnVsIHJlcXVlc3RcbiAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gMCAmJiAhKHJlcXVlc3QucmVzcG9uc2VVUkwgJiYgcmVxdWVzdC5yZXNwb25zZVVSTC5pbmRleE9mKCdmaWxlOicpID09PSAwKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFByZXBhcmUgdGhlIHJlc3BvbnNlXG4gICAgICB2YXIgcmVzcG9uc2VIZWFkZXJzID0gJ2dldEFsbFJlc3BvbnNlSGVhZGVycycgaW4gcmVxdWVzdCA/IHBhcnNlSGVhZGVycyhyZXF1ZXN0LmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSA6IG51bGw7XG4gICAgICB2YXIgcmVzcG9uc2VEYXRhID0gIWNvbmZpZy5yZXNwb25zZVR5cGUgfHwgY29uZmlnLnJlc3BvbnNlVHlwZSA9PT0gJ3RleHQnID8gcmVxdWVzdC5yZXNwb25zZVRleHQgOiByZXF1ZXN0LnJlc3BvbnNlO1xuICAgICAgdmFyIHJlc3BvbnNlID0ge1xuICAgICAgICBkYXRhOiByZXNwb25zZURhdGEsXG4gICAgICAgIHN0YXR1czogcmVxdWVzdC5zdGF0dXMsXG4gICAgICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzVGV4dCxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2VIZWFkZXJzLFxuICAgICAgICBjb25maWc6IGNvbmZpZyxcbiAgICAgICAgcmVxdWVzdDogcmVxdWVzdFxuICAgICAgfTtcblxuICAgICAgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIGJyb3dzZXIgcmVxdWVzdCBjYW5jZWxsYXRpb24gKGFzIG9wcG9zZWQgdG8gYSBtYW51YWwgY2FuY2VsbGF0aW9uKVxuICAgIHJlcXVlc3Qub25hYm9ydCA9IGZ1bmN0aW9uIGhhbmRsZUFib3J0KCkge1xuICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdSZXF1ZXN0IGFib3J0ZWQnLCBjb25maWcsICdFQ09OTkFCT1JURUQnLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgbG93IGxldmVsIG5ldHdvcmsgZXJyb3JzXG4gICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gaGFuZGxlRXJyb3IoKSB7XG4gICAgICAvLyBSZWFsIGVycm9ycyBhcmUgaGlkZGVuIGZyb20gdXMgYnkgdGhlIGJyb3dzZXJcbiAgICAgIC8vIG9uZXJyb3Igc2hvdWxkIG9ubHkgZmlyZSBpZiBpdCdzIGEgbmV0d29yayBlcnJvclxuICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdOZXR3b3JrIEVycm9yJywgY29uZmlnLCBudWxsLCByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgdGltZW91dFxuICAgIHJlcXVlc3Qub250aW1lb3V0ID0gZnVuY3Rpb24gaGFuZGxlVGltZW91dCgpIHtcbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcigndGltZW91dCBvZiAnICsgY29uZmlnLnRpbWVvdXQgKyAnbXMgZXhjZWVkZWQnLCBjb25maWcsICdFQ09OTkFCT1JURUQnLFxuICAgICAgICByZXF1ZXN0KSk7XG5cbiAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgIHJlcXVlc3QgPSBudWxsO1xuICAgIH07XG5cbiAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAvLyBUaGlzIGlzIG9ubHkgZG9uZSBpZiBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudC5cbiAgICAvLyBTcGVjaWZpY2FsbHkgbm90IGlmIHdlJ3JlIGluIGEgd2ViIHdvcmtlciwgb3IgcmVhY3QtbmF0aXZlLlxuICAgIGlmICh1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpKSB7XG4gICAgICB2YXIgY29va2llcyA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9jb29raWVzJyk7XG5cbiAgICAgIC8vIEFkZCB4c3JmIGhlYWRlclxuICAgICAgdmFyIHhzcmZWYWx1ZSA9IChjb25maWcud2l0aENyZWRlbnRpYWxzIHx8IGlzVVJMU2FtZU9yaWdpbihjb25maWcudXJsKSkgJiYgY29uZmlnLnhzcmZDb29raWVOYW1lID9cbiAgICAgICAgY29va2llcy5yZWFkKGNvbmZpZy54c3JmQ29va2llTmFtZSkgOlxuICAgICAgICB1bmRlZmluZWQ7XG5cbiAgICAgIGlmICh4c3JmVmFsdWUpIHtcbiAgICAgICAgcmVxdWVzdEhlYWRlcnNbY29uZmlnLnhzcmZIZWFkZXJOYW1lXSA9IHhzcmZWYWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgaGVhZGVycyB0byB0aGUgcmVxdWVzdFxuICAgIGlmICgnc2V0UmVxdWVzdEhlYWRlcicgaW4gcmVxdWVzdCkge1xuICAgICAgdXRpbHMuZm9yRWFjaChyZXF1ZXN0SGVhZGVycywgZnVuY3Rpb24gc2V0UmVxdWVzdEhlYWRlcih2YWwsIGtleSkge1xuICAgICAgICBpZiAodHlwZW9mIHJlcXVlc3REYXRhID09PSAndW5kZWZpbmVkJyAmJiBrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2NvbnRlbnQtdHlwZScpIHtcbiAgICAgICAgICAvLyBSZW1vdmUgQ29udGVudC1UeXBlIGlmIGRhdGEgaXMgdW5kZWZpbmVkXG4gICAgICAgICAgZGVsZXRlIHJlcXVlc3RIZWFkZXJzW2tleV07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gT3RoZXJ3aXNlIGFkZCBoZWFkZXIgdG8gdGhlIHJlcXVlc3RcbiAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoa2V5LCB2YWwpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBBZGQgd2l0aENyZWRlbnRpYWxzIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKGNvbmZpZy53aXRoQ3JlZGVudGlhbHMpIHtcbiAgICAgIHJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBBZGQgcmVzcG9uc2VUeXBlIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG4gICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gY29uZmlnLnJlc3BvbnNlVHlwZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gRXhwZWN0ZWQgRE9NRXhjZXB0aW9uIHRocm93biBieSBicm93c2VycyBub3QgY29tcGF0aWJsZSBYTUxIdHRwUmVxdWVzdCBMZXZlbCAyLlxuICAgICAgICAvLyBCdXQsIHRoaXMgY2FuIGJlIHN1cHByZXNzZWQgZm9yICdqc29uJyB0eXBlIGFzIGl0IGNhbiBiZSBwYXJzZWQgYnkgZGVmYXVsdCAndHJhbnNmb3JtUmVzcG9uc2UnIGZ1bmN0aW9uLlxuICAgICAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSAhPT0gJ2pzb24nKSB7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBwcm9ncmVzcyBpZiBuZWVkZWRcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vbkRvd25sb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25Eb3dubG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICAvLyBOb3QgYWxsIGJyb3dzZXJzIHN1cHBvcnQgdXBsb2FkIGV2ZW50c1xuICAgIGlmICh0eXBlb2YgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MgPT09ICdmdW5jdGlvbicgJiYgcmVxdWVzdC51cGxvYWQpIHtcbiAgICAgIHJlcXVlc3QudXBsb2FkLmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uVXBsb2FkUHJvZ3Jlc3MpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcuY2FuY2VsVG9rZW4pIHtcbiAgICAgIC8vIEhhbmRsZSBjYW5jZWxsYXRpb25cbiAgICAgIGNvbmZpZy5jYW5jZWxUb2tlbi5wcm9taXNlLnRoZW4oZnVuY3Rpb24gb25DYW5jZWxlZChjYW5jZWwpIHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVxdWVzdC5hYm9ydCgpO1xuICAgICAgICByZWplY3QoY2FuY2VsKTtcbiAgICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChyZXF1ZXN0RGF0YSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXF1ZXN0RGF0YSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2VuZCB0aGUgcmVxdWVzdFxuICAgIHJlcXVlc3Quc2VuZChyZXF1ZXN0RGF0YSk7XG4gIH0pO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzXG4vLyBtb2R1bGUgaWQgPSAzNDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3JlYXRlRXJyb3IgPSByZXF1aXJlKCcuL2NyZWF0ZUVycm9yJyk7XG5cbi8qKlxuICogUmVzb2x2ZSBvciByZWplY3QgYSBQcm9taXNlIGJhc2VkIG9uIHJlc3BvbnNlIHN0YXR1cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvbHZlIEEgZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBBIGZ1bmN0aW9uIHRoYXQgcmVqZWN0cyB0aGUgcHJvbWlzZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSByZXNwb25zZSBUaGUgcmVzcG9uc2UuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpIHtcbiAgdmFyIHZhbGlkYXRlU3RhdHVzID0gcmVzcG9uc2UuY29uZmlnLnZhbGlkYXRlU3RhdHVzO1xuICBpZiAoIXZhbGlkYXRlU3RhdHVzIHx8IHZhbGlkYXRlU3RhdHVzKHJlc3BvbnNlLnN0YXR1cykpIHtcbiAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgfSBlbHNlIHtcbiAgICByZWplY3QoY3JlYXRlRXJyb3IoXG4gICAgICAnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAnICsgcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgcmVzcG9uc2UuY29uZmlnLFxuICAgICAgbnVsbCxcbiAgICAgIHJlc3BvbnNlLnJlcXVlc3QsXG4gICAgICByZXNwb25zZVxuICAgICkpO1xuICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL3NldHRsZS5qc1xuLy8gbW9kdWxlIGlkID0gMzQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGVuaGFuY2VFcnJvciA9IHJlcXVpcmUoJy4vZW5oYW5jZUVycm9yJyk7XG5cbi8qKlxuICogQ3JlYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBtZXNzYWdlLCBjb25maWcsIGVycm9yIGNvZGUsIHJlcXVlc3QgYW5kIHJlc3BvbnNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIFRoZSBlcnJvciBtZXNzYWdlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZUVycm9yKG1lc3NhZ2UsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICByZXR1cm4gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NvcmUvY3JlYXRlRXJyb3IuanNcbi8vIG1vZHVsZSBpZCA9IDM0NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXBkYXRlIGFuIEVycm9yIHdpdGggdGhlIHNwZWNpZmllZCBjb25maWcsIGVycm9yIGNvZGUsIGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge0Vycm9yfSBlcnJvciBUaGUgZXJyb3IgdG8gdXBkYXRlLlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbcmVxdWVzdF0gVGhlIHJlcXVlc3QuXG4gKiBAcGFyYW0ge09iamVjdH0gW3Jlc3BvbnNlXSBUaGUgcmVzcG9uc2UuXG4gKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgZXJyb3IuY29uZmlnID0gY29uZmlnO1xuICBpZiAoY29kZSkge1xuICAgIGVycm9yLmNvZGUgPSBjb2RlO1xuICB9XG5cbiAgZXJyb3IucmVxdWVzdCA9IHJlcXVlc3Q7XG4gIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gIGVycm9yLmlzQXhpb3NFcnJvciA9IHRydWU7XG5cbiAgZXJyb3IudG9KU09OID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIFN0YW5kYXJkXG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAvLyBNaWNyb3NvZnRcbiAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuICAgICAgbnVtYmVyOiB0aGlzLm51bWJlcixcbiAgICAgIC8vIE1vemlsbGFcbiAgICAgIGZpbGVOYW1lOiB0aGlzLmZpbGVOYW1lLFxuICAgICAgbGluZU51bWJlcjogdGhpcy5saW5lTnVtYmVyLFxuICAgICAgY29sdW1uTnVtYmVyOiB0aGlzLmNvbHVtbk51bWJlcixcbiAgICAgIHN0YWNrOiB0aGlzLnN0YWNrLFxuICAgICAgLy8gQXhpb3NcbiAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICBjb2RlOiB0aGlzLmNvZGVcbiAgICB9O1xuICB9O1xuICByZXR1cm4gZXJyb3I7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL2VuaGFuY2VFcnJvci5qc1xuLy8gbW9kdWxlIGlkID0gMzQ1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG4vLyBIZWFkZXJzIHdob3NlIGR1cGxpY2F0ZXMgYXJlIGlnbm9yZWQgYnkgbm9kZVxuLy8gYy5mLiBodHRwczovL25vZGVqcy5vcmcvYXBpL2h0dHAuaHRtbCNodHRwX21lc3NhZ2VfaGVhZGVyc1xudmFyIGlnbm9yZUR1cGxpY2F0ZU9mID0gW1xuICAnYWdlJywgJ2F1dGhvcml6YXRpb24nLCAnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2V0YWcnLFxuICAnZXhwaXJlcycsICdmcm9tJywgJ2hvc3QnLCAnaWYtbW9kaWZpZWQtc2luY2UnLCAnaWYtdW5tb2RpZmllZC1zaW5jZScsXG4gICdsYXN0LW1vZGlmaWVkJywgJ2xvY2F0aW9uJywgJ21heC1mb3J3YXJkcycsICdwcm94eS1hdXRob3JpemF0aW9uJyxcbiAgJ3JlZmVyZXInLCAncmV0cnktYWZ0ZXInLCAndXNlci1hZ2VudCdcbl07XG5cbi8qKlxuICogUGFyc2UgaGVhZGVycyBpbnRvIGFuIG9iamVjdFxuICpcbiAqIGBgYFxuICogRGF0ZTogV2VkLCAyNyBBdWcgMjAxNCAwODo1ODo0OSBHTVRcbiAqIENvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvblxuICogQ29ubmVjdGlvbjoga2VlcC1hbGl2ZVxuICogVHJhbnNmZXItRW5jb2Rpbmc6IGNodW5rZWRcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBoZWFkZXJzIEhlYWRlcnMgbmVlZGluZyB0byBiZSBwYXJzZWRcbiAqIEByZXR1cm5zIHtPYmplY3R9IEhlYWRlcnMgcGFyc2VkIGludG8gYW4gb2JqZWN0XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gcGFyc2VIZWFkZXJzKGhlYWRlcnMpIHtcbiAgdmFyIHBhcnNlZCA9IHt9O1xuICB2YXIga2V5O1xuICB2YXIgdmFsO1xuICB2YXIgaTtcblxuICBpZiAoIWhlYWRlcnMpIHsgcmV0dXJuIHBhcnNlZDsgfVxuXG4gIHV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uIHBhcnNlcihsaW5lKSB7XG4gICAgaSA9IGxpbmUuaW5kZXhPZignOicpO1xuICAgIGtleSA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoMCwgaSkpLnRvTG93ZXJDYXNlKCk7XG4gICAgdmFsID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cihpICsgMSkpO1xuXG4gICAgaWYgKGtleSkge1xuICAgICAgaWYgKHBhcnNlZFtrZXldICYmIGlnbm9yZUR1cGxpY2F0ZU9mLmluZGV4T2Yoa2V5KSA+PSAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChrZXkgPT09ICdzZXQtY29va2llJykge1xuICAgICAgICBwYXJzZWRba2V5XSA9IChwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldIDogW10pLmNvbmNhdChbdmFsXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJzZWRba2V5XSA9IHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gKyAnLCAnICsgdmFsIDogdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHBhcnNlZDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvcGFyc2VIZWFkZXJzLmpzXG4vLyBtb2R1bGUgaWQgPSAzNDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgaGF2ZSBmdWxsIHN1cHBvcnQgb2YgdGhlIEFQSXMgbmVlZGVkIHRvIHRlc3RcbiAgLy8gd2hldGhlciB0aGUgcmVxdWVzdCBVUkwgaXMgb2YgdGhlIHNhbWUgb3JpZ2luIGFzIGN1cnJlbnQgbG9jYXRpb24uXG4gICAgKGZ1bmN0aW9uIHN0YW5kYXJkQnJvd3NlckVudigpIHtcbiAgICAgIHZhciBtc2llID0gLyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICAgIHZhciB1cmxQYXJzaW5nTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgIHZhciBvcmlnaW5VUkw7XG5cbiAgICAgIC8qKlxuICAgICogUGFyc2UgYSBVUkwgdG8gZGlzY292ZXIgaXQncyBjb21wb25lbnRzXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZFxuICAgICogQHJldHVybnMge09iamVjdH1cbiAgICAqL1xuICAgICAgZnVuY3Rpb24gcmVzb2x2ZVVSTCh1cmwpIHtcbiAgICAgICAgdmFyIGhyZWYgPSB1cmw7XG5cbiAgICAgICAgaWYgKG1zaWUpIHtcbiAgICAgICAgLy8gSUUgbmVlZHMgYXR0cmlidXRlIHNldCB0d2ljZSB0byBub3JtYWxpemUgcHJvcGVydGllc1xuICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuICAgICAgICAgIGhyZWYgPSB1cmxQYXJzaW5nTm9kZS5ocmVmO1xuICAgICAgICB9XG5cbiAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG5cbiAgICAgICAgLy8gdXJsUGFyc2luZ05vZGUgcHJvdmlkZXMgdGhlIFVybFV0aWxzIGludGVyZmFjZSAtIGh0dHA6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmx1dGlsc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGhyZWY6IHVybFBhcnNpbmdOb2RlLmhyZWYsXG4gICAgICAgICAgcHJvdG9jb2w6IHVybFBhcnNpbmdOb2RlLnByb3RvY29sID8gdXJsUGFyc2luZ05vZGUucHJvdG9jb2wucmVwbGFjZSgvOiQvLCAnJykgOiAnJyxcbiAgICAgICAgICBob3N0OiB1cmxQYXJzaW5nTm9kZS5ob3N0LFxuICAgICAgICAgIHNlYXJjaDogdXJsUGFyc2luZ05vZGUuc2VhcmNoID8gdXJsUGFyc2luZ05vZGUuc2VhcmNoLnJlcGxhY2UoL15cXD8vLCAnJykgOiAnJyxcbiAgICAgICAgICBoYXNoOiB1cmxQYXJzaW5nTm9kZS5oYXNoID8gdXJsUGFyc2luZ05vZGUuaGFzaC5yZXBsYWNlKC9eIy8sICcnKSA6ICcnLFxuICAgICAgICAgIGhvc3RuYW1lOiB1cmxQYXJzaW5nTm9kZS5ob3N0bmFtZSxcbiAgICAgICAgICBwb3J0OiB1cmxQYXJzaW5nTm9kZS5wb3J0LFxuICAgICAgICAgIHBhdGhuYW1lOiAodXJsUGFyc2luZ05vZGUucGF0aG5hbWUuY2hhckF0KDApID09PSAnLycpID9cbiAgICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lIDpcbiAgICAgICAgICAgICcvJyArIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIG9yaWdpblVSTCA9IHJlc29sdmVVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG4gICAgICAvKipcbiAgICAqIERldGVybWluZSBpZiBhIFVSTCBzaGFyZXMgdGhlIHNhbWUgb3JpZ2luIGFzIHRoZSBjdXJyZW50IGxvY2F0aW9uXG4gICAgKlxuICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcXVlc3RVUkwgVGhlIFVSTCB0byB0ZXN0XG4gICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiwgb3RoZXJ3aXNlIGZhbHNlXG4gICAgKi9cbiAgICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4ocmVxdWVzdFVSTCkge1xuICAgICAgICB2YXIgcGFyc2VkID0gKHV0aWxzLmlzU3RyaW5nKHJlcXVlc3RVUkwpKSA/IHJlc29sdmVVUkwocmVxdWVzdFVSTCkgOiByZXF1ZXN0VVJMO1xuICAgICAgICByZXR1cm4gKHBhcnNlZC5wcm90b2NvbCA9PT0gb3JpZ2luVVJMLnByb3RvY29sICYmXG4gICAgICAgICAgICBwYXJzZWQuaG9zdCA9PT0gb3JpZ2luVVJMLmhvc3QpO1xuICAgICAgfTtcbiAgICB9KSgpIDpcblxuICAvLyBOb24gc3RhbmRhcmQgYnJvd3NlciBlbnZzICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAgIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH07XG4gICAgfSkoKVxuKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9pc1VSTFNhbWVPcmlnaW4uanNcbi8vIG1vZHVsZSBpZCA9IDM0N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoXG4gIHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkgP1xuXG4gIC8vIFN0YW5kYXJkIGJyb3dzZXIgZW52cyBzdXBwb3J0IGRvY3VtZW50LmNvb2tpZVxuICAgIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUobmFtZSwgdmFsdWUsIGV4cGlyZXMsIHBhdGgsIGRvbWFpbiwgc2VjdXJlKSB7XG4gICAgICAgICAgdmFyIGNvb2tpZSA9IFtdO1xuICAgICAgICAgIGNvb2tpZS5wdXNoKG5hbWUgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcblxuICAgICAgICAgIGlmICh1dGlscy5pc051bWJlcihleHBpcmVzKSkge1xuICAgICAgICAgICAgY29va2llLnB1c2goJ2V4cGlyZXM9JyArIG5ldyBEYXRlKGV4cGlyZXMpLnRvR01UU3RyaW5nKCkpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhwYXRoKSkge1xuICAgICAgICAgICAgY29va2llLnB1c2goJ3BhdGg9JyArIHBhdGgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhkb21haW4pKSB7XG4gICAgICAgICAgICBjb29raWUucHVzaCgnZG9tYWluPScgKyBkb21haW4pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzZWN1cmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdzZWN1cmUnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWUuam9pbignOyAnKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG5hbWUpIHtcbiAgICAgICAgICB2YXIgbWF0Y2ggPSBkb2N1bWVudC5jb29raWUubWF0Y2gobmV3IFJlZ0V4cCgnKF58O1xcXFxzKikoJyArIG5hbWUgKyAnKT0oW147XSopJykpO1xuICAgICAgICAgIHJldHVybiAobWF0Y2ggPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbM10pIDogbnVsbCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUobmFtZSkge1xuICAgICAgICAgIHRoaXMud3JpdGUobmFtZSwgJycsIERhdGUubm93KCkgLSA4NjQwMDAwMCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSkoKSA6XG5cbiAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52ICh3ZWIgd29ya2VycywgcmVhY3QtbmF0aXZlKSBsYWNrIG5lZWRlZCBzdXBwb3J0LlxuICAgIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUoKSB7fSxcbiAgICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZCgpIHsgcmV0dXJuIG51bGw7IH0sXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge31cbiAgICAgIH07XG4gICAgfSkoKVxuKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzXG4vLyBtb2R1bGUgaWQgPSAzNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIFVSTCB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNBYnNvbHV0ZVVSTCh1cmwpIHtcbiAgLy8gQSBVUkwgaXMgY29uc2lkZXJlZCBhYnNvbHV0ZSBpZiBpdCBiZWdpbnMgd2l0aCBcIjxzY2hlbWU+Oi8vXCIgb3IgXCIvL1wiIChwcm90b2NvbC1yZWxhdGl2ZSBVUkwpLlxuICAvLyBSRkMgMzk4NiBkZWZpbmVzIHNjaGVtZSBuYW1lIGFzIGEgc2VxdWVuY2Ugb2YgY2hhcmFjdGVycyBiZWdpbm5pbmcgd2l0aCBhIGxldHRlciBhbmQgZm9sbG93ZWRcbiAgLy8gYnkgYW55IGNvbWJpbmF0aW9uIG9mIGxldHRlcnMsIGRpZ2l0cywgcGx1cywgcGVyaW9kLCBvciBoeXBoZW4uXG4gIHJldHVybiAvXihbYS16XVthLXpcXGRcXCtcXC1cXC5dKjopP1xcL1xcLy9pLnRlc3QodXJsKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qc1xuLy8gbW9kdWxlIGlkID0gMzQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIHNwZWNpZmllZCBVUkxzXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkwgVGhlIGJhc2UgVVJMXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpdmVVUkwgVGhlIHJlbGF0aXZlIFVSTFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIGNvbWJpbmVkIFVSTFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG4gIHJldHVybiByZWxhdGl2ZVVSTFxuICAgID8gYmFzZVVSTC5yZXBsYWNlKC9cXC8rJC8sICcnKSArICcvJyArIHJlbGF0aXZlVVJMLnJlcGxhY2UoL15cXC8rLywgJycpXG4gICAgOiBiYXNlVVJMO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9jb21iaW5lVVJMcy5qc1xuLy8gbW9kdWxlIGlkID0gMzUwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcblxuLyoqXG4gKiBDb25maWctc3BlY2lmaWMgbWVyZ2UtZnVuY3Rpb24gd2hpY2ggY3JlYXRlcyBhIG5ldyBjb25maWctb2JqZWN0XG4gKiBieSBtZXJnaW5nIHR3byBjb25maWd1cmF0aW9uIG9iamVjdHMgdG9nZXRoZXIuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZzFcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBOZXcgb2JqZWN0IHJlc3VsdGluZyBmcm9tIG1lcmdpbmcgY29uZmlnMiB0byBjb25maWcxXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbWVyZ2VDb25maWcoY29uZmlnMSwgY29uZmlnMikge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgY29uZmlnMiA9IGNvbmZpZzIgfHwge307XG4gIHZhciBjb25maWcgPSB7fTtcblxuICB1dGlscy5mb3JFYWNoKFsndXJsJywgJ21ldGhvZCcsICdwYXJhbXMnLCAnZGF0YSddLCBmdW5jdGlvbiB2YWx1ZUZyb21Db25maWcyKHByb3ApIHtcbiAgICBpZiAodHlwZW9mIGNvbmZpZzJbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25maWdbcHJvcF0gPSBjb25maWcyW3Byb3BdO1xuICAgIH1cbiAgfSk7XG5cbiAgdXRpbHMuZm9yRWFjaChbJ2hlYWRlcnMnLCAnYXV0aCcsICdwcm94eSddLCBmdW5jdGlvbiBtZXJnZURlZXBQcm9wZXJ0aWVzKHByb3ApIHtcbiAgICBpZiAodXRpbHMuaXNPYmplY3QoY29uZmlnMltwcm9wXSkpIHtcbiAgICAgIGNvbmZpZ1twcm9wXSA9IHV0aWxzLmRlZXBNZXJnZShjb25maWcxW3Byb3BdLCBjb25maWcyW3Byb3BdKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWcyW3Byb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMltwcm9wXTtcbiAgICB9IGVsc2UgaWYgKHV0aWxzLmlzT2JqZWN0KGNvbmZpZzFbcHJvcF0pKSB7XG4gICAgICBjb25maWdbcHJvcF0gPSB1dGlscy5kZWVwTWVyZ2UoY29uZmlnMVtwcm9wXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnMVtwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzFbcHJvcF07XG4gICAgfVxuICB9KTtcblxuICB1dGlscy5mb3JFYWNoKFtcbiAgICAnYmFzZVVSTCcsICd0cmFuc2Zvcm1SZXF1ZXN0JywgJ3RyYW5zZm9ybVJlc3BvbnNlJywgJ3BhcmFtc1NlcmlhbGl6ZXInLFxuICAgICd0aW1lb3V0JywgJ3dpdGhDcmVkZW50aWFscycsICdhZGFwdGVyJywgJ3Jlc3BvbnNlVHlwZScsICd4c3JmQ29va2llTmFtZScsXG4gICAgJ3hzcmZIZWFkZXJOYW1lJywgJ29uVXBsb2FkUHJvZ3Jlc3MnLCAnb25Eb3dubG9hZFByb2dyZXNzJywgJ21heENvbnRlbnRMZW5ndGgnLFxuICAgICd2YWxpZGF0ZVN0YXR1cycsICdtYXhSZWRpcmVjdHMnLCAnaHR0cEFnZW50JywgJ2h0dHBzQWdlbnQnLCAnY2FuY2VsVG9rZW4nLFxuICAgICdzb2NrZXRQYXRoJ1xuICBdLCBmdW5jdGlvbiBkZWZhdWx0VG9Db25maWcyKHByb3ApIHtcbiAgICBpZiAodHlwZW9mIGNvbmZpZzJbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25maWdbcHJvcF0gPSBjb25maWcyW3Byb3BdO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZzFbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25maWdbcHJvcF0gPSBjb25maWcxW3Byb3BdO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGNvbmZpZztcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NvcmUvbWVyZ2VDb25maWcuanNcbi8vIG1vZHVsZSBpZCA9IDM1MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQSBgQ2FuY2VsYCBpcyBhbiBvYmplY3QgdGhhdCBpcyB0aHJvd24gd2hlbiBhbiBvcGVyYXRpb24gaXMgY2FuY2VsZWQuXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge3N0cmluZz19IG1lc3NhZ2UgVGhlIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIENhbmNlbChtZXNzYWdlKSB7XG4gIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG59XG5cbkNhbmNlbC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcbiAgcmV0dXJuICdDYW5jZWwnICsgKHRoaXMubWVzc2FnZSA/ICc6ICcgKyB0aGlzLm1lc3NhZ2UgOiAnJyk7XG59O1xuXG5DYW5jZWwucHJvdG90eXBlLl9fQ0FOQ0VMX18gPSB0cnVlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY2FuY2VsL0NhbmNlbC5qc1xuLy8gbW9kdWxlIGlkID0gMzUyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIENhbmNlbCA9IHJlcXVpcmUoJy4vQ2FuY2VsJyk7XG5cbi8qKlxuICogQSBgQ2FuY2VsVG9rZW5gIGlzIGFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlcXVlc3QgY2FuY2VsbGF0aW9uIG9mIGFuIG9wZXJhdGlvbi5cbiAqXG4gKiBAY2xhc3NcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGV4ZWN1dG9yIFRoZSBleGVjdXRvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gQ2FuY2VsVG9rZW4oZXhlY3V0b3IpIHtcbiAgaWYgKHR5cGVvZiBleGVjdXRvciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2V4ZWN1dG9yIG11c3QgYmUgYSBmdW5jdGlvbi4nKTtcbiAgfVxuXG4gIHZhciByZXNvbHZlUHJvbWlzZTtcbiAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHtcbiAgICByZXNvbHZlUHJvbWlzZSA9IHJlc29sdmU7XG4gIH0pO1xuXG4gIHZhciB0b2tlbiA9IHRoaXM7XG4gIGV4ZWN1dG9yKGZ1bmN0aW9uIGNhbmNlbChtZXNzYWdlKSB7XG4gICAgaWYgKHRva2VuLnJlYXNvbikge1xuICAgICAgLy8gQ2FuY2VsbGF0aW9uIGhhcyBhbHJlYWR5IGJlZW4gcmVxdWVzdGVkXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdG9rZW4ucmVhc29uID0gbmV3IENhbmNlbChtZXNzYWdlKTtcbiAgICByZXNvbHZlUHJvbWlzZSh0b2tlbi5yZWFzb24pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICovXG5DYW5jZWxUb2tlbi5wcm90b3R5cGUudGhyb3dJZlJlcXVlc3RlZCA9IGZ1bmN0aW9uIHRocm93SWZSZXF1ZXN0ZWQoKSB7XG4gIGlmICh0aGlzLnJlYXNvbikge1xuICAgIHRocm93IHRoaXMucmVhc29uO1xuICB9XG59O1xuXG4vKipcbiAqIFJldHVybnMgYW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYSBuZXcgYENhbmNlbFRva2VuYCBhbmQgYSBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCxcbiAqIGNhbmNlbHMgdGhlIGBDYW5jZWxUb2tlbmAuXG4gKi9cbkNhbmNlbFRva2VuLnNvdXJjZSA9IGZ1bmN0aW9uIHNvdXJjZSgpIHtcbiAgdmFyIGNhbmNlbDtcbiAgdmFyIHRva2VuID0gbmV3IENhbmNlbFRva2VuKGZ1bmN0aW9uIGV4ZWN1dG9yKGMpIHtcbiAgICBjYW5jZWwgPSBjO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICB0b2tlbjogdG9rZW4sXG4gICAgY2FuY2VsOiBjYW5jZWxcbiAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ2FuY2VsVG9rZW47XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NhbmNlbC9DYW5jZWxUb2tlbi5qc1xuLy8gbW9kdWxlIGlkID0gMzUzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBTeW50YWN0aWMgc3VnYXIgZm9yIGludm9raW5nIGEgZnVuY3Rpb24gYW5kIGV4cGFuZGluZyBhbiBhcnJheSBmb3IgYXJndW1lbnRzLlxuICpcbiAqIENvbW1vbiB1c2UgY2FzZSB3b3VsZCBiZSB0byB1c2UgYEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseWAuXG4gKlxuICogIGBgYGpzXG4gKiAgZnVuY3Rpb24gZih4LCB5LCB6KSB7fVxuICogIHZhciBhcmdzID0gWzEsIDIsIDNdO1xuICogIGYuYXBwbHkobnVsbCwgYXJncyk7XG4gKiAgYGBgXG4gKlxuICogV2l0aCBgc3ByZWFkYCB0aGlzIGV4YW1wbGUgY2FuIGJlIHJlLXdyaXR0ZW4uXG4gKlxuICogIGBgYGpzXG4gKiAgc3ByZWFkKGZ1bmN0aW9uKHgsIHksIHopIHt9KShbMSwgMiwgM10pO1xuICogIGBgYFxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc3ByZWFkKGNhbGxiYWNrKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKGFycikge1xuICAgIHJldHVybiBjYWxsYmFjay5hcHBseShudWxsLCBhcnIpO1xuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9zcHJlYWQuanNcbi8vIG1vZHVsZSBpZCA9IDM1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuZW5jb2RlID0gcmVxdWlyZSgnLi9lbmNvZGUnKTtcbmV4cG9ydHMuZGVjb2RlID0gcmVxdWlyZSgnLi9kZWNvZGUnKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9nZW9idWYvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDM1NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZW5jb2RlO1xuXG52YXIga2V5cywga2V5c051bSwga2V5c0FyciwgZGltLCBlLFxuICAgIG1heFByZWNpc2lvbiA9IDFlNjtcblxudmFyIGdlb21ldHJ5VHlwZXMgPSB7XG4gICAgJ1BvaW50JzogMCxcbiAgICAnTXVsdGlQb2ludCc6IDEsXG4gICAgJ0xpbmVTdHJpbmcnOiAyLFxuICAgICdNdWx0aUxpbmVTdHJpbmcnOiAzLFxuICAgICdQb2x5Z29uJzogNCxcbiAgICAnTXVsdGlQb2x5Z29uJzogNSxcbiAgICAnR2VvbWV0cnlDb2xsZWN0aW9uJzogNlxufTtcblxuZnVuY3Rpb24gZW5jb2RlKG9iaiwgcGJmKSB7XG4gICAga2V5cyA9IHt9O1xuICAgIGtleXNBcnIgPSBbXTtcbiAgICBrZXlzTnVtID0gMDtcbiAgICBkaW0gPSAwO1xuICAgIGUgPSAxO1xuXG4gICAgYW5hbHl6ZShvYmopO1xuXG4gICAgZSA9IE1hdGgubWluKGUsIG1heFByZWNpc2lvbik7XG4gICAgdmFyIHByZWNpc2lvbiA9IE1hdGguY2VpbChNYXRoLmxvZyhlKSAvIE1hdGguTE4xMCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXNBcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZVN0cmluZ0ZpZWxkKDEsIGtleXNBcnJbaV0pO1xuICAgIGlmIChkaW0gIT09IDIpIHBiZi53cml0ZVZhcmludEZpZWxkKDIsIGRpbSk7XG4gICAgaWYgKHByZWNpc2lvbiAhPT0gNikgcGJmLndyaXRlVmFyaW50RmllbGQoMywgcHJlY2lzaW9uKTtcblxuICAgIGlmIChvYmoudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykgcGJmLndyaXRlTWVzc2FnZSg0LCB3cml0ZUZlYXR1cmVDb2xsZWN0aW9uLCBvYmopO1xuICAgIGVsc2UgaWYgKG9iai50eXBlID09PSAnRmVhdHVyZScpIHBiZi53cml0ZU1lc3NhZ2UoNSwgd3JpdGVGZWF0dXJlLCBvYmopO1xuICAgIGVsc2UgcGJmLndyaXRlTWVzc2FnZSg2LCB3cml0ZUdlb21ldHJ5LCBvYmopO1xuXG4gICAga2V5cyA9IG51bGw7XG5cbiAgICByZXR1cm4gcGJmLmZpbmlzaCgpO1xufVxuXG5mdW5jdGlvbiBhbmFseXplKG9iaikge1xuICAgIHZhciBpLCBrZXk7XG5cbiAgICBpZiAob2JqLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG9iai5mZWF0dXJlcy5sZW5ndGg7IGkrKykgYW5hbHl6ZShvYmouZmVhdHVyZXNbaV0pO1xuXG4gICAgfSBlbHNlIGlmIChvYmoudHlwZSA9PT0gJ0ZlYXR1cmUnKSB7XG4gICAgICAgIGlmIChvYmouZ2VvbWV0cnkgIT09IG51bGwpIGFuYWx5emUob2JqLmdlb21ldHJ5KTtcbiAgICAgICAgZm9yIChrZXkgaW4gb2JqLnByb3BlcnRpZXMpIHNhdmVLZXkoa2V5KTtcblxuICAgIH0gZWxzZSBpZiAob2JqLnR5cGUgPT09ICdQb2ludCcpIGFuYWx5emVQb2ludChvYmouY29vcmRpbmF0ZXMpO1xuICAgIGVsc2UgaWYgKG9iai50eXBlID09PSAnTXVsdGlQb2ludCcpIGFuYWx5emVQb2ludHMob2JqLmNvb3JkaW5hdGVzKTtcbiAgICBlbHNlIGlmIChvYmoudHlwZSA9PT0gJ0dlb21ldHJ5Q29sbGVjdGlvbicpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IG9iai5nZW9tZXRyaWVzLmxlbmd0aDsgaSsrKSBhbmFseXplKG9iai5nZW9tZXRyaWVzW2ldKTtcbiAgICB9XG4gICAgZWxzZSBpZiAob2JqLnR5cGUgPT09ICdMaW5lU3RyaW5nJykgYW5hbHl6ZVBvaW50cyhvYmouY29vcmRpbmF0ZXMpO1xuICAgIGVsc2UgaWYgKG9iai50eXBlID09PSAnUG9seWdvbicgfHwgb2JqLnR5cGUgPT09ICdNdWx0aUxpbmVTdHJpbmcnKSBhbmFseXplTXVsdGlMaW5lKG9iai5jb29yZGluYXRlcyk7XG4gICAgZWxzZSBpZiAob2JqLnR5cGUgPT09ICdNdWx0aVBvbHlnb24nKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBvYmouY29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIGFuYWx5emVNdWx0aUxpbmUob2JqLmNvb3JkaW5hdGVzW2ldKTtcbiAgICB9XG5cbiAgICBmb3IgKGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKCFpc1NwZWNpYWxLZXkoa2V5LCBvYmoudHlwZSkpIHNhdmVLZXkoa2V5KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFuYWx5emVNdWx0aUxpbmUoY29vcmRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIGFuYWx5emVQb2ludHMoY29vcmRzW2ldKTtcbn1cblxuZnVuY3Rpb24gYW5hbHl6ZVBvaW50cyhjb29yZHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykgYW5hbHl6ZVBvaW50KGNvb3Jkc1tpXSk7XG59XG5cbmZ1bmN0aW9uIGFuYWx5emVQb2ludChwb2ludCkge1xuICAgIGRpbSA9IE1hdGgubWF4KGRpbSwgcG9pbnQubGVuZ3RoKTtcblxuICAgIC8vIGZpbmQgbWF4IHByZWNpc2lvblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9pbnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgd2hpbGUgKE1hdGgucm91bmQocG9pbnRbaV0gKiBlKSAvIGUgIT09IHBvaW50W2ldICYmIGUgPCBtYXhQcmVjaXNpb24pIGUgKj0gMTA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzYXZlS2V5KGtleSkge1xuICAgIGlmIChrZXlzW2tleV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBrZXlzQXJyLnB1c2goa2V5KTtcbiAgICAgICAga2V5c1trZXldID0ga2V5c051bSsrO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gd3JpdGVGZWF0dXJlQ29sbGVjdGlvbihvYmosIHBiZikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHBiZi53cml0ZU1lc3NhZ2UoMSwgd3JpdGVGZWF0dXJlLCBvYmouZmVhdHVyZXNbaV0pO1xuICAgIH1cbiAgICB3cml0ZVByb3BzKG9iaiwgcGJmLCB0cnVlKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVGZWF0dXJlKGZlYXR1cmUsIHBiZikge1xuICAgIGlmIChmZWF0dXJlLmdlb21ldHJ5ICE9PSBudWxsKSBwYmYud3JpdGVNZXNzYWdlKDEsIHdyaXRlR2VvbWV0cnksIGZlYXR1cmUuZ2VvbWV0cnkpO1xuXG4gICAgaWYgKGZlYXR1cmUuaWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodHlwZW9mIGZlYXR1cmUuaWQgPT09ICdudW1iZXInICYmIGZlYXR1cmUuaWQgJSAxID09PSAwKSBwYmYud3JpdGVTVmFyaW50RmllbGQoMTIsIGZlYXR1cmUuaWQpO1xuICAgICAgICBlbHNlIHBiZi53cml0ZVN0cmluZ0ZpZWxkKDExLCBmZWF0dXJlLmlkKTtcbiAgICB9XG5cbiAgICBpZiAoZmVhdHVyZS5wcm9wZXJ0aWVzKSB3cml0ZVByb3BzKGZlYXR1cmUucHJvcGVydGllcywgcGJmKTtcbiAgICB3cml0ZVByb3BzKGZlYXR1cmUsIHBiZiwgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlR2VvbWV0cnkoZ2VvbSwgcGJmKSB7XG4gICAgcGJmLndyaXRlVmFyaW50RmllbGQoMSwgZ2VvbWV0cnlUeXBlc1tnZW9tLnR5cGVdKTtcblxuICAgIHZhciBjb29yZHMgPSBnZW9tLmNvb3JkaW5hdGVzO1xuXG4gICAgaWYgKGdlb20udHlwZSA9PT0gJ1BvaW50Jykgd3JpdGVQb2ludChjb29yZHMsIHBiZik7XG4gICAgZWxzZSBpZiAoZ2VvbS50eXBlID09PSAnTXVsdGlQb2ludCcpIHdyaXRlTGluZShjb29yZHMsIHBiZiwgdHJ1ZSk7XG4gICAgZWxzZSBpZiAoZ2VvbS50eXBlID09PSAnTGluZVN0cmluZycpIHdyaXRlTGluZShjb29yZHMsIHBiZik7XG4gICAgZWxzZSBpZiAoZ2VvbS50eXBlID09PSAnTXVsdGlMaW5lU3RyaW5nJykgd3JpdGVNdWx0aUxpbmUoY29vcmRzLCBwYmYpO1xuICAgIGVsc2UgaWYgKGdlb20udHlwZSA9PT0gJ1BvbHlnb24nKSB3cml0ZU11bHRpTGluZShjb29yZHMsIHBiZiwgdHJ1ZSk7XG4gICAgZWxzZSBpZiAoZ2VvbS50eXBlID09PSAnTXVsdGlQb2x5Z29uJykgd3JpdGVNdWx0aVBvbHlnb24oY29vcmRzLCBwYmYpO1xuICAgIGVsc2UgaWYgKGdlb20udHlwZSA9PT0gJ0dlb21ldHJ5Q29sbGVjdGlvbicpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZW9tLmdlb21ldHJpZXMubGVuZ3RoOyBpKyspIHBiZi53cml0ZU1lc3NhZ2UoNCwgd3JpdGVHZW9tZXRyeSwgZ2VvbS5nZW9tZXRyaWVzW2ldKTtcbiAgICB9XG5cbiAgICB3cml0ZVByb3BzKGdlb20sIHBiZiwgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlUHJvcHMocHJvcHMsIHBiZiwgaXNDdXN0b20pIHtcbiAgICB2YXIgaW5kZXhlcyA9IFtdLFxuICAgICAgICB2YWx1ZUluZGV4ID0gMDtcblxuICAgIGZvciAodmFyIGtleSBpbiBwcm9wcykge1xuICAgICAgICBpZiAoaXNDdXN0b20gJiYgaXNTcGVjaWFsS2V5KGtleSwgcHJvcHMudHlwZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHBiZi53cml0ZU1lc3NhZ2UoMTMsIHdyaXRlVmFsdWUsIHByb3BzW2tleV0pO1xuICAgICAgICBpbmRleGVzLnB1c2goa2V5c1trZXldKTtcbiAgICAgICAgaW5kZXhlcy5wdXNoKHZhbHVlSW5kZXgrKyk7XG4gICAgfVxuICAgIHBiZi53cml0ZVBhY2tlZFZhcmludChpc0N1c3RvbSA/IDE1IDogMTQsIGluZGV4ZXMpO1xufVxuXG5mdW5jdGlvbiB3cml0ZVZhbHVlKHZhbHVlLCBwYmYpIHtcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybjtcblxuICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG4gICAgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSBwYmYud3JpdGVTdHJpbmdGaWVsZCgxLCB2YWx1ZSk7XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ2Jvb2xlYW4nKSBwYmYud3JpdGVCb29sZWFuRmllbGQoNSwgdmFsdWUpO1xuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdvYmplY3QnKSBwYmYud3JpdGVTdHJpbmdGaWVsZCg2LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICAgIGlmICh2YWx1ZSAlIDEgIT09IDApIHBiZi53cml0ZURvdWJsZUZpZWxkKDIsIHZhbHVlKTtcbiAgICAgICAgZWxzZSBpZiAodmFsdWUgPj0gMCkgcGJmLndyaXRlVmFyaW50RmllbGQoMywgdmFsdWUpO1xuICAgICAgICBlbHNlIHBiZi53cml0ZVZhcmludEZpZWxkKDQsIC12YWx1ZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB3cml0ZVBvaW50KHBvaW50LCBwYmYpIHtcbiAgICB2YXIgY29vcmRzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaW07IGkrKykgY29vcmRzLnB1c2goTWF0aC5yb3VuZChwb2ludFtpXSAqIGUpKTtcbiAgICBwYmYud3JpdGVQYWNrZWRTVmFyaW50KDMsIGNvb3Jkcyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlTGluZShsaW5lLCBwYmYpIHtcbiAgICB2YXIgY29vcmRzID0gW107XG4gICAgcG9wdWxhdGVMaW5lKGNvb3JkcywgbGluZSk7XG4gICAgcGJmLndyaXRlUGFja2VkU1ZhcmludCgzLCBjb29yZHMpO1xufVxuXG5mdW5jdGlvbiB3cml0ZU11bHRpTGluZShsaW5lcywgcGJmLCBjbG9zZWQpIHtcbiAgICB2YXIgbGVuID0gbGluZXMubGVuZ3RoLFxuICAgICAgICBpO1xuICAgIGlmIChsZW4gIT09IDEpIHtcbiAgICAgICAgdmFyIGxlbmd0aHMgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSBsZW5ndGhzLnB1c2gobGluZXNbaV0ubGVuZ3RoIC0gKGNsb3NlZCA/IDEgOiAwKSk7XG4gICAgICAgIHBiZi53cml0ZVBhY2tlZFZhcmludCgyLCBsZW5ndGhzKTtcbiAgICAgICAgLy8gVE9ETyBmYXN0ZXIgd2l0aCBjdXN0b20gd3JpdGVNZXNzYWdlP1xuICAgIH1cbiAgICB2YXIgY29vcmRzID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSBwb3B1bGF0ZUxpbmUoY29vcmRzLCBsaW5lc1tpXSwgY2xvc2VkKTtcbiAgICBwYmYud3JpdGVQYWNrZWRTVmFyaW50KDMsIGNvb3Jkcyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlTXVsdGlQb2x5Z29uKHBvbHlnb25zLCBwYmYpIHtcbiAgICB2YXIgbGVuID0gcG9seWdvbnMubGVuZ3RoLFxuICAgICAgICBpLCBqO1xuICAgIGlmIChsZW4gIT09IDEgfHwgcG9seWdvbnNbMF0ubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgIHZhciBsZW5ndGhzID0gW2xlbl07XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgbGVuZ3Rocy5wdXNoKHBvbHlnb25zW2ldLmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgcG9seWdvbnNbaV0ubGVuZ3RoOyBqKyspIGxlbmd0aHMucHVzaChwb2x5Z29uc1tpXVtqXS5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuICAgICAgICBwYmYud3JpdGVQYWNrZWRWYXJpbnQoMiwgbGVuZ3Rocyk7XG4gICAgfVxuXG4gICAgdmFyIGNvb3JkcyA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBmb3IgKGogPSAwOyBqIDwgcG9seWdvbnNbaV0ubGVuZ3RoOyBqKyspIHBvcHVsYXRlTGluZShjb29yZHMsIHBvbHlnb25zW2ldW2pdLCB0cnVlKTtcbiAgICB9XG4gICAgcGJmLndyaXRlUGFja2VkU1ZhcmludCgzLCBjb29yZHMpO1xufVxuXG5mdW5jdGlvbiBwb3B1bGF0ZUxpbmUoY29vcmRzLCBsaW5lLCBjbG9zZWQpIHtcbiAgICB2YXIgaSwgaixcbiAgICAgICAgbGVuID0gbGluZS5sZW5ndGggLSAoY2xvc2VkID8gMSA6IDApLFxuICAgICAgICBzdW0gPSBuZXcgQXJyYXkoZGltKTtcbiAgICBmb3IgKGogPSAwOyBqIDwgZGltOyBqKyspIHN1bVtqXSA9IDA7XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBkaW07IGorKykge1xuICAgICAgICAgICAgdmFyIG4gPSBNYXRoLnJvdW5kKGxpbmVbaV1bal0gKiBlKSAtIHN1bVtqXTtcbiAgICAgICAgICAgIGNvb3Jkcy5wdXNoKG4pO1xuICAgICAgICAgICAgc3VtW2pdICs9IG47XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzU3BlY2lhbEtleShrZXksIHR5cGUpIHtcbiAgICBpZiAoa2V5ID09PSAndHlwZScpIHJldHVybiB0cnVlO1xuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ2ZlYXR1cmVzJykgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnRmVhdHVyZScpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ2lkJyB8fCBrZXkgPT09ICdwcm9wZXJ0aWVzJyB8fCBrZXkgPT09ICdnZW9tZXRyeScpIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ0dlb21ldHJ5Q29sbGVjdGlvbicpIHtcbiAgICAgICAgaWYgKGtleSA9PT0gJ2dlb21ldHJpZXMnKSByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGtleSA9PT0gJ2Nvb3JkaW5hdGVzJykgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2dlb2J1Zi9lbmNvZGUuanNcbi8vIG1vZHVsZSBpZCA9IDM1NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZGVjb2RlO1xuXG52YXIga2V5cywgdmFsdWVzLCBsZW5ndGhzLCBkaW0sIGU7XG5cbnZhciBnZW9tZXRyeVR5cGVzID0gW1xuICAgICdQb2ludCcsICdNdWx0aVBvaW50JywgJ0xpbmVTdHJpbmcnLCAnTXVsdGlMaW5lU3RyaW5nJyxcbiAgICAnUG9seWdvbicsICdNdWx0aVBvbHlnb24nLCAnR2VvbWV0cnlDb2xsZWN0aW9uJ107XG5cbmZ1bmN0aW9uIGRlY29kZShwYmYpIHtcbiAgICBkaW0gPSAyO1xuICAgIGUgPSBNYXRoLnBvdygxMCwgNik7XG4gICAgbGVuZ3RocyA9IG51bGw7XG5cbiAgICBrZXlzID0gW107XG4gICAgdmFsdWVzID0gW107XG4gICAgdmFyIG9iaiA9IHBiZi5yZWFkRmllbGRzKHJlYWREYXRhRmllbGQsIHt9KTtcbiAgICBrZXlzID0gbnVsbDtcblxuICAgIHJldHVybiBvYmo7XG59XG5cbmZ1bmN0aW9uIHJlYWREYXRhRmllbGQodGFnLCBvYmosIHBiZikge1xuICAgIGlmICh0YWcgPT09IDEpIGtleXMucHVzaChwYmYucmVhZFN0cmluZygpKTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDIpIGRpbSA9IHBiZi5yZWFkVmFyaW50KCk7XG4gICAgZWxzZSBpZiAodGFnID09PSAzKSBlID0gTWF0aC5wb3coMTAsIHBiZi5yZWFkVmFyaW50KCkpO1xuXG4gICAgZWxzZSBpZiAodGFnID09PSA0KSByZWFkRmVhdHVyZUNvbGxlY3Rpb24ocGJmLCBvYmopO1xuICAgIGVsc2UgaWYgKHRhZyA9PT0gNSkgcmVhZEZlYXR1cmUocGJmLCBvYmopO1xuICAgIGVsc2UgaWYgKHRhZyA9PT0gNikgcmVhZEdlb21ldHJ5KHBiZiwgb2JqKTtcbn1cblxuZnVuY3Rpb24gcmVhZEZlYXR1cmVDb2xsZWN0aW9uKHBiZiwgb2JqKSB7XG4gICAgb2JqLnR5cGUgPSAnRmVhdHVyZUNvbGxlY3Rpb24nO1xuICAgIG9iai5mZWF0dXJlcyA9IFtdO1xuICAgIHJldHVybiBwYmYucmVhZE1lc3NhZ2UocmVhZEZlYXR1cmVDb2xsZWN0aW9uRmllbGQsIG9iaik7XG59XG5cbmZ1bmN0aW9uIHJlYWRGZWF0dXJlKHBiZiwgZmVhdHVyZSkge1xuICAgIGZlYXR1cmUudHlwZSA9ICdGZWF0dXJlJztcbiAgICB2YXIgZiA9IHBiZi5yZWFkTWVzc2FnZShyZWFkRmVhdHVyZUZpZWxkLCBmZWF0dXJlKTtcbiAgICBpZiAoIWYuaGFzT3duUHJvcGVydHkoJ2dlb21ldHJ5JykpIGYuZ2VvbWV0cnkgPSBudWxsO1xuICAgIHJldHVybiBmO1xufVxuXG5mdW5jdGlvbiByZWFkR2VvbWV0cnkocGJmLCBnZW9tKSB7XG4gICAgcmV0dXJuIHBiZi5yZWFkTWVzc2FnZShyZWFkR2VvbWV0cnlGaWVsZCwgZ2VvbSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRGZWF0dXJlQ29sbGVjdGlvbkZpZWxkKHRhZywgb2JqLCBwYmYpIHtcbiAgICBpZiAodGFnID09PSAxKSBvYmouZmVhdHVyZXMucHVzaChyZWFkRmVhdHVyZShwYmYsIHt9KSk7XG5cbiAgICBlbHNlIGlmICh0YWcgPT09IDEzKSB2YWx1ZXMucHVzaChyZWFkVmFsdWUocGJmKSk7XG4gICAgZWxzZSBpZiAodGFnID09PSAxNSkgcmVhZFByb3BzKHBiZiwgb2JqKTtcbn1cblxuZnVuY3Rpb24gcmVhZEZlYXR1cmVGaWVsZCh0YWcsIGZlYXR1cmUsIHBiZikge1xuICAgIGlmICh0YWcgPT09IDEpIGZlYXR1cmUuZ2VvbWV0cnkgPSByZWFkR2VvbWV0cnkocGJmLCB7fSk7XG5cbiAgICBlbHNlIGlmICh0YWcgPT09IDExKSBmZWF0dXJlLmlkID0gcGJmLnJlYWRTdHJpbmcoKTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDEyKSBmZWF0dXJlLmlkID0gcGJmLnJlYWRTVmFyaW50KCk7XG5cbiAgICBlbHNlIGlmICh0YWcgPT09IDEzKSB2YWx1ZXMucHVzaChyZWFkVmFsdWUocGJmKSk7XG4gICAgZWxzZSBpZiAodGFnID09PSAxNCkgZmVhdHVyZS5wcm9wZXJ0aWVzID0gcmVhZFByb3BzKHBiZiwge30pO1xuICAgIGVsc2UgaWYgKHRhZyA9PT0gMTUpIHJlYWRQcm9wcyhwYmYsIGZlYXR1cmUpO1xufVxuXG5mdW5jdGlvbiByZWFkR2VvbWV0cnlGaWVsZCh0YWcsIGdlb20sIHBiZikge1xuICAgIGlmICh0YWcgPT09IDEpIGdlb20udHlwZSA9IGdlb21ldHJ5VHlwZXNbcGJmLnJlYWRWYXJpbnQoKV07XG5cbiAgICBlbHNlIGlmICh0YWcgPT09IDIpIGxlbmd0aHMgPSBwYmYucmVhZFBhY2tlZFZhcmludCgpO1xuICAgIGVsc2UgaWYgKHRhZyA9PT0gMykgcmVhZENvb3JkcyhnZW9tLCBwYmYsIGdlb20udHlwZSk7XG4gICAgZWxzZSBpZiAodGFnID09PSA0KSB7XG4gICAgICAgIGdlb20uZ2VvbWV0cmllcyA9IGdlb20uZ2VvbWV0cmllcyB8fCBbXTtcbiAgICAgICAgZ2VvbS5nZW9tZXRyaWVzLnB1c2gocmVhZEdlb21ldHJ5KHBiZiwge30pKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodGFnID09PSAxMykgdmFsdWVzLnB1c2gocmVhZFZhbHVlKHBiZikpO1xuICAgIGVsc2UgaWYgKHRhZyA9PT0gMTUpIHJlYWRQcm9wcyhwYmYsIGdlb20pO1xufVxuXG5mdW5jdGlvbiByZWFkQ29vcmRzKGdlb20sIHBiZiwgdHlwZSkge1xuICAgIGlmICh0eXBlID09PSAnUG9pbnQnKSBnZW9tLmNvb3JkaW5hdGVzID0gcmVhZFBvaW50KHBiZik7XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ011bHRpUG9pbnQnKSBnZW9tLmNvb3JkaW5hdGVzID0gcmVhZExpbmUocGJmLCB0cnVlKTtcbiAgICBlbHNlIGlmICh0eXBlID09PSAnTGluZVN0cmluZycpIGdlb20uY29vcmRpbmF0ZXMgPSByZWFkTGluZShwYmYpO1xuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdNdWx0aUxpbmVTdHJpbmcnKSBnZW9tLmNvb3JkaW5hdGVzID0gcmVhZE11bHRpTGluZShwYmYpO1xuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdQb2x5Z29uJykgZ2VvbS5jb29yZGluYXRlcyA9IHJlYWRNdWx0aUxpbmUocGJmLCB0cnVlKTtcbiAgICBlbHNlIGlmICh0eXBlID09PSAnTXVsdGlQb2x5Z29uJykgZ2VvbS5jb29yZGluYXRlcyA9IHJlYWRNdWx0aVBvbHlnb24ocGJmKTtcbn1cblxuZnVuY3Rpb24gcmVhZFZhbHVlKHBiZikge1xuICAgIHZhciBlbmQgPSBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcyxcbiAgICAgICAgdmFsdWUgPSBudWxsO1xuXG4gICAgd2hpbGUgKHBiZi5wb3MgPCBlbmQpIHtcbiAgICAgICAgdmFyIHZhbCA9IHBiZi5yZWFkVmFyaW50KCksXG4gICAgICAgICAgICB0YWcgPSB2YWwgPj4gMztcblxuICAgICAgICBpZiAodGFnID09PSAxKSB2YWx1ZSA9IHBiZi5yZWFkU3RyaW5nKCk7XG4gICAgICAgIGVsc2UgaWYgKHRhZyA9PT0gMikgdmFsdWUgPSBwYmYucmVhZERvdWJsZSgpO1xuICAgICAgICBlbHNlIGlmICh0YWcgPT09IDMpIHZhbHVlID0gcGJmLnJlYWRWYXJpbnQoKTtcbiAgICAgICAgZWxzZSBpZiAodGFnID09PSA0KSB2YWx1ZSA9IC1wYmYucmVhZFZhcmludCgpO1xuICAgICAgICBlbHNlIGlmICh0YWcgPT09IDUpIHZhbHVlID0gcGJmLnJlYWRCb29sZWFuKCk7XG4gICAgICAgIGVsc2UgaWYgKHRhZyA9PT0gNikgdmFsdWUgPSBKU09OLnBhcnNlKHBiZi5yZWFkU3RyaW5nKCkpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIHJlYWRQcm9wcyhwYmYsIHByb3BzKSB7XG4gICAgdmFyIGVuZCA9IHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zO1xuICAgIHdoaWxlIChwYmYucG9zIDwgZW5kKSBwcm9wc1trZXlzW3BiZi5yZWFkVmFyaW50KCldXSA9IHZhbHVlc1twYmYucmVhZFZhcmludCgpXTtcbiAgICB2YWx1ZXMgPSBbXTtcbiAgICByZXR1cm4gcHJvcHM7XG59XG5cbmZ1bmN0aW9uIHJlYWRQb2ludChwYmYpIHtcbiAgICB2YXIgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3MsXG4gICAgICAgIGNvb3JkcyA9IFtdO1xuICAgIHdoaWxlIChwYmYucG9zIDwgZW5kKSBjb29yZHMucHVzaChwYmYucmVhZFNWYXJpbnQoKSAvIGUpO1xuICAgIHJldHVybiBjb29yZHM7XG59XG5cbmZ1bmN0aW9uIHJlYWRMaW5lUGFydChwYmYsIGVuZCwgbGVuLCBjbG9zZWQpIHtcbiAgICB2YXIgaSA9IDAsXG4gICAgICAgIGNvb3JkcyA9IFtdLFxuICAgICAgICBwLCBkO1xuXG4gICAgdmFyIHByZXZQID0gW107XG4gICAgZm9yIChkID0gMDsgZCA8IGRpbTsgZCsrKSBwcmV2UFtkXSA9IDA7XG5cbiAgICB3aGlsZSAobGVuID8gaSA8IGxlbiA6IHBiZi5wb3MgPCBlbmQpIHtcbiAgICAgICAgcCA9IFtdO1xuICAgICAgICBmb3IgKGQgPSAwOyBkIDwgZGltOyBkKyspIHtcbiAgICAgICAgICAgIHByZXZQW2RdICs9IHBiZi5yZWFkU1ZhcmludCgpO1xuICAgICAgICAgICAgcFtkXSA9IHByZXZQW2RdIC8gZTtcbiAgICAgICAgfVxuICAgICAgICBjb29yZHMucHVzaChwKTtcbiAgICAgICAgaSsrO1xuICAgIH1cbiAgICBpZiAoY2xvc2VkKSBjb29yZHMucHVzaChjb29yZHNbMF0pO1xuXG4gICAgcmV0dXJuIGNvb3Jkcztcbn1cblxuZnVuY3Rpb24gcmVhZExpbmUocGJmKSB7XG4gICAgcmV0dXJuIHJlYWRMaW5lUGFydChwYmYsIHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zKTtcbn1cblxuZnVuY3Rpb24gcmVhZE11bHRpTGluZShwYmYsIGNsb3NlZCkge1xuICAgIHZhciBlbmQgPSBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcztcbiAgICBpZiAoIWxlbmd0aHMpIHJldHVybiBbcmVhZExpbmVQYXJ0KHBiZiwgZW5kLCBudWxsLCBjbG9zZWQpXTtcblxuICAgIHZhciBjb29yZHMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aHMubGVuZ3RoOyBpKyspIGNvb3Jkcy5wdXNoKHJlYWRMaW5lUGFydChwYmYsIGVuZCwgbGVuZ3Roc1tpXSwgY2xvc2VkKSk7XG4gICAgbGVuZ3RocyA9IG51bGw7XG4gICAgcmV0dXJuIGNvb3Jkcztcbn1cblxuZnVuY3Rpb24gcmVhZE11bHRpUG9seWdvbihwYmYpIHtcbiAgICB2YXIgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3M7XG4gICAgaWYgKCFsZW5ndGhzKSByZXR1cm4gW1tyZWFkTGluZVBhcnQocGJmLCBlbmQsIG51bGwsIHRydWUpXV07XG5cbiAgICB2YXIgY29vcmRzID0gW107XG4gICAgdmFyIGogPSAxO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3Roc1swXTsgaSsrKSB7XG4gICAgICAgIHZhciByaW5ncyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGxlbmd0aHNbal07IGsrKykgcmluZ3MucHVzaChyZWFkTGluZVBhcnQocGJmLCBlbmQsIGxlbmd0aHNbaiArIDEgKyBrXSwgdHJ1ZSkpO1xuICAgICAgICBqICs9IGxlbmd0aHNbal0gKyAxO1xuICAgICAgICBjb29yZHMucHVzaChyaW5ncyk7XG4gICAgfVxuICAgIGxlbmd0aHMgPSBudWxsO1xuICAgIHJldHVybiBjb29yZHM7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZ2VvYnVmL2RlY29kZS5qc1xuLy8gbW9kdWxlIGlkID0gMzU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBQYmY7XG5cbnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpO1xuXG5mdW5jdGlvbiBQYmYoYnVmKSB7XG4gICAgdGhpcy5idWYgPSBBcnJheUJ1ZmZlci5pc1ZpZXcgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KGJ1ZikgPyBidWYgOiBuZXcgVWludDhBcnJheShidWYgfHwgMCk7XG4gICAgdGhpcy5wb3MgPSAwO1xuICAgIHRoaXMudHlwZSA9IDA7XG4gICAgdGhpcy5sZW5ndGggPSB0aGlzLmJ1Zi5sZW5ndGg7XG59XG5cblBiZi5WYXJpbnQgID0gMDsgLy8gdmFyaW50OiBpbnQzMiwgaW50NjQsIHVpbnQzMiwgdWludDY0LCBzaW50MzIsIHNpbnQ2NCwgYm9vbCwgZW51bVxuUGJmLkZpeGVkNjQgPSAxOyAvLyA2NC1iaXQ6IGRvdWJsZSwgZml4ZWQ2NCwgc2ZpeGVkNjRcblBiZi5CeXRlcyAgID0gMjsgLy8gbGVuZ3RoLWRlbGltaXRlZDogc3RyaW5nLCBieXRlcywgZW1iZWRkZWQgbWVzc2FnZXMsIHBhY2tlZCByZXBlYXRlZCBmaWVsZHNcblBiZi5GaXhlZDMyID0gNTsgLy8gMzItYml0OiBmbG9hdCwgZml4ZWQzMiwgc2ZpeGVkMzJcblxudmFyIFNISUZUX0xFRlRfMzIgPSAoMSA8PCAxNikgKiAoMSA8PCAxNiksXG4gICAgU0hJRlRfUklHSFRfMzIgPSAxIC8gU0hJRlRfTEVGVF8zMjtcblxuUGJmLnByb3RvdHlwZSA9IHtcblxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmJ1ZiA9IG51bGw7XG4gICAgfSxcblxuICAgIC8vID09PSBSRUFESU5HID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICByZWFkRmllbGRzOiBmdW5jdGlvbihyZWFkRmllbGQsIHJlc3VsdCwgZW5kKSB7XG4gICAgICAgIGVuZCA9IGVuZCB8fCB0aGlzLmxlbmd0aDtcblxuICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIHZhciB2YWwgPSB0aGlzLnJlYWRWYXJpbnQoKSxcbiAgICAgICAgICAgICAgICB0YWcgPSB2YWwgPj4gMyxcbiAgICAgICAgICAgICAgICBzdGFydFBvcyA9IHRoaXMucG9zO1xuXG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB2YWwgJiAweDc7XG4gICAgICAgICAgICByZWFkRmllbGQodGFnLCByZXN1bHQsIHRoaXMpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wb3MgPT09IHN0YXJ0UG9zKSB0aGlzLnNraXAodmFsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICByZWFkTWVzc2FnZTogZnVuY3Rpb24ocmVhZEZpZWxkLCByZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZEZpZWxkcyhyZWFkRmllbGQsIHJlc3VsdCwgdGhpcy5yZWFkVmFyaW50KCkgKyB0aGlzLnBvcyk7XG4gICAgfSxcblxuICAgIHJlYWRGaXhlZDMyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbCA9IHJlYWRVSW50MzIodGhpcy5idWYsIHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9LFxuXG4gICAgcmVhZFNGaXhlZDMyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbCA9IHJlYWRJbnQzMih0aGlzLmJ1ZiwgdGhpcy5wb3MpO1xuICAgICAgICB0aGlzLnBvcyArPSA0O1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH0sXG5cbiAgICAvLyA2NC1iaXQgaW50IGhhbmRsaW5nIGlzIGJhc2VkIG9uIGdpdGh1Yi5jb20vZHB3L25vZGUtYnVmZmVyLW1vcmUtaW50cyAoTUlULWxpY2Vuc2VkKVxuXG4gICAgcmVhZEZpeGVkNjQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmFsID0gcmVhZFVJbnQzMih0aGlzLmJ1ZiwgdGhpcy5wb3MpICsgcmVhZFVJbnQzMih0aGlzLmJ1ZiwgdGhpcy5wb3MgKyA0KSAqIFNISUZUX0xFRlRfMzI7XG4gICAgICAgIHRoaXMucG9zICs9IDg7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfSxcblxuICAgIHJlYWRTRml4ZWQ2NDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2YWwgPSByZWFkVUludDMyKHRoaXMuYnVmLCB0aGlzLnBvcykgKyByZWFkSW50MzIodGhpcy5idWYsIHRoaXMucG9zICsgNCkgKiBTSElGVF9MRUZUXzMyO1xuICAgICAgICB0aGlzLnBvcyArPSA4O1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH0sXG5cbiAgICByZWFkRmxvYXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmFsID0gaWVlZTc1NC5yZWFkKHRoaXMuYnVmLCB0aGlzLnBvcywgdHJ1ZSwgMjMsIDQpO1xuICAgICAgICB0aGlzLnBvcyArPSA0O1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH0sXG5cbiAgICByZWFkRG91YmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbCA9IGllZWU3NTQucmVhZCh0aGlzLmJ1ZiwgdGhpcy5wb3MsIHRydWUsIDUyLCA4KTtcbiAgICAgICAgdGhpcy5wb3MgKz0gODtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9LFxuXG4gICAgcmVhZFZhcmludDogZnVuY3Rpb24oaXNTaWduZWQpIHtcbiAgICAgICAgdmFyIGJ1ZiA9IHRoaXMuYnVmLFxuICAgICAgICAgICAgdmFsLCBiO1xuXG4gICAgICAgIGIgPSBidWZbdGhpcy5wb3MrK107IHZhbCAgPSAgYiAmIDB4N2Y7ICAgICAgICBpZiAoYiA8IDB4ODApIHJldHVybiB2YWw7XG4gICAgICAgIGIgPSBidWZbdGhpcy5wb3MrK107IHZhbCB8PSAoYiAmIDB4N2YpIDw8IDc7ICBpZiAoYiA8IDB4ODApIHJldHVybiB2YWw7XG4gICAgICAgIGIgPSBidWZbdGhpcy5wb3MrK107IHZhbCB8PSAoYiAmIDB4N2YpIDw8IDE0OyBpZiAoYiA8IDB4ODApIHJldHVybiB2YWw7XG4gICAgICAgIGIgPSBidWZbdGhpcy5wb3MrK107IHZhbCB8PSAoYiAmIDB4N2YpIDw8IDIxOyBpZiAoYiA8IDB4ODApIHJldHVybiB2YWw7XG4gICAgICAgIGIgPSBidWZbdGhpcy5wb3NdOyAgIHZhbCB8PSAoYiAmIDB4MGYpIDw8IDI4O1xuXG4gICAgICAgIHJldHVybiByZWFkVmFyaW50UmVtYWluZGVyKHZhbCwgaXNTaWduZWQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICByZWFkVmFyaW50NjQ6IGZ1bmN0aW9uKCkgeyAvLyBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHYyLjAuMVxuICAgICAgICByZXR1cm4gdGhpcy5yZWFkVmFyaW50KHRydWUpO1xuICAgIH0sXG5cbiAgICByZWFkU1ZhcmludDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBudW0gPSB0aGlzLnJlYWRWYXJpbnQoKTtcbiAgICAgICAgcmV0dXJuIG51bSAlIDIgPT09IDEgPyAobnVtICsgMSkgLyAtMiA6IG51bSAvIDI7IC8vIHppZ3phZyBlbmNvZGluZ1xuICAgIH0sXG5cbiAgICByZWFkQm9vbGVhbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMucmVhZFZhcmludCgpKTtcbiAgICB9LFxuXG4gICAgcmVhZFN0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBlbmQgPSB0aGlzLnJlYWRWYXJpbnQoKSArIHRoaXMucG9zLFxuICAgICAgICAgICAgc3RyID0gcmVhZFV0ZjgodGhpcy5idWYsIHRoaXMucG9zLCBlbmQpO1xuICAgICAgICB0aGlzLnBvcyA9IGVuZDtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9LFxuXG4gICAgcmVhZEJ5dGVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGVuZCA9IHRoaXMucmVhZFZhcmludCgpICsgdGhpcy5wb3MsXG4gICAgICAgICAgICBidWZmZXIgPSB0aGlzLmJ1Zi5zdWJhcnJheSh0aGlzLnBvcywgZW5kKTtcbiAgICAgICAgdGhpcy5wb3MgPSBlbmQ7XG4gICAgICAgIHJldHVybiBidWZmZXI7XG4gICAgfSxcblxuICAgIC8vIHZlcmJvc2UgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnM7IGRvZXNuJ3QgYWZmZWN0IGd6aXBwZWQgc2l6ZVxuXG4gICAgcmVhZFBhY2tlZFZhcmludDogZnVuY3Rpb24oYXJyLCBpc1NpZ25lZCkge1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRWYXJpbnQoaXNTaWduZWQpKTtcbiAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG4gICAgICAgIGFyciA9IGFyciB8fCBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRWYXJpbnQoaXNTaWduZWQpKTtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9LFxuICAgIHJlYWRQYWNrZWRTVmFyaW50OiBmdW5jdGlvbihhcnIpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkU1ZhcmludCgpKTtcbiAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG4gICAgICAgIGFyciA9IGFyciB8fCBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRTVmFyaW50KCkpO1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH0sXG4gICAgcmVhZFBhY2tlZEJvb2xlYW46IGZ1bmN0aW9uKGFycikge1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRCb29sZWFuKCkpO1xuICAgICAgICB2YXIgZW5kID0gcmVhZFBhY2tlZEVuZCh0aGlzKTtcbiAgICAgICAgYXJyID0gYXJyIHx8IFtdO1xuICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZEJvb2xlYW4oKSk7XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgfSxcbiAgICByZWFkUGFja2VkRmxvYXQ6IGZ1bmN0aW9uKGFycikge1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRGbG9hdCgpKTtcbiAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG4gICAgICAgIGFyciA9IGFyciB8fCBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRGbG9hdCgpKTtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9LFxuICAgIHJlYWRQYWNrZWREb3VibGU6IGZ1bmN0aW9uKGFycikge1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWREb3VibGUoKSk7XG4gICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuICAgICAgICBhcnIgPSBhcnIgfHwgW107XG4gICAgICAgIHdoaWxlICh0aGlzLnBvcyA8IGVuZCkgYXJyLnB1c2godGhpcy5yZWFkRG91YmxlKCkpO1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH0sXG4gICAgcmVhZFBhY2tlZEZpeGVkMzI6IGZ1bmN0aW9uKGFycikge1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRGaXhlZDMyKCkpO1xuICAgICAgICB2YXIgZW5kID0gcmVhZFBhY2tlZEVuZCh0aGlzKTtcbiAgICAgICAgYXJyID0gYXJyIHx8IFtdO1xuICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZEZpeGVkMzIoKSk7XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgfSxcbiAgICByZWFkUGFja2VkU0ZpeGVkMzI6IGZ1bmN0aW9uKGFycikge1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRTRml4ZWQzMigpKTtcbiAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG4gICAgICAgIGFyciA9IGFyciB8fCBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRTRml4ZWQzMigpKTtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9LFxuICAgIHJlYWRQYWNrZWRGaXhlZDY0OiBmdW5jdGlvbihhcnIpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkRml4ZWQ2NCgpKTtcbiAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG4gICAgICAgIGFyciA9IGFyciB8fCBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRGaXhlZDY0KCkpO1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH0sXG4gICAgcmVhZFBhY2tlZFNGaXhlZDY0OiBmdW5jdGlvbihhcnIpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkU0ZpeGVkNjQoKSk7XG4gICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuICAgICAgICBhcnIgPSBhcnIgfHwgW107XG4gICAgICAgIHdoaWxlICh0aGlzLnBvcyA8IGVuZCkgYXJyLnB1c2godGhpcy5yZWFkU0ZpeGVkNjQoKSk7XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgfSxcblxuICAgIHNraXA6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICB2YXIgdHlwZSA9IHZhbCAmIDB4NztcbiAgICAgICAgaWYgKHR5cGUgPT09IFBiZi5WYXJpbnQpIHdoaWxlICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA+IDB4N2YpIHt9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IFBiZi5CeXRlcykgdGhpcy5wb3MgPSB0aGlzLnJlYWRWYXJpbnQoKSArIHRoaXMucG9zO1xuICAgICAgICBlbHNlIGlmICh0eXBlID09PSBQYmYuRml4ZWQzMikgdGhpcy5wb3MgKz0gNDtcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gUGJmLkZpeGVkNjQpIHRoaXMucG9zICs9IDg7XG4gICAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yKCdVbmltcGxlbWVudGVkIHR5cGU6ICcgKyB0eXBlKTtcbiAgICB9LFxuXG4gICAgLy8gPT09IFdSSVRJTkcgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIHdyaXRlVGFnOiBmdW5jdGlvbih0YWcsIHR5cGUpIHtcbiAgICAgICAgdGhpcy53cml0ZVZhcmludCgodGFnIDw8IDMpIHwgdHlwZSk7XG4gICAgfSxcblxuICAgIHJlYWxsb2M6IGZ1bmN0aW9uKG1pbikge1xuICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMTY7XG5cbiAgICAgICAgd2hpbGUgKGxlbmd0aCA8IHRoaXMucG9zICsgbWluKSBsZW5ndGggKj0gMjtcblxuICAgICAgICBpZiAobGVuZ3RoICE9PSB0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gICAgICAgICAgICBidWYuc2V0KHRoaXMuYnVmKTtcbiAgICAgICAgICAgIHRoaXMuYnVmID0gYnVmO1xuICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZmluaXNoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLnBvcztcbiAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5idWYuc3ViYXJyYXkoMCwgdGhpcy5sZW5ndGgpO1xuICAgIH0sXG5cbiAgICB3cml0ZUZpeGVkMzI6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICB0aGlzLnJlYWxsb2MoNCk7XG4gICAgICAgIHdyaXRlSW50MzIodGhpcy5idWYsIHZhbCwgdGhpcy5wb3MpO1xuICAgICAgICB0aGlzLnBvcyArPSA0O1xuICAgIH0sXG5cbiAgICB3cml0ZVNGaXhlZDMyOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgdGhpcy5yZWFsbG9jKDQpO1xuICAgICAgICB3cml0ZUludDMyKHRoaXMuYnVmLCB2YWwsIHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICB9LFxuXG4gICAgd3JpdGVGaXhlZDY0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgdGhpcy5yZWFsbG9jKDgpO1xuICAgICAgICB3cml0ZUludDMyKHRoaXMuYnVmLCB2YWwgJiAtMSwgdGhpcy5wb3MpO1xuICAgICAgICB3cml0ZUludDMyKHRoaXMuYnVmLCBNYXRoLmZsb29yKHZhbCAqIFNISUZUX1JJR0hUXzMyKSwgdGhpcy5wb3MgKyA0KTtcbiAgICAgICAgdGhpcy5wb3MgKz0gODtcbiAgICB9LFxuXG4gICAgd3JpdGVTRml4ZWQ2NDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHRoaXMucmVhbGxvYyg4KTtcbiAgICAgICAgd3JpdGVJbnQzMih0aGlzLmJ1ZiwgdmFsICYgLTEsIHRoaXMucG9zKTtcbiAgICAgICAgd3JpdGVJbnQzMih0aGlzLmJ1ZiwgTWF0aC5mbG9vcih2YWwgKiBTSElGVF9SSUdIVF8zMiksIHRoaXMucG9zICsgNCk7XG4gICAgICAgIHRoaXMucG9zICs9IDg7XG4gICAgfSxcblxuICAgIHdyaXRlVmFyaW50OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgdmFsID0gK3ZhbCB8fCAwO1xuXG4gICAgICAgIGlmICh2YWwgPiAweGZmZmZmZmYgfHwgdmFsIDwgMCkge1xuICAgICAgICAgICAgd3JpdGVCaWdWYXJpbnQodmFsLCB0aGlzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVhbGxvYyg0KTtcblxuICAgICAgICB0aGlzLmJ1Zlt0aGlzLnBvcysrXSA9ICAgICAgICAgICB2YWwgJiAweDdmICB8ICh2YWwgPiAweDdmID8gMHg4MCA6IDApOyBpZiAodmFsIDw9IDB4N2YpIHJldHVybjtcbiAgICAgICAgdGhpcy5idWZbdGhpcy5wb3MrK10gPSAoKHZhbCA+Pj49IDcpICYgMHg3ZikgfCAodmFsID4gMHg3ZiA/IDB4ODAgOiAwKTsgaWYgKHZhbCA8PSAweDdmKSByZXR1cm47XG4gICAgICAgIHRoaXMuYnVmW3RoaXMucG9zKytdID0gKCh2YWwgPj4+PSA3KSAmIDB4N2YpIHwgKHZhbCA+IDB4N2YgPyAweDgwIDogMCk7IGlmICh2YWwgPD0gMHg3ZikgcmV0dXJuO1xuICAgICAgICB0aGlzLmJ1Zlt0aGlzLnBvcysrXSA9ICAgKHZhbCA+Pj4gNykgJiAweDdmO1xuICAgIH0sXG5cbiAgICB3cml0ZVNWYXJpbnQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICB0aGlzLndyaXRlVmFyaW50KHZhbCA8IDAgPyAtdmFsICogMiAtIDEgOiB2YWwgKiAyKTtcbiAgICB9LFxuXG4gICAgd3JpdGVCb29sZWFuOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVZhcmludChCb29sZWFuKHZhbCkpO1xuICAgIH0sXG5cbiAgICB3cml0ZVN0cmluZzogZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgIHN0ciA9IFN0cmluZyhzdHIpO1xuICAgICAgICB0aGlzLnJlYWxsb2Moc3RyLmxlbmd0aCAqIDQpO1xuXG4gICAgICAgIHRoaXMucG9zKys7IC8vIHJlc2VydmUgMSBieXRlIGZvciBzaG9ydCBzdHJpbmcgbGVuZ3RoXG5cbiAgICAgICAgdmFyIHN0YXJ0UG9zID0gdGhpcy5wb3M7XG4gICAgICAgIC8vIHdyaXRlIHRoZSBzdHJpbmcgZGlyZWN0bHkgdG8gdGhlIGJ1ZmZlciBhbmQgc2VlIGhvdyBtdWNoIHdhcyB3cml0dGVuXG4gICAgICAgIHRoaXMucG9zID0gd3JpdGVVdGY4KHRoaXMuYnVmLCBzdHIsIHRoaXMucG9zKTtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMucG9zIC0gc3RhcnRQb3M7XG5cbiAgICAgICAgaWYgKGxlbiA+PSAweDgwKSBtYWtlUm9vbUZvckV4dHJhTGVuZ3RoKHN0YXJ0UG9zLCBsZW4sIHRoaXMpO1xuXG4gICAgICAgIC8vIGZpbmFsbHksIHdyaXRlIHRoZSBtZXNzYWdlIGxlbmd0aCBpbiB0aGUgcmVzZXJ2ZWQgcGxhY2UgYW5kIHJlc3RvcmUgdGhlIHBvc2l0aW9uXG4gICAgICAgIHRoaXMucG9zID0gc3RhcnRQb3MgLSAxO1xuICAgICAgICB0aGlzLndyaXRlVmFyaW50KGxlbik7XG4gICAgICAgIHRoaXMucG9zICs9IGxlbjtcbiAgICB9LFxuXG4gICAgd3JpdGVGbG9hdDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHRoaXMucmVhbGxvYyg0KTtcbiAgICAgICAgaWVlZTc1NC53cml0ZSh0aGlzLmJ1ZiwgdmFsLCB0aGlzLnBvcywgdHJ1ZSwgMjMsIDQpO1xuICAgICAgICB0aGlzLnBvcyArPSA0O1xuICAgIH0sXG5cbiAgICB3cml0ZURvdWJsZTogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHRoaXMucmVhbGxvYyg4KTtcbiAgICAgICAgaWVlZTc1NC53cml0ZSh0aGlzLmJ1ZiwgdmFsLCB0aGlzLnBvcywgdHJ1ZSwgNTIsIDgpO1xuICAgICAgICB0aGlzLnBvcyArPSA4O1xuICAgIH0sXG5cbiAgICB3cml0ZUJ5dGVzOiBmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgICAgdmFyIGxlbiA9IGJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIHRoaXMud3JpdGVWYXJpbnQobGVuKTtcbiAgICAgICAgdGhpcy5yZWFsbG9jKGxlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHRoaXMuYnVmW3RoaXMucG9zKytdID0gYnVmZmVyW2ldO1xuICAgIH0sXG5cbiAgICB3cml0ZVJhd01lc3NhZ2U6IGZ1bmN0aW9uKGZuLCBvYmopIHtcbiAgICAgICAgdGhpcy5wb3MrKzsgLy8gcmVzZXJ2ZSAxIGJ5dGUgZm9yIHNob3J0IG1lc3NhZ2UgbGVuZ3RoXG5cbiAgICAgICAgLy8gd3JpdGUgdGhlIG1lc3NhZ2UgZGlyZWN0bHkgdG8gdGhlIGJ1ZmZlciBhbmQgc2VlIGhvdyBtdWNoIHdhcyB3cml0dGVuXG4gICAgICAgIHZhciBzdGFydFBvcyA9IHRoaXMucG9zO1xuICAgICAgICBmbihvYmosIHRoaXMpO1xuICAgICAgICB2YXIgbGVuID0gdGhpcy5wb3MgLSBzdGFydFBvcztcblxuICAgICAgICBpZiAobGVuID49IDB4ODApIG1ha2VSb29tRm9yRXh0cmFMZW5ndGgoc3RhcnRQb3MsIGxlbiwgdGhpcyk7XG5cbiAgICAgICAgLy8gZmluYWxseSwgd3JpdGUgdGhlIG1lc3NhZ2UgbGVuZ3RoIGluIHRoZSByZXNlcnZlZCBwbGFjZSBhbmQgcmVzdG9yZSB0aGUgcG9zaXRpb25cbiAgICAgICAgdGhpcy5wb3MgPSBzdGFydFBvcyAtIDE7XG4gICAgICAgIHRoaXMud3JpdGVWYXJpbnQobGVuKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gbGVuO1xuICAgIH0sXG5cbiAgICB3cml0ZU1lc3NhZ2U6IGZ1bmN0aW9uKHRhZywgZm4sIG9iaikge1xuICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkJ5dGVzKTtcbiAgICAgICAgdGhpcy53cml0ZVJhd01lc3NhZ2UoZm4sIG9iaik7XG4gICAgfSxcblxuICAgIHdyaXRlUGFja2VkVmFyaW50OiAgIGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkVmFyaW50LCBhcnIpOyAgIH0sXG4gICAgd3JpdGVQYWNrZWRTVmFyaW50OiAgZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWRTVmFyaW50LCBhcnIpOyAgfSxcbiAgICB3cml0ZVBhY2tlZEJvb2xlYW46ICBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZEJvb2xlYW4sIGFycik7ICB9LFxuICAgIHdyaXRlUGFja2VkRmxvYXQ6ICAgIGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkRmxvYXQsIGFycik7ICAgIH0sXG4gICAgd3JpdGVQYWNrZWREb3VibGU6ICAgZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWREb3VibGUsIGFycik7ICAgfSxcbiAgICB3cml0ZVBhY2tlZEZpeGVkMzI6ICBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZEZpeGVkMzIsIGFycik7ICB9LFxuICAgIHdyaXRlUGFja2VkU0ZpeGVkMzI6IGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkU0ZpeGVkMzIsIGFycik7IH0sXG4gICAgd3JpdGVQYWNrZWRGaXhlZDY0OiAgZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWRGaXhlZDY0LCBhcnIpOyAgfSxcbiAgICB3cml0ZVBhY2tlZFNGaXhlZDY0OiBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZFNGaXhlZDY0LCBhcnIpOyB9LFxuXG4gICAgd3JpdGVCeXRlc0ZpZWxkOiBmdW5jdGlvbih0YWcsIGJ1ZmZlcikge1xuICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkJ5dGVzKTtcbiAgICAgICAgdGhpcy53cml0ZUJ5dGVzKGJ1ZmZlcik7XG4gICAgfSxcbiAgICB3cml0ZUZpeGVkMzJGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5GaXhlZDMyKTtcbiAgICAgICAgdGhpcy53cml0ZUZpeGVkMzIodmFsKTtcbiAgICB9LFxuICAgIHdyaXRlU0ZpeGVkMzJGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5GaXhlZDMyKTtcbiAgICAgICAgdGhpcy53cml0ZVNGaXhlZDMyKHZhbCk7XG4gICAgfSxcbiAgICB3cml0ZUZpeGVkNjRGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5GaXhlZDY0KTtcbiAgICAgICAgdGhpcy53cml0ZUZpeGVkNjQodmFsKTtcbiAgICB9LFxuICAgIHdyaXRlU0ZpeGVkNjRGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5GaXhlZDY0KTtcbiAgICAgICAgdGhpcy53cml0ZVNGaXhlZDY0KHZhbCk7XG4gICAgfSxcbiAgICB3cml0ZVZhcmludEZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLlZhcmludCk7XG4gICAgICAgIHRoaXMud3JpdGVWYXJpbnQodmFsKTtcbiAgICB9LFxuICAgIHdyaXRlU1ZhcmludEZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLlZhcmludCk7XG4gICAgICAgIHRoaXMud3JpdGVTVmFyaW50KHZhbCk7XG4gICAgfSxcbiAgICB3cml0ZVN0cmluZ0ZpZWxkOiBmdW5jdGlvbih0YWcsIHN0cikge1xuICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkJ5dGVzKTtcbiAgICAgICAgdGhpcy53cml0ZVN0cmluZyhzdHIpO1xuICAgIH0sXG4gICAgd3JpdGVGbG9hdEZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkZpeGVkMzIpO1xuICAgICAgICB0aGlzLndyaXRlRmxvYXQodmFsKTtcbiAgICB9LFxuICAgIHdyaXRlRG91YmxlRmllbGQ6IGZ1bmN0aW9uKHRhZywgdmFsKSB7XG4gICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuRml4ZWQ2NCk7XG4gICAgICAgIHRoaXMud3JpdGVEb3VibGUodmFsKTtcbiAgICB9LFxuICAgIHdyaXRlQm9vbGVhbkZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuICAgICAgICB0aGlzLndyaXRlVmFyaW50RmllbGQodGFnLCBCb29sZWFuKHZhbCkpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIHJlYWRWYXJpbnRSZW1haW5kZXIobCwgcywgcCkge1xuICAgIHZhciBidWYgPSBwLmJ1ZixcbiAgICAgICAgaCwgYjtcblxuICAgIGIgPSBidWZbcC5wb3MrK107IGggID0gKGIgJiAweDcwKSA+PiA0OyAgaWYgKGIgPCAweDgwKSByZXR1cm4gdG9OdW0obCwgaCwgcyk7XG4gICAgYiA9IGJ1ZltwLnBvcysrXTsgaCB8PSAoYiAmIDB4N2YpIDw8IDM7ICBpZiAoYiA8IDB4ODApIHJldHVybiB0b051bShsLCBoLCBzKTtcbiAgICBiID0gYnVmW3AucG9zKytdOyBoIHw9IChiICYgMHg3ZikgPDwgMTA7IGlmIChiIDwgMHg4MCkgcmV0dXJuIHRvTnVtKGwsIGgsIHMpO1xuICAgIGIgPSBidWZbcC5wb3MrK107IGggfD0gKGIgJiAweDdmKSA8PCAxNzsgaWYgKGIgPCAweDgwKSByZXR1cm4gdG9OdW0obCwgaCwgcyk7XG4gICAgYiA9IGJ1ZltwLnBvcysrXTsgaCB8PSAoYiAmIDB4N2YpIDw8IDI0OyBpZiAoYiA8IDB4ODApIHJldHVybiB0b051bShsLCBoLCBzKTtcbiAgICBiID0gYnVmW3AucG9zKytdOyBoIHw9IChiICYgMHgwMSkgPDwgMzE7IGlmIChiIDwgMHg4MCkgcmV0dXJuIHRvTnVtKGwsIGgsIHMpO1xuXG4gICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB2YXJpbnQgbm90IG1vcmUgdGhhbiAxMCBieXRlcycpO1xufVxuXG5mdW5jdGlvbiByZWFkUGFja2VkRW5kKHBiZikge1xuICAgIHJldHVybiBwYmYudHlwZSA9PT0gUGJmLkJ5dGVzID9cbiAgICAgICAgcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3MgOiBwYmYucG9zICsgMTtcbn1cblxuZnVuY3Rpb24gdG9OdW0obG93LCBoaWdoLCBpc1NpZ25lZCkge1xuICAgIGlmIChpc1NpZ25lZCkge1xuICAgICAgICByZXR1cm4gaGlnaCAqIDB4MTAwMDAwMDAwICsgKGxvdyA+Pj4gMCk7XG4gICAgfVxuXG4gICAgcmV0dXJuICgoaGlnaCA+Pj4gMCkgKiAweDEwMDAwMDAwMCkgKyAobG93ID4+PiAwKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVCaWdWYXJpbnQodmFsLCBwYmYpIHtcbiAgICB2YXIgbG93LCBoaWdoO1xuXG4gICAgaWYgKHZhbCA+PSAwKSB7XG4gICAgICAgIGxvdyAgPSAodmFsICUgMHgxMDAwMDAwMDApIHwgMDtcbiAgICAgICAgaGlnaCA9ICh2YWwgLyAweDEwMDAwMDAwMCkgfCAwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxvdyAgPSB+KC12YWwgJSAweDEwMDAwMDAwMCk7XG4gICAgICAgIGhpZ2ggPSB+KC12YWwgLyAweDEwMDAwMDAwMCk7XG5cbiAgICAgICAgaWYgKGxvdyBeIDB4ZmZmZmZmZmYpIHtcbiAgICAgICAgICAgIGxvdyA9IChsb3cgKyAxKSB8IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb3cgPSAwO1xuICAgICAgICAgICAgaGlnaCA9IChoaWdoICsgMSkgfCAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHZhbCA+PSAweDEwMDAwMDAwMDAwMDAwMDAwIHx8IHZhbCA8IC0weDEwMDAwMDAwMDAwMDAwMDAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignR2l2ZW4gdmFyaW50IGRvZXNuXFwndCBmaXQgaW50byAxMCBieXRlcycpO1xuICAgIH1cblxuICAgIHBiZi5yZWFsbG9jKDEwKTtcblxuICAgIHdyaXRlQmlnVmFyaW50TG93KGxvdywgaGlnaCwgcGJmKTtcbiAgICB3cml0ZUJpZ1ZhcmludEhpZ2goaGlnaCwgcGJmKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVCaWdWYXJpbnRMb3cobG93LCBoaWdoLCBwYmYpIHtcbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gPSBsb3cgJiAweDdmIHwgMHg4MDsgbG93ID4+Pj0gNztcbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gPSBsb3cgJiAweDdmIHwgMHg4MDsgbG93ID4+Pj0gNztcbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gPSBsb3cgJiAweDdmIHwgMHg4MDsgbG93ID4+Pj0gNztcbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gPSBsb3cgJiAweDdmIHwgMHg4MDsgbG93ID4+Pj0gNztcbiAgICBwYmYuYnVmW3BiZi5wb3NdICAgPSBsb3cgJiAweDdmO1xufVxuXG5mdW5jdGlvbiB3cml0ZUJpZ1ZhcmludEhpZ2goaGlnaCwgcGJmKSB7XG4gICAgdmFyIGxzYiA9IChoaWdoICYgMHgwNykgPDwgNDtcblxuICAgIHBiZi5idWZbcGJmLnBvcysrXSB8PSBsc2IgICAgICAgICB8ICgoaGlnaCA+Pj49IDMpID8gMHg4MCA6IDApOyBpZiAoIWhpZ2gpIHJldHVybjtcbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gID0gaGlnaCAmIDB4N2YgfCAoKGhpZ2ggPj4+PSA3KSA/IDB4ODAgOiAwKTsgaWYgKCFoaWdoKSByZXR1cm47XG4gICAgcGJmLmJ1ZltwYmYucG9zKytdICA9IGhpZ2ggJiAweDdmIHwgKChoaWdoID4+Pj0gNykgPyAweDgwIDogMCk7IGlmICghaGlnaCkgcmV0dXJuO1xuICAgIHBiZi5idWZbcGJmLnBvcysrXSAgPSBoaWdoICYgMHg3ZiB8ICgoaGlnaCA+Pj49IDcpID8gMHg4MCA6IDApOyBpZiAoIWhpZ2gpIHJldHVybjtcbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gID0gaGlnaCAmIDB4N2YgfCAoKGhpZ2ggPj4+PSA3KSA/IDB4ODAgOiAwKTsgaWYgKCFoaWdoKSByZXR1cm47XG4gICAgcGJmLmJ1ZltwYmYucG9zKytdICA9IGhpZ2ggJiAweDdmO1xufVxuXG5mdW5jdGlvbiBtYWtlUm9vbUZvckV4dHJhTGVuZ3RoKHN0YXJ0UG9zLCBsZW4sIHBiZikge1xuICAgIHZhciBleHRyYUxlbiA9XG4gICAgICAgIGxlbiA8PSAweDNmZmYgPyAxIDpcbiAgICAgICAgbGVuIDw9IDB4MWZmZmZmID8gMiA6XG4gICAgICAgIGxlbiA8PSAweGZmZmZmZmYgPyAzIDogTWF0aC5mbG9vcihNYXRoLmxvZyhsZW4pIC8gKE1hdGguTE4yICogNykpO1xuXG4gICAgLy8gaWYgMSBieXRlIGlzbid0IGVub3VnaCBmb3IgZW5jb2RpbmcgbWVzc2FnZSBsZW5ndGgsIHNoaWZ0IHRoZSBkYXRhIHRvIHRoZSByaWdodFxuICAgIHBiZi5yZWFsbG9jKGV4dHJhTGVuKTtcbiAgICBmb3IgKHZhciBpID0gcGJmLnBvcyAtIDE7IGkgPj0gc3RhcnRQb3M7IGktLSkgcGJmLmJ1ZltpICsgZXh0cmFMZW5dID0gcGJmLmJ1ZltpXTtcbn1cblxuZnVuY3Rpb24gd3JpdGVQYWNrZWRWYXJpbnQoYXJyLCBwYmYpICAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlVmFyaW50KGFycltpXSk7ICAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRTVmFyaW50KGFyciwgcGJmKSAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlU1ZhcmludChhcnJbaV0pOyAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRGbG9hdChhcnIsIHBiZikgICAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlRmxvYXQoYXJyW2ldKTsgICAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWREb3VibGUoYXJyLCBwYmYpICAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlRG91YmxlKGFycltpXSk7ICAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRCb29sZWFuKGFyciwgcGJmKSAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlQm9vbGVhbihhcnJbaV0pOyAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRGaXhlZDMyKGFyciwgcGJmKSAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlRml4ZWQzMihhcnJbaV0pOyAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRTRml4ZWQzMihhcnIsIHBiZikgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlU0ZpeGVkMzIoYXJyW2ldKTsgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRGaXhlZDY0KGFyciwgcGJmKSAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlRml4ZWQ2NChhcnJbaV0pOyAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRTRml4ZWQ2NChhcnIsIHBiZikgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlU0ZpeGVkNjQoYXJyW2ldKTsgfVxuXG4vLyBCdWZmZXIgY29kZSBiZWxvdyBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyLCBNSVQtbGljZW5zZWRcblxuZnVuY3Rpb24gcmVhZFVJbnQzMihidWYsIHBvcykge1xuICAgIHJldHVybiAoKGJ1Zltwb3NdKSB8XG4gICAgICAgIChidWZbcG9zICsgMV0gPDwgOCkgfFxuICAgICAgICAoYnVmW3BvcyArIDJdIDw8IDE2KSkgK1xuICAgICAgICAoYnVmW3BvcyArIDNdICogMHgxMDAwMDAwKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVJbnQzMihidWYsIHZhbCwgcG9zKSB7XG4gICAgYnVmW3Bvc10gPSB2YWw7XG4gICAgYnVmW3BvcyArIDFdID0gKHZhbCA+Pj4gOCk7XG4gICAgYnVmW3BvcyArIDJdID0gKHZhbCA+Pj4gMTYpO1xuICAgIGJ1Zltwb3MgKyAzXSA9ICh2YWwgPj4+IDI0KTtcbn1cblxuZnVuY3Rpb24gcmVhZEludDMyKGJ1ZiwgcG9zKSB7XG4gICAgcmV0dXJuICgoYnVmW3Bvc10pIHxcbiAgICAgICAgKGJ1Zltwb3MgKyAxXSA8PCA4KSB8XG4gICAgICAgIChidWZbcG9zICsgMl0gPDwgMTYpKSArXG4gICAgICAgIChidWZbcG9zICsgM10gPDwgMjQpO1xufVxuXG5mdW5jdGlvbiByZWFkVXRmOChidWYsIHBvcywgZW5kKSB7XG4gICAgdmFyIHN0ciA9ICcnO1xuICAgIHZhciBpID0gcG9zO1xuXG4gICAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICAgICAgdmFyIGIwID0gYnVmW2ldO1xuICAgICAgICB2YXIgYyA9IG51bGw7IC8vIGNvZGVwb2ludFxuICAgICAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9XG4gICAgICAgICAgICBiMCA+IDB4RUYgPyA0IDpcbiAgICAgICAgICAgIGIwID4gMHhERiA/IDMgOlxuICAgICAgICAgICAgYjAgPiAweEJGID8gMiA6IDE7XG5cbiAgICAgICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlID4gZW5kKSBicmVhaztcblxuICAgICAgICB2YXIgYjEsIGIyLCBiMztcblxuICAgICAgICBpZiAoYnl0ZXNQZXJTZXF1ZW5jZSA9PT0gMSkge1xuICAgICAgICAgICAgaWYgKGIwIDwgMHg4MCkge1xuICAgICAgICAgICAgICAgIGMgPSBiMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChieXRlc1BlclNlcXVlbmNlID09PSAyKSB7XG4gICAgICAgICAgICBiMSA9IGJ1ZltpICsgMV07XG4gICAgICAgICAgICBpZiAoKGIxICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgICAgICBjID0gKGIwICYgMHgxRikgPDwgMHg2IHwgKGIxICYgMHgzRik7XG4gICAgICAgICAgICAgICAgaWYgKGMgPD0gMHg3Rikge1xuICAgICAgICAgICAgICAgICAgICBjID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYnl0ZXNQZXJTZXF1ZW5jZSA9PT0gMykge1xuICAgICAgICAgICAgYjEgPSBidWZbaSArIDFdO1xuICAgICAgICAgICAgYjIgPSBidWZbaSArIDJdO1xuICAgICAgICAgICAgaWYgKChiMSAmIDB4QzApID09PSAweDgwICYmIChiMiAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICAgICAgYyA9IChiMCAmIDB4RikgPDwgMHhDIHwgKGIxICYgMHgzRikgPDwgMHg2IHwgKGIyICYgMHgzRik7XG4gICAgICAgICAgICAgICAgaWYgKGMgPD0gMHg3RkYgfHwgKGMgPj0gMHhEODAwICYmIGMgPD0gMHhERkZGKSkge1xuICAgICAgICAgICAgICAgICAgICBjID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYnl0ZXNQZXJTZXF1ZW5jZSA9PT0gNCkge1xuICAgICAgICAgICAgYjEgPSBidWZbaSArIDFdO1xuICAgICAgICAgICAgYjIgPSBidWZbaSArIDJdO1xuICAgICAgICAgICAgYjMgPSBidWZbaSArIDNdO1xuICAgICAgICAgICAgaWYgKChiMSAmIDB4QzApID09PSAweDgwICYmIChiMiAmIDB4QzApID09PSAweDgwICYmIChiMyAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICAgICAgYyA9IChiMCAmIDB4RikgPDwgMHgxMiB8IChiMSAmIDB4M0YpIDw8IDB4QyB8IChiMiAmIDB4M0YpIDw8IDB4NiB8IChiMyAmIDB4M0YpO1xuICAgICAgICAgICAgICAgIGlmIChjIDw9IDB4RkZGRiB8fCBjID49IDB4MTEwMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjID09PSBudWxsKSB7XG4gICAgICAgICAgICBjID0gMHhGRkZEO1xuICAgICAgICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDE7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjID4gMHhGRkZGKSB7XG4gICAgICAgICAgICBjIC09IDB4MTAwMDA7XG4gICAgICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKTtcbiAgICAgICAgICAgIGMgPSAweERDMDAgfCBjICYgMHgzRkY7XG4gICAgICAgIH1cblxuICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjKTtcbiAgICAgICAgaSArPSBieXRlc1BlclNlcXVlbmNlO1xuICAgIH1cblxuICAgIHJldHVybiBzdHI7XG59XG5cbmZ1bmN0aW9uIHdyaXRlVXRmOChidWYsIHN0ciwgcG9zKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGMsIGxlYWQ7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpOyAvLyBjb2RlIHBvaW50XG5cbiAgICAgICAgaWYgKGMgPiAweEQ3RkYgJiYgYyA8IDB4RTAwMCkge1xuICAgICAgICAgICAgaWYgKGxlYWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoYyA8IDB4REMwMCkge1xuICAgICAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gMHhFRjtcbiAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4QkY7XG4gICAgICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSAweEJEO1xuICAgICAgICAgICAgICAgICAgICBsZWFkID0gYztcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYyA9IGxlYWQgLSAweEQ4MDAgPDwgMTAgfCBjIC0gMHhEQzAwIHwgMHgxMDAwMDtcbiAgICAgICAgICAgICAgICAgICAgbGVhZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoYyA+IDB4REJGRiB8fCAoaSArIDEgPT09IHN0ci5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSAweEVGO1xuICAgICAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gMHhCRjtcbiAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4QkQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGVhZCA9IGM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGxlYWQpIHtcbiAgICAgICAgICAgIGJ1Zltwb3MrK10gPSAweEVGO1xuICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4QkY7XG4gICAgICAgICAgICBidWZbcG9zKytdID0gMHhCRDtcbiAgICAgICAgICAgIGxlYWQgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGMgPCAweDgwKSB7XG4gICAgICAgICAgICBidWZbcG9zKytdID0gYztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjIDwgMHg4MDApIHtcbiAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gYyA+PiAweDYgfCAweEMwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoYyA8IDB4MTAwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IGMgPj4gMHhDIHwgMHhFMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gYyA+PiAweDEyIHwgMHhGMDtcbiAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IGMgPj4gMHhDICYgMHgzRiB8IDB4ODA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSBjID4+IDB4NiAmIDB4M0YgfCAweDgwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnVmW3BvcysrXSA9IGMgJiAweDNGIHwgMHg4MDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcG9zO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L3BiZi9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMzU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtXG4gIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBuQml0cyA9IC03XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG4gIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cbiAgaSArPSBkXG5cbiAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgcyA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gZUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gKGUgKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgZSA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gbUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gKG0gKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgY1xuICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG4gIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG4gIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuICAgIGUgPSBlTWF4XG4gIH0gZWxzZSB7XG4gICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tXG4gICAgICBjICo9IDJcbiAgICB9XG4gICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICB2YWx1ZSArPSBydCAvIGNcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrXG4gICAgICBjIC89IDJcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwXG4gICAgICBlID0gZU1heFxuICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIG0gPSAoKHZhbHVlICogYykgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gZSArIGVCaWFzXG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IDBcbiAgICB9XG4gIH1cblxuICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fVxuXG4gIGUgPSAoZSA8PCBtTGVuKSB8IG1cbiAgZUxlbiArPSBtTGVuXG4gIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cblxuICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjhcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9pZWVlNzU0L2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzNTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMuVmVjdG9yVGlsZSA9IHJlcXVpcmUoJy4vbGliL3ZlY3RvcnRpbGUuanMnKTtcbm1vZHVsZS5leHBvcnRzLlZlY3RvclRpbGVGZWF0dXJlID0gcmVxdWlyZSgnLi9saWIvdmVjdG9ydGlsZWZlYXR1cmUuanMnKTtcbm1vZHVsZS5leHBvcnRzLlZlY3RvclRpbGVMYXllciA9IHJlcXVpcmUoJy4vbGliL3ZlY3RvcnRpbGVsYXllci5qcycpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L0BtYXBib3gvdmVjdG9yLXRpbGUvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDM2MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBWZWN0b3JUaWxlTGF5ZXIgPSByZXF1aXJlKCcuL3ZlY3RvcnRpbGVsYXllcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZlY3RvclRpbGU7XG5cbmZ1bmN0aW9uIFZlY3RvclRpbGUocGJmLCBlbmQpIHtcbiAgICB0aGlzLmxheWVycyA9IHBiZi5yZWFkRmllbGRzKHJlYWRUaWxlLCB7fSwgZW5kKTtcbn1cblxuZnVuY3Rpb24gcmVhZFRpbGUodGFnLCBsYXllcnMsIHBiZikge1xuICAgIGlmICh0YWcgPT09IDMpIHtcbiAgICAgICAgdmFyIGxheWVyID0gbmV3IFZlY3RvclRpbGVMYXllcihwYmYsIHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zKTtcbiAgICAgICAgaWYgKGxheWVyLmxlbmd0aCkgbGF5ZXJzW2xheWVyLm5hbWVdID0gbGF5ZXI7XG4gICAgfVxufVxuXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vQG1hcGJveC92ZWN0b3ItdGlsZS9saWIvdmVjdG9ydGlsZS5qc1xuLy8gbW9kdWxlIGlkID0gMzYxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIFZlY3RvclRpbGVGZWF0dXJlID0gcmVxdWlyZSgnLi92ZWN0b3J0aWxlZmVhdHVyZS5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFZlY3RvclRpbGVMYXllcjtcblxuZnVuY3Rpb24gVmVjdG9yVGlsZUxheWVyKHBiZiwgZW5kKSB7XG4gICAgLy8gUHVibGljXG4gICAgdGhpcy52ZXJzaW9uID0gMTtcbiAgICB0aGlzLm5hbWUgPSBudWxsO1xuICAgIHRoaXMuZXh0ZW50ID0gNDA5NjtcbiAgICB0aGlzLmxlbmd0aCA9IDA7XG5cbiAgICAvLyBQcml2YXRlXG4gICAgdGhpcy5fcGJmID0gcGJmO1xuICAgIHRoaXMuX2tleXMgPSBbXTtcbiAgICB0aGlzLl92YWx1ZXMgPSBbXTtcbiAgICB0aGlzLl9mZWF0dXJlcyA9IFtdO1xuXG4gICAgcGJmLnJlYWRGaWVsZHMocmVhZExheWVyLCB0aGlzLCBlbmQpO1xuXG4gICAgdGhpcy5sZW5ndGggPSB0aGlzLl9mZWF0dXJlcy5sZW5ndGg7XG59XG5cbmZ1bmN0aW9uIHJlYWRMYXllcih0YWcsIGxheWVyLCBwYmYpIHtcbiAgICBpZiAodGFnID09PSAxNSkgbGF5ZXIudmVyc2lvbiA9IHBiZi5yZWFkVmFyaW50KCk7XG4gICAgZWxzZSBpZiAodGFnID09PSAxKSBsYXllci5uYW1lID0gcGJmLnJlYWRTdHJpbmcoKTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDUpIGxheWVyLmV4dGVudCA9IHBiZi5yZWFkVmFyaW50KCk7XG4gICAgZWxzZSBpZiAodGFnID09PSAyKSBsYXllci5fZmVhdHVyZXMucHVzaChwYmYucG9zKTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDMpIGxheWVyLl9rZXlzLnB1c2gocGJmLnJlYWRTdHJpbmcoKSk7XG4gICAgZWxzZSBpZiAodGFnID09PSA0KSBsYXllci5fdmFsdWVzLnB1c2gocmVhZFZhbHVlTWVzc2FnZShwYmYpKTtcbn1cblxuZnVuY3Rpb24gcmVhZFZhbHVlTWVzc2FnZShwYmYpIHtcbiAgICB2YXIgdmFsdWUgPSBudWxsLFxuICAgICAgICBlbmQgPSBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcztcblxuICAgIHdoaWxlIChwYmYucG9zIDwgZW5kKSB7XG4gICAgICAgIHZhciB0YWcgPSBwYmYucmVhZFZhcmludCgpID4+IDM7XG5cbiAgICAgICAgdmFsdWUgPSB0YWcgPT09IDEgPyBwYmYucmVhZFN0cmluZygpIDpcbiAgICAgICAgICAgIHRhZyA9PT0gMiA/IHBiZi5yZWFkRmxvYXQoKSA6XG4gICAgICAgICAgICB0YWcgPT09IDMgPyBwYmYucmVhZERvdWJsZSgpIDpcbiAgICAgICAgICAgIHRhZyA9PT0gNCA/IHBiZi5yZWFkVmFyaW50NjQoKSA6XG4gICAgICAgICAgICB0YWcgPT09IDUgPyBwYmYucmVhZFZhcmludCgpIDpcbiAgICAgICAgICAgIHRhZyA9PT0gNiA/IHBiZi5yZWFkU1ZhcmludCgpIDpcbiAgICAgICAgICAgIHRhZyA9PT0gNyA/IHBiZi5yZWFkQm9vbGVhbigpIDogbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG59XG5cbi8vIHJldHVybiBmZWF0dXJlIGBpYCBmcm9tIHRoaXMgbGF5ZXIgYXMgYSBgVmVjdG9yVGlsZUZlYXR1cmVgXG5WZWN0b3JUaWxlTGF5ZXIucHJvdG90eXBlLmZlYXR1cmUgPSBmdW5jdGlvbihpKSB7XG4gICAgaWYgKGkgPCAwIHx8IGkgPj0gdGhpcy5fZmVhdHVyZXMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ2ZlYXR1cmUgaW5kZXggb3V0IG9mIGJvdW5kcycpO1xuXG4gICAgdGhpcy5fcGJmLnBvcyA9IHRoaXMuX2ZlYXR1cmVzW2ldO1xuXG4gICAgdmFyIGVuZCA9IHRoaXMuX3BiZi5yZWFkVmFyaW50KCkgKyB0aGlzLl9wYmYucG9zO1xuICAgIHJldHVybiBuZXcgVmVjdG9yVGlsZUZlYXR1cmUodGhpcy5fcGJmLCBlbmQsIHRoaXMuZXh0ZW50LCB0aGlzLl9rZXlzLCB0aGlzLl92YWx1ZXMpO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9AbWFwYm94L3ZlY3Rvci10aWxlL2xpYi92ZWN0b3J0aWxlbGF5ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDM2MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBQb2ludCA9IHJlcXVpcmUoJ0BtYXBib3gvcG9pbnQtZ2VvbWV0cnknKTtcblxubW9kdWxlLmV4cG9ydHMgPSBWZWN0b3JUaWxlRmVhdHVyZTtcblxuZnVuY3Rpb24gVmVjdG9yVGlsZUZlYXR1cmUocGJmLCBlbmQsIGV4dGVudCwga2V5cywgdmFsdWVzKSB7XG4gICAgLy8gUHVibGljXG4gICAgdGhpcy5wcm9wZXJ0aWVzID0ge307XG4gICAgdGhpcy5leHRlbnQgPSBleHRlbnQ7XG4gICAgdGhpcy50eXBlID0gMDtcblxuICAgIC8vIFByaXZhdGVcbiAgICB0aGlzLl9wYmYgPSBwYmY7XG4gICAgdGhpcy5fZ2VvbWV0cnkgPSAtMTtcbiAgICB0aGlzLl9rZXlzID0ga2V5cztcbiAgICB0aGlzLl92YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgICBwYmYucmVhZEZpZWxkcyhyZWFkRmVhdHVyZSwgdGhpcywgZW5kKTtcbn1cblxuZnVuY3Rpb24gcmVhZEZlYXR1cmUodGFnLCBmZWF0dXJlLCBwYmYpIHtcbiAgICBpZiAodGFnID09IDEpIGZlYXR1cmUuaWQgPSBwYmYucmVhZFZhcmludCgpO1xuICAgIGVsc2UgaWYgKHRhZyA9PSAyKSByZWFkVGFnKHBiZiwgZmVhdHVyZSk7XG4gICAgZWxzZSBpZiAodGFnID09IDMpIGZlYXR1cmUudHlwZSA9IHBiZi5yZWFkVmFyaW50KCk7XG4gICAgZWxzZSBpZiAodGFnID09IDQpIGZlYXR1cmUuX2dlb21ldHJ5ID0gcGJmLnBvcztcbn1cblxuZnVuY3Rpb24gcmVhZFRhZyhwYmYsIGZlYXR1cmUpIHtcbiAgICB2YXIgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3M7XG5cbiAgICB3aGlsZSAocGJmLnBvcyA8IGVuZCkge1xuICAgICAgICB2YXIga2V5ID0gZmVhdHVyZS5fa2V5c1twYmYucmVhZFZhcmludCgpXSxcbiAgICAgICAgICAgIHZhbHVlID0gZmVhdHVyZS5fdmFsdWVzW3BiZi5yZWFkVmFyaW50KCldO1xuICAgICAgICBmZWF0dXJlLnByb3BlcnRpZXNba2V5XSA9IHZhbHVlO1xuICAgIH1cbn1cblxuVmVjdG9yVGlsZUZlYXR1cmUudHlwZXMgPSBbJ1Vua25vd24nLCAnUG9pbnQnLCAnTGluZVN0cmluZycsICdQb2x5Z29uJ107XG5cblZlY3RvclRpbGVGZWF0dXJlLnByb3RvdHlwZS5sb2FkR2VvbWV0cnkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcGJmID0gdGhpcy5fcGJmO1xuICAgIHBiZi5wb3MgPSB0aGlzLl9nZW9tZXRyeTtcblxuICAgIHZhciBlbmQgPSBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcyxcbiAgICAgICAgY21kID0gMSxcbiAgICAgICAgbGVuZ3RoID0gMCxcbiAgICAgICAgeCA9IDAsXG4gICAgICAgIHkgPSAwLFxuICAgICAgICBsaW5lcyA9IFtdLFxuICAgICAgICBsaW5lO1xuXG4gICAgd2hpbGUgKHBiZi5wb3MgPCBlbmQpIHtcbiAgICAgICAgaWYgKGxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICB2YXIgY21kTGVuID0gcGJmLnJlYWRWYXJpbnQoKTtcbiAgICAgICAgICAgIGNtZCA9IGNtZExlbiAmIDB4NztcbiAgICAgICAgICAgIGxlbmd0aCA9IGNtZExlbiA+PiAzO1xuICAgICAgICB9XG5cbiAgICAgICAgbGVuZ3RoLS07XG5cbiAgICAgICAgaWYgKGNtZCA9PT0gMSB8fCBjbWQgPT09IDIpIHtcbiAgICAgICAgICAgIHggKz0gcGJmLnJlYWRTVmFyaW50KCk7XG4gICAgICAgICAgICB5ICs9IHBiZi5yZWFkU1ZhcmludCgpO1xuXG4gICAgICAgICAgICBpZiAoY21kID09PSAxKSB7IC8vIG1vdmVUb1xuICAgICAgICAgICAgICAgIGlmIChsaW5lKSBsaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgICAgICAgICAgIGxpbmUgPSBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGluZS5wdXNoKG5ldyBQb2ludCh4LCB5KSk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjbWQgPT09IDcpIHtcblxuICAgICAgICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgaHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9tYXBuaWstdmVjdG9yLXRpbGUvaXNzdWVzLzkwXG4gICAgICAgICAgICBpZiAobGluZSkge1xuICAgICAgICAgICAgICAgIGxpbmUucHVzaChsaW5lWzBdLmNsb25lKCkpOyAvLyBjbG9zZVBvbHlnb25cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGNvbW1hbmQgJyArIGNtZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobGluZSkgbGluZXMucHVzaChsaW5lKTtcblxuICAgIHJldHVybiBsaW5lcztcbn07XG5cblZlY3RvclRpbGVGZWF0dXJlLnByb3RvdHlwZS5iYm94ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBiZiA9IHRoaXMuX3BiZjtcbiAgICBwYmYucG9zID0gdGhpcy5fZ2VvbWV0cnk7XG5cbiAgICB2YXIgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3MsXG4gICAgICAgIGNtZCA9IDEsXG4gICAgICAgIGxlbmd0aCA9IDAsXG4gICAgICAgIHggPSAwLFxuICAgICAgICB5ID0gMCxcbiAgICAgICAgeDEgPSBJbmZpbml0eSxcbiAgICAgICAgeDIgPSAtSW5maW5pdHksXG4gICAgICAgIHkxID0gSW5maW5pdHksXG4gICAgICAgIHkyID0gLUluZmluaXR5O1xuXG4gICAgd2hpbGUgKHBiZi5wb3MgPCBlbmQpIHtcbiAgICAgICAgaWYgKGxlbmd0aCA8PSAwKSB7XG4gICAgICAgICAgICB2YXIgY21kTGVuID0gcGJmLnJlYWRWYXJpbnQoKTtcbiAgICAgICAgICAgIGNtZCA9IGNtZExlbiAmIDB4NztcbiAgICAgICAgICAgIGxlbmd0aCA9IGNtZExlbiA+PiAzO1xuICAgICAgICB9XG5cbiAgICAgICAgbGVuZ3RoLS07XG5cbiAgICAgICAgaWYgKGNtZCA9PT0gMSB8fCBjbWQgPT09IDIpIHtcbiAgICAgICAgICAgIHggKz0gcGJmLnJlYWRTVmFyaW50KCk7XG4gICAgICAgICAgICB5ICs9IHBiZi5yZWFkU1ZhcmludCgpO1xuICAgICAgICAgICAgaWYgKHggPCB4MSkgeDEgPSB4O1xuICAgICAgICAgICAgaWYgKHggPiB4MikgeDIgPSB4O1xuICAgICAgICAgICAgaWYgKHkgPCB5MSkgeTEgPSB5O1xuICAgICAgICAgICAgaWYgKHkgPiB5MikgeTIgPSB5O1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY21kICE9PSA3KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gY29tbWFuZCAnICsgY21kKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbeDEsIHkxLCB4MiwgeTJdO1xufTtcblxuVmVjdG9yVGlsZUZlYXR1cmUucHJvdG90eXBlLnRvR2VvSlNPTiA9IGZ1bmN0aW9uKHgsIHksIHopIHtcbiAgICB2YXIgc2l6ZSA9IHRoaXMuZXh0ZW50ICogTWF0aC5wb3coMiwgeiksXG4gICAgICAgIHgwID0gdGhpcy5leHRlbnQgKiB4LFxuICAgICAgICB5MCA9IHRoaXMuZXh0ZW50ICogeSxcbiAgICAgICAgY29vcmRzID0gdGhpcy5sb2FkR2VvbWV0cnkoKSxcbiAgICAgICAgdHlwZSA9IFZlY3RvclRpbGVGZWF0dXJlLnR5cGVzW3RoaXMudHlwZV0sXG4gICAgICAgIGksIGo7XG5cbiAgICBmdW5jdGlvbiBwcm9qZWN0KGxpbmUpIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsaW5lLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgcCA9IGxpbmVbal0sIHkyID0gMTgwIC0gKHAueSArIHkwKSAqIDM2MCAvIHNpemU7XG4gICAgICAgICAgICBsaW5lW2pdID0gW1xuICAgICAgICAgICAgICAgIChwLnggKyB4MCkgKiAzNjAgLyBzaXplIC0gMTgwLFxuICAgICAgICAgICAgICAgIDM2MCAvIE1hdGguUEkgKiBNYXRoLmF0YW4oTWF0aC5leHAoeTIgKiBNYXRoLlBJIC8gMTgwKSkgLSA5MFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHN3aXRjaCAodGhpcy50eXBlKSB7XG4gICAgY2FzZSAxOlxuICAgICAgICB2YXIgcG9pbnRzID0gW107XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHBvaW50c1tpXSA9IGNvb3Jkc1tpXVswXTtcbiAgICAgICAgfVxuICAgICAgICBjb29yZHMgPSBwb2ludHM7XG4gICAgICAgIHByb2plY3QoY29vcmRzKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIDI6XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHByb2plY3QoY29vcmRzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgIGNhc2UgMzpcbiAgICAgICAgY29vcmRzID0gY2xhc3NpZnlSaW5ncyhjb29yZHMpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgY29vcmRzW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgcHJvamVjdChjb29yZHNbaV1bal0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGlmIChjb29yZHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGNvb3JkcyA9IGNvb3Jkc1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0eXBlID0gJ011bHRpJyArIHR5cGU7XG4gICAgfVxuXG4gICAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgdHlwZTogXCJGZWF0dXJlXCIsXG4gICAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgY29vcmRpbmF0ZXM6IGNvb3Jkc1xuICAgICAgICB9LFxuICAgICAgICBwcm9wZXJ0aWVzOiB0aGlzLnByb3BlcnRpZXNcbiAgICB9O1xuXG4gICAgaWYgKCdpZCcgaW4gdGhpcykge1xuICAgICAgICByZXN1bHQuaWQgPSB0aGlzLmlkO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyBjbGFzc2lmaWVzIGFuIGFycmF5IG9mIHJpbmdzIGludG8gcG9seWdvbnMgd2l0aCBvdXRlciByaW5ncyBhbmQgaG9sZXNcblxuZnVuY3Rpb24gY2xhc3NpZnlSaW5ncyhyaW5ncykge1xuICAgIHZhciBsZW4gPSByaW5ncy5sZW5ndGg7XG5cbiAgICBpZiAobGVuIDw9IDEpIHJldHVybiBbcmluZ3NdO1xuXG4gICAgdmFyIHBvbHlnb25zID0gW10sXG4gICAgICAgIHBvbHlnb24sXG4gICAgICAgIGNjdztcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIGFyZWEgPSBzaWduZWRBcmVhKHJpbmdzW2ldKTtcbiAgICAgICAgaWYgKGFyZWEgPT09IDApIGNvbnRpbnVlO1xuXG4gICAgICAgIGlmIChjY3cgPT09IHVuZGVmaW5lZCkgY2N3ID0gYXJlYSA8IDA7XG5cbiAgICAgICAgaWYgKGNjdyA9PT0gYXJlYSA8IDApIHtcbiAgICAgICAgICAgIGlmIChwb2x5Z29uKSBwb2x5Z29ucy5wdXNoKHBvbHlnb24pO1xuICAgICAgICAgICAgcG9seWdvbiA9IFtyaW5nc1tpXV07XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBvbHlnb24ucHVzaChyaW5nc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHBvbHlnb24pIHBvbHlnb25zLnB1c2gocG9seWdvbik7XG5cbiAgICByZXR1cm4gcG9seWdvbnM7XG59XG5cbmZ1bmN0aW9uIHNpZ25lZEFyZWEocmluZykge1xuICAgIHZhciBzdW0gPSAwO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByaW5nLmxlbmd0aCwgaiA9IGxlbiAtIDEsIHAxLCBwMjsgaSA8IGxlbjsgaiA9IGkrKykge1xuICAgICAgICBwMSA9IHJpbmdbaV07XG4gICAgICAgIHAyID0gcmluZ1tqXTtcbiAgICAgICAgc3VtICs9IChwMi54IC0gcDEueCkgKiAocDEueSArIHAyLnkpO1xuICAgIH1cbiAgICByZXR1cm4gc3VtO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L0BtYXBib3gvdmVjdG9yLXRpbGUvbGliL3ZlY3RvcnRpbGVmZWF0dXJlLmpzXG4vLyBtb2R1bGUgaWQgPSAzNjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBvaW50O1xuXG4vKipcbiAqIEEgc3RhbmRhbG9uZSBwb2ludCBnZW9tZXRyeSB3aXRoIHVzZWZ1bCBhY2Nlc3NvciwgY29tcGFyaXNvbiwgYW5kXG4gKiBtb2RpZmljYXRpb24gbWV0aG9kcy5cbiAqXG4gKiBAY2xhc3MgUG9pbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IHRoZSB4LWNvb3JkaW5hdGUuIHRoaXMgY291bGQgYmUgbG9uZ2l0dWRlIG9yIHNjcmVlblxuICogcGl4ZWxzLCBvciBhbnkgb3RoZXIgc29ydCBvZiB1bml0LlxuICogQHBhcmFtIHtOdW1iZXJ9IHkgdGhlIHktY29vcmRpbmF0ZS4gdGhpcyBjb3VsZCBiZSBsYXRpdHVkZSBvciBzY3JlZW5cbiAqIHBpeGVscywgb3IgYW55IG90aGVyIHNvcnQgb2YgdW5pdC5cbiAqIEBleGFtcGxlXG4gKiB2YXIgcG9pbnQgPSBuZXcgUG9pbnQoLTc3LCAzOCk7XG4gKi9cbmZ1bmN0aW9uIFBvaW50KHgsIHkpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG59XG5cblBvaW50LnByb3RvdHlwZSA9IHtcblxuICAgIC8qKlxuICAgICAqIENsb25lIHRoaXMgcG9pbnQsIHJldHVybmluZyBhIG5ldyBwb2ludCB0aGF0IGNhbiBiZSBtb2RpZmllZFxuICAgICAqIHdpdGhvdXQgYWZmZWN0aW5nIHRoZSBvbGQgb25lLlxuICAgICAqIEByZXR1cm4ge1BvaW50fSB0aGUgY2xvbmVcbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7IHJldHVybiBuZXcgUG9pbnQodGhpcy54LCB0aGlzLnkpOyB9LFxuXG4gICAgLyoqXG4gICAgICogQWRkIHRoaXMgcG9pbnQncyB4ICYgeSBjb29yZGluYXRlcyB0byBhbm90aGVyIHBvaW50LFxuICAgICAqIHlpZWxkaW5nIGEgbmV3IHBvaW50LlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHAgdGhlIG90aGVyIHBvaW50XG4gICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuICAgICAqL1xuICAgIGFkZDogICAgIGZ1bmN0aW9uKHApIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fYWRkKHApOyB9LFxuXG4gICAgLyoqXG4gICAgICogU3VidHJhY3QgdGhpcyBwb2ludCdzIHggJiB5IGNvb3JkaW5hdGVzIHRvIGZyb20gcG9pbnQsXG4gICAgICogeWllbGRpbmcgYSBuZXcgcG9pbnQuXG4gICAgICogQHBhcmFtIHtQb2ludH0gcCB0aGUgb3RoZXIgcG9pbnRcbiAgICAgKiBAcmV0dXJuIHtQb2ludH0gb3V0cHV0IHBvaW50XG4gICAgICovXG4gICAgc3ViOiAgICAgZnVuY3Rpb24ocCkgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9zdWIocCk7IH0sXG5cbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSB0aGlzIHBvaW50J3MgeCAmIHkgY29vcmRpbmF0ZXMgYnkgcG9pbnQsXG4gICAgICogeWllbGRpbmcgYSBuZXcgcG9pbnQuXG4gICAgICogQHBhcmFtIHtQb2ludH0gcCB0aGUgb3RoZXIgcG9pbnRcbiAgICAgKiBAcmV0dXJuIHtQb2ludH0gb3V0cHV0IHBvaW50XG4gICAgICovXG4gICAgbXVsdEJ5UG9pbnQ6ICAgIGZ1bmN0aW9uKHApIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fbXVsdEJ5UG9pbnQocCk7IH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXZpZGUgdGhpcyBwb2ludCdzIHggJiB5IGNvb3JkaW5hdGVzIGJ5IHBvaW50LFxuICAgICAqIHlpZWxkaW5nIGEgbmV3IHBvaW50LlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHAgdGhlIG90aGVyIHBvaW50XG4gICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuICAgICAqL1xuICAgIGRpdkJ5UG9pbnQ6ICAgICBmdW5jdGlvbihwKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX2RpdkJ5UG9pbnQocCk7IH0sXG5cbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSB0aGlzIHBvaW50J3MgeCAmIHkgY29vcmRpbmF0ZXMgYnkgYSBmYWN0b3IsXG4gICAgICogeWllbGRpbmcgYSBuZXcgcG9pbnQuXG4gICAgICogQHBhcmFtIHtQb2ludH0gayBmYWN0b3JcbiAgICAgKiBAcmV0dXJuIHtQb2ludH0gb3V0cHV0IHBvaW50XG4gICAgICovXG4gICAgbXVsdDogICAgZnVuY3Rpb24oaykgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9tdWx0KGspOyB9LFxuXG4gICAgLyoqXG4gICAgICogRGl2aWRlIHRoaXMgcG9pbnQncyB4ICYgeSBjb29yZGluYXRlcyBieSBhIGZhY3RvcixcbiAgICAgKiB5aWVsZGluZyBhIG5ldyBwb2ludC5cbiAgICAgKiBAcGFyYW0ge1BvaW50fSBrIGZhY3RvclxuICAgICAqIEByZXR1cm4ge1BvaW50fSBvdXRwdXQgcG9pbnRcbiAgICAgKi9cbiAgICBkaXY6ICAgICBmdW5jdGlvbihrKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX2RpdihrKTsgfSxcblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSB0aGlzIHBvaW50IGFyb3VuZCB0aGUgMCwgMCBvcmlnaW4gYnkgYW4gYW5nbGUgYSxcbiAgICAgKiBnaXZlbiBpbiByYWRpYW5zXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGEgYW5nbGUgdG8gcm90YXRlIGFyb3VuZCwgaW4gcmFkaWFuc1xuICAgICAqIEByZXR1cm4ge1BvaW50fSBvdXRwdXQgcG9pbnRcbiAgICAgKi9cbiAgICByb3RhdGU6ICBmdW5jdGlvbihhKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX3JvdGF0ZShhKTsgfSxcblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSB0aGlzIHBvaW50IGFyb3VuZCBwIHBvaW50IGJ5IGFuIGFuZ2xlIGEsXG4gICAgICogZ2l2ZW4gaW4gcmFkaWFuc1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhIGFuZ2xlIHRvIHJvdGF0ZSBhcm91bmQsIGluIHJhZGlhbnNcbiAgICAgKiBAcGFyYW0ge1BvaW50fSBwIFBvaW50IHRvIHJvdGF0ZSBhcm91bmRcbiAgICAgKiBAcmV0dXJuIHtQb2ludH0gb3V0cHV0IHBvaW50XG4gICAgICovXG4gICAgcm90YXRlQXJvdW5kOiAgZnVuY3Rpb24oYSxwKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX3JvdGF0ZUFyb3VuZChhLHApOyB9LFxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhpcyBwb2ludCBieSBhIDR4MSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXhcbiAgICAgKiBAcGFyYW0ge0FycmF5PE51bWJlcj59IG0gdHJhbnNmb3JtYXRpb24gbWF0cml4XG4gICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuICAgICAqL1xuICAgIG1hdE11bHQ6IGZ1bmN0aW9uKG0pIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fbWF0TXVsdChtKTsgfSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGlzIHBvaW50IGJ1dCBhcyBhIHVuaXQgdmVjdG9yIGZyb20gMCwgMCwgbWVhbmluZ1xuICAgICAqIHRoYXQgdGhlIGRpc3RhbmNlIGZyb20gdGhlIHJlc3VsdGluZyBwb2ludCB0byB0aGUgMCwgMFxuICAgICAqIGNvb3JkaW5hdGUgd2lsbCBiZSBlcXVhbCB0byAxIGFuZCB0aGUgYW5nbGUgZnJvbSB0aGUgcmVzdWx0aW5nXG4gICAgICogcG9pbnQgdG8gdGhlIDAsIDAgY29vcmRpbmF0ZSB3aWxsIGJlIHRoZSBzYW1lIGFzIGJlZm9yZS5cbiAgICAgKiBAcmV0dXJuIHtQb2ludH0gdW5pdCB2ZWN0b3IgcG9pbnRcbiAgICAgKi9cbiAgICB1bml0OiAgICBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fdW5pdCgpOyB9LFxuXG4gICAgLyoqXG4gICAgICogQ29tcHV0ZSBhIHBlcnBlbmRpY3VsYXIgcG9pbnQsIHdoZXJlIHRoZSBuZXcgeSBjb29yZGluYXRlXG4gICAgICogaXMgdGhlIG9sZCB4IGNvb3JkaW5hdGUgYW5kIHRoZSBuZXcgeCBjb29yZGluYXRlIGlzIHRoZSBvbGQgeVxuICAgICAqIGNvb3JkaW5hdGUgbXVsdGlwbGllZCBieSAtMVxuICAgICAqIEByZXR1cm4ge1BvaW50fSBwZXJwZW5kaWN1bGFyIHBvaW50XG4gICAgICovXG4gICAgcGVycDogICAgZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX3BlcnAoKTsgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIHZlcnNpb24gb2YgdGhpcyBwb2ludCB3aXRoIHRoZSB4ICYgeSBjb29yZGluYXRlc1xuICAgICAqIHJvdW5kZWQgdG8gaW50ZWdlcnMuXG4gICAgICogQHJldHVybiB7UG9pbnR9IHJvdW5kZWQgcG9pbnRcbiAgICAgKi9cbiAgICByb3VuZDogICBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fcm91bmQoKTsgfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybiB0aGUgbWFnaXR1ZGUgb2YgdGhpcyBwb2ludDogdGhpcyBpcyB0aGUgRXVjbGlkZWFuXG4gICAgICogZGlzdGFuY2UgZnJvbSB0aGUgMCwgMCBjb29yZGluYXRlIHRvIHRoaXMgcG9pbnQncyB4IGFuZCB5XG4gICAgICogY29vcmRpbmF0ZXMuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBtYWduaXR1ZGVcbiAgICAgKi9cbiAgICBtYWc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMueCAqIHRoaXMueCArIHRoaXMueSAqIHRoaXMueSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEp1ZGdlIHdoZXRoZXIgdGhpcyBwb2ludCBpcyBlcXVhbCB0byBhbm90aGVyIHBvaW50LCByZXR1cm5pbmdcbiAgICAgKiB0cnVlIG9yIGZhbHNlLlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IG90aGVyIHRoZSBvdGhlciBwb2ludFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHdoZXRoZXIgdGhlIHBvaW50cyBhcmUgZXF1YWxcbiAgICAgKi9cbiAgICBlcXVhbHM6IGZ1bmN0aW9uKG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnggPT09IG90aGVyLnggJiZcbiAgICAgICAgICAgICAgIHRoaXMueSA9PT0gb3RoZXIueTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBmcm9tIHRoaXMgcG9pbnQgdG8gYW5vdGhlciBwb2ludFxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHAgdGhlIG90aGVyIHBvaW50XG4gICAgICogQHJldHVybiB7TnVtYmVyfSBkaXN0YW5jZVxuICAgICAqL1xuICAgIGRpc3Q6IGZ1bmN0aW9uKHApIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLmRpc3RTcXIocCkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGRpc3RhbmNlIGZyb20gdGhpcyBwb2ludCB0byBhbm90aGVyIHBvaW50LFxuICAgICAqIHdpdGhvdXQgdGhlIHNxdWFyZSByb290IHN0ZXAuIFVzZWZ1bCBpZiB5b3UncmUgY29tcGFyaW5nXG4gICAgICogcmVsYXRpdmUgZGlzdGFuY2VzLlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHAgdGhlIG90aGVyIHBvaW50XG4gICAgICogQHJldHVybiB7TnVtYmVyfSBkaXN0YW5jZVxuICAgICAqL1xuICAgIGRpc3RTcXI6IGZ1bmN0aW9uKHApIHtcbiAgICAgICAgdmFyIGR4ID0gcC54IC0gdGhpcy54LFxuICAgICAgICAgICAgZHkgPSBwLnkgLSB0aGlzLnk7XG4gICAgICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbmdsZSBmcm9tIHRoZSAwLCAwIGNvb3JkaW5hdGUgdG8gdGhpcyBwb2ludCwgaW4gcmFkaWFuc1xuICAgICAqIGNvb3JkaW5hdGVzLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gYW5nbGVcbiAgICAgKi9cbiAgICBhbmdsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMueSwgdGhpcy54KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbmdsZSBmcm9tIHRoaXMgcG9pbnQgdG8gYW5vdGhlciBwb2ludCwgaW4gcmFkaWFuc1xuICAgICAqIEBwYXJhbSB7UG9pbnR9IGIgdGhlIG90aGVyIHBvaW50XG4gICAgICogQHJldHVybiB7TnVtYmVyfSBhbmdsZVxuICAgICAqL1xuICAgIGFuZ2xlVG86IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguYXRhbjIodGhpcy55IC0gYi55LCB0aGlzLnggLSBiLngpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGFuZ2xlIGJldHdlZW4gdGhpcyBwb2ludCBhbmQgYW5vdGhlciBwb2ludCwgaW4gcmFkaWFuc1xuICAgICAqIEBwYXJhbSB7UG9pbnR9IGIgdGhlIG90aGVyIHBvaW50XG4gICAgICogQHJldHVybiB7TnVtYmVyfSBhbmdsZVxuICAgICAqL1xuICAgIGFuZ2xlV2l0aDogZnVuY3Rpb24oYikge1xuICAgICAgICByZXR1cm4gdGhpcy5hbmdsZVdpdGhTZXAoYi54LCBiLnkpO1xuICAgIH0sXG5cbiAgICAvKlxuICAgICAqIEZpbmQgdGhlIGFuZ2xlIG9mIHRoZSB0d28gdmVjdG9ycywgc29sdmluZyB0aGUgZm9ybXVsYSBmb3JcbiAgICAgKiB0aGUgY3Jvc3MgcHJvZHVjdCBhIHggYiA9IHxhfHxifHNpbijOuCkgZm9yIM64LlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB4IHRoZSB4LWNvb3JkaW5hdGVcbiAgICAgKiBAcGFyYW0ge051bWJlcn0geSB0aGUgeS1jb29yZGluYXRlXG4gICAgICogQHJldHVybiB7TnVtYmVyfSB0aGUgYW5nbGUgaW4gcmFkaWFuc1xuICAgICAqL1xuICAgIGFuZ2xlV2l0aFNlcDogZnVuY3Rpb24oeCwgeSkge1xuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMihcbiAgICAgICAgICAgIHRoaXMueCAqIHkgLSB0aGlzLnkgKiB4LFxuICAgICAgICAgICAgdGhpcy54ICogeCArIHRoaXMueSAqIHkpO1xuICAgIH0sXG5cbiAgICBfbWF0TXVsdDogZnVuY3Rpb24obSkge1xuICAgICAgICB2YXIgeCA9IG1bMF0gKiB0aGlzLnggKyBtWzFdICogdGhpcy55LFxuICAgICAgICAgICAgeSA9IG1bMl0gKiB0aGlzLnggKyBtWzNdICogdGhpcy55O1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgX2FkZDogZnVuY3Rpb24ocCkge1xuICAgICAgICB0aGlzLnggKz0gcC54O1xuICAgICAgICB0aGlzLnkgKz0gcC55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgX3N1YjogZnVuY3Rpb24ocCkge1xuICAgICAgICB0aGlzLnggLT0gcC54O1xuICAgICAgICB0aGlzLnkgLT0gcC55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgX211bHQ6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgdGhpcy54ICo9IGs7XG4gICAgICAgIHRoaXMueSAqPSBrO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgX2RpdjogZnVuY3Rpb24oaykge1xuICAgICAgICB0aGlzLnggLz0gaztcbiAgICAgICAgdGhpcy55IC89IGs7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBfbXVsdEJ5UG9pbnQ6IGZ1bmN0aW9uKHApIHtcbiAgICAgICAgdGhpcy54ICo9IHAueDtcbiAgICAgICAgdGhpcy55ICo9IHAueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIF9kaXZCeVBvaW50OiBmdW5jdGlvbihwKSB7XG4gICAgICAgIHRoaXMueCAvPSBwLng7XG4gICAgICAgIHRoaXMueSAvPSBwLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBfdW5pdDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuX2Rpdih0aGlzLm1hZygpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIF9wZXJwOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHkgPSB0aGlzLnk7XG4gICAgICAgIHRoaXMueSA9IHRoaXMueDtcbiAgICAgICAgdGhpcy54ID0gLXk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBfcm90YXRlOiBmdW5jdGlvbihhbmdsZSkge1xuICAgICAgICB2YXIgY29zID0gTWF0aC5jb3MoYW5nbGUpLFxuICAgICAgICAgICAgc2luID0gTWF0aC5zaW4oYW5nbGUpLFxuICAgICAgICAgICAgeCA9IGNvcyAqIHRoaXMueCAtIHNpbiAqIHRoaXMueSxcbiAgICAgICAgICAgIHkgPSBzaW4gKiB0aGlzLnggKyBjb3MgKiB0aGlzLnk7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBfcm90YXRlQXJvdW5kOiBmdW5jdGlvbihhbmdsZSwgcCkge1xuICAgICAgICB2YXIgY29zID0gTWF0aC5jb3MoYW5nbGUpLFxuICAgICAgICAgICAgc2luID0gTWF0aC5zaW4oYW5nbGUpLFxuICAgICAgICAgICAgeCA9IHAueCArIGNvcyAqICh0aGlzLnggLSBwLngpIC0gc2luICogKHRoaXMueSAtIHAueSksXG4gICAgICAgICAgICB5ID0gcC55ICsgc2luICogKHRoaXMueCAtIHAueCkgKyBjb3MgKiAodGhpcy55IC0gcC55KTtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIF9yb3VuZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMueCA9IE1hdGgucm91bmQodGhpcy54KTtcbiAgICAgICAgdGhpcy55ID0gTWF0aC5yb3VuZCh0aGlzLnkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59O1xuXG4vKipcbiAqIENvbnN0cnVjdCBhIHBvaW50IGZyb20gYW4gYXJyYXkgaWYgbmVjZXNzYXJ5LCBvdGhlcndpc2UgaWYgdGhlIGlucHV0XG4gKiBpcyBhbHJlYWR5IGEgUG9pbnQsIG9yIGFuIHVua25vd24gdHlwZSwgcmV0dXJuIGl0IHVuY2hhbmdlZFxuICogQHBhcmFtIHtBcnJheTxOdW1iZXI+fFBvaW50fCp9IGEgYW55IGtpbmQgb2YgaW5wdXQgdmFsdWVcbiAqIEByZXR1cm4ge1BvaW50fSBjb25zdHJ1Y3RlZCBwb2ludCwgb3IgcGFzc2VkLXRocm91Z2ggdmFsdWUuXG4gKiBAZXhhbXBsZVxuICogLy8gdGhpc1xuICogdmFyIHBvaW50ID0gUG9pbnQuY29udmVydChbMCwgMV0pO1xuICogLy8gaXMgZXF1aXZhbGVudCB0b1xuICogdmFyIHBvaW50ID0gbmV3IFBvaW50KDAsIDEpO1xuICovXG5Qb2ludC5jb252ZXJ0ID0gZnVuY3Rpb24gKGEpIHtcbiAgICBpZiAoYSBpbnN0YW5jZW9mIFBvaW50KSB7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgICByZXR1cm4gbmV3IFBvaW50KGFbMF0sIGFbMV0pO1xuICAgIH1cbiAgICByZXR1cm4gYTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vQG1hcGJveC9wb2ludC1nZW9tZXRyeS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMzY0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJzb3VyY2VSb290IjoiIn0=