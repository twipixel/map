webpackJsonp([0],{0:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();r(1);var s=r(327),a=n(s),u=r(365),f=n(u);!function(){window.onload=function(){new c}}();var c=function(){function t(){i(this,t),this.init(),this.addEvent(),this.onresize()}return o(t,[{key:"init",value:function(){this.app=new a.default}},{key:"addEvent",value:function(){window.onresize=this.onresize.bind(this),window.addEventListener("keyup",this.onkeyup.bind(this)),window.addEventListener("keydown",this.onkeydown.bind(this))}},{key:"onresize",value:function(){this.app.resize()}},{key:"getIntervalFunction",value:function(t,e){function r(){e.apply(t,i),clearTimeout(this.keyIntervalId),this.keyIntervalId=setTimeout(r.bind(this),200)}for(var n=arguments.length,i=Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return r.bind(this)}},{key:"clearInterFunction",value:function(){clearTimeout(this.keyIntervalId)}},{key:"onkeydown",value:function(t){switch(t.keyCode){case f.default.UP:this.getIntervalFunction(this.app,this.app.moveCamera,"y",-1)();break;case f.default.DOWN:this.getIntervalFunction(this.app,this.app.moveCamera,"y",1)();break;case f.default.LEFT:this.getIntervalFunction(this.app,this.app.moveCamera,"x",-1)();break;case f.default.RIGHT:this.getIntervalFunction(this.app,this.app.moveCamera,"x",1)();break;case f.default.PAGE_UP:this.getIntervalFunction(this.app,this.app.moveCamera,"z",1)();break;case f.default.PAGE_DOWN:this.getIntervalFunction(this.app,this.app.moveCamera,"z",-1)();break;case f.default.NUMBER_4:this.getIntervalFunction(this.app,this.app.rotateWorld,"y",-.01)();break;case f.default.NUMBER_6:this.getIntervalFunction(this.app,this.app.rotateWorld,"y",.01)();break;case f.default.NUMBER_8:this.getIntervalFunction(this.app,this.app.rotateWorld,"x",-.01)();break;case f.default.NUMBER_2:this.getIntervalFunction(this.app,this.app.rotateWorld,"x",.01)();break;case f.default.NUMBER_7:this.getIntervalFunction(this.app,this.app.rotateWorld,"z",-.01)();break;case f.default.NUMBER_1:this.getIntervalFunction(this.app,this.app.rotateWorld,"z",.01)();break;case f.default.NUMBER_9:this.getIntervalFunction(this.app,this.app.rotateWorld,"z",-.01)();break;case f.default.NUMBER_3:this.getIntervalFunction(this.app,this.app.rotateWorld,"z",.01)();break;case f.default.NUMPAD_ADD:this.app.zoomIn();break;case f.default.NUMPAD_SUBTRACT:this.app.zoomOut();break;case f.default.NUMPAD_ENTER:this.app.zoomOut();break;case f.default.NUMBER_0:this.app.reset();break;case f.default.W:break;case f.default.S:break;case f.default.A:break;case f.default.D:}}},{key:"onkeyup",value:function(t){switch(t.keyCode){case f.default.ESCAPE:console.clear();break;case f.default.SPACE:this.app.gui.closed?this.app.gui.open():this.app.gui.close();break;case f.default.UP:case f.default.DOWN:case f.default.LEFT:case f.default.RIGHT:case f.default.PAGE_UP:case f.default.PAGE_DOWN:case f.default.NUMBER_4:case f.default.NUMBER_6:case f.default.NUMBER_8:case f.default.NUMBER_2:case f.default.NUMBER_7:case f.default.NUMBER_1:case f.default.NUMBER_9:case f.default.NUMBER_3:case f.default.NUMPAD_ADD:case f.default.NUMPAD_SUBTRACT:case f.default.W:case f.default.S:case f.default.A:case f.default.D:this.clearInterFunction();break;case f.default.BACKSPACE:}}}]),t}()},327:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=r(328),u=(n(a),r(355)),f=n(u),c=r(358),h=n(c),l=r(368),p=n(l),d=r(370),y=n(d),g=r(371),v=n(g),m=(r(372),r(360)),w={x:27953,y:12711,z:15},b={bus:"https://map.pstatic.net/nvb/wmts/bus/d2e364c9-b75e-4fd7-8020-c4b26f82b9ce/getTile/{x}/{y}/{z}/pbf",poi_web:"https://map.pstatic.net/nvb/wmts/poi_web/8fe6883e-5525-45f8-8f55-5e30bc4981f1/getTile/{x}/{y}/{z}/pbf",poi4osm:"https://map.pstatic.net/nvbpc/wmts/osm_naver_poi/5653e757-9bf1-4a2e-b20f-86bb4c0b9912/getTile/{x}/{y}/{z}/pbf",cctv:"https://map.pstatic.net/nvbpc/wmts/cctv/ab50b26c-842d-4be5-8b0c-46019f5e79a1/getTile/{x}/{y}/{z}/pbf",ozone:"https://map.pstatic.net/ozone/pbf/geojson/POI?x="+w.x+"&y="+w.y+" &z="+w.z+"&name=osm_naver_poi&versionCode=5653e757-9bf1-4a2e-b20f-86bb4c0b9912&pixelRatio=2&imageType=sprite&language=ko&mapType=NORMAL&quality=normal"};for(var x in b)b[x]=(0,y.default)(b[x],w);var S=function(){function t(){i(this,t),this.testPbf(b.poi_web,"poi_web"),this.testPbf(b.poi4osm,"poi4osm"),this.testOzone(b.ozone,"ozone")}return s(t,[{key:"parse",value:function(){}},{key:"testPbf",value:function(t,e){var r=this;console.time((0,v.default)(e+" 로드")),(0,p.default)({url:t,responseType:"arraybuffer"}).then(function(t){console.timeEnd((0,v.default)(e+" 로드")),console.time((0,v.default)(e+" pbf 파싱"));var n=new m.VectorTile(new h.default(t));console.timeEnd((0,v.default)(e+" pbf 파싱")),console.log(n),console.time((0,v.default)(e+" 피쳐 생성"));var i=r.getFeatures(n);console.timeEnd((0,v.default)(e+" 피쳐 생성")),console.log("features",i.features)})}},{key:"testOzone",value:function(t,e){console.time((0,v.default)(e+" 로드")),(0,p.default)({url:t,responseType:"arraybuffer"}).then(function(t){console.timeEnd((0,v.default)(e+" 로드")),console.time((0,v.default)(e+" pbf 파싱 및 피쳐 생성"));var r={type:"FeatureCollection",features:[]};r=f.default.decode(new h.default(t)),console.timeEnd((0,v.default)(e+" pbf 파싱 및 피쳐 생성")),console.log("features",r.features)})}},{key:"getFeatures",value:function(t){var e={type:"FeatureCollection",features:[]},r=Object.keys(t.layers);return Array.isArray(r)||(r=[r]),console.log("layers ("+r.length+")"),r.forEach(function(r){for(var n=t.layers[r],i=n.length,s=0;s<i;s++){var a=o({},n.feature(s).toGeoJSON(w.x,w.y,w.z));i>0&&(a.properties.layer=r),console.log("feature",a),e.features.push(a)}}),e}},{key:"resize",value:function(){}}]),t}();e.default=S},328:function(t,e,r){t.exports=r(329)},329:function(t,e,r){"use strict";function n(t){var e=new s(t),r=o(s.prototype.request,e);return i.extend(r,s.prototype,e),i.extend(r,e),r}var i=r(330),o=r(331),s=r(333),a=r(351),u=r(339),f=n(u);f.Axios=s,f.create=function(t){return n(a(f.defaults,t))},f.Cancel=r(352),f.CancelToken=r(353),f.isCancel=r(338),f.all=function(t){return Promise.all(t)},f.spread=r(354),t.exports=f,t.exports.default=f},330:function(t,e,r){"use strict";function n(t){return"[object Array]"===_.call(t)}function i(t){return"[object ArrayBuffer]"===_.call(t)}function o(t){return"undefined"!=typeof FormData&&t instanceof FormData}function s(t){var e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer}function a(t){return"string"==typeof t}function u(t){return"number"==typeof t}function f(t){return"undefined"==typeof t}function c(t){return null!==t&&"object"==typeof t}function h(t){return"[object Date]"===_.call(t)}function l(t){return"[object File]"===_.call(t)}function p(t){return"[object Blob]"===_.call(t)}function d(t){return"[object Function]"===_.call(t)}function y(t){return c(t)&&d(t.pipe)}function g(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}function v(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function m(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function w(t,e){if(null!==t&&"undefined"!=typeof t)if("object"!=typeof t&&(t=[t]),n(t))for(var r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function b(){function t(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=b(e[r],t):e[r]=t}for(var e={},r=0,n=arguments.length;r<n;r++)w(arguments[r],t);return e}function x(){function t(t,r){"object"==typeof e[r]&&"object"==typeof t?e[r]=x(e[r],t):"object"==typeof t?e[r]=x({},t):e[r]=t}for(var e={},r=0,n=arguments.length;r<n;r++)w(arguments[r],t);return e}function S(t,e,r){return w(e,function(e,n){r&&"function"==typeof e?t[n]=F(e,r):t[n]=e}),t}var F=r(331),M=r(332),_=Object.prototype.toString;t.exports={isArray:n,isArrayBuffer:i,isBuffer:M,isFormData:o,isArrayBufferView:s,isString:a,isNumber:u,isObject:c,isUndefined:f,isDate:h,isFile:l,isBlob:p,isFunction:d,isStream:y,isURLSearchParams:g,isStandardBrowserEnv:m,forEach:w,merge:b,deepMerge:x,extend:S,trim:v}},331:function(t,e){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},332:function(t,e){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function n(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}t.exports=function(t){return null!=t&&(r(t)||n(t)||!!t._isBuffer)}},333:function(t,e,r){"use strict";function n(t){this.defaults=t,this.interceptors={request:new s,response:new s}}var i=r(330),o=r(334),s=r(335),a=r(336),u=r(351);n.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=u(this.defaults,t),t.method=t.method?t.method.toLowerCase():"get";var e=[a,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)r=r.then(e.shift(),e.shift());return r},n.prototype.getUri=function(t){return t=u(this.defaults,t),o(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(t){n.prototype[t]=function(e,r){return this.request(i.merge(r||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){n.prototype[t]=function(e,r,n){return this.request(i.merge(n||{},{method:t,url:e,data:r}))}}),t.exports=n},334:function(t,e,r){"use strict";function n(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=r(330);t.exports=function(t,e,r){if(!e)return t;var o;if(r)o=r(e);else if(i.isURLSearchParams(e))o=e.toString();else{var s=[];i.forEach(e,function(t,e){null!==t&&"undefined"!=typeof t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),s.push(n(e)+"="+n(t))}))}),o=s.join("&")}if(o){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}},335:function(t,e,r){"use strict";function n(){this.handlers=[]}var i=r(330);n.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},n.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},n.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=n},336:function(t,e,r){"use strict";function n(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var i=r(330),o=r(337),s=r(338),a=r(339),u=r(349),f=r(350);t.exports=function(t){n(t),t.baseURL&&!u(t.url)&&(t.url=f(t.baseURL,t.url)),t.headers=t.headers||{},t.data=o(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]});var e=t.adapter||a.adapter;return e(t).then(function(e){return n(t),e.data=o(e.data,e.headers,t.transformResponse),e},function(e){return s(e)||(n(t),e&&e.response&&(e.response.data=o(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},337:function(t,e,r){"use strict";var n=r(330);t.exports=function(t,e,r){return n.forEach(r,function(r){t=r(t,e)}),t}},338:function(t,e){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},339:function(t,e,r){(function(e){"use strict";function n(t,e){!o.isUndefined(t)&&o.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function i(){var t;return"undefined"!=typeof e&&"[object process]"===Object.prototype.toString.call(e)?t=r(342):"undefined"!=typeof XMLHttpRequest&&(t=r(342)),t}var o=r(330),s=r(341),a={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:i(),transformRequest:[function(t,e){return s(e,"Accept"),s(e,"Content-Type"),o.isFormData(t)||o.isArrayBuffer(t)||o.isBuffer(t)||o.isStream(t)||o.isFile(t)||o.isBlob(t)?t:o.isArrayBufferView(t)?t.buffer:o.isURLSearchParams(t)?(n(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):o.isObject(t)?(n(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(t){u.headers[t]={}}),o.forEach(["post","put","patch"],function(t){u.headers[t]=o.merge(a)}),t.exports=u}).call(e,r(340))},340:function(t,e){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){y&&p&&(y=!1,p.length?d=p.concat(d):g=-1,d.length&&a())}function a(){if(!y){var t=i(s);y=!0;for(var e=d.length;e;){for(p=d,d=[];++g<e;)p&&p[g].run();g=-1,e=d.length}p=null,y=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function f(){}var c,h,l=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(t){h=n}}();var p,d=[],y=!1,g=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];d.push(new u(t,e)),1!==d.length||y||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=f,l.addListener=f,l.once=f,l.off=f,l.removeListener=f,l.removeAllListeners=f,l.emit=f,l.prependListener=f,l.prependOnceListener=f,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},341:function(t,e,r){"use strict";var n=r(330);t.exports=function(t,e){n.forEach(t,function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])})}},342:function(t,e,r){"use strict";var n=r(330),i=r(343),o=r(334),s=r(346),a=r(347),u=r(344);t.exports=function(t){return new Promise(function(e,f){var c=t.data,h=t.headers;n.isFormData(c)&&delete h["Content-Type"];var l=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",d=t.auth.password||"";h.Authorization="Basic "+btoa(p+":"+d)}if(l.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),l.timeout=t.timeout,l.onreadystatechange=function(){if(l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in l?s(l.getAllResponseHeaders()):null,n=t.responseType&&"text"!==t.responseType?l.response:l.responseText,o={data:n,status:l.status,statusText:l.statusText,headers:r,config:t,request:l};i(e,f,o),l=null}},l.onabort=function(){l&&(f(u("Request aborted",t,"ECONNABORTED",l)),l=null)},l.onerror=function(){f(u("Network Error",t,null,l)),l=null},l.ontimeout=function(){f(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",l)),l=null},n.isStandardBrowserEnv()){var y=r(348),g=(t.withCredentials||a(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;g&&(h[t.xsrfHeaderName]=g)}if("setRequestHeader"in l&&n.forEach(h,function(t,e){"undefined"==typeof c&&"content-type"===e.toLowerCase()?delete h[e]:l.setRequestHeader(e,t)}),t.withCredentials&&(l.withCredentials=!0),t.responseType)try{l.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&l.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){l&&(l.abort(),f(t),l=null)}),void 0===c&&(c=null),l.send(c)})}},343:function(t,e,r){"use strict";var n=r(344);t.exports=function(t,e,r){var i=r.config.validateStatus;!i||i(r.status)?t(r):e(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},344:function(t,e,r){"use strict";var n=r(345);t.exports=function(t,e,r,i,o){var s=new Error(t);return n(s,e,r,i,o)}},345:function(t,e){"use strict";t.exports=function(t,e,r,n,i){return t.config=e,r&&(t.code=r),t.request=n,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},346:function(t,e,r){"use strict";var n=r(330),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,o,s={};return t?(n.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=n.trim(t.substr(0,o)).toLowerCase(),r=n.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;"set-cookie"===e?s[e]=(s[e]?s[e]:[]).concat([r]):s[e]=s[e]?s[e]+", "+r:r}}),s):s}},347:function(t,e,r){"use strict";var n=r(330);t.exports=n.isStandardBrowserEnv()?function(){function t(t){var e=t;return r&&(i.setAttribute("href",e),e=i.href),i.setAttribute("href",e),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var e,r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return e=t(window.location.href),function(r){var i=n.isString(r)?t(r):r;return i.protocol===e.protocol&&i.host===e.host}}():function(){return function(){return!0}}()},348:function(t,e,r){"use strict";var n=r(330);t.exports=n.isStandardBrowserEnv()?function(){return{write:function(t,e,r,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(i)&&a.push("path="+i),n.isString(o)&&a.push("domain="+o),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},349:function(t,e){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},350:function(t,e){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},351:function(t,e,r){"use strict";var n=r(330);t.exports=function(t,e){e=e||{};var r={};return n.forEach(["url","method","params","data"],function(t){"undefined"!=typeof e[t]&&(r[t]=e[t])}),n.forEach(["headers","auth","proxy"],function(i){n.isObject(e[i])?r[i]=n.deepMerge(t[i],e[i]):"undefined"!=typeof e[i]?r[i]=e[i]:n.isObject(t[i])?r[i]=n.deepMerge(t[i]):"undefined"!=typeof t[i]&&(r[i]=t[i])}),n.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],function(n){"undefined"!=typeof e[n]?r[n]=e[n]:"undefined"!=typeof t[n]&&(r[n]=t[n])}),r}},352:function(t,e){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},353:function(t,e,r){"use strict";function n(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var r=this;t(function(t){r.reason||(r.reason=new i(t),e(r.reason))})}var i=r(352);n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var t,e=new n(function(e){t=e});return{token:e,cancel:t}},t.exports=n},354:function(t,e){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},355:function(t,e,r){"use strict";e.encode=r(356),e.decode=r(357)},356:function(t,e){"use strict";function r(t,e){w={},x=[],b=0,S=0,F=1,n(t),F=Math.min(F,M);for(var r=Math.ceil(Math.log(F)/Math.LN10),i=0;i<x.length;i++)e.writeStringField(1,x[i]);return 2!==S&&e.writeVarintField(2,S),6!==r&&e.writeVarintField(3,r),"FeatureCollection"===t.type?e.writeMessage(4,u,t):"Feature"===t.type?e.writeMessage(5,f,t):e.writeMessage(6,c,t),w=null,e.finish()}function n(t){var e,r;if("FeatureCollection"===t.type)for(e=0;e<t.features.length;e++)n(t.features[e]);else if("Feature"===t.type){null!==t.geometry&&n(t.geometry);for(r in t.properties)a(r)}else if("Point"===t.type)s(t.coordinates);else if("MultiPoint"===t.type)o(t.coordinates);else if("GeometryCollection"===t.type)for(e=0;e<t.geometries.length;e++)n(t.geometries[e]);else if("LineString"===t.type)o(t.coordinates);else if("Polygon"===t.type||"MultiLineString"===t.type)i(t.coordinates);else if("MultiPolygon"===t.type)for(e=0;e<t.coordinates.length;e++)i(t.coordinates[e]);for(r in t)m(r,t.type)||a(r)}function i(t){for(var e=0;e<t.length;e++)o(t[e])}function o(t){for(var e=0;e<t.length;e++)s(t[e])}function s(t){S=Math.max(S,t.length);for(var e=0;e<t.length;e++)for(;Math.round(t[e]*F)/F!==t[e]&&F<M;)F*=10}function a(t){void 0===w[t]&&(x.push(t),w[t]=b++)}function u(t,e){for(var r=0;r<t.features.length;r++)e.writeMessage(1,f,t.features[r]);h(t,e,!0)}function f(t,e){null!==t.geometry&&e.writeMessage(1,c,t.geometry),void 0!==t.id&&("number"==typeof t.id&&t.id%1===0?e.writeSVarintField(12,t.id):e.writeStringField(11,t.id)),t.properties&&h(t.properties,e),h(t,e,!0)}function c(t,e){e.writeVarintField(1,_[t.type]);var r=t.coordinates;if("Point"===t.type)p(r,e);else if("MultiPoint"===t.type)d(r,e,!0);else if("LineString"===t.type)d(r,e);else if("MultiLineString"===t.type)y(r,e);else if("Polygon"===t.type)y(r,e,!0);else if("MultiPolygon"===t.type)g(r,e);else if("GeometryCollection"===t.type)for(var n=0;n<t.geometries.length;n++)e.writeMessage(4,c,t.geometries[n]);h(t,e,!0)}function h(t,e,r){var n=[],i=0;for(var o in t)r&&m(o,t.type)||(e.writeMessage(13,l,t[o]),n.push(w[o]),n.push(i++));e.writePackedVarint(r?15:14,n)}function l(t,e){if(null!==t){var r=typeof t;"string"===r?e.writeStringField(1,t):"boolean"===r?e.writeBooleanField(5,t):"object"===r?e.writeStringField(6,JSON.stringify(t)):"number"===r&&(t%1!==0?e.writeDoubleField(2,t):t>=0?e.writeVarintField(3,t):e.writeVarintField(4,-t))}}function p(t,e){for(var r=[],n=0;n<S;n++)r.push(Math.round(t[n]*F));e.writePackedSVarint(3,r)}function d(t,e){var r=[];v(r,t),e.writePackedSVarint(3,r)}function y(t,e,r){var n,i=t.length;if(1!==i){var o=[];for(n=0;n<i;n++)o.push(t[n].length-(r?1:0));e.writePackedVarint(2,o)}var s=[];for(n=0;n<i;n++)v(s,t[n],r);e.writePackedSVarint(3,s)}function g(t,e){var r,n,i=t.length;if(1!==i||1!==t[0].length){var o=[i];for(r=0;r<i;r++)for(o.push(t[r].length),n=0;n<t[r].length;n++)o.push(t[r][n].length-1);e.writePackedVarint(2,o)}var s=[];for(r=0;r<i;r++)for(n=0;n<t[r].length;n++)v(s,t[r][n],!0);e.writePackedSVarint(3,s)}function v(t,e,r){var n,i,o=e.length-(r?1:0),s=new Array(S);for(i=0;i<S;i++)s[i]=0;for(n=0;n<o;n++)for(i=0;i<S;i++){var a=Math.round(e[n][i]*F)-s[i];t.push(a),s[i]+=a}}function m(t,e){if("type"===t)return!0;if("FeatureCollection"===e){if("features"===t)return!0}else if("Feature"===e){if("id"===t||"properties"===t||"geometry"===t)return!0}else if("GeometryCollection"===e){if("geometries"===t)return!0}else if("coordinates"===t)return!0;return!1}t.exports=r;var w,b,x,S,F,M=1e6,_={Point:0,MultiPoint:1,LineString:2,MultiLineString:3,Polygon:4,MultiPolygon:5,GeometryCollection:6}},357:function(t,e){"use strict";function r(t){x=2,S=Math.pow(10,6),b=null,m=[],w=[];var e=t.readFields(n,{});return m=null,e}function n(t,e,r){1===t?m.push(r.readString()):2===t?x=r.readVarint():3===t?S=Math.pow(10,r.readVarint()):4===t?i(r,e):5===t?o(r,e):6===t&&s(r,e)}function i(t,e){return e.type="FeatureCollection",e.features=[],t.readMessage(a,e)}function o(t,e){e.type="Feature";var r=t.readMessage(u,e);return r.hasOwnProperty("geometry")||(r.geometry=null),r}function s(t,e){return t.readMessage(f,e)}function a(t,e,r){1===t?e.features.push(o(r,{})):13===t?w.push(h(r)):15===t&&l(r,e)}function u(t,e,r){1===t?e.geometry=s(r,{}):11===t?e.id=r.readString():12===t?e.id=r.readSVarint():13===t?w.push(h(r)):14===t?e.properties=l(r,{}):15===t&&l(r,e)}function f(t,e,r){1===t?e.type=F[r.readVarint()]:2===t?b=r.readPackedVarint():3===t?c(e,r,e.type):4===t?(e.geometries=e.geometries||[],e.geometries.push(s(r,{}))):13===t?w.push(h(r)):15===t&&l(r,e)}function c(t,e,r){"Point"===r?t.coordinates=p(e):"MultiPoint"===r?t.coordinates=y(e,!0):"LineString"===r?t.coordinates=y(e):"MultiLineString"===r?t.coordinates=g(e):"Polygon"===r?t.coordinates=g(e,!0):"MultiPolygon"===r&&(t.coordinates=v(e))}function h(t){for(var e=t.readVarint()+t.pos,r=null;t.pos<e;){var n=t.readVarint(),i=n>>3;1===i?r=t.readString():2===i?r=t.readDouble():3===i?r=t.readVarint():4===i?r=-t.readVarint():5===i?r=t.readBoolean():6===i&&(r=JSON.parse(t.readString()))}return r}function l(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;)e[m[t.readVarint()]]=w[t.readVarint()];return w=[],e}function p(t){for(var e=t.readVarint()+t.pos,r=[];t.pos<e;)r.push(t.readSVarint()/S);return r}function d(t,e,r,n){var i,o,s=0,a=[],u=[];for(o=0;o<x;o++)u[o]=0;for(;r?s<r:t.pos<e;){for(i=[],o=0;o<x;o++)u[o]+=t.readSVarint(),i[o]=u[o]/S;a.push(i),s++}return n&&a.push(a[0]),a}function y(t){return d(t,t.readVarint()+t.pos)}function g(t,e){var r=t.readVarint()+t.pos;if(!b)return[d(t,r,null,e)];for(var n=[],i=0;i<b.length;i++)n.push(d(t,r,b[i],e));return b=null,n}function v(t){var e=t.readVarint()+t.pos;if(!b)return[[d(t,e,null,!0)]];for(var r=[],n=1,i=0;i<b[0];i++){for(var o=[],s=0;s<b[n];s++)o.push(d(t,e,b[n+1+s],!0));n+=b[n]+1,r.push(o)}return b=null,r}t.exports=r;var m,w,b,x,S,F=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection"]},358:function(t,e,r){"use strict";function n(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function i(t,e,r){var n,i,o=r.buf;if(i=o[r.pos++],n=(112&i)>>4,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<3,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<10,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<17,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(127&i)<<24,i<128)return s(t,n,e);if(i=o[r.pos++],n|=(1&i)<<31,i<128)return s(t,n,e);throw new Error("Expected varint not more than 10 bytes")}function o(t){return t.type===n.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function a(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(r=~(-t%4294967296),n=~(-t/4294967296),4294967295^r?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),u(r,n,e),f(n,e)}function u(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}function f(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function c(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function h(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function l(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function g(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function v(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function m(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function w(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function x(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function S(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function F(t,e,r){for(var n="",i=e;i<r;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a>r)break;var u,f,c;1===a?o<128&&(s=o):2===a?(u=t[i+1],128===(192&u)&&(s=(31&o)<<6|63&u,s<=127&&(s=null))):3===a?(u=t[i+1],f=t[i+2],128===(192&u)&&128===(192&f)&&(s=(15&o)<<12|(63&u)<<6|63&f,(s<=2047||s>=55296&&s<=57343)&&(s=null))):4===a&&(u=t[i+1],f=t[i+2],c=t[i+3],128===(192&u)&&128===(192&f)&&128===(192&c)&&(s=(15&o)<<18|(63&u)<<12|(63&f)<<6|63&c,(s<=65535||s>=1114112)&&(s=null))),null===s?(s=65533,a=1):s>65535&&(s-=65536,n+=String.fromCharCode(s>>>10&1023|55296),s=56320|1023&s),n+=String.fromCharCode(s),i+=a}return n}function M(t,e,r){for(var n,i,o=0;o<e.length;o++){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}t.exports=n;var _=r(359);n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;var k=4294967296,P=1/k;n.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=S(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=b(this.buf,this.pos)+b(this.buf,this.pos+4)*k;return this.pos+=8,t},readSFixed64:function(){var t=b(this.buf,this.pos)+S(this.buf,this.pos+4)*k;return this.pos+=8,t},readFloat:function(){var t=_.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=_.read(this.buf,this.pos,!0,52,8);return this.pos+=8,
t},readVarint:function(t){var e,r,n=this.buf;return r=n[this.pos++],e=127&r,r<128?e:(r=n[this.pos++],e|=(127&r)<<7,r<128?e:(r=n[this.pos++],e|=(127&r)<<14,r<128?e:(r=n[this.pos++],e|=(127&r)<<21,r<128?e:(r=n[this.pos],e|=(15&r)<<28,i(e,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=F(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==n.Bytes)return t.push(this.readVarint(e));var r=o(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==n.Bytes)return t.push(this.readSVarint());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==n.Bytes)return t.push(this.readBoolean());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==n.Bytes)return t.push(this.readFloat());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==n.Bytes)return t.push(this.readDouble());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==n.Bytes)return t.push(this.readFixed32());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==n.Bytes)return t.push(this.readSFixed32());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==n.Bytes)return t.push(this.readFixed64());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==n.Bytes)return t.push(this.readSFixed64());var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===n.Varint)for(;this.buf[this.pos++]>127;);else if(e===n.Bytes)this.pos=this.readVarint()+this.pos;else if(e===n.Fixed32)this.pos+=4;else{if(e!==n.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),x(this.buf,t&-1,this.pos),x(this.buf,Math.floor(t*P),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),x(this.buf,t&-1,this.pos),x(this.buf,Math.floor(t*P),this.pos+4),this.pos+=8},writeVarint:function(t){return t=+t||0,t>268435455||t<0?void a(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),void(t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=M(this.buf,t,this.pos);var r=this.pos-e;r>=128&&c(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),_.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),_.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&c(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,n.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,w,e)},writeBytesField:function(t,e){this.writeTag(t,n.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,n.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,n.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,n.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},359:function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,f=u>>1,c=-7,h=r?i-1:0,l=r?-1:1,p=t[e+h];for(h+=l,o=p&(1<<-c)-1,p>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=l,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+h],h+=l,c-=8);if(0===o)o=1-f;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,n),o-=f}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,f=8*o-i-1,c=(1<<f)-1,h=c>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?l/u:l*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;t[r+p]=255&s,p+=d,s/=256,f-=8);t[r+p-d]|=128*y}},360:function(t,e,r){t.exports.VectorTile=r(361),t.exports.VectorTileFeature=r(363),t.exports.VectorTileLayer=r(362)},361:function(t,e,r){"use strict";function n(t,e){this.layers=t.readFields(i,{},e)}function i(t,e,r){if(3===t){var n=new o(r,r.readVarint()+r.pos);n.length&&(e[n.name]=n)}}var o=r(362);t.exports=n},362:function(t,e,r){"use strict";function n(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,e),this.length=this._features.length}function i(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(o(r))}function o(t){for(var e=null,r=t.readVarint()+t.pos;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}var s=r(363);t.exports=n,n.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new s(this._pbf,e,this.extent,this._keys,this._values)}},363:function(t,e,r){"use strict";function n(t,e,r,n,o){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=o,t.readFields(i,this,e)}function i(t,e,r){1==t?e.id=r.readVarint():2==t?o(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function o(t,e){for(var r=t.readVarint()+t.pos;t.pos<r;){var n=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[n]=i}}function s(t){var e=t.length;if(e<=1)return[t];for(var r,n,i=[],o=0;o<e;o++){var s=a(t[o]);0!==s&&(void 0===n&&(n=s<0),n===s<0?(r&&i.push(r),r=[t[o]]):r.push(t[o]))}return r&&i.push(r),i}function a(t){for(var e,r,n=0,i=0,o=t.length,s=o-1;i<o;s=i++)e=t[i],r=t[s],n+=(r.x-e.x)*(e.y+r.y);return n}var u=r(364);t.exports=n,n.types=["Unknown","Point","LineString","Polygon"],n.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,n=1,i=0,o=0,s=0,a=[];t.pos<r;){if(i<=0){var f=t.readVarint();n=7&f,i=f>>3}if(i--,1===n||2===n)o+=t.readSVarint(),s+=t.readSVarint(),1===n&&(e&&a.push(e),e=[]),e.push(new u(o,s));else{if(7!==n)throw new Error("unknown command "+n);e&&e.push(e[0].clone())}}return e&&a.push(e),a},n.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,i=0,o=0,s=1/0,a=-(1/0),u=1/0,f=-(1/0);t.pos<e;){if(n<=0){var c=t.readVarint();r=7&c,n=c>>3}if(n--,1===r||2===r)i+=t.readSVarint(),o+=t.readSVarint(),i<s&&(s=i),i>a&&(a=i),o<u&&(u=o),o>f&&(f=o);else if(7!==r)throw new Error("unknown command "+r)}return[s,u,a,f]},n.prototype.toGeoJSON=function(t,e,r){function i(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+c)/u;t[e]=[360*(r.x+f)/u-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}var o,a,u=this.extent*Math.pow(2,r),f=this.extent*t,c=this.extent*e,h=this.loadGeometry(),l=n.types[this.type];switch(this.type){case 1:var p=[];for(o=0;o<h.length;o++)p[o]=h[o][0];h=p,i(h);break;case 2:for(o=0;o<h.length;o++)i(h[o]);break;case 3:for(h=s(h),o=0;o<h.length;o++)for(a=0;a<h[o].length;a++)i(h[o][a])}1===h.length?h=h[0]:l="Multi"+l;var d={type:"Feature",geometry:{type:l,coordinates:h},properties:this.properties};return"id"in this&&(d.id=this.id),d}},364:function(t,e){"use strict";function r(t,e){this.x=t,this.y=e}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,i=r*this.x+e*this.y;return this.x=n,this.y=i,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),i=e.x+r*(this.x-e.x)-n*(this.y-e.y),o=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},368:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=t.url,r=t.responseType,n=void 0===r?"json":r,i=function(){return(0,s.default)({url:e,responseType:n}).then(function(t){var e=t.data;return e})};return i()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var o=r(328),s=n(o)},370:function(t,e){"use strict";function r(t,e){return t.replace(n,function(t,r){var n=e[r];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n=/\{ *([\w_-]+) *\}/g},371:function(t,e){"use strict";function r(t){return n+" "+t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var n="▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨▨ "},372:function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(e=e||30,e>f)return void console.log(t);if((0,u.default)(t))for(var r in t)console.log(r,t[r]),console.group(r+" : "+s(t[r])),i(t[r],e+1),console.groupEnd();else console.log(t)}function o(t,e){return JSON.stringify(t,null,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=e.expandedLog=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=r(373),u=n(a),f=100;e.expandedLog=i,e.stringify=o},373:function(t,e){"use strict";function r(t){return null!=t&&"object"===("undefined"==typeof t?"undefined":n(t))&&Array.isArray(t)===!1}Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=r}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vbG9hZC5qcyIsIndlYnBhY2s6Ly8vLi9tYXAvcGJmL2xvYWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbWFwL3BiZi9sb2FkL0FwcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2F4aW9zLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL3V0aWxzLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2hlbHBlcnMvYmluZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2lzLWJ1ZmZlci9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9jb3JlL0F4aW9zLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2hlbHBlcnMvYnVpbGRVUkwuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS9JbnRlcmNlcHRvck1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS9kaXNwYXRjaFJlcXVlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS90cmFuc2Zvcm1EYXRhLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NhbmNlbC9pc0NhbmNlbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9kZWZhdWx0cy5qcyIsIndlYnBhY2s6Ly8vLi9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvYWRhcHRlcnMveGhyLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvc2V0dGxlLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvY3JlYXRlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY29yZS9lbmhhbmNlRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9wYXJzZUhlYWRlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9pc1VSTFNhbWVPcmlnaW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9jb29raWVzLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2hlbHBlcnMvaXNBYnNvbHV0ZVVSTC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2NvbWJpbmVVUkxzLmpzIiwid2VicGFjazovLy8uL34vYXhpb3MvbGliL2NvcmUvbWVyZ2VDb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvY2FuY2VsL0NhbmNlbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9heGlvcy9saWIvaGVscGVycy9zcHJlYWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9nZW9idWYvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9nZW9idWYvZW5jb2RlLmpzIiwid2VicGFjazovLy8uL34vZ2VvYnVmL2RlY29kZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3BiZi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2llZWU3NTQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9AbWFwYm94L3ZlY3Rvci10aWxlL2luZGV4LmpzIiwid2VicGFjazovLy8uL34vQG1hcGJveC92ZWN0b3ItdGlsZS9saWIvdmVjdG9ydGlsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L0BtYXBib3gvdmVjdG9yLXRpbGUvbGliL3ZlY3RvcnRpbGVsYXllci5qcyIsIndlYnBhY2s6Ly8vLi9+L0BtYXBib3gvdmVjdG9yLXRpbGUvbGliL3ZlY3RvcnRpbGVmZWF0dXJlLmpzIiwid2VicGFjazovLy8uL34vQG1hcGJveC9wb2ludC1nZW9tZXRyeS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbmV0L3JlcXVlc3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0cmluZy90ZW1wbGF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29uc29sZS9nZXRUaW1lTGFiZWwuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnNvbGUvZXhwYW5kZWRMb2cuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZhbGlkYXRlL2lzb2JqZWN0LmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucCIsIjAiLCJtb2R1bGUiLCJleHBvcnRzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJpIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiX0FwcCIsIl9BcHAyIiwiX0tleUNvZGUiLCJfS2V5Q29kZTIiLCJ3aW5kb3ciLCJvbmxvYWQiLCJNYWluIiwidGhpcyIsImluaXQiLCJhZGRFdmVudCIsIm9ucmVzaXplIiwidmFsdWUiLCJhcHAiLCJBcHAiLCJiaW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9ua2V5dXAiLCJvbmtleWRvd24iLCJyZXNpemUiLCJ0aGVBcmciLCJmdW5jIiwiaW50ZXJ2YWxGdW5jIiwiYXBwbHkiLCJwYXJhbXMiLCJjbGVhclRpbWVvdXQiLCJrZXlJbnRlcnZhbElkIiwic2V0VGltZW91dCIsIl9sZW4iLCJhcmd1bWVudHMiLCJBcnJheSIsIl9rZXkiLCJldmVudCIsImtleUNvZGUiLCJLZXlDb2RlIiwiVVAiLCJnZXRJbnRlcnZhbEZ1bmN0aW9uIiwibW92ZUNhbWVyYSIsIkRPV04iLCJMRUZUIiwiUklHSFQiLCJQQUdFX1VQIiwiUEFHRV9ET1dOIiwiTlVNQkVSXzQiLCJyb3RhdGVXb3JsZCIsIk5VTUJFUl82IiwiTlVNQkVSXzgiLCJOVU1CRVJfMiIsIk5VTUJFUl83IiwiTlVNQkVSXzEiLCJOVU1CRVJfOSIsIk5VTUJFUl8zIiwiTlVNUEFEX0FERCIsInpvb21JbiIsIk5VTVBBRF9TVUJUUkFDVCIsInpvb21PdXQiLCJOVU1QQURfRU5URVIiLCJOVU1CRVJfMCIsInJlc2V0IiwiVyIsIlMiLCJBIiwiRCIsIkVTQ0FQRSIsImNvbnNvbGUiLCJjbGVhciIsIlNQQUNFIiwiZ3VpIiwiY2xvc2VkIiwib3BlbiIsImNsb3NlIiwiY2xlYXJJbnRlckZ1bmN0aW9uIiwiQkFDS1NQQUNFIiwiMzI3IiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJzb3VyY2UiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJfYXhpb3MiLCJfZ2VvYnVmIiwiX2dlb2J1ZjIiLCJfcGJmIiwiX3BiZjIiLCJfcmVxdWVzdCIsIl9yZXF1ZXN0MiIsIl90ZW1wbGF0ZSIsIl90ZW1wbGF0ZTIiLCJfZ2V0VGltZUxhYmVsIiwiX2dldFRpbWVMYWJlbDIiLCJfdmVjdG9yVGlsZSIsInh5eiIsIngiLCJ5IiwieiIsInVybHMiLCJidXMiLCJwb2lfd2ViIiwicG9pNG9zbSIsImNjdHYiLCJvem9uZSIsInByb3AiLCJ0ZXN0UGJmIiwidGVzdE96b25lIiwidXJsIiwidGltZUxhYmVsIiwiX3RoaXMiLCJ0aW1lIiwicmVzcG9uc2VUeXBlIiwidGhlbiIsImJ1ZmZlciIsInRpbWVFbmQiLCJ0aWxlIiwiVmVjdG9yVGlsZSIsIlByb3RvQnVmIiwibG9nIiwiY29sbGVjdGlvbiIsImdldEZlYXR1cmVzIiwiZmVhdHVyZXMiLCJ0eXBlIiwiZ2VvYnVmIiwiZGVjb2RlIiwibGF5ZXJzIiwia2V5cyIsImlzQXJyYXkiLCJmb3JFYWNoIiwibGF5ZXJJRCIsImxheWVyIiwibGVuIiwiZmVhdHVyZSIsInRvR2VvSlNPTiIsInByb3BlcnRpZXMiLCJwdXNoIiwiMzI4IiwiMzI5IiwiY3JlYXRlSW5zdGFuY2UiLCJkZWZhdWx0Q29uZmlnIiwiY29udGV4dCIsIkF4aW9zIiwicmVxdWVzdCIsInV0aWxzIiwiZXh0ZW5kIiwibWVyZ2VDb25maWciLCJkZWZhdWx0cyIsImF4aW9zIiwiY3JlYXRlIiwiaW5zdGFuY2VDb25maWciLCJDYW5jZWwiLCJDYW5jZWxUb2tlbiIsImlzQ2FuY2VsIiwiYWxsIiwicHJvbWlzZXMiLCJQcm9taXNlIiwic3ByZWFkIiwiMzMwIiwidmFsIiwidG9TdHJpbmciLCJpc0FycmF5QnVmZmVyIiwiaXNGb3JtRGF0YSIsIkZvcm1EYXRhIiwiaXNBcnJheUJ1ZmZlclZpZXciLCJyZXN1bHQiLCJBcnJheUJ1ZmZlciIsImlzVmlldyIsImlzU3RyaW5nIiwiaXNOdW1iZXIiLCJpc1VuZGVmaW5lZCIsImlzT2JqZWN0IiwiaXNEYXRlIiwiaXNGaWxlIiwiaXNCbG9iIiwiaXNGdW5jdGlvbiIsImlzU3RyZWFtIiwicGlwZSIsImlzVVJMU2VhcmNoUGFyYW1zIiwiVVJMU2VhcmNoUGFyYW1zIiwidHJpbSIsInN0ciIsInJlcGxhY2UiLCJpc1N0YW5kYXJkQnJvd3NlckVudiIsIm5hdmlnYXRvciIsInByb2R1Y3QiLCJkb2N1bWVudCIsImZuIiwibCIsIm1lcmdlIiwiYXNzaWduVmFsdWUiLCJkZWVwTWVyZ2UiLCJhIiwiYiIsInRoaXNBcmciLCJpc0J1ZmZlciIsIjMzMSIsImFyZ3MiLCIzMzIiLCJjb25zdHJ1Y3RvciIsImlzU2xvd0J1ZmZlciIsInJlYWRGbG9hdExFIiwic2xpY2UiLCJfaXNCdWZmZXIiLCIzMzMiLCJpbnRlcmNlcHRvcnMiLCJJbnRlcmNlcHRvck1hbmFnZXIiLCJyZXNwb25zZSIsImJ1aWxkVVJMIiwiZGlzcGF0Y2hSZXF1ZXN0IiwiY29uZmlnIiwibWV0aG9kIiwidG9Mb3dlckNhc2UiLCJjaGFpbiIsInVuZGVmaW5lZCIsInByb21pc2UiLCJyZXNvbHZlIiwiaW50ZXJjZXB0b3IiLCJ1bnNoaWZ0IiwiZnVsZmlsbGVkIiwicmVqZWN0ZWQiLCJzaGlmdCIsImdldFVyaSIsInBhcmFtc1NlcmlhbGl6ZXIiLCJkYXRhIiwiMzM0IiwiZW5jb2RlIiwiZW5jb2RlVVJJQ29tcG9uZW50Iiwic2VyaWFsaXplZFBhcmFtcyIsInBhcnRzIiwidiIsInRvSVNPU3RyaW5nIiwiSlNPTiIsInN0cmluZ2lmeSIsImpvaW4iLCJoYXNobWFya0luZGV4IiwiaW5kZXhPZiIsIjMzNSIsImhhbmRsZXJzIiwidXNlIiwiZWplY3QiLCJpZCIsImgiLCIzMzYiLCJ0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkIiwiY2FuY2VsVG9rZW4iLCJ0aHJvd0lmUmVxdWVzdGVkIiwidHJhbnNmb3JtRGF0YSIsImlzQWJzb2x1dGVVUkwiLCJjb21iaW5lVVJMcyIsImJhc2VVUkwiLCJoZWFkZXJzIiwidHJhbnNmb3JtUmVxdWVzdCIsImNvbW1vbiIsImFkYXB0ZXIiLCJ0cmFuc2Zvcm1SZXNwb25zZSIsInJlYXNvbiIsInJlamVjdCIsIjMzNyIsImZucyIsIjMzOCIsIl9fQ0FOQ0VMX18iLCIzMzkiLCJwcm9jZXNzIiwic2V0Q29udGVudFR5cGVJZlVuc2V0IiwiZ2V0RGVmYXVsdEFkYXB0ZXIiLCJYTUxIdHRwUmVxdWVzdCIsIm5vcm1hbGl6ZUhlYWRlck5hbWUiLCJERUZBVUxUX0NPTlRFTlRfVFlQRSIsIkNvbnRlbnQtVHlwZSIsInBhcnNlIiwiZSIsInRpbWVvdXQiLCJ4c3JmQ29va2llTmFtZSIsInhzcmZIZWFkZXJOYW1lIiwibWF4Q29udGVudExlbmd0aCIsInZhbGlkYXRlU3RhdHVzIiwic3RhdHVzIiwiQWNjZXB0IiwiMzQwIiwiZGVmYXVsdFNldFRpbW91dCIsIkVycm9yIiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJjYWNoZWRTZXRUaW1lb3V0IiwicnVuQ2xlYXJUaW1lb3V0IiwibWFya2VyIiwiY2FjaGVkQ2xlYXJUaW1lb3V0IiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5pbmciLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsImNvbmNhdCIsInF1ZXVlSW5kZXgiLCJkcmFpblF1ZXVlIiwicnVuIiwiSXRlbSIsImFycmF5Iiwibm9vcCIsIm5leHRUaWNrIiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImxpc3RlbmVycyIsIm5hbWUiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsIjM0MSIsIm5vcm1hbGl6ZWROYW1lIiwidG9VcHBlckNhc2UiLCIzNDIiLCJzZXR0bGUiLCJwYXJzZUhlYWRlcnMiLCJpc1VSTFNhbWVPcmlnaW4iLCJjcmVhdGVFcnJvciIsInJlcXVlc3REYXRhIiwicmVxdWVzdEhlYWRlcnMiLCJhdXRoIiwidXNlcm5hbWUiLCJwYXNzd29yZCIsIkF1dGhvcml6YXRpb24iLCJidG9hIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInJlc3BvbnNlVVJMIiwicmVzcG9uc2VIZWFkZXJzIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwicmVzcG9uc2VEYXRhIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzVGV4dCIsIm9uYWJvcnQiLCJvbmVycm9yIiwib250aW1lb3V0IiwiY29va2llcyIsInhzcmZWYWx1ZSIsIndpdGhDcmVkZW50aWFscyIsInJlYWQiLCJzZXRSZXF1ZXN0SGVhZGVyIiwib25Eb3dubG9hZFByb2dyZXNzIiwib25VcGxvYWRQcm9ncmVzcyIsInVwbG9hZCIsImNhbmNlbCIsImFib3J0Iiwic2VuZCIsIjM0MyIsIjM0NCIsImVuaGFuY2VFcnJvciIsIm1lc3NhZ2UiLCJjb2RlIiwiZXJyb3IiLCIzNDUiLCJpc0F4aW9zRXJyb3IiLCJ0b0pTT04iLCJkZXNjcmlwdGlvbiIsIm51bWJlciIsImZpbGVOYW1lIiwibGluZU51bWJlciIsImNvbHVtbk51bWJlciIsInN0YWNrIiwiMzQ2IiwiaWdub3JlRHVwbGljYXRlT2YiLCJwYXJzZWQiLCJzcGxpdCIsImxpbmUiLCJzdWJzdHIiLCIzNDciLCJyZXNvbHZlVVJMIiwiaHJlZiIsIm1zaWUiLCJ1cmxQYXJzaW5nTm9kZSIsInNldEF0dHJpYnV0ZSIsInByb3RvY29sIiwiaG9zdCIsInNlYXJjaCIsImhhc2giLCJob3N0bmFtZSIsInBvcnQiLCJwYXRobmFtZSIsImNoYXJBdCIsIm9yaWdpblVSTCIsInRlc3QiLCJ1c2VyQWdlbnQiLCJjcmVhdGVFbGVtZW50IiwibG9jYXRpb24iLCJyZXF1ZXN0VVJMIiwiMzQ4Iiwid3JpdGUiLCJleHBpcmVzIiwicGF0aCIsImRvbWFpbiIsInNlY3VyZSIsImNvb2tpZSIsIkRhdGUiLCJ0b0dNVFN0cmluZyIsIm1hdGNoIiwiUmVnRXhwIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicmVtb3ZlIiwibm93IiwiMzQ5IiwiMzUwIiwicmVsYXRpdmVVUkwiLCIzNTEiLCJjb25maWcxIiwiY29uZmlnMiIsIjM1MiIsIjM1MyIsImV4ZWN1dG9yIiwicmVzb2x2ZVByb21pc2UiLCJ0b2tlbiIsImMiLCIzNTQiLCJjYWxsYmFjayIsImFyciIsIjM1NSIsIjM1NiIsInBiZiIsImtleXNBcnIiLCJrZXlzTnVtIiwiZGltIiwiYW5hbHl6ZSIsIk1hdGgiLCJtaW4iLCJtYXhQcmVjaXNpb24iLCJwcmVjaXNpb24iLCJjZWlsIiwiTE4xMCIsIndyaXRlU3RyaW5nRmllbGQiLCJ3cml0ZVZhcmludEZpZWxkIiwid3JpdGVNZXNzYWdlIiwid3JpdGVGZWF0dXJlQ29sbGVjdGlvbiIsIndyaXRlRmVhdHVyZSIsIndyaXRlR2VvbWV0cnkiLCJmaW5pc2giLCJnZW9tZXRyeSIsInNhdmVLZXkiLCJhbmFseXplUG9pbnQiLCJjb29yZGluYXRlcyIsImFuYWx5emVQb2ludHMiLCJnZW9tZXRyaWVzIiwiYW5hbHl6ZU11bHRpTGluZSIsImlzU3BlY2lhbEtleSIsImNvb3JkcyIsInBvaW50IiwibWF4Iiwicm91bmQiLCJ3cml0ZVByb3BzIiwid3JpdGVTVmFyaW50RmllbGQiLCJnZW9tIiwiZ2VvbWV0cnlUeXBlcyIsIndyaXRlUG9pbnQiLCJ3cml0ZUxpbmUiLCJ3cml0ZU11bHRpTGluZSIsIndyaXRlTXVsdGlQb2x5Z29uIiwiaXNDdXN0b20iLCJpbmRleGVzIiwidmFsdWVJbmRleCIsIndyaXRlVmFsdWUiLCJ3cml0ZVBhY2tlZFZhcmludCIsIndyaXRlQm9vbGVhbkZpZWxkIiwid3JpdGVEb3VibGVGaWVsZCIsIndyaXRlUGFja2VkU1ZhcmludCIsInBvcHVsYXRlTGluZSIsImxpbmVzIiwibGVuZ3RocyIsInBvbHlnb25zIiwiaiIsInN1bSIsIm4iLCJQb2ludCIsIk11bHRpUG9pbnQiLCJMaW5lU3RyaW5nIiwiTXVsdGlMaW5lU3RyaW5nIiwiUG9seWdvbiIsIk11bHRpUG9seWdvbiIsIkdlb21ldHJ5Q29sbGVjdGlvbiIsIjM1NyIsInBvdyIsInZhbHVlcyIsInJlYWRGaWVsZHMiLCJyZWFkRGF0YUZpZWxkIiwidGFnIiwicmVhZFN0cmluZyIsInJlYWRWYXJpbnQiLCJyZWFkRmVhdHVyZUNvbGxlY3Rpb24iLCJyZWFkRmVhdHVyZSIsInJlYWRHZW9tZXRyeSIsInJlYWRNZXNzYWdlIiwicmVhZEZlYXR1cmVDb2xsZWN0aW9uRmllbGQiLCJmIiwicmVhZEZlYXR1cmVGaWVsZCIsInJlYWRHZW9tZXRyeUZpZWxkIiwicmVhZFZhbHVlIiwicmVhZFByb3BzIiwicmVhZFNWYXJpbnQiLCJyZWFkUGFja2VkVmFyaW50IiwicmVhZENvb3JkcyIsInJlYWRQb2ludCIsInJlYWRMaW5lIiwicmVhZE11bHRpTGluZSIsInJlYWRNdWx0aVBvbHlnb24iLCJlbmQiLCJwb3MiLCJyZWFkRG91YmxlIiwicmVhZEJvb2xlYW4iLCJyZWFkTGluZVBhcnQiLCJwIiwiZCIsInByZXZQIiwicmluZ3MiLCJrIiwiMzU4IiwiUGJmIiwiYnVmIiwiVWludDhBcnJheSIsInJlYWRWYXJpbnRSZW1haW5kZXIiLCJzIiwidG9OdW0iLCJyZWFkUGFja2VkRW5kIiwiQnl0ZXMiLCJsb3ciLCJoaWdoIiwiaXNTaWduZWQiLCJ3cml0ZUJpZ1ZhcmludCIsInJlYWxsb2MiLCJ3cml0ZUJpZ1ZhcmludExvdyIsIndyaXRlQmlnVmFyaW50SGlnaCIsImxzYiIsIm1ha2VSb29tRm9yRXh0cmFMZW5ndGgiLCJzdGFydFBvcyIsImV4dHJhTGVuIiwiZmxvb3IiLCJMTjIiLCJ3cml0ZVZhcmludCIsIndyaXRlU1ZhcmludCIsIndyaXRlUGFja2VkRmxvYXQiLCJ3cml0ZUZsb2F0Iiwid3JpdGVQYWNrZWREb3VibGUiLCJ3cml0ZURvdWJsZSIsIndyaXRlUGFja2VkQm9vbGVhbiIsIndyaXRlQm9vbGVhbiIsIndyaXRlUGFja2VkRml4ZWQzMiIsIndyaXRlRml4ZWQzMiIsIndyaXRlUGFja2VkU0ZpeGVkMzIiLCJ3cml0ZVNGaXhlZDMyIiwid3JpdGVQYWNrZWRGaXhlZDY0Iiwid3JpdGVGaXhlZDY0Iiwid3JpdGVQYWNrZWRTRml4ZWQ2NCIsIndyaXRlU0ZpeGVkNjQiLCJyZWFkVUludDMyIiwid3JpdGVJbnQzMiIsInJlYWRJbnQzMiIsInJlYWRVdGY4IiwiYjAiLCJieXRlc1BlclNlcXVlbmNlIiwiYjEiLCJiMiIsImIzIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwid3JpdGVVdGY4IiwibGVhZCIsImNoYXJDb2RlQXQiLCJpZWVlNzU0IiwiVmFyaW50IiwiRml4ZWQ2NCIsIkZpeGVkMzIiLCJTSElGVF9MRUZUXzMyIiwiU0hJRlRfUklHSFRfMzIiLCJkZXN0cm95IiwicmVhZEZpZWxkIiwic2tpcCIsInJlYWRGaXhlZDMyIiwicmVhZFNGaXhlZDMyIiwicmVhZEZpeGVkNjQiLCJyZWFkU0ZpeGVkNjQiLCJyZWFkRmxvYXQiLCJyZWFkVmFyaW50NjQiLCJudW0iLCJCb29sZWFuIiwicmVhZEJ5dGVzIiwic3ViYXJyYXkiLCJyZWFkUGFja2VkU1ZhcmludCIsInJlYWRQYWNrZWRCb29sZWFuIiwicmVhZFBhY2tlZEZsb2F0IiwicmVhZFBhY2tlZERvdWJsZSIsInJlYWRQYWNrZWRGaXhlZDMyIiwicmVhZFBhY2tlZFNGaXhlZDMyIiwicmVhZFBhY2tlZEZpeGVkNjQiLCJyZWFkUGFja2VkU0ZpeGVkNjQiLCJ3cml0ZVRhZyIsInNldCIsIndyaXRlU3RyaW5nIiwid3JpdGVCeXRlcyIsIndyaXRlUmF3TWVzc2FnZSIsIndyaXRlQnl0ZXNGaWVsZCIsIndyaXRlRml4ZWQzMkZpZWxkIiwid3JpdGVTRml4ZWQzMkZpZWxkIiwid3JpdGVGaXhlZDY0RmllbGQiLCJ3cml0ZVNGaXhlZDY0RmllbGQiLCJ3cml0ZUZsb2F0RmllbGQiLCIzNTkiLCJvZmZzZXQiLCJpc0xFIiwibUxlbiIsIm5CeXRlcyIsIm0iLCJlTGVuIiwiZU1heCIsImVCaWFzIiwibkJpdHMiLCJOYU4iLCJJbmZpbml0eSIsInJ0IiwiYWJzIiwiaXNOYU4iLCIzNjAiLCJWZWN0b3JUaWxlRmVhdHVyZSIsIlZlY3RvclRpbGVMYXllciIsIjM2MSIsInJlYWRUaWxlIiwiMzYyIiwiZXh0ZW50IiwiX2tleXMiLCJfdmFsdWVzIiwiX2ZlYXR1cmVzIiwicmVhZExheWVyIiwicmVhZFZhbHVlTWVzc2FnZSIsIjM2MyIsIl9nZW9tZXRyeSIsInJlYWRUYWciLCJjbGFzc2lmeVJpbmdzIiwicG9seWdvbiIsImNjdyIsImFyZWEiLCJzaWduZWRBcmVhIiwicmluZyIsInAxIiwicDIiLCJ0eXBlcyIsImxvYWRHZW9tZXRyeSIsImNtZCIsImNtZExlbiIsImNsb25lIiwiYmJveCIsIngxIiwieDIiLCJ5MSIsInkyIiwicHJvamVjdCIsInkwIiwic2l6ZSIsIngwIiwiUEkiLCJhdGFuIiwiZXhwIiwicG9pbnRzIiwiMzY0IiwiYWRkIiwiX2FkZCIsInN1YiIsIl9zdWIiLCJtdWx0QnlQb2ludCIsIl9tdWx0QnlQb2ludCIsImRpdkJ5UG9pbnQiLCJfZGl2QnlQb2ludCIsIm11bHQiLCJfbXVsdCIsImRpdiIsIl9kaXYiLCJyb3RhdGUiLCJfcm90YXRlIiwicm90YXRlQXJvdW5kIiwiX3JvdGF0ZUFyb3VuZCIsIm1hdE11bHQiLCJfbWF0TXVsdCIsInVuaXQiLCJfdW5pdCIsInBlcnAiLCJfcGVycCIsIl9yb3VuZCIsIm1hZyIsInNxcnQiLCJlcXVhbHMiLCJvdGhlciIsImRpc3QiLCJkaXN0U3FyIiwiZHgiLCJkeSIsImFuZ2xlIiwiYXRhbjIiLCJhbmdsZVRvIiwiYW5nbGVXaXRoIiwiYW5nbGVXaXRoU2VwIiwiY29zIiwic2luIiwiY29udmVydCIsIjM2OCIsIl9yZWYiLCJfcmVmJHJlc3BvbnNlVHlwZSIsImZldGNoRGF0YSIsIl9heGlvczIiLCJfcmVmMiIsIjM3MCIsInRlbXBsYXRlIiwidGVtcGxhdGVSZSIsIjM3MSIsImdldFRpbWVMYWJlbCIsImxhYmVsIiwidGltZUxhYmVsUHJlZml4IiwiMzcyIiwiZXhwYW5kZWRMb2ciLCJpdGVtIiwiZGVwdGgiLCJNQVhfREVQVEgiLCJfaXNvYmplY3QyIiwiZ3JvdXAiLCJfdHlwZW9mIiwiZ3JvdXBFbmQiLCJvYmplY3QiLCJzcGFjZSIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiX2lzb2JqZWN0IiwiMzczIl0sIm1hcHBpbmdzIjoiQUFBQUEsY0FBYyxJQUVSQyxFQUNBLFNBQVVDLEVBQVFDLEVBQVNDLEdBRWhDLFlBY0EsU0FBU0MsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsUUFBU0YsR0FFdkYsUUFBU0csR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FkaEgsR0FBSUMsR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0Ys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LFFBQVMvZSxHQUFVc2YsRUFBUUMsR0FDekIsTUFBT3hmLE1BQUtDLFVBQVVzZixFQUFRLEtBQU1DLEczQ3MvSHJDanVCLE9BQU9DLGVBQWVyQixFQUFTLGNBQzdCcUMsT0FBTyxJQUVUckMsRUFBUThQLFVBQVk5UCxFQUFRNHVCLFlBQWNqZ0IsTUFFMUMsSUFBSXVnQixHQUE0QixrQkFBWEksU0FBb0QsZ0JBQXBCQSxRQUFPQyxTQUF3QixTQUFVcHZCLEdBQU8sYUFBY0EsSUFBUyxTQUFVQSxHQUFPLE1BQU9BLElBQXlCLGtCQUFYbXZCLFNBQXlCbnZCLEVBQUl5TixjQUFnQjBoQixRQUFVbnZCLElBQVFtdkIsT0FBTzd0QixVQUFZLGVBQWtCdEIsSTJDcGhJdlFxdkIsRUFBQXZ2QixFQUFBLEszQ3doSUsrdUIsRUFBYTl1QixFQUF1QnN2QixHMkN0aElyQ1QsRUFBWSxHM0NvaklmL3VCLEcyQ3poSUM0dUIsYzNDMGhJRDV1QixFMkN6aElDOFAsYTNDNmhJSTJmLElBQ0EsU0FBVTF2QixFQUFRQyxHQUV2QixZNEM3akljLFNBQVNnTSxHQUFTWixHQUMvQixNQUFjLE9BQVBBLEdBQThCLFlBQWYsbUJBQU9BLEdBQVAsWUFBQThqQixFQUFPOWpCLEtBQW9CN0gsTUFBTThGLFFBQVErQixNQUFTLEU1QzhqSXpFaEssT0FBT0MsZUFBZXJCLEVBQVMsY0FDN0JxQyxPQUFPLEdBR1QsSUFBSTZzQixHQUE0QixrQkFBWEksU0FBb0QsZ0JBQXBCQSxRQUFPQyxTQUF3QixTQUFVcHZCLEdBQU8sYUFBY0EsSUFBUyxTQUFVQSxHQUFPLE1BQU9BLElBQXlCLGtCQUFYbXZCLFNBQXlCbnZCLEVBQUl5TixjQUFnQjBoQixRQUFVbnZCLElBQVFtdkIsT0FBTzd0QixVQUFZLGVBQWtCdEIsR0FFdFFILEdBQVFLLFE0Q3JrSWUyTCIsImZpbGUiOiJsb2FkLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2VicGFja0pzb25wKFswXSx7XG5cbi8qKiovIDA6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHR2YXIgX0FwcCA9IF9fd2VicGFja19yZXF1aXJlX18oMzI3KTtcblx0XG5cdHZhciBfQXBwMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX0FwcCk7XG5cdFxuXHR2YXIgX0tleUNvZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NSk7XG5cdFxuXHR2YXIgX0tleUNvZGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfS2V5Q29kZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBtYWluID0gbmV3IE1haW4oKTtcblx0ICAgIH07XG5cdH0pKCk7XG5cdFxuXHR2YXIgTWFpbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIE1haW4oKSB7XG5cdCAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1haW4pO1xuXHRcblx0ICAgICAgICB0aGlzLmluaXQoKTtcblx0ICAgICAgICB0aGlzLmFkZEV2ZW50KCk7XG5cdCAgICAgICAgdGhpcy5vbnJlc2l6ZSgpO1xuXHQgICAgfVxuXHRcblx0ICAgIF9jcmVhdGVDbGFzcyhNYWluLCBbe1xuXHQgICAgICAgIGtleTogJ2luaXQnLFxuXHQgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KCkge1xuXHQgICAgICAgICAgICB0aGlzLmFwcCA9IG5ldyBfQXBwMi5kZWZhdWx0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2FkZEV2ZW50Jyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkRXZlbnQoKSB7XG5cdCAgICAgICAgICAgIHdpbmRvdy5vbnJlc2l6ZSA9IHRoaXMub25yZXNpemUuYmluZCh0aGlzKTtcblx0ICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5vbmtleXVwLmJpbmQodGhpcykpO1xuXHQgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMub25rZXlkb3duLmJpbmQodGhpcykpO1xuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdvbnJlc2l6ZScsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9ucmVzaXplKCkge1xuXHQgICAgICAgICAgICB0aGlzLmFwcC5yZXNpemUoKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqXG5cdCAgICAgICAgICogQHBhcmFtIGZ1bmMge0Z1bmN0aW9ufVxuXHQgICAgICAgICAqIEBwYXJhbSBwYXJhbXNcblx0ICAgICAgICAgKiBAcmV0dXJucyB7aW50ZXJ2YWxGdW5jfVxuXHQgICAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdnZXRJbnRlcnZhbEZ1bmN0aW9uJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGVBcmcsIGZ1bmMpIHtcblx0ICAgICAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHBhcmFtcyA9IEFycmF5KF9sZW4gPiAyID8gX2xlbiAtIDIgOiAwKSwgX2tleSA9IDI7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0ICAgICAgICAgICAgICAgIHBhcmFtc1tfa2V5IC0gMl0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgIGZ1bmN0aW9uIGludGVydmFsRnVuYygpIHtcblx0ICAgICAgICAgICAgICAgIGZ1bmMuYXBwbHkodGhlQXJnLCBwYXJhbXMpO1xuXHQgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMua2V5SW50ZXJ2YWxJZCk7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmtleUludGVydmFsSWQgPSBzZXRUaW1lb3V0KGludGVydmFsRnVuYy5iaW5kKHRoaXMpLCAyMDApO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICByZXR1cm4gaW50ZXJ2YWxGdW5jLmJpbmQodGhpcyk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ2NsZWFySW50ZXJGdW5jdGlvbicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFySW50ZXJGdW5jdGlvbigpIHtcblx0ICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMua2V5SW50ZXJ2YWxJZCk7XG5cdCAgICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICAgIGtleTogJ29ua2V5ZG93bicsXG5cdCAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9ua2V5ZG93bihldmVudCkge1xuXHQgICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuVVA6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5tb3ZlQ2FtZXJhLCAneScsIC0xKSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5ET1dOOlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAubW92ZUNhbWVyYSwgJ3knLCAxKSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5MRUZUOlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAubW92ZUNhbWVyYSwgJ3gnLCAtMSkoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuUklHSFQ6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5tb3ZlQ2FtZXJhLCAneCcsIDEpKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LlBBR0VfVVA6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5tb3ZlQ2FtZXJhLCAneicsIDEpKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LlBBR0VfRE9XTjpcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLm1vdmVDYW1lcmEsICd6JywgLTEpKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0Lk5VTUJFUl80OlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd5JywgLTAuMDEpKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0Lk5VTUJFUl82OlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd5JywgMC4wMSkoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNQkVSXzg6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5yb3RhdGVXb3JsZCwgJ3gnLCAtMC4wMSkoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNQkVSXzI6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5yb3RhdGVXb3JsZCwgJ3gnLCAwLjAxKSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1CRVJfNzpcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLnJvdGF0ZVdvcmxkLCAneicsIC0wLjAxKSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1CRVJfMTpcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLnJvdGF0ZVdvcmxkLCAneicsIDAuMDEpKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0Lk5VTUJFUl85OlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd6JywgLTAuMDEpKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0Lk5VTUJFUl8zOlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd6JywgMC4wMSkoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNUEFEX0FERDpcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC56b29tSW4oKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNUEFEX1NVQlRSQUNUOlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLnpvb21PdXQoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNUEFEX0VOVEVSOlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLnpvb21PdXQoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNQkVSXzA6XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAucmVzZXQoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuVzpcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuUzpcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuQTpcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuRDpcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAgICBrZXk6ICdvbmtleXVwJyxcblx0ICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25rZXl1cChldmVudCkge1xuXHQgICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuRVNDQVBFOlxuXHQgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuY2xlYXIoKTtcblx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcblx0XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LlNQQUNFOlxuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmFwcC5ndWkuY2xvc2VkKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLmd1aS5vcGVuKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAuZ3VpLmNsb3NlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXHRcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuVVA6XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LkRPV046XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LkxFRlQ6XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0LlJJR0hUOlxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5QQUdFX1VQOlxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5QQUdFX0RPV046XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0Lk5VTUJFUl80OlxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1CRVJfNjpcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNQkVSXzg6XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0Lk5VTUJFUl8yOlxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1CRVJfNzpcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNQkVSXzE6XG5cdCAgICAgICAgICAgICAgICBjYXNlIF9LZXlDb2RlMi5kZWZhdWx0Lk5VTUJFUl85OlxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5OVU1CRVJfMzpcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNUEFEX0FERDpcblx0ICAgICAgICAgICAgICAgIGNhc2UgX0tleUNvZGUyLmRlZmF1bHQuTlVNUEFEX1NVQlRSQUNUOlxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5XOlxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5TOlxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5BOlxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5EOlxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJJbnRlckZ1bmN0aW9uKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdFxuXHQgICAgICAgICAgICAgICAgY2FzZSBfS2V5Q29kZTIuZGVmYXVsdC5CQUNLU1BBQ0U6XG5cdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICB9XSk7XG5cblx0ICAgIHJldHVybiBNYWluO1xuXHR9KCk7XG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMjc6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9O1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdHZhciBfYXhpb3MgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMyOCk7XG5cdFxuXHR2YXIgX2F4aW9zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F4aW9zKTtcblx0XG5cdHZhciBfZ2VvYnVmID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNTUpO1xuXHRcblx0dmFyIF9nZW9idWYyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2VvYnVmKTtcblx0XG5cdHZhciBfcGJmID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNTgpO1xuXHRcblx0dmFyIF9wYmYyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcGJmKTtcblx0XG5cdHZhciBfcmVxdWVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzY4KTtcblx0XG5cdHZhciBfcmVxdWVzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yZXF1ZXN0KTtcblx0XG5cdHZhciBfdGVtcGxhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3MCk7XG5cdFxuXHR2YXIgX3RlbXBsYXRlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RlbXBsYXRlKTtcblx0XG5cdHZhciBfZ2V0VGltZUxhYmVsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNzEpO1xuXHRcblx0dmFyIF9nZXRUaW1lTGFiZWwyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0VGltZUxhYmVsKTtcblx0XG5cdHZhciBfZXhwYW5kZWRMb2cgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3Mik7XG5cdFxuXHR2YXIgX3ZlY3RvclRpbGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2MCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdC8qKlxuXHQgKiDslYTrnpgg7KO87IaM7J2YIHBiZuulvCDsvZTrp4zrj4TsnZgg7Iqk7YOA7J287J2EIOyngeygkSDrgrTroKTrsJvslYTshJwg7YyM7Iux7ZWcIOqyg+qzvCDsmKTsobTsnZgg6rKD7J2EIOuwm+yVhOyEnCDtmZXsnbgg7ZWp64uI64ukLlxuXHQgKiBodHRwczovL21hcC5uYXZlci5jb20vdjUvP2M9MTQxNDk2NzIuNzM3ODgxNyw0NDkxMTk5LjcyMTk5NTAsMTUsMCwwLDAsZGhcblx0ICog6re466as6rOgIOuwm+qzoCDtjIzsi7HtlZjripQg67mE7JqpIOqwnOyCsOydhCDtlanri4jri6QuXG5cdCAqL1xuXHR2YXIgeHl6ID0geyB4OiAyNzk1MywgeTogMTI3MTEsIHo6IDE1IH07XG5cdHZhciB1cmxzID0ge1xuXHQgIGJ1czogJ2h0dHBzOi8vbWFwLnBzdGF0aWMubmV0L252Yi93bXRzL2J1cy9kMmUzNjRjOS1iNzVlLTRmZDctODAyMC1jNGIyNmY4MmI5Y2UvZ2V0VGlsZS97eH0ve3l9L3t6fS9wYmYnLFxuXHQgIHBvaV93ZWI6ICdodHRwczovL21hcC5wc3RhdGljLm5ldC9udmIvd210cy9wb2lfd2ViLzhmZTY4ODNlLTU1MjUtNDVmOC04ZjU1LTVlMzBiYzQ5ODFmMS9nZXRUaWxlL3t4fS97eX0ve3p9L3BiZicsXG5cdCAgcG9pNG9zbTogJ2h0dHBzOi8vbWFwLnBzdGF0aWMubmV0L252YnBjL3dtdHMvb3NtX25hdmVyX3BvaS81NjUzZTc1Ny05YmYxLTRhMmUtYjIwZi04NmJiNGMwYjk5MTIvZ2V0VGlsZS97eH0ve3l9L3t6fS9wYmYnLFxuXHQgIGNjdHY6ICdodHRwczovL21hcC5wc3RhdGljLm5ldC9udmJwYy93bXRzL2NjdHYvYWI1MGIyNmMtODQyZC00YmU1LThiMGMtNDYwMTlmNWU3OWExL2dldFRpbGUve3h9L3t5fS97en0vcGJmJyxcblx0ICBvem9uZTogJ2h0dHBzOi8vbWFwLnBzdGF0aWMubmV0L296b25lL3BiZi9nZW9qc29uL1BPST8nICsgJ3g9JyArIHh5ei54ICsgJyYnICsgJ3k9JyArIHh5ei55ICsgJyAmJyArICd6PScgKyB4eXoueiArICcmJyArICduYW1lPW9zbV9uYXZlcl9wb2kmJyArICd2ZXJzaW9uQ29kZT01NjUzZTc1Ny05YmYxLTRhMmUtYjIwZi04NmJiNGMwYjk5MTImJyArICdwaXhlbFJhdGlvPTImJyArICdpbWFnZVR5cGU9c3ByaXRlJicgKyAnbGFuZ3VhZ2U9a28mJyArICdtYXBUeXBlPU5PUk1BTCYnICsgJ3F1YWxpdHk9bm9ybWFsJ1xuXHR9O1xuXHRcblx0Zm9yICh2YXIgcHJvcCBpbiB1cmxzKSB7XG5cdCAgdXJsc1twcm9wXSA9ICgwLCBfdGVtcGxhdGUyLmRlZmF1bHQpKHVybHNbcHJvcF0sIHh5eik7XG5cdH1cblx0XG5cdHZhciBBcHAgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gQXBwKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEFwcCk7XG5cdFxuXHQgICAgLy8gdGhpcy50ZXN0UGJmKHVybHMuYnVzLCAnYnVzJyk7XG5cdCAgICAvLyB0aGlzLnRlc3RQYmYodXJscy5jY3R2LCAnY2N0dicpO1xuXHQgICAgdGhpcy50ZXN0UGJmKHVybHMucG9pX3dlYiwgJ3BvaV93ZWInKTtcblx0ICAgIHRoaXMudGVzdFBiZih1cmxzLnBvaTRvc20sICdwb2k0b3NtJyk7XG5cdCAgICB0aGlzLnRlc3RPem9uZSh1cmxzLm96b25lLCAnb3pvbmUnKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhBcHAsIFt7XG5cdCAgICBrZXk6ICdwYXJzZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGFyc2UoKSB7XG5cdCAgICAgIC8vIGNvbnN0IHBiZiA9IG5ldyBQYmYobmV3IFVpbnQ4QXJyYXkocmVzcG9uc2UpKTtcblx0ICAgICAgLy8gY29uc3QgdGlsZSA9IG5ldyBWZWN0b3JUaWxlKHBiZik7XG5cdCAgICAgIC8vIGNvbnN0IHRpbGUgPSBuZXcgVmVjdG9yVGlsZShuZXcgUHJvdG9CdWYoYnVmZmVyKSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAndGVzdFBiZicsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdGVzdFBiZih1cmwsIHRpbWVMYWJlbCkge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgY29uc29sZS50aW1lKCgwLCBfZ2V0VGltZUxhYmVsMi5kZWZhdWx0KSh0aW1lTGFiZWwgKyAnIFxcdUI4NUNcXHVCNERDJykpO1xuXHQgICAgICAoMCwgX3JlcXVlc3QyLmRlZmF1bHQpKHtcblx0ICAgICAgICB1cmw6IHVybCxcblx0ICAgICAgICByZXNwb25zZVR5cGU6ICdhcnJheWJ1ZmZlcidcblx0ICAgICAgfSkudGhlbihmdW5jdGlvbiAoYnVmZmVyKSB7XG5cdCAgICAgICAgY29uc29sZS50aW1lRW5kKCgwLCBfZ2V0VGltZUxhYmVsMi5kZWZhdWx0KSh0aW1lTGFiZWwgKyAnIFxcdUI4NUNcXHVCNERDJykpO1xuXHQgICAgICAgIGNvbnNvbGUudGltZSgoMCwgX2dldFRpbWVMYWJlbDIuZGVmYXVsdCkodGltZUxhYmVsICsgJyBwYmYgXFx1RDMwQ1xcdUMyRjEnKSk7XG5cdCAgICAgICAgdmFyIHRpbGUgPSBuZXcgX3ZlY3RvclRpbGUuVmVjdG9yVGlsZShuZXcgX3BiZjIuZGVmYXVsdChidWZmZXIpKTtcblx0ICAgICAgICBjb25zb2xlLnRpbWVFbmQoKDAsIF9nZXRUaW1lTGFiZWwyLmRlZmF1bHQpKHRpbWVMYWJlbCArICcgcGJmIFxcdUQzMENcXHVDMkYxJykpO1xuXHQgICAgICAgIC8vIGNvbnNvbGUubG9nKHN0cmluZ2lmeSh0aWxlLCAyKSk7XG5cdCAgICAgICAgY29uc29sZS5sb2codGlsZSk7XG5cdCAgICAgICAgY29uc29sZS50aW1lKCgwLCBfZ2V0VGltZUxhYmVsMi5kZWZhdWx0KSh0aW1lTGFiZWwgKyAnIFxcdUQ1M0NcXHVDQ0QwIFxcdUMwRERcXHVDMTMxJykpO1xuXHQgICAgICAgIHZhciBjb2xsZWN0aW9uID0gX3RoaXMuZ2V0RmVhdHVyZXModGlsZSk7XG5cdCAgICAgICAgY29uc29sZS50aW1lRW5kKCgwLCBfZ2V0VGltZUxhYmVsMi5kZWZhdWx0KSh0aW1lTGFiZWwgKyAnIFxcdUQ1M0NcXHVDQ0QwIFxcdUMwRERcXHVDMTMxJykpO1xuXHQgICAgICAgIGNvbnNvbGUubG9nKCdmZWF0dXJlcycsIGNvbGxlY3Rpb24uZmVhdHVyZXMpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICd0ZXN0T3pvbmUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHRlc3RPem9uZSh1cmwsIHRpbWVMYWJlbCkge1xuXHQgICAgICBjb25zb2xlLnRpbWUoKDAsIF9nZXRUaW1lTGFiZWwyLmRlZmF1bHQpKHRpbWVMYWJlbCArICcgXFx1Qjg1Q1xcdUI0REMnKSk7XG5cdCAgICAgICgwLCBfcmVxdWVzdDIuZGVmYXVsdCkoe1xuXHQgICAgICAgIHVybDogdXJsLFxuXHQgICAgICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJ1xuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uIChidWZmZXIpIHtcblx0ICAgICAgICBjb25zb2xlLnRpbWVFbmQoKDAsIF9nZXRUaW1lTGFiZWwyLmRlZmF1bHQpKHRpbWVMYWJlbCArICcgXFx1Qjg1Q1xcdUI0REMnKSk7XG5cdCAgICAgICAgY29uc29sZS50aW1lKCgwLCBfZ2V0VGltZUxhYmVsMi5kZWZhdWx0KSh0aW1lTGFiZWwgKyAnIHBiZiBcXHVEMzBDXFx1QzJGMSBcXHVCQzBGIFxcdUQ1M0NcXHVDQ0QwIFxcdUMwRERcXHVDMTMxJykpO1xuXHRcblx0ICAgICAgICB2YXIgY29sbGVjdGlvbiA9IHtcblx0ICAgICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsXG5cdCAgICAgICAgICBmZWF0dXJlczogW11cblx0ICAgICAgICB9O1xuXHRcblx0ICAgICAgICBjb2xsZWN0aW9uID0gX2dlb2J1ZjIuZGVmYXVsdC5kZWNvZGUobmV3IF9wYmYyLmRlZmF1bHQoYnVmZmVyKSk7XG5cdCAgICAgICAgY29uc29sZS50aW1lRW5kKCgwLCBfZ2V0VGltZUxhYmVsMi5kZWZhdWx0KSh0aW1lTGFiZWwgKyAnIHBiZiBcXHVEMzBDXFx1QzJGMSBcXHVCQzBGIFxcdUQ1M0NcXHVDQ0QwIFxcdUMwRERcXHVDMTMxJykpO1xuXHQgICAgICAgIGNvbnNvbGUubG9nKCdmZWF0dXJlcycsIGNvbGxlY3Rpb24uZmVhdHVyZXMpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXRGZWF0dXJlcycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RmVhdHVyZXModGlsZSkge1xuXHQgICAgICB2YXIgY29sbGVjdGlvbiA9IHtcblx0ICAgICAgICB0eXBlOiAnRmVhdHVyZUNvbGxlY3Rpb24nLFxuXHQgICAgICAgIGZlYXR1cmVzOiBbXVxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgdmFyIGxheWVycyA9IE9iamVjdC5rZXlzKHRpbGUubGF5ZXJzKTtcblx0XG5cdCAgICAgIGlmICghQXJyYXkuaXNBcnJheShsYXllcnMpKSB7XG5cdCAgICAgICAgbGF5ZXJzID0gW2xheWVyc107XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGNvbnNvbGUubG9nKCdsYXllcnMgKCcgKyBsYXllcnMubGVuZ3RoICsgJyknKTtcblx0ICAgICAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVySUQpIHtcblx0ICAgICAgICB2YXIgbGF5ZXIgPSB0aWxlLmxheWVyc1tsYXllcklEXTtcblx0XG5cdCAgICAgICAgdmFyIGxlbiA9IGxheWVyLmxlbmd0aDtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdFxuXHQgICAgICAgICAgdmFyIGZlYXR1cmUgPSBfZXh0ZW5kcyh7fSwgbGF5ZXIuZmVhdHVyZShpKS50b0dlb0pTT04oeHl6LngsIHh5ei55LCB4eXoueikpO1xuXHRcblx0ICAgICAgICAgIGlmIChsZW4gPiAwKSB7XG5cdCAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydGllcy5sYXllciA9IGxheWVySUQ7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgY29uc29sZS5sb2coJ2ZlYXR1cmUnLCBmZWF0dXJlKTtcblx0ICAgICAgICAgIGNvbGxlY3Rpb24uZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgcmV0dXJuIGNvbGxlY3Rpb247XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmVzaXplJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiByZXNpemUoKSB7fVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIEFwcDtcblx0fSgpO1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gQXBwO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMzI4OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMjkpO1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMzI5OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMwKTtcblx0dmFyIGJpbmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMSk7XG5cdHZhciBBeGlvcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMzKTtcblx0dmFyIG1lcmdlQ29uZmlnID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNTEpO1xuXHR2YXIgZGVmYXVsdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGFuIGluc3RhbmNlIG9mIEF4aW9zXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBkZWZhdWx0Q29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG5cdCAqIEByZXR1cm4ge0F4aW9zfSBBIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuXHQgKi9cblx0ZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdENvbmZpZykge1xuXHQgIHZhciBjb250ZXh0ID0gbmV3IEF4aW9zKGRlZmF1bHRDb25maWcpO1xuXHQgIHZhciBpbnN0YW5jZSA9IGJpbmQoQXhpb3MucHJvdG90eXBlLnJlcXVlc3QsIGNvbnRleHQpO1xuXHRcblx0ICAvLyBDb3B5IGF4aW9zLnByb3RvdHlwZSB0byBpbnN0YW5jZVxuXHQgIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgQXhpb3MucHJvdG90eXBlLCBjb250ZXh0KTtcblx0XG5cdCAgLy8gQ29weSBjb250ZXh0IHRvIGluc3RhbmNlXG5cdCAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBjb250ZXh0KTtcblx0XG5cdCAgcmV0dXJuIGluc3RhbmNlO1xuXHR9XG5cdFxuXHQvLyBDcmVhdGUgdGhlIGRlZmF1bHQgaW5zdGFuY2UgdG8gYmUgZXhwb3J0ZWRcblx0dmFyIGF4aW9zID0gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdHMpO1xuXHRcblx0Ly8gRXhwb3NlIEF4aW9zIGNsYXNzIHRvIGFsbG93IGNsYXNzIGluaGVyaXRhbmNlXG5cdGF4aW9zLkF4aW9zID0gQXhpb3M7XG5cdFxuXHQvLyBGYWN0b3J5IGZvciBjcmVhdGluZyBuZXcgaW5zdGFuY2VzXG5cdGF4aW9zLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShpbnN0YW5jZUNvbmZpZykge1xuXHQgIHJldHVybiBjcmVhdGVJbnN0YW5jZShtZXJnZUNvbmZpZyhheGlvcy5kZWZhdWx0cywgaW5zdGFuY2VDb25maWcpKTtcblx0fTtcblx0XG5cdC8vIEV4cG9zZSBDYW5jZWwgJiBDYW5jZWxUb2tlblxuXHRheGlvcy5DYW5jZWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1Mik7XG5cdGF4aW9zLkNhbmNlbFRva2VuID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNTMpO1xuXHRheGlvcy5pc0NhbmNlbCA9IF9fd2VicGFja19yZXF1aXJlX18oMzM4KTtcblx0XG5cdC8vIEV4cG9zZSBhbGwvc3ByZWFkXG5cdGF4aW9zLmFsbCA9IGZ1bmN0aW9uIGFsbChwcm9taXNlcykge1xuXHQgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG5cdH07XG5cdGF4aW9zLnNwcmVhZCA9IF9fd2VicGFja19yZXF1aXJlX18oMzU0KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYXhpb3M7XG5cdFxuXHQvLyBBbGxvdyB1c2Ugb2YgZGVmYXVsdCBpbXBvcnQgc3ludGF4IGluIFR5cGVTY3JpcHRcblx0bW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGF4aW9zO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMzA6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIGJpbmQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMSk7XG5cdHZhciBpc0J1ZmZlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzMyKTtcblx0XG5cdC8qZ2xvYmFsIHRvU3RyaW5nOnRydWUqL1xuXHRcblx0Ly8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3Ncblx0XG5cdHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYW4gQXJyYXlcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBBcnJheSwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FycmF5KHZhbCkge1xuXHQgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlclxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJyYXlCdWZmZXIodmFsKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRm9ybURhdGFcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBGb3JtRGF0YSwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0Zvcm1EYXRhKHZhbCkge1xuXHQgIHJldHVybiAodHlwZW9mIEZvcm1EYXRhICE9PSAndW5kZWZpbmVkJykgJiYgKHZhbCBpbnN0YW5jZW9mIEZvcm1EYXRhKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlclxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgdmlldyBvbiBhbiBBcnJheUJ1ZmZlciwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FycmF5QnVmZmVyVmlldyh2YWwpIHtcblx0ICB2YXIgcmVzdWx0O1xuXHQgIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykgJiYgKEFycmF5QnVmZmVyLmlzVmlldykpIHtcblx0ICAgIHJlc3VsdCA9IEFycmF5QnVmZmVyLmlzVmlldyh2YWwpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXN1bHQgPSAodmFsKSAmJiAodmFsLmJ1ZmZlcikgJiYgKHZhbC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcik7XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyaW5nLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzU3RyaW5nKHZhbCkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgTnVtYmVyXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBOdW1iZXIsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNOdW1iZXIodmFsKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdudW1iZXInO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgdW5kZWZpbmVkXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHZhbHVlIGlzIHVuZGVmaW5lZCwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1VuZGVmaW5lZCh2YWwpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBPYmplY3Rcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNPYmplY3QodmFsKSB7XG5cdCAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRGF0ZVxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgRGF0ZSwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0RhdGUodmFsKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRGF0ZV0nO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBGaWxlXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGaWxlLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzRmlsZSh2YWwpIHtcblx0ICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBGaWxlXSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJsb2Jcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJsb2IsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNCbG9iKHZhbCkge1xuXHQgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEJsb2JdJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgRnVuY3Rpb25cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZ1bmN0aW9uLCBvdGhlcndpc2UgZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSBpZiBhIHZhbHVlIGlzIGEgU3RyZWFtXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3Rcblx0ICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBTdHJlYW0sIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTdHJlYW0odmFsKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0KHZhbCkgJiYgaXNGdW5jdGlvbih2YWwucGlwZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3Rcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNVUkxTZWFyY2hQYXJhbXModmFsKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiBVUkxTZWFyY2hQYXJhbXMgIT09ICd1bmRlZmluZWQnICYmIHZhbCBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRyaW0gZXhjZXNzIHdoaXRlc3BhY2Ugb2ZmIHRoZSBiZWdpbm5pbmcgYW5kIGVuZCBvZiBhIHN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBTdHJpbmcgdG8gdHJpbVxuXHQgKiBAcmV0dXJucyB7U3RyaW5nfSBUaGUgU3RyaW5nIGZyZWVkIG9mIGV4Y2VzcyB3aGl0ZXNwYWNlXG5cdCAqL1xuXHRmdW5jdGlvbiB0cmltKHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyovLCAnJykucmVwbGFjZSgvXFxzKiQvLCAnJyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgaWYgd2UncmUgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnRcblx0ICpcblx0ICogVGhpcyBhbGxvd3MgYXhpb3MgdG8gcnVuIGluIGEgd2ViIHdvcmtlciwgYW5kIHJlYWN0LW5hdGl2ZS5cblx0ICogQm90aCBlbnZpcm9ubWVudHMgc3VwcG9ydCBYTUxIdHRwUmVxdWVzdCwgYnV0IG5vdCBmdWxseSBzdGFuZGFyZCBnbG9iYWxzLlxuXHQgKlxuXHQgKiB3ZWIgd29ya2Vyczpcblx0ICogIHR5cGVvZiB3aW5kb3cgLT4gdW5kZWZpbmVkXG5cdCAqICB0eXBlb2YgZG9jdW1lbnQgLT4gdW5kZWZpbmVkXG5cdCAqXG5cdCAqIHJlYWN0LW5hdGl2ZTpcblx0ICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdSZWFjdE5hdGl2ZSdcblx0ICogbmF0aXZlc2NyaXB0XG5cdCAqICBuYXZpZ2F0b3IucHJvZHVjdCAtPiAnTmF0aXZlU2NyaXB0JyBvciAnTlMnXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1N0YW5kYXJkQnJvd3NlckVudigpIHtcblx0ICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgKG5hdmlnYXRvci5wcm9kdWN0ID09PSAnUmVhY3ROYXRpdmUnIHx8XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ05hdGl2ZVNjcmlwdCcgfHxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnTlMnKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICByZXR1cm4gKFxuXHQgICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0ICAgIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCdcblx0ICApO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSXRlcmF0ZSBvdmVyIGFuIEFycmF5IG9yIGFuIE9iamVjdCBpbnZva2luZyBhIGZ1bmN0aW9uIGZvciBlYWNoIGl0ZW0uXG5cdCAqXG5cdCAqIElmIGBvYmpgIGlzIGFuIEFycmF5IGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkIHBhc3Npbmdcblx0ICogdGhlIHZhbHVlLCBpbmRleCwgYW5kIGNvbXBsZXRlIGFycmF5IGZvciBlYWNoIGl0ZW0uXG5cdCAqXG5cdCAqIElmICdvYmonIGlzIGFuIE9iamVjdCBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG5cdCAqIHRoZSB2YWx1ZSwga2V5LCBhbmQgY29tcGxldGUgb2JqZWN0IGZvciBlYWNoIHByb3BlcnR5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqIFRoZSBvYmplY3QgdG8gaXRlcmF0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgY2FsbGJhY2sgdG8gaW52b2tlIGZvciBlYWNoIGl0ZW1cblx0ICovXG5cdGZ1bmN0aW9uIGZvckVhY2gob2JqLCBmbikge1xuXHQgIC8vIERvbid0IGJvdGhlciBpZiBubyB2YWx1ZSBwcm92aWRlZFxuXHQgIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIC8vIEZvcmNlIGFuIGFycmF5IGlmIG5vdCBhbHJlYWR5IHNvbWV0aGluZyBpdGVyYWJsZVxuXHQgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0Jykge1xuXHQgICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG5cdCAgICBvYmogPSBbb2JqXTtcblx0ICB9XG5cdFxuXHQgIGlmIChpc0FycmF5KG9iaikpIHtcblx0ICAgIC8vIEl0ZXJhdGUgb3ZlciBhcnJheSB2YWx1ZXNcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBmbi5jYWxsKG51bGwsIG9ialtpXSwgaSwgb2JqKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gSXRlcmF0ZSBvdmVyIG9iamVjdCBrZXlzXG5cdCAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG5cdCAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG5cdCAgICAgICAgZm4uY2FsbChudWxsLCBvYmpba2V5XSwga2V5LCBvYmopO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQWNjZXB0cyB2YXJhcmdzIGV4cGVjdGluZyBlYWNoIGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCwgdGhlblxuXHQgKiBpbW11dGFibHkgbWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIGVhY2ggb2JqZWN0IGFuZCByZXR1cm5zIHJlc3VsdC5cblx0ICpcblx0ICogV2hlbiBtdWx0aXBsZSBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUga2V5IHRoZSBsYXRlciBvYmplY3QgaW5cblx0ICogdGhlIGFyZ3VtZW50cyBsaXN0IHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuXHQgKlxuXHQgKiBFeGFtcGxlOlxuXHQgKlxuXHQgKiBgYGBqc1xuXHQgKiB2YXIgcmVzdWx0ID0gbWVyZ2Uoe2ZvbzogMTIzfSwge2ZvbzogNDU2fSk7XG5cdCAqIGNvbnNvbGUubG9nKHJlc3VsdC5mb28pOyAvLyBvdXRwdXRzIDQ1NlxuXHQgKiBgYGBcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuXHQgKi9cblx0ZnVuY3Rpb24gbWVyZ2UoLyogb2JqMSwgb2JqMiwgb2JqMywgLi4uICovKSB7XG5cdCAgdmFyIHJlc3VsdCA9IHt9O1xuXHQgIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7XG5cdCAgICBpZiAodHlwZW9mIHJlc3VsdFtrZXldID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuXHQgICAgICByZXN1bHRba2V5XSA9IG1lcmdlKHJlc3VsdFtrZXldLCB2YWwpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVzdWx0W2tleV0gPSB2YWw7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGdW5jdGlvbiBlcXVhbCB0byBtZXJnZSB3aXRoIHRoZSBkaWZmZXJlbmNlIGJlaW5nIHRoYXQgbm8gcmVmZXJlbmNlXG5cdCAqIHRvIG9yaWdpbmFsIG9iamVjdHMgaXMga2VwdC5cblx0ICpcblx0ICogQHNlZSBtZXJnZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2Vcblx0ICogQHJldHVybnMge09iamVjdH0gUmVzdWx0IG9mIGFsbCBtZXJnZSBwcm9wZXJ0aWVzXG5cdCAqL1xuXHRmdW5jdGlvbiBkZWVwTWVyZ2UoLyogb2JqMSwgb2JqMiwgb2JqMywgLi4uICovKSB7XG5cdCAgdmFyIHJlc3VsdCA9IHt9O1xuXHQgIGZ1bmN0aW9uIGFzc2lnblZhbHVlKHZhbCwga2V5KSB7XG5cdCAgICBpZiAodHlwZW9mIHJlc3VsdFtrZXldID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuXHQgICAgICByZXN1bHRba2V5XSA9IGRlZXBNZXJnZShyZXN1bHRba2V5XSwgdmFsKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgcmVzdWx0W2tleV0gPSBkZWVwTWVyZ2Uoe30sIHZhbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXN1bHRba2V5XSA9IHZhbDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4dGVuZHMgb2JqZWN0IGEgYnkgbXV0YWJseSBhZGRpbmcgdG8gaXQgdGhlIHByb3BlcnRpZXMgb2Ygb2JqZWN0IGIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWRcblx0ICogQHBhcmFtIHtPYmplY3R9IGIgVGhlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbVxuXHQgKiBAcGFyYW0ge09iamVjdH0gdGhpc0FyZyBUaGUgb2JqZWN0IHRvIGJpbmQgZnVuY3Rpb24gdG9cblx0ICogQHJldHVybiB7T2JqZWN0fSBUaGUgcmVzdWx0aW5nIHZhbHVlIG9mIG9iamVjdCBhXG5cdCAqL1xuXHRmdW5jdGlvbiBleHRlbmQoYSwgYiwgdGhpc0FyZykge1xuXHQgIGZvckVhY2goYiwgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcblx0ICAgIGlmICh0aGlzQXJnICYmIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgYVtrZXldID0gYmluZCh2YWwsIHRoaXNBcmcpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgYVtrZXldID0gdmFsO1xuXHQgICAgfVxuXHQgIH0pO1xuXHQgIHJldHVybiBhO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICBpc0FycmF5OiBpc0FycmF5LFxuXHQgIGlzQXJyYXlCdWZmZXI6IGlzQXJyYXlCdWZmZXIsXG5cdCAgaXNCdWZmZXI6IGlzQnVmZmVyLFxuXHQgIGlzRm9ybURhdGE6IGlzRm9ybURhdGEsXG5cdCAgaXNBcnJheUJ1ZmZlclZpZXc6IGlzQXJyYXlCdWZmZXJWaWV3LFxuXHQgIGlzU3RyaW5nOiBpc1N0cmluZyxcblx0ICBpc051bWJlcjogaXNOdW1iZXIsXG5cdCAgaXNPYmplY3Q6IGlzT2JqZWN0LFxuXHQgIGlzVW5kZWZpbmVkOiBpc1VuZGVmaW5lZCxcblx0ICBpc0RhdGU6IGlzRGF0ZSxcblx0ICBpc0ZpbGU6IGlzRmlsZSxcblx0ICBpc0Jsb2I6IGlzQmxvYixcblx0ICBpc0Z1bmN0aW9uOiBpc0Z1bmN0aW9uLFxuXHQgIGlzU3RyZWFtOiBpc1N0cmVhbSxcblx0ICBpc1VSTFNlYXJjaFBhcmFtczogaXNVUkxTZWFyY2hQYXJhbXMsXG5cdCAgaXNTdGFuZGFyZEJyb3dzZXJFbnY6IGlzU3RhbmRhcmRCcm93c2VyRW52LFxuXHQgIGZvckVhY2g6IGZvckVhY2gsXG5cdCAgbWVyZ2U6IG1lcmdlLFxuXHQgIGRlZXBNZXJnZTogZGVlcE1lcmdlLFxuXHQgIGV4dGVuZDogZXh0ZW5kLFxuXHQgIHRyaW06IHRyaW1cblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzMxOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYmluZChmbiwgdGhpc0FyZykge1xuXHQgIHJldHVybiBmdW5jdGlvbiB3cmFwKCkge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmbi5hcHBseSh0aGlzQXJnLCBhcmdzKTtcblx0ICB9O1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMzI6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyohXG5cdCAqIERldGVybWluZSBpZiBhbiBvYmplY3QgaXMgYSBCdWZmZXJcblx0ICpcblx0ICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZz5cblx0ICogQGxpY2Vuc2UgIE1JVFxuXHQgKi9cblx0XG5cdC8vIFRoZSBfaXNCdWZmZXIgY2hlY2sgaXMgZm9yIFNhZmFyaSA1LTcgc3VwcG9ydCwgYmVjYXVzZSBpdCdzIG1pc3Npbmdcblx0Ly8gT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvci4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseVxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmopIHtcblx0ICByZXR1cm4gb2JqICE9IG51bGwgJiYgKGlzQnVmZmVyKG9iaikgfHwgaXNTbG93QnVmZmVyKG9iaikgfHwgISFvYmouX2lzQnVmZmVyKVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc0J1ZmZlciAob2JqKSB7XG5cdCAgcmV0dXJuICEhb2JqLmNvbnN0cnVjdG9yICYmIHR5cGVvZiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIgPT09ICdmdW5jdGlvbicgJiYgb2JqLmNvbnN0cnVjdG9yLmlzQnVmZmVyKG9iailcblx0fVxuXHRcblx0Ly8gRm9yIE5vZGUgdjAuMTAgc3VwcG9ydC4gUmVtb3ZlIHRoaXMgZXZlbnR1YWxseS5cblx0ZnVuY3Rpb24gaXNTbG93QnVmZmVyIChvYmopIHtcblx0ICByZXR1cm4gdHlwZW9mIG9iai5yZWFkRmxvYXRMRSA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygb2JqLnNsaWNlID09PSAnZnVuY3Rpb24nICYmIGlzQnVmZmVyKG9iai5zbGljZSgwLCAwKSlcblx0fVxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMzM6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzApO1xuXHR2YXIgYnVpbGRVUkwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNCk7XG5cdHZhciBJbnRlcmNlcHRvck1hbmFnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNSk7XG5cdHZhciBkaXNwYXRjaFJlcXVlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzNik7XG5cdHZhciBtZXJnZUNvbmZpZyA9IF9fd2VicGFja19yZXF1aXJlX18oMzUxKTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQXhpb3Ncblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGluc3RhbmNlQ29uZmlnIFRoZSBkZWZhdWx0IGNvbmZpZyBmb3IgdGhlIGluc3RhbmNlXG5cdCAqL1xuXHRmdW5jdGlvbiBBeGlvcyhpbnN0YW5jZUNvbmZpZykge1xuXHQgIHRoaXMuZGVmYXVsdHMgPSBpbnN0YW5jZUNvbmZpZztcblx0ICB0aGlzLmludGVyY2VwdG9ycyA9IHtcblx0ICAgIHJlcXVlc3Q6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKSxcblx0ICAgIHJlc3BvbnNlOiBuZXcgSW50ZXJjZXB0b3JNYW5hZ2VyKClcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGlzcGF0Y2ggYSByZXF1ZXN0XG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZyBzcGVjaWZpYyBmb3IgdGhpcyByZXF1ZXN0IChtZXJnZWQgd2l0aCB0aGlzLmRlZmF1bHRzKVxuXHQgKi9cblx0QXhpb3MucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGNvbmZpZykge1xuXHQgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuXHQgIC8vIEFsbG93IGZvciBheGlvcygnZXhhbXBsZS91cmwnWywgY29uZmlnXSkgYSBsYSBmZXRjaCBBUElcblx0ICBpZiAodHlwZW9mIGNvbmZpZyA9PT0gJ3N0cmluZycpIHtcblx0ICAgIGNvbmZpZyA9IGFyZ3VtZW50c1sxXSB8fCB7fTtcblx0ICAgIGNvbmZpZy51cmwgPSBhcmd1bWVudHNbMF07XG5cdCAgfSBlbHNlIHtcblx0ICAgIGNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcblx0ICB9XG5cdFxuXHQgIGNvbmZpZyA9IG1lcmdlQ29uZmlnKHRoaXMuZGVmYXVsdHMsIGNvbmZpZyk7XG5cdCAgY29uZmlnLm1ldGhvZCA9IGNvbmZpZy5tZXRob2QgPyBjb25maWcubWV0aG9kLnRvTG93ZXJDYXNlKCkgOiAnZ2V0Jztcblx0XG5cdCAgLy8gSG9vayB1cCBpbnRlcmNlcHRvcnMgbWlkZGxld2FyZVxuXHQgIHZhciBjaGFpbiA9IFtkaXNwYXRjaFJlcXVlc3QsIHVuZGVmaW5lZF07XG5cdCAgdmFyIHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoY29uZmlnKTtcblx0XG5cdCAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG5cdCAgICBjaGFpbi51bnNoaWZ0KGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuXHQgIH0pO1xuXHRcblx0ICB0aGlzLmludGVyY2VwdG9ycy5yZXNwb25zZS5mb3JFYWNoKGZ1bmN0aW9uIHB1c2hSZXNwb25zZUludGVyY2VwdG9ycyhpbnRlcmNlcHRvcikge1xuXHQgICAgY2hhaW4ucHVzaChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcblx0ICB9KTtcblx0XG5cdCAgd2hpbGUgKGNoYWluLmxlbmd0aCkge1xuXHQgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihjaGFpbi5zaGlmdCgpLCBjaGFpbi5zaGlmdCgpKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBwcm9taXNlO1xuXHR9O1xuXHRcblx0QXhpb3MucHJvdG90eXBlLmdldFVyaSA9IGZ1bmN0aW9uIGdldFVyaShjb25maWcpIHtcblx0ICBjb25maWcgPSBtZXJnZUNvbmZpZyh0aGlzLmRlZmF1bHRzLCBjb25maWcpO1xuXHQgIHJldHVybiBidWlsZFVSTChjb25maWcudXJsLCBjb25maWcucGFyYW1zLCBjb25maWcucGFyYW1zU2VyaWFsaXplcikucmVwbGFjZSgvXlxcPy8sICcnKTtcblx0fTtcblx0XG5cdC8vIFByb3ZpZGUgYWxpYXNlcyBmb3Igc3VwcG9ydGVkIHJlcXVlc3QgbWV0aG9kc1xuXHR1dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ29wdGlvbnMnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcblx0ICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuXHQgIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBjb25maWcpIHtcblx0ICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7XG5cdCAgICAgIG1ldGhvZDogbWV0aG9kLFxuXHQgICAgICB1cmw6IHVybFxuXHQgICAgfSkpO1xuXHQgIH07XG5cdH0pO1xuXHRcblx0dXRpbHMuZm9yRWFjaChbJ3Bvc3QnLCAncHV0JywgJ3BhdGNoJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2RXaXRoRGF0YShtZXRob2QpIHtcblx0ICAvKmVzbGludCBmdW5jLW5hbWVzOjAqL1xuXHQgIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcblx0ICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7XG5cdCAgICAgIG1ldGhvZDogbWV0aG9kLFxuXHQgICAgICB1cmw6IHVybCxcblx0ICAgICAgZGF0YTogZGF0YVxuXHQgICAgfSkpO1xuXHQgIH07XG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBBeGlvcztcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzM0OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMwKTtcblx0XG5cdGZ1bmN0aW9uIGVuY29kZSh2YWwpIHtcblx0ICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbCkuXG5cdCAgICByZXBsYWNlKC8lNDAvZ2ksICdAJykuXG5cdCAgICByZXBsYWNlKC8lM0EvZ2ksICc6JykuXG5cdCAgICByZXBsYWNlKC8lMjQvZywgJyQnKS5cblx0ICAgIHJlcGxhY2UoLyUyQy9naSwgJywnKS5cblx0ICAgIHJlcGxhY2UoLyUyMC9nLCAnKycpLlxuXHQgICAgcmVwbGFjZSgvJTVCL2dpLCAnWycpLlxuXHQgICAgcmVwbGFjZSgvJTVEL2dpLCAnXScpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBVUkwgYnkgYXBwZW5kaW5nIHBhcmFtcyB0byB0aGUgZW5kXG5cdCAqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIGJhc2Ugb2YgdGhlIHVybCAoZS5nLiwgaHR0cDovL3d3dy5nb29nbGUuY29tKVxuXHQgKiBAcGFyYW0ge29iamVjdH0gW3BhcmFtc10gVGhlIHBhcmFtcyB0byBiZSBhcHBlbmRlZFxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgZm9ybWF0dGVkIHVybFxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBidWlsZFVSTCh1cmwsIHBhcmFtcywgcGFyYW1zU2VyaWFsaXplcikge1xuXHQgIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuXHQgIGlmICghcGFyYW1zKSB7XG5cdCAgICByZXR1cm4gdXJsO1xuXHQgIH1cblx0XG5cdCAgdmFyIHNlcmlhbGl6ZWRQYXJhbXM7XG5cdCAgaWYgKHBhcmFtc1NlcmlhbGl6ZXIpIHtcblx0ICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXNTZXJpYWxpemVyKHBhcmFtcyk7XG5cdCAgfSBlbHNlIGlmICh1dGlscy5pc1VSTFNlYXJjaFBhcmFtcyhwYXJhbXMpKSB7XG5cdCAgICBzZXJpYWxpemVkUGFyYW1zID0gcGFyYW1zLnRvU3RyaW5nKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBwYXJ0cyA9IFtdO1xuXHRcblx0ICAgIHV0aWxzLmZvckVhY2gocGFyYW1zLCBmdW5jdGlvbiBzZXJpYWxpemUodmFsLCBrZXkpIHtcblx0ICAgICAgaWYgKHZhbCA9PT0gbnVsbCB8fCB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHV0aWxzLmlzQXJyYXkodmFsKSkge1xuXHQgICAgICAgIGtleSA9IGtleSArICdbXSc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFsID0gW3ZhbF07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHV0aWxzLmZvckVhY2godmFsLCBmdW5jdGlvbiBwYXJzZVZhbHVlKHYpIHtcblx0ICAgICAgICBpZiAodXRpbHMuaXNEYXRlKHYpKSB7XG5cdCAgICAgICAgICB2ID0gdi50b0lTT1N0cmluZygpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodXRpbHMuaXNPYmplY3QodikpIHtcblx0ICAgICAgICAgIHYgPSBKU09OLnN0cmluZ2lmeSh2KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcGFydHMucHVzaChlbmNvZGUoa2V5KSArICc9JyArIGVuY29kZSh2KSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcnRzLmpvaW4oJyYnKTtcblx0ICB9XG5cdFxuXHQgIGlmIChzZXJpYWxpemVkUGFyYW1zKSB7XG5cdCAgICB2YXIgaGFzaG1hcmtJbmRleCA9IHVybC5pbmRleE9mKCcjJyk7XG5cdCAgICBpZiAoaGFzaG1hcmtJbmRleCAhPT0gLTEpIHtcblx0ICAgICAgdXJsID0gdXJsLnNsaWNlKDAsIGhhc2htYXJrSW5kZXgpO1xuXHQgICAgfVxuXHRcblx0ICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgc2VyaWFsaXplZFBhcmFtcztcblx0ICB9XG5cdFxuXHQgIHJldHVybiB1cmw7XG5cdH07XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDMzNTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMCk7XG5cdFxuXHRmdW5jdGlvbiBJbnRlcmNlcHRvck1hbmFnZXIoKSB7XG5cdCAgdGhpcy5oYW5kbGVycyA9IFtdO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkIGEgbmV3IGludGVyY2VwdG9yIHRvIHRoZSBzdGFja1xuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdWxmaWxsZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgdGhlbmAgZm9yIGEgYFByb21pc2VgXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdGVkIFRoZSBmdW5jdGlvbiB0byBoYW5kbGUgYHJlamVjdGAgZm9yIGEgYFByb21pc2VgXG5cdCAqXG5cdCAqIEByZXR1cm4ge051bWJlcn0gQW4gSUQgdXNlZCB0byByZW1vdmUgaW50ZXJjZXB0b3IgbGF0ZXJcblx0ICovXG5cdEludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUudXNlID0gZnVuY3Rpb24gdXNlKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpIHtcblx0ICB0aGlzLmhhbmRsZXJzLnB1c2goe1xuXHQgICAgZnVsZmlsbGVkOiBmdWxmaWxsZWQsXG5cdCAgICByZWplY3RlZDogcmVqZWN0ZWRcblx0ICB9KTtcblx0ICByZXR1cm4gdGhpcy5oYW5kbGVycy5sZW5ndGggLSAxO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBhbiBpbnRlcmNlcHRvciBmcm9tIHRoZSBzdGFja1xuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gaWQgVGhlIElEIHRoYXQgd2FzIHJldHVybmVkIGJ5IGB1c2VgXG5cdCAqL1xuXHRJbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmVqZWN0ID0gZnVuY3Rpb24gZWplY3QoaWQpIHtcblx0ICBpZiAodGhpcy5oYW5kbGVyc1tpZF0pIHtcblx0ICAgIHRoaXMuaGFuZGxlcnNbaWRdID0gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogSXRlcmF0ZSBvdmVyIGFsbCB0aGUgcmVnaXN0ZXJlZCBpbnRlcmNlcHRvcnNcblx0ICpcblx0ICogVGhpcyBtZXRob2QgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igc2tpcHBpbmcgb3ZlciBhbnlcblx0ICogaW50ZXJjZXB0b3JzIHRoYXQgbWF5IGhhdmUgYmVjb21lIGBudWxsYCBjYWxsaW5nIGBlamVjdGAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIGludGVyY2VwdG9yXG5cdCAqL1xuXHRJbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiBmb3JFYWNoKGZuKSB7XG5cdCAgdXRpbHMuZm9yRWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbiBmb3JFYWNoSGFuZGxlcihoKSB7XG5cdCAgICBpZiAoaCAhPT0gbnVsbCkge1xuXHQgICAgICBmbihoKTtcblx0ICAgIH1cblx0ICB9KTtcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gSW50ZXJjZXB0b3JNYW5hZ2VyO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzMzY6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzApO1xuXHR2YXIgdHJhbnNmb3JtRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMzM3KTtcblx0dmFyIGlzQ2FuY2VsID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzgpO1xuXHR2YXIgZGVmYXVsdHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzOSk7XG5cdHZhciBpc0Fic29sdXRlVVJMID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDkpO1xuXHR2YXIgY29tYmluZVVSTHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1MCk7XG5cdFxuXHQvKipcblx0ICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cblx0ICovXG5cdGZ1bmN0aW9uIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKSB7XG5cdCAgaWYgKGNvbmZpZy5jYW5jZWxUb2tlbikge1xuXHQgICAgY29uZmlnLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEaXNwYXRjaCBhIHJlcXVlc3QgdG8gdGhlIHNlcnZlciB1c2luZyB0aGUgY29uZmlndXJlZCBhZGFwdGVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge29iamVjdH0gY29uZmlnIFRoZSBjb25maWcgdGhhdCBpcyB0byBiZSB1c2VkIGZvciB0aGUgcmVxdWVzdFxuXHQgKiBAcmV0dXJucyB7UHJvbWlzZX0gVGhlIFByb21pc2UgdG8gYmUgZnVsZmlsbGVkXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRpc3BhdGNoUmVxdWVzdChjb25maWcpIHtcblx0ICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cdFxuXHQgIC8vIFN1cHBvcnQgYmFzZVVSTCBjb25maWdcblx0ICBpZiAoY29uZmlnLmJhc2VVUkwgJiYgIWlzQWJzb2x1dGVVUkwoY29uZmlnLnVybCkpIHtcblx0ICAgIGNvbmZpZy51cmwgPSBjb21iaW5lVVJMcyhjb25maWcuYmFzZVVSTCwgY29uZmlnLnVybCk7XG5cdCAgfVxuXHRcblx0ICAvLyBFbnN1cmUgaGVhZGVycyBleGlzdFxuXHQgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XG5cdFxuXHQgIC8vIFRyYW5zZm9ybSByZXF1ZXN0IGRhdGFcblx0ICBjb25maWcuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG5cdCAgICBjb25maWcuZGF0YSxcblx0ICAgIGNvbmZpZy5oZWFkZXJzLFxuXHQgICAgY29uZmlnLnRyYW5zZm9ybVJlcXVlc3Rcblx0ICApO1xuXHRcblx0ICAvLyBGbGF0dGVuIGhlYWRlcnNcblx0ICBjb25maWcuaGVhZGVycyA9IHV0aWxzLm1lcmdlKFxuXHQgICAgY29uZmlnLmhlYWRlcnMuY29tbW9uIHx8IHt9LFxuXHQgICAgY29uZmlnLmhlYWRlcnNbY29uZmlnLm1ldGhvZF0gfHwge30sXG5cdCAgICBjb25maWcuaGVhZGVycyB8fCB7fVxuXHQgICk7XG5cdFxuXHQgIHV0aWxzLmZvckVhY2goXG5cdCAgICBbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdwb3N0JywgJ3B1dCcsICdwYXRjaCcsICdjb21tb24nXSxcblx0ICAgIGZ1bmN0aW9uIGNsZWFuSGVhZGVyQ29uZmlnKG1ldGhvZCkge1xuXHQgICAgICBkZWxldGUgY29uZmlnLmhlYWRlcnNbbWV0aG9kXTtcblx0ICAgIH1cblx0ICApO1xuXHRcblx0ICB2YXIgYWRhcHRlciA9IGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzLmFkYXB0ZXI7XG5cdFxuXHQgIHJldHVybiBhZGFwdGVyKGNvbmZpZykudGhlbihmdW5jdGlvbiBvbkFkYXB0ZXJSZXNvbHV0aW9uKHJlc3BvbnNlKSB7XG5cdCAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cdFxuXHQgICAgLy8gVHJhbnNmb3JtIHJlc3BvbnNlIGRhdGFcblx0ICAgIHJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuXHQgICAgICByZXNwb25zZS5kYXRhLFxuXHQgICAgICByZXNwb25zZS5oZWFkZXJzLFxuXHQgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2Vcblx0ICAgICk7XG5cdFxuXHQgICAgcmV0dXJuIHJlc3BvbnNlO1xuXHQgIH0sIGZ1bmN0aW9uIG9uQWRhcHRlclJlamVjdGlvbihyZWFzb24pIHtcblx0ICAgIGlmICghaXNDYW5jZWwocmVhc29uKSkge1xuXHQgICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cdFxuXHQgICAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuXHQgICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5yZXNwb25zZSkge1xuXHQgICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhID0gdHJhbnNmb3JtRGF0YShcblx0ICAgICAgICAgIHJlYXNvbi5yZXNwb25zZS5kYXRhLFxuXHQgICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmhlYWRlcnMsXG5cdCAgICAgICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2Vcblx0ICAgICAgICApO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XG5cdCAgfSk7XG5cdH07XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDMzNzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMCk7XG5cdFxuXHQvKipcblx0ICogVHJhbnNmb3JtIHRoZSBkYXRhIGZvciBhIHJlcXVlc3Qgb3IgYSByZXNwb25zZVxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGRhdGEgVGhlIGRhdGEgdG8gYmUgdHJhbnNmb3JtZWRcblx0ICogQHBhcmFtIHtBcnJheX0gaGVhZGVycyBUaGUgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3Qgb3IgcmVzcG9uc2Vcblx0ICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuXHQgKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdGluZyB0cmFuc2Zvcm1lZCBkYXRhXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XG5cdCAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG5cdCAgdXRpbHMuZm9yRWFjaChmbnMsIGZ1bmN0aW9uIHRyYW5zZm9ybShmbikge1xuXHQgICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMpO1xuXHQgIH0pO1xuXHRcblx0ICByZXR1cm4gZGF0YTtcblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzM4OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNDYW5jZWwodmFsdWUpIHtcblx0ICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWUuX19DQU5DRUxfXyk7XG5cdH07XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDMzOTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2Vzcykgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMwKTtcblx0dmFyIG5vcm1hbGl6ZUhlYWRlck5hbWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0MSk7XG5cdFxuXHR2YXIgREVGQVVMVF9DT05URU5UX1RZUEUgPSB7XG5cdCAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnXG5cdH07XG5cdFxuXHRmdW5jdGlvbiBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgdmFsdWUpIHtcblx0ICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnMpICYmIHV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddKSkge1xuXHQgICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSB2YWx1ZTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGdldERlZmF1bHRBZGFwdGVyKCkge1xuXHQgIHZhciBhZGFwdGVyO1xuXHQgIC8vIE9ubHkgTm9kZS5KUyBoYXMgYSBwcm9jZXNzIHZhcmlhYmxlIHRoYXQgaXMgb2YgW1tDbGFzc11dIHByb2Nlc3Ncblx0ICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKSB7XG5cdCAgICAvLyBGb3Igbm9kZSB1c2UgSFRUUCBhZGFwdGVyXG5cdCAgICBhZGFwdGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDIpO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgLy8gRm9yIGJyb3dzZXJzIHVzZSBYSFIgYWRhcHRlclxuXHQgICAgYWRhcHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMzQyKTtcblx0ICB9XG5cdCAgcmV0dXJuIGFkYXB0ZXI7XG5cdH1cblx0XG5cdHZhciBkZWZhdWx0cyA9IHtcblx0ICBhZGFwdGVyOiBnZXREZWZhdWx0QWRhcHRlcigpLFxuXHRcblx0ICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7XG5cdCAgICBub3JtYWxpemVIZWFkZXJOYW1lKGhlYWRlcnMsICdBY2NlcHQnKTtcblx0ICAgIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgJ0NvbnRlbnQtVHlwZScpO1xuXHQgICAgaWYgKHV0aWxzLmlzRm9ybURhdGEoZGF0YSkgfHxcblx0ICAgICAgdXRpbHMuaXNBcnJheUJ1ZmZlcihkYXRhKSB8fFxuXHQgICAgICB1dGlscy5pc0J1ZmZlcihkYXRhKSB8fFxuXHQgICAgICB1dGlscy5pc1N0cmVhbShkYXRhKSB8fFxuXHQgICAgICB1dGlscy5pc0ZpbGUoZGF0YSkgfHxcblx0ICAgICAgdXRpbHMuaXNCbG9iKGRhdGEpXG5cdCAgICApIHtcblx0ICAgICAgcmV0dXJuIGRhdGE7XG5cdCAgICB9XG5cdCAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcblx0ICAgICAgcmV0dXJuIGRhdGEuYnVmZmVyO1xuXHQgICAgfVxuXHQgICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7XG5cdCAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLTgnKTtcblx0ICAgICAgcmV0dXJuIGRhdGEudG9TdHJpbmcoKTtcblx0ICAgIH1cblx0ICAgIGlmICh1dGlscy5pc09iamVjdChkYXRhKSkge1xuXHQgICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtOCcpO1xuXHQgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZGF0YTtcblx0ICB9XSxcblx0XG5cdCAgdHJhbnNmb3JtUmVzcG9uc2U6IFtmdW5jdGlvbiB0cmFuc2Zvcm1SZXNwb25zZShkYXRhKSB7XG5cdCAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cblx0ICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcblx0ICAgICAgfSBjYXRjaCAoZSkgeyAvKiBJZ25vcmUgKi8gfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGRhdGE7XG5cdCAgfV0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEEgdGltZW91dCBpbiBtaWxsaXNlY29uZHMgdG8gYWJvcnQgYSByZXF1ZXN0LiBJZiBzZXQgdG8gMCAoZGVmYXVsdCkgYVxuXHQgICAqIHRpbWVvdXQgaXMgbm90IGNyZWF0ZWQuXG5cdCAgICovXG5cdCAgdGltZW91dDogMCxcblx0XG5cdCAgeHNyZkNvb2tpZU5hbWU6ICdYU1JGLVRPS0VOJyxcblx0ICB4c3JmSGVhZGVyTmFtZTogJ1gtWFNSRi1UT0tFTicsXG5cdFxuXHQgIG1heENvbnRlbnRMZW5ndGg6IC0xLFxuXHRcblx0ICB2YWxpZGF0ZVN0YXR1czogZnVuY3Rpb24gdmFsaWRhdGVTdGF0dXMoc3RhdHVzKSB7XG5cdCAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZGVmYXVsdHMuaGVhZGVycyA9IHtcblx0ICBjb21tb246IHtcblx0ICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xuXHQgIH1cblx0fTtcblx0XG5cdHV0aWxzLmZvckVhY2goWydkZWxldGUnLCAnZ2V0JywgJ2hlYWQnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcblx0ICBkZWZhdWx0cy5oZWFkZXJzW21ldGhvZF0gPSB7fTtcblx0fSk7XG5cdFxuXHR1dGlscy5mb3JFYWNoKFsncG9zdCcsICdwdXQnLCAncGF0Y2gnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZFdpdGhEYXRhKG1ldGhvZCkge1xuXHQgIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHV0aWxzLm1lcmdlKERFRkFVTFRfQ09OVEVOVF9UWVBFKTtcblx0fSk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRzO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMzQwKSkpXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNDA6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0Ly8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHRmdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG5cdH1cblx0ZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xuXHR9XG5cdChmdW5jdGlvbiAoKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcblx0ICAgICAgICB9XG5cdCAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgICAgIH1cblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuXHQgICAgfVxuXHR9ICgpKVxuXHRmdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuXHQgICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfVxuXHQgICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcblx0ICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuXHQgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuXHQgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG5cdCAgICB9XG5cdCAgICB0cnkge1xuXHQgICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3Ncblx0ICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuXHQgICAgfSBjYXRjaChlKXtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuXHQgICAgICAgIH0gY2F0Y2goZSl7XG5cdCAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG5cdCAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHRcblx0fVxuXHRmdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG5cdCAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcblx0ICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG5cdCAgICB9XG5cdCAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG5cdCAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcblx0ICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG5cdCAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfVxuXHQgICAgdHJ5IHtcblx0ICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG5cdCAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuXHQgICAgfSBjYXRjaCAoZSl7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuXHQgICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcblx0ICAgICAgICB9IGNhdGNoIChlKXtcblx0ICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG5cdCAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcblx0ICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHRcblx0XG5cdFxuXHR9XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgZHJhaW5pbmcgPSBmYWxzZTtcblx0dmFyIGN1cnJlbnRRdWV1ZTtcblx0dmFyIHF1ZXVlSW5kZXggPSAtMTtcblx0XG5cdGZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcblx0ICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcblx0ICAgIH1cblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBkcmFpblF1ZXVlKCk7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG5cdCAgICBpZiAoZHJhaW5pbmcpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcblx0ICAgIGRyYWluaW5nID0gdHJ1ZTtcblx0XG5cdCAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgd2hpbGUobGVuKSB7XG5cdCAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG5cdCAgICAgICAgcXVldWUgPSBbXTtcblx0ICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG5cdCAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuXHQgICAgfVxuXHQgICAgY3VycmVudFF1ZXVlID0gbnVsbDtcblx0ICAgIGRyYWluaW5nID0gZmFsc2U7XG5cdCAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG5cdH1cblx0XG5cdHByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcblx0ICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0Ly8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuXHRmdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcblx0ICAgIHRoaXMuZnVuID0gZnVuO1xuXHQgICAgdGhpcy5hcnJheSA9IGFycmF5O1xuXHR9XG5cdEl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xuXHR9O1xuXHRwcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xuXHRwcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xuXHRwcm9jZXNzLmVudiA9IHt9O1xuXHRwcm9jZXNzLmFyZ3YgPSBbXTtcblx0cHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5cdHByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0cHJvY2Vzcy5vbiA9IG5vb3A7XG5cdHByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLm9uY2UgPSBub29wO1xuXHRwcm9jZXNzLm9mZiA9IG5vb3A7XG5cdHByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5cdHByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cdHByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblx0XG5cdHByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblx0XG5cdHByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG5cdH07XG5cdFxuXHRwcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xuXHRwcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuXHQgICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0cHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzQxOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMwKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCBub3JtYWxpemVkTmFtZSkge1xuXHQgIHV0aWxzLmZvckVhY2goaGVhZGVycywgZnVuY3Rpb24gcHJvY2Vzc0hlYWRlcih2YWx1ZSwgbmFtZSkge1xuXHQgICAgaWYgKG5hbWUgIT09IG5vcm1hbGl6ZWROYW1lICYmIG5hbWUudG9VcHBlckNhc2UoKSA9PT0gbm9ybWFsaXplZE5hbWUudG9VcHBlckNhc2UoKSkge1xuXHQgICAgICBoZWFkZXJzW25vcm1hbGl6ZWROYW1lXSA9IHZhbHVlO1xuXHQgICAgICBkZWxldGUgaGVhZGVyc1tuYW1lXTtcblx0ICAgIH1cblx0ICB9KTtcblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzQyOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciB1dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMzMwKTtcblx0dmFyIHNldHRsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzQzKTtcblx0dmFyIGJ1aWxkVVJMID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzQpO1xuXHR2YXIgcGFyc2VIZWFkZXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDYpO1xuXHR2YXIgaXNVUkxTYW1lT3JpZ2luID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDcpO1xuXHR2YXIgY3JlYXRlRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0NCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHhockFkYXB0ZXIoY29uZmlnKSB7XG5cdCAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIGRpc3BhdGNoWGhyUmVxdWVzdChyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgIHZhciByZXF1ZXN0RGF0YSA9IGNvbmZpZy5kYXRhO1xuXHQgICAgdmFyIHJlcXVlc3RIZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XG5cdFxuXHQgICAgaWYgKHV0aWxzLmlzRm9ybURhdGEocmVxdWVzdERhdGEpKSB7XG5cdCAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1snQ29udGVudC1UeXBlJ107IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcblx0ICAgIC8vIEhUVFAgYmFzaWMgYXV0aGVudGljYXRpb25cblx0ICAgIGlmIChjb25maWcuYXV0aCkge1xuXHQgICAgICB2YXIgdXNlcm5hbWUgPSBjb25maWcuYXV0aC51c2VybmFtZSB8fCAnJztcblx0ICAgICAgdmFyIHBhc3N3b3JkID0gY29uZmlnLmF1dGgucGFzc3dvcmQgfHwgJyc7XG5cdCAgICAgIHJlcXVlc3RIZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmVxdWVzdC5vcGVuKGNvbmZpZy5tZXRob2QudG9VcHBlckNhc2UoKSwgYnVpbGRVUkwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLCB0cnVlKTtcblx0XG5cdCAgICAvLyBTZXQgdGhlIHJlcXVlc3QgdGltZW91dCBpbiBNU1xuXHQgICAgcmVxdWVzdC50aW1lb3V0ID0gY29uZmlnLnRpbWVvdXQ7XG5cdFxuXHQgICAgLy8gTGlzdGVuIGZvciByZWFkeSBzdGF0ZVxuXHQgICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVMb2FkKCkge1xuXHQgICAgICBpZiAoIXJlcXVlc3QgfHwgcmVxdWVzdC5yZWFkeVN0YXRlICE9PSA0KSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBUaGUgcmVxdWVzdCBlcnJvcmVkIG91dCBhbmQgd2UgZGlkbid0IGdldCBhIHJlc3BvbnNlLCB0aGlzIHdpbGwgYmVcblx0ICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWRcblx0ICAgICAgLy8gV2l0aCBvbmUgZXhjZXB0aW9uOiByZXF1ZXN0IHRoYXQgdXNpbmcgZmlsZTogcHJvdG9jb2wsIG1vc3QgYnJvd3NlcnNcblx0ICAgICAgLy8gd2lsbCByZXR1cm4gc3RhdHVzIGFzIDAgZXZlbiB0aG91Z2ggaXQncyBhIHN1Y2Nlc3NmdWwgcmVxdWVzdFxuXHQgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFByZXBhcmUgdGhlIHJlc3BvbnNlXG5cdCAgICAgIHZhciByZXNwb25zZUhlYWRlcnMgPSAnZ2V0QWxsUmVzcG9uc2VIZWFkZXJzJyBpbiByZXF1ZXN0ID8gcGFyc2VIZWFkZXJzKHJlcXVlc3QuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpIDogbnVsbDtcblx0ICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9ICFjb25maWcucmVzcG9uc2VUeXBlIHx8IGNvbmZpZy5yZXNwb25zZVR5cGUgPT09ICd0ZXh0JyA/IHJlcXVlc3QucmVzcG9uc2VUZXh0IDogcmVxdWVzdC5yZXNwb25zZTtcblx0ICAgICAgdmFyIHJlc3BvbnNlID0ge1xuXHQgICAgICAgIGRhdGE6IHJlc3BvbnNlRGF0YSxcblx0ICAgICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLFxuXHQgICAgICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzVGV4dCxcblx0ICAgICAgICBoZWFkZXJzOiByZXNwb25zZUhlYWRlcnMsXG5cdCAgICAgICAgY29uZmlnOiBjb25maWcsXG5cdCAgICAgICAgcmVxdWVzdDogcmVxdWVzdFxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpO1xuXHRcblx0ICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuXHQgICAgICByZXF1ZXN0ID0gbnVsbDtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gSGFuZGxlIGJyb3dzZXIgcmVxdWVzdCBjYW5jZWxsYXRpb24gKGFzIG9wcG9zZWQgdG8gYSBtYW51YWwgY2FuY2VsbGF0aW9uKVxuXHQgICAgcmVxdWVzdC5vbmFib3J0ID0gZnVuY3Rpb24gaGFuZGxlQWJvcnQoKSB7XG5cdCAgICAgIGlmICghcmVxdWVzdCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmVqZWN0KGNyZWF0ZUVycm9yKCdSZXF1ZXN0IGFib3J0ZWQnLCBjb25maWcsICdFQ09OTkFCT1JURUQnLCByZXF1ZXN0KSk7XG5cdFxuXHQgICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG5cdCAgICAgIHJlcXVlc3QgPSBudWxsO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBIYW5kbGUgbG93IGxldmVsIG5ldHdvcmsgZXJyb3JzXG5cdCAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiBoYW5kbGVFcnJvcigpIHtcblx0ICAgICAgLy8gUmVhbCBlcnJvcnMgYXJlIGhpZGRlbiBmcm9tIHVzIGJ5IHRoZSBicm93c2VyXG5cdCAgICAgIC8vIG9uZXJyb3Igc2hvdWxkIG9ubHkgZmlyZSBpZiBpdCdzIGEgbmV0d29yayBlcnJvclxuXHQgICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ05ldHdvcmsgRXJyb3InLCBjb25maWcsIG51bGwsIHJlcXVlc3QpKTtcblx0XG5cdCAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3Rcblx0ICAgICAgcmVxdWVzdCA9IG51bGw7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEhhbmRsZSB0aW1lb3V0XG5cdCAgICByZXF1ZXN0Lm9udGltZW91dCA9IGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7XG5cdCAgICAgIHJlamVjdChjcmVhdGVFcnJvcigndGltZW91dCBvZiAnICsgY29uZmlnLnRpbWVvdXQgKyAnbXMgZXhjZWVkZWQnLCBjb25maWcsICdFQ09OTkFCT1JURUQnLFxuXHQgICAgICAgIHJlcXVlc3QpKTtcblx0XG5cdCAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3Rcblx0ICAgICAgcmVxdWVzdCA9IG51bGw7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEFkZCB4c3JmIGhlYWRlclxuXHQgICAgLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuXG5cdCAgICAvLyBTcGVjaWZpY2FsbHkgbm90IGlmIHdlJ3JlIGluIGEgd2ViIHdvcmtlciwgb3IgcmVhY3QtbmF0aXZlLlxuXHQgICAgaWYgKHV0aWxzLmlzU3RhbmRhcmRCcm93c2VyRW52KCkpIHtcblx0ICAgICAgdmFyIGNvb2tpZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0OCk7XG5cdFxuXHQgICAgICAvLyBBZGQgeHNyZiBoZWFkZXJcblx0ICAgICAgdmFyIHhzcmZWYWx1ZSA9IChjb25maWcud2l0aENyZWRlbnRpYWxzIHx8IGlzVVJMU2FtZU9yaWdpbihjb25maWcudXJsKSkgJiYgY29uZmlnLnhzcmZDb29raWVOYW1lID9cblx0ICAgICAgICBjb29raWVzLnJlYWQoY29uZmlnLnhzcmZDb29raWVOYW1lKSA6XG5cdCAgICAgICAgdW5kZWZpbmVkO1xuXHRcblx0ICAgICAgaWYgKHhzcmZWYWx1ZSkge1xuXHQgICAgICAgIHJlcXVlc3RIZWFkZXJzW2NvbmZpZy54c3JmSGVhZGVyTmFtZV0gPSB4c3JmVmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBBZGQgaGVhZGVycyB0byB0aGUgcmVxdWVzdFxuXHQgICAgaWYgKCdzZXRSZXF1ZXN0SGVhZGVyJyBpbiByZXF1ZXN0KSB7XG5cdCAgICAgIHV0aWxzLmZvckVhY2gocmVxdWVzdEhlYWRlcnMsIGZ1bmN0aW9uIHNldFJlcXVlc3RIZWFkZXIodmFsLCBrZXkpIHtcblx0ICAgICAgICBpZiAodHlwZW9mIHJlcXVlc3REYXRhID09PSAndW5kZWZpbmVkJyAmJiBrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2NvbnRlbnQtdHlwZScpIHtcblx0ICAgICAgICAgIC8vIFJlbW92ZSBDb250ZW50LVR5cGUgaWYgZGF0YSBpcyB1bmRlZmluZWRcblx0ICAgICAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1trZXldO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyBPdGhlcndpc2UgYWRkIGhlYWRlciB0byB0aGUgcmVxdWVzdFxuXHQgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEFkZCB3aXRoQ3JlZGVudGlhbHMgdG8gcmVxdWVzdCBpZiBuZWVkZWRcblx0ICAgIGlmIChjb25maWcud2l0aENyZWRlbnRpYWxzKSB7XG5cdCAgICAgIHJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBBZGQgcmVzcG9uc2VUeXBlIHRvIHJlcXVlc3QgaWYgbmVlZGVkXG5cdCAgICBpZiAoY29uZmlnLnJlc3BvbnNlVHlwZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJlcXVlc3QucmVzcG9uc2VUeXBlID0gY29uZmlnLnJlc3BvbnNlVHlwZTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIC8vIEV4cGVjdGVkIERPTUV4Y2VwdGlvbiB0aHJvd24gYnkgYnJvd3NlcnMgbm90IGNvbXBhdGlibGUgWE1MSHR0cFJlcXVlc3QgTGV2ZWwgMi5cblx0ICAgICAgICAvLyBCdXQsIHRoaXMgY2FuIGJlIHN1cHByZXNzZWQgZm9yICdqc29uJyB0eXBlIGFzIGl0IGNhbiBiZSBwYXJzZWQgYnkgZGVmYXVsdCAndHJhbnNmb3JtUmVzcG9uc2UnIGZ1bmN0aW9uLlxuXHQgICAgICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlICE9PSAnanNvbicpIHtcblx0ICAgICAgICAgIHRocm93IGU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gSGFuZGxlIHByb2dyZXNzIGlmIG5lZWRlZFxuXHQgICAgaWYgKHR5cGVvZiBjb25maWcub25Eb3dubG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigncHJvZ3Jlc3MnLCBjb25maWcub25Eb3dubG9hZFByb2dyZXNzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBOb3QgYWxsIGJyb3dzZXJzIHN1cHBvcnQgdXBsb2FkIGV2ZW50c1xuXHQgICAgaWYgKHR5cGVvZiBjb25maWcub25VcGxvYWRQcm9ncmVzcyA9PT0gJ2Z1bmN0aW9uJyAmJiByZXF1ZXN0LnVwbG9hZCkge1xuXHQgICAgICByZXF1ZXN0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzKTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG5cdCAgICAgIC8vIEhhbmRsZSBjYW5jZWxsYXRpb25cblx0ICAgICAgY29uZmlnLmNhbmNlbFRva2VuLnByb21pc2UudGhlbihmdW5jdGlvbiBvbkNhbmNlbGVkKGNhbmNlbCkge1xuXHQgICAgICAgIGlmICghcmVxdWVzdCkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmVxdWVzdC5hYm9ydCgpO1xuXHQgICAgICAgIHJlamVjdChjYW5jZWwpO1xuXHQgICAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3Rcblx0ICAgICAgICByZXF1ZXN0ID0gbnVsbDtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHJlcXVlc3REYXRhID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgcmVxdWVzdERhdGEgPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFNlbmQgdGhlIHJlcXVlc3Rcblx0ICAgIHJlcXVlc3Quc2VuZChyZXF1ZXN0RGF0YSk7XG5cdCAgfSk7XG5cdH07XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM0Mzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgY3JlYXRlRXJyb3IgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM0NCk7XG5cdFxuXHQvKipcblx0ICogUmVzb2x2ZSBvciByZWplY3QgYSBQcm9taXNlIGJhc2VkIG9uIHJlc3BvbnNlIHN0YXR1cy5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZSBBIGZ1bmN0aW9uIHRoYXQgcmVzb2x2ZXMgdGhlIHByb21pc2UuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHJlamVjdCBBIGZ1bmN0aW9uIHRoYXQgcmVqZWN0cyB0aGUgcHJvbWlzZS5cblx0ICogQHBhcmFtIHtvYmplY3R9IHJlc3BvbnNlIFRoZSByZXNwb25zZS5cblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgcmVzcG9uc2UpIHtcblx0ICB2YXIgdmFsaWRhdGVTdGF0dXMgPSByZXNwb25zZS5jb25maWcudmFsaWRhdGVTdGF0dXM7XG5cdCAgaWYgKCF2YWxpZGF0ZVN0YXR1cyB8fCB2YWxpZGF0ZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpKSB7XG5cdCAgICByZXNvbHZlKHJlc3BvbnNlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmVqZWN0KGNyZWF0ZUVycm9yKFxuXHQgICAgICAnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXMgY29kZSAnICsgcmVzcG9uc2Uuc3RhdHVzLFxuXHQgICAgICByZXNwb25zZS5jb25maWcsXG5cdCAgICAgIG51bGwsXG5cdCAgICAgIHJlc3BvbnNlLnJlcXVlc3QsXG5cdCAgICAgIHJlc3BvbnNlXG5cdCAgICApKTtcblx0ICB9XG5cdH07XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM0NDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgZW5oYW5jZUVycm9yID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNDUpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS5cblx0ICpcblx0ICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgVGhlIGVycm9yIG1lc3NhZ2UuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cblx0ICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuXHQgKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBjcmVhdGVkIGVycm9yLlxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVFcnJvcihtZXNzYWdlLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG5cdCAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuXHQgIHJldHVybiBlbmhhbmNlRXJyb3IoZXJyb3IsIGNvbmZpZywgY29kZSwgcmVxdWVzdCwgcmVzcG9uc2UpO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNDU6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIFVwZGF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgY29uZmlnLCBlcnJvciBjb2RlLCBhbmQgcmVzcG9uc2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RXJyb3J9IGVycm9yIFRoZSBlcnJvciB0byB1cGRhdGUuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cblx0ICogQHBhcmFtIHtzdHJpbmd9IFtjb2RlXSBUaGUgZXJyb3IgY29kZSAoZm9yIGV4YW1wbGUsICdFQ09OTkFCT1JURUQnKS5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdC5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuXHQgKiBAcmV0dXJucyB7RXJyb3J9IFRoZSBlcnJvci5cblx0ICovXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG5cdCAgZXJyb3IuY29uZmlnID0gY29uZmlnO1xuXHQgIGlmIChjb2RlKSB7XG5cdCAgICBlcnJvci5jb2RlID0gY29kZTtcblx0ICB9XG5cdFxuXHQgIGVycm9yLnJlcXVlc3QgPSByZXF1ZXN0O1xuXHQgIGVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG5cdCAgZXJyb3IuaXNBeGlvc0Vycm9yID0gdHJ1ZTtcblx0XG5cdCAgZXJyb3IudG9KU09OID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICAvLyBTdGFuZGFyZFxuXHQgICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG5cdCAgICAgIG5hbWU6IHRoaXMubmFtZSxcblx0ICAgICAgLy8gTWljcm9zb2Z0XG5cdCAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uLFxuXHQgICAgICBudW1iZXI6IHRoaXMubnVtYmVyLFxuXHQgICAgICAvLyBNb3ppbGxhXG5cdCAgICAgIGZpbGVOYW1lOiB0aGlzLmZpbGVOYW1lLFxuXHQgICAgICBsaW5lTnVtYmVyOiB0aGlzLmxpbmVOdW1iZXIsXG5cdCAgICAgIGNvbHVtbk51bWJlcjogdGhpcy5jb2x1bW5OdW1iZXIsXG5cdCAgICAgIHN0YWNrOiB0aGlzLnN0YWNrLFxuXHQgICAgICAvLyBBeGlvc1xuXHQgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuXHQgICAgICBjb2RlOiB0aGlzLmNvZGVcblx0ICAgIH07XG5cdCAgfTtcblx0ICByZXR1cm4gZXJyb3I7XG5cdH07XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM0Njpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMCk7XG5cdFxuXHQvLyBIZWFkZXJzIHdob3NlIGR1cGxpY2F0ZXMgYXJlIGlnbm9yZWQgYnkgbm9kZVxuXHQvLyBjLmYuIGh0dHBzOi8vbm9kZWpzLm9yZy9hcGkvaHR0cC5odG1sI2h0dHBfbWVzc2FnZV9oZWFkZXJzXG5cdHZhciBpZ25vcmVEdXBsaWNhdGVPZiA9IFtcblx0ICAnYWdlJywgJ2F1dGhvcml6YXRpb24nLCAnY29udGVudC1sZW5ndGgnLCAnY29udGVudC10eXBlJywgJ2V0YWcnLFxuXHQgICdleHBpcmVzJywgJ2Zyb20nLCAnaG9zdCcsICdpZi1tb2RpZmllZC1zaW5jZScsICdpZi11bm1vZGlmaWVkLXNpbmNlJyxcblx0ICAnbGFzdC1tb2RpZmllZCcsICdsb2NhdGlvbicsICdtYXgtZm9yd2FyZHMnLCAncHJveHktYXV0aG9yaXphdGlvbicsXG5cdCAgJ3JlZmVyZXInLCAncmV0cnktYWZ0ZXInLCAndXNlci1hZ2VudCdcblx0XTtcblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBoZWFkZXJzIGludG8gYW4gb2JqZWN0XG5cdCAqXG5cdCAqIGBgYFxuXHQgKiBEYXRlOiBXZWQsIDI3IEF1ZyAyMDE0IDA4OjU4OjQ5IEdNVFxuXHQgKiBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cblx0ICogQ29ubmVjdGlvbjoga2VlcC1hbGl2ZVxuXHQgKiBUcmFuc2Zlci1FbmNvZGluZzogY2h1bmtlZFxuXHQgKiBgYGBcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGhlYWRlcnMgSGVhZGVycyBuZWVkaW5nIHRvIGJlIHBhcnNlZFxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBIZWFkZXJzIHBhcnNlZCBpbnRvIGFuIG9iamVjdFxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZUhlYWRlcnMoaGVhZGVycykge1xuXHQgIHZhciBwYXJzZWQgPSB7fTtcblx0ICB2YXIga2V5O1xuXHQgIHZhciB2YWw7XG5cdCAgdmFyIGk7XG5cdFxuXHQgIGlmICghaGVhZGVycykgeyByZXR1cm4gcGFyc2VkOyB9XG5cdFxuXHQgIHV0aWxzLmZvckVhY2goaGVhZGVycy5zcGxpdCgnXFxuJyksIGZ1bmN0aW9uIHBhcnNlcihsaW5lKSB7XG5cdCAgICBpID0gbGluZS5pbmRleE9mKCc6Jyk7XG5cdCAgICBrZXkgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKDAsIGkpKS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgdmFsID0gdXRpbHMudHJpbShsaW5lLnN1YnN0cihpICsgMSkpO1xuXHRcblx0ICAgIGlmIChrZXkpIHtcblx0ICAgICAgaWYgKHBhcnNlZFtrZXldICYmIGlnbm9yZUR1cGxpY2F0ZU9mLmluZGV4T2Yoa2V5KSA+PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChrZXkgPT09ICdzZXQtY29va2llJykge1xuXHQgICAgICAgIHBhcnNlZFtrZXldID0gKHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gOiBbXSkuY29uY2F0KFt2YWxdKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwYXJzZWRba2V5XSA9IHBhcnNlZFtrZXldID8gcGFyc2VkW2tleV0gKyAnLCAnICsgdmFsIDogdmFsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIHJldHVybiBwYXJzZWQ7XG5cdH07XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM0Nzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IChcblx0ICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblx0XG5cdCAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIGhhdmUgZnVsbCBzdXBwb3J0IG9mIHRoZSBBUElzIG5lZWRlZCB0byB0ZXN0XG5cdCAgLy8gd2hldGhlciB0aGUgcmVxdWVzdCBVUkwgaXMgb2YgdGhlIHNhbWUgb3JpZ2luIGFzIGN1cnJlbnQgbG9jYXRpb24uXG5cdCAgICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuXHQgICAgICB2YXIgbXNpZSA9IC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG5cdCAgICAgIHZhciB1cmxQYXJzaW5nTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcblx0ICAgICAgdmFyIG9yaWdpblVSTDtcblx0XG5cdCAgICAgIC8qKlxuXHQgICAgKiBQYXJzZSBhIFVSTCB0byBkaXNjb3ZlciBpdCdzIGNvbXBvbmVudHNcblx0ICAgICpcblx0ICAgICogQHBhcmFtIHtTdHJpbmd9IHVybCBUaGUgVVJMIHRvIGJlIHBhcnNlZFxuXHQgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuXHQgICAgKi9cblx0ICAgICAgZnVuY3Rpb24gcmVzb2x2ZVVSTCh1cmwpIHtcblx0ICAgICAgICB2YXIgaHJlZiA9IHVybDtcblx0XG5cdCAgICAgICAgaWYgKG1zaWUpIHtcblx0ICAgICAgICAvLyBJRSBuZWVkcyBhdHRyaWJ1dGUgc2V0IHR3aWNlIHRvIG5vcm1hbGl6ZSBwcm9wZXJ0aWVzXG5cdCAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcblx0ICAgICAgICAgIGhyZWYgPSB1cmxQYXJzaW5nTm9kZS5ocmVmO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdXJsUGFyc2luZ05vZGUuc2V0QXR0cmlidXRlKCdocmVmJywgaHJlZik7XG5cdFxuXHQgICAgICAgIC8vIHVybFBhcnNpbmdOb2RlIHByb3ZpZGVzIHRoZSBVcmxVdGlscyBpbnRlcmZhY2UgLSBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgaHJlZjogdXJsUGFyc2luZ05vZGUuaHJlZixcblx0ICAgICAgICAgIHByb3RvY29sOiB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbCA/IHVybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywgJycpIDogJycsXG5cdCAgICAgICAgICBob3N0OiB1cmxQYXJzaW5nTm9kZS5ob3N0LFxuXHQgICAgICAgICAgc2VhcmNoOiB1cmxQYXJzaW5nTm9kZS5zZWFyY2ggPyB1cmxQYXJzaW5nTm9kZS5zZWFyY2gucmVwbGFjZSgvXlxcPy8sICcnKSA6ICcnLFxuXHQgICAgICAgICAgaGFzaDogdXJsUGFyc2luZ05vZGUuaGFzaCA/IHVybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJyxcblx0ICAgICAgICAgIGhvc3RuYW1lOiB1cmxQYXJzaW5nTm9kZS5ob3N0bmFtZSxcblx0ICAgICAgICAgIHBvcnQ6IHVybFBhcnNpbmdOb2RlLnBvcnQsXG5cdCAgICAgICAgICBwYXRobmFtZTogKHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSA/XG5cdCAgICAgICAgICAgIHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lIDpcblx0ICAgICAgICAgICAgJy8nICsgdXJsUGFyc2luZ05vZGUucGF0aG5hbWVcblx0ICAgICAgICB9O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBvcmlnaW5VUkwgPSByZXNvbHZlVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblx0XG5cdCAgICAgIC8qKlxuXHQgICAgKiBEZXRlcm1pbmUgaWYgYSBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgY3VycmVudCBsb2NhdGlvblxuXHQgICAgKlxuXHQgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVxdWVzdFVSTCBUaGUgVVJMIHRvIHRlc3Rcblx0ICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4sIG90aGVyd2lzZSBmYWxzZVxuXHQgICAgKi9cblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbihyZXF1ZXN0VVJMKSB7XG5cdCAgICAgICAgdmFyIHBhcnNlZCA9ICh1dGlscy5pc1N0cmluZyhyZXF1ZXN0VVJMKSkgPyByZXNvbHZlVVJMKHJlcXVlc3RVUkwpIDogcmVxdWVzdFVSTDtcblx0ICAgICAgICByZXR1cm4gKHBhcnNlZC5wcm90b2NvbCA9PT0gb3JpZ2luVVJMLnByb3RvY29sICYmXG5cdCAgICAgICAgICAgIHBhcnNlZC5ob3N0ID09PSBvcmlnaW5VUkwuaG9zdCk7XG5cdCAgICAgIH07XG5cdCAgICB9KSgpIDpcblx0XG5cdCAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52cyAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cblx0ICAgIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbiBpc1VSTFNhbWVPcmlnaW4oKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH07XG5cdCAgICB9KSgpXG5cdCk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM0ODpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzMCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IChcblx0ICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblx0XG5cdCAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIHN1cHBvcnQgZG9jdW1lbnQuY29va2llXG5cdCAgICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZShuYW1lLCB2YWx1ZSwgZXhwaXJlcywgcGF0aCwgZG9tYWluLCBzZWN1cmUpIHtcblx0ICAgICAgICAgIHZhciBjb29raWUgPSBbXTtcblx0ICAgICAgICAgIGNvb2tpZS5wdXNoKG5hbWUgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcblx0XG5cdCAgICAgICAgICBpZiAodXRpbHMuaXNOdW1iZXIoZXhwaXJlcykpIHtcblx0ICAgICAgICAgICAgY29va2llLnB1c2goJ2V4cGlyZXM9JyArIG5ldyBEYXRlKGV4cGlyZXMpLnRvR01UU3RyaW5nKCkpO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGlmICh1dGlscy5pc1N0cmluZyhwYXRoKSkge1xuXHQgICAgICAgICAgICBjb29raWUucHVzaCgncGF0aD0nICsgcGF0aCk7XG5cdCAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgaWYgKHV0aWxzLmlzU3RyaW5nKGRvbWFpbikpIHtcblx0ICAgICAgICAgICAgY29va2llLnB1c2goJ2RvbWFpbj0nICsgZG9tYWluKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpZiAoc2VjdXJlID09PSB0cnVlKSB7XG5cdCAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdzZWN1cmUnKTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBjb29raWUuam9pbignOyAnKTtcblx0ICAgICAgICB9LFxuXHRcblx0ICAgICAgICByZWFkOiBmdW5jdGlvbiByZWFkKG5hbWUpIHtcblx0ICAgICAgICAgIHZhciBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChuZXcgUmVnRXhwKCcoXnw7XFxcXHMqKSgnICsgbmFtZSArICcpPShbXjtdKiknKSk7XG5cdCAgICAgICAgICByZXR1cm4gKG1hdGNoID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzNdKSA6IG51bGwpO1xuXHQgICAgICAgIH0sXG5cdFxuXHQgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5hbWUpIHtcblx0ICAgICAgICAgIHRoaXMud3JpdGUobmFtZSwgJycsIERhdGUubm93KCkgLSA4NjQwMDAwMCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgfSkoKSA6XG5cdFxuXHQgIC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudiAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cblx0ICAgIChmdW5jdGlvbiBub25TdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKCkge30sXG5cdCAgICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZCgpIHsgcmV0dXJuIG51bGw7IH0sXG5cdCAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7fVxuXHQgICAgICB9O1xuXHQgICAgfSkoKVxuXHQpO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNDk6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0LyoqXG5cdCAqIERldGVybWluZXMgd2hldGhlciB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZVxuXHQgKlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBVUkwgdG8gdGVzdFxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3BlY2lmaWVkIFVSTCBpcyBhYnNvbHV0ZSwgb3RoZXJ3aXNlIGZhbHNlXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7XG5cdCAgLy8gQSBVUkwgaXMgY29uc2lkZXJlZCBhYnNvbHV0ZSBpZiBpdCBiZWdpbnMgd2l0aCBcIjxzY2hlbWU+Oi8vXCIgb3IgXCIvL1wiIChwcm90b2NvbC1yZWxhdGl2ZSBVUkwpLlxuXHQgIC8vIFJGQyAzOTg2IGRlZmluZXMgc2NoZW1lIG5hbWUgYXMgYSBzZXF1ZW5jZSBvZiBjaGFyYWN0ZXJzIGJlZ2lubmluZyB3aXRoIGEgbGV0dGVyIGFuZCBmb2xsb3dlZFxuXHQgIC8vIGJ5IGFueSBjb21iaW5hdGlvbiBvZiBsZXR0ZXJzLCBkaWdpdHMsIHBsdXMsIHBlcmlvZCwgb3IgaHlwaGVuLlxuXHQgIHJldHVybiAvXihbYS16XVthLXpcXGRcXCtcXC1cXC5dKjopP1xcL1xcLy9pLnRlc3QodXJsKTtcblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzUwOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbmV3IFVSTCBieSBjb21iaW5pbmcgdGhlIHNwZWNpZmllZCBVUkxzXG5cdCAqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcmVsYXRpdmVVUkwgVGhlIHJlbGF0aXZlIFVSTFxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBUaGUgY29tYmluZWQgVVJMXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNvbWJpbmVVUkxzKGJhc2VVUkwsIHJlbGF0aXZlVVJMKSB7XG5cdCAgcmV0dXJuIHJlbGF0aXZlVVJMXG5cdCAgICA/IGJhc2VVUkwucmVwbGFjZSgvXFwvKyQvLCAnJykgKyAnLycgKyByZWxhdGl2ZVVSTC5yZXBsYWNlKC9eXFwvKy8sICcnKVxuXHQgICAgOiBiYXNlVVJMO1xuXHR9O1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNTE6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMzApO1xuXHRcblx0LyoqXG5cdCAqIENvbmZpZy1zcGVjaWZpYyBtZXJnZS1mdW5jdGlvbiB3aGljaCBjcmVhdGVzIGEgbmV3IGNvbmZpZy1vYmplY3Rcblx0ICogYnkgbWVyZ2luZyB0d28gY29uZmlndXJhdGlvbiBvYmplY3RzIHRvZ2V0aGVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMVxuXHQgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBOZXcgb2JqZWN0IHJlc3VsdGluZyBmcm9tIG1lcmdpbmcgY29uZmlnMiB0byBjb25maWcxXG5cdCAqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1lcmdlQ29uZmlnKGNvbmZpZzEsIGNvbmZpZzIpIHtcblx0ICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cblx0ICBjb25maWcyID0gY29uZmlnMiB8fCB7fTtcblx0ICB2YXIgY29uZmlnID0ge307XG5cdFxuXHQgIHV0aWxzLmZvckVhY2goWyd1cmwnLCAnbWV0aG9kJywgJ3BhcmFtcycsICdkYXRhJ10sIGZ1bmN0aW9uIHZhbHVlRnJvbUNvbmZpZzIocHJvcCkge1xuXHQgICAgaWYgKHR5cGVvZiBjb25maWcyW3Byb3BdICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICBjb25maWdbcHJvcF0gPSBjb25maWcyW3Byb3BdO1xuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICB1dGlscy5mb3JFYWNoKFsnaGVhZGVycycsICdhdXRoJywgJ3Byb3h5J10sIGZ1bmN0aW9uIG1lcmdlRGVlcFByb3BlcnRpZXMocHJvcCkge1xuXHQgICAgaWYgKHV0aWxzLmlzT2JqZWN0KGNvbmZpZzJbcHJvcF0pKSB7XG5cdCAgICAgIGNvbmZpZ1twcm9wXSA9IHV0aWxzLmRlZXBNZXJnZShjb25maWcxW3Byb3BdLCBjb25maWcyW3Byb3BdKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZzJbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzJbcHJvcF07XG5cdCAgICB9IGVsc2UgaWYgKHV0aWxzLmlzT2JqZWN0KGNvbmZpZzFbcHJvcF0pKSB7XG5cdCAgICAgIGNvbmZpZ1twcm9wXSA9IHV0aWxzLmRlZXBNZXJnZShjb25maWcxW3Byb3BdKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZzFbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzFbcHJvcF07XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIHV0aWxzLmZvckVhY2goW1xuXHQgICAgJ2Jhc2VVUkwnLCAndHJhbnNmb3JtUmVxdWVzdCcsICd0cmFuc2Zvcm1SZXNwb25zZScsICdwYXJhbXNTZXJpYWxpemVyJyxcblx0ICAgICd0aW1lb3V0JywgJ3dpdGhDcmVkZW50aWFscycsICdhZGFwdGVyJywgJ3Jlc3BvbnNlVHlwZScsICd4c3JmQ29va2llTmFtZScsXG5cdCAgICAneHNyZkhlYWRlck5hbWUnLCAnb25VcGxvYWRQcm9ncmVzcycsICdvbkRvd25sb2FkUHJvZ3Jlc3MnLCAnbWF4Q29udGVudExlbmd0aCcsXG5cdCAgICAndmFsaWRhdGVTdGF0dXMnLCAnbWF4UmVkaXJlY3RzJywgJ2h0dHBBZ2VudCcsICdodHRwc0FnZW50JywgJ2NhbmNlbFRva2VuJyxcblx0ICAgICdzb2NrZXRQYXRoJ1xuXHQgIF0sIGZ1bmN0aW9uIGRlZmF1bHRUb0NvbmZpZzIocHJvcCkge1xuXHQgICAgaWYgKHR5cGVvZiBjb25maWcyW3Byb3BdICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICBjb25maWdbcHJvcF0gPSBjb25maWcyW3Byb3BdO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnMVtwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMVtwcm9wXTtcblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgcmV0dXJuIGNvbmZpZztcblx0fTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzUyOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBBIGBDYW5jZWxgIGlzIGFuIG9iamVjdCB0aGF0IGlzIHRocm93biB3aGVuIGFuIG9wZXJhdGlvbiBpcyBjYW5jZWxlZC5cblx0ICpcblx0ICogQGNsYXNzXG5cdCAqIEBwYXJhbSB7c3RyaW5nPX0gbWVzc2FnZSBUaGUgbWVzc2FnZS5cblx0ICovXG5cdGZ1bmN0aW9uIENhbmNlbChtZXNzYWdlKSB7XG5cdCAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcblx0fVxuXHRcblx0Q2FuY2VsLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuXHQgIHJldHVybiAnQ2FuY2VsJyArICh0aGlzLm1lc3NhZ2UgPyAnOiAnICsgdGhpcy5tZXNzYWdlIDogJycpO1xuXHR9O1xuXHRcblx0Q2FuY2VsLnByb3RvdHlwZS5fX0NBTkNFTF9fID0gdHJ1ZTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gQ2FuY2VsO1xuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNTM6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIENhbmNlbCA9IF9fd2VicGFja19yZXF1aXJlX18oMzUyKTtcblx0XG5cdC8qKlxuXHQgKiBBIGBDYW5jZWxUb2tlbmAgaXMgYW4gb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVxdWVzdCBjYW5jZWxsYXRpb24gb2YgYW4gb3BlcmF0aW9uLlxuXHQgKlxuXHQgKiBAY2xhc3Ncblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZXhlY3V0b3IgVGhlIGV4ZWN1dG9yIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gQ2FuY2VsVG9rZW4oZXhlY3V0b3IpIHtcblx0ICBpZiAodHlwZW9mIGV4ZWN1dG9yICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG5cdCAgfVxuXHRcblx0ICB2YXIgcmVzb2x2ZVByb21pc2U7XG5cdCAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gcHJvbWlzZUV4ZWN1dG9yKHJlc29sdmUpIHtcblx0ICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcblx0ICB9KTtcblx0XG5cdCAgdmFyIHRva2VuID0gdGhpcztcblx0ICBleGVjdXRvcihmdW5jdGlvbiBjYW5jZWwobWVzc2FnZSkge1xuXHQgICAgaWYgKHRva2VuLnJlYXNvbikge1xuXHQgICAgICAvLyBDYW5jZWxsYXRpb24gaGFzIGFscmVhZHkgYmVlbiByZXF1ZXN0ZWRcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHRva2VuLnJlYXNvbiA9IG5ldyBDYW5jZWwobWVzc2FnZSk7XG5cdCAgICByZXNvbHZlUHJvbWlzZSh0b2tlbi5yZWFzb24pO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cblx0ICovXG5cdENhbmNlbFRva2VuLnByb3RvdHlwZS50aHJvd0lmUmVxdWVzdGVkID0gZnVuY3Rpb24gdGhyb3dJZlJlcXVlc3RlZCgpIHtcblx0ICBpZiAodGhpcy5yZWFzb24pIHtcblx0ICAgIHRocm93IHRoaXMucmVhc29uO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG5cdCAqIGNhbmNlbHMgdGhlIGBDYW5jZWxUb2tlbmAuXG5cdCAqL1xuXHRDYW5jZWxUb2tlbi5zb3VyY2UgPSBmdW5jdGlvbiBzb3VyY2UoKSB7XG5cdCAgdmFyIGNhbmNlbDtcblx0ICB2YXIgdG9rZW4gPSBuZXcgQ2FuY2VsVG9rZW4oZnVuY3Rpb24gZXhlY3V0b3IoYykge1xuXHQgICAgY2FuY2VsID0gYztcblx0ICB9KTtcblx0ICByZXR1cm4ge1xuXHQgICAgdG9rZW46IHRva2VuLFxuXHQgICAgY2FuY2VsOiBjYW5jZWxcblx0ICB9O1xuXHR9O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBDYW5jZWxUb2tlbjtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzU0OlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdC8qKlxuXHQgKiBTeW50YWN0aWMgc3VnYXIgZm9yIGludm9raW5nIGEgZnVuY3Rpb24gYW5kIGV4cGFuZGluZyBhbiBhcnJheSBmb3IgYXJndW1lbnRzLlxuXHQgKlxuXHQgKiBDb21tb24gdXNlIGNhc2Ugd291bGQgYmUgdG8gdXNlIGBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHlgLlxuXHQgKlxuXHQgKiAgYGBganNcblx0ICogIGZ1bmN0aW9uIGYoeCwgeSwgeikge31cblx0ICogIHZhciBhcmdzID0gWzEsIDIsIDNdO1xuXHQgKiAgZi5hcHBseShudWxsLCBhcmdzKTtcblx0ICogIGBgYFxuXHQgKlxuXHQgKiBXaXRoIGBzcHJlYWRgIHRoaXMgZXhhbXBsZSBjYW4gYmUgcmUtd3JpdHRlbi5cblx0ICpcblx0ICogIGBgYGpzXG5cdCAqICBzcHJlYWQoZnVuY3Rpb24oeCwgeSwgeikge30pKFsxLCAyLCAzXSk7XG5cdCAqICBgYGBcblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcblx0ICogQHJldHVybnMge0Z1bmN0aW9ufVxuXHQgKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzcHJlYWQoY2FsbGJhY2spIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gd3JhcChhcnIpIHtcblx0ICAgIHJldHVybiBjYWxsYmFjay5hcHBseShudWxsLCBhcnIpO1xuXHQgIH07XG5cdH07XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM1NTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRleHBvcnRzLmVuY29kZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzU2KTtcblx0ZXhwb3J0cy5kZWNvZGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1Nyk7XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM1Njpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGVuY29kZTtcblx0XG5cdHZhciBrZXlzLCBrZXlzTnVtLCBrZXlzQXJyLCBkaW0sIGUsXG5cdCAgICBtYXhQcmVjaXNpb24gPSAxZTY7XG5cdFxuXHR2YXIgZ2VvbWV0cnlUeXBlcyA9IHtcblx0ICAgICdQb2ludCc6IDAsXG5cdCAgICAnTXVsdGlQb2ludCc6IDEsXG5cdCAgICAnTGluZVN0cmluZyc6IDIsXG5cdCAgICAnTXVsdGlMaW5lU3RyaW5nJzogMyxcblx0ICAgICdQb2x5Z29uJzogNCxcblx0ICAgICdNdWx0aVBvbHlnb24nOiA1LFxuXHQgICAgJ0dlb21ldHJ5Q29sbGVjdGlvbic6IDZcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGVuY29kZShvYmosIHBiZikge1xuXHQgICAga2V5cyA9IHt9O1xuXHQgICAga2V5c0FyciA9IFtdO1xuXHQgICAga2V5c051bSA9IDA7XG5cdCAgICBkaW0gPSAwO1xuXHQgICAgZSA9IDE7XG5cdFxuXHQgICAgYW5hbHl6ZShvYmopO1xuXHRcblx0ICAgIGUgPSBNYXRoLm1pbihlLCBtYXhQcmVjaXNpb24pO1xuXHQgICAgdmFyIHByZWNpc2lvbiA9IE1hdGguY2VpbChNYXRoLmxvZyhlKSAvIE1hdGguTE4xMCk7XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzQXJyLmxlbmd0aDsgaSsrKSBwYmYud3JpdGVTdHJpbmdGaWVsZCgxLCBrZXlzQXJyW2ldKTtcblx0ICAgIGlmIChkaW0gIT09IDIpIHBiZi53cml0ZVZhcmludEZpZWxkKDIsIGRpbSk7XG5cdCAgICBpZiAocHJlY2lzaW9uICE9PSA2KSBwYmYud3JpdGVWYXJpbnRGaWVsZCgzLCBwcmVjaXNpb24pO1xuXHRcblx0ICAgIGlmIChvYmoudHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykgcGJmLndyaXRlTWVzc2FnZSg0LCB3cml0ZUZlYXR1cmVDb2xsZWN0aW9uLCBvYmopO1xuXHQgICAgZWxzZSBpZiAob2JqLnR5cGUgPT09ICdGZWF0dXJlJykgcGJmLndyaXRlTWVzc2FnZSg1LCB3cml0ZUZlYXR1cmUsIG9iaik7XG5cdCAgICBlbHNlIHBiZi53cml0ZU1lc3NhZ2UoNiwgd3JpdGVHZW9tZXRyeSwgb2JqKTtcblx0XG5cdCAgICBrZXlzID0gbnVsbDtcblx0XG5cdCAgICByZXR1cm4gcGJmLmZpbmlzaCgpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhbmFseXplKG9iaikge1xuXHQgICAgdmFyIGksIGtleTtcblx0XG5cdCAgICBpZiAob2JqLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgb2JqLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSBhbmFseXplKG9iai5mZWF0dXJlc1tpXSk7XG5cdFxuXHQgICAgfSBlbHNlIGlmIChvYmoudHlwZSA9PT0gJ0ZlYXR1cmUnKSB7XG5cdCAgICAgICAgaWYgKG9iai5nZW9tZXRyeSAhPT0gbnVsbCkgYW5hbHl6ZShvYmouZ2VvbWV0cnkpO1xuXHQgICAgICAgIGZvciAoa2V5IGluIG9iai5wcm9wZXJ0aWVzKSBzYXZlS2V5KGtleSk7XG5cdFxuXHQgICAgfSBlbHNlIGlmIChvYmoudHlwZSA9PT0gJ1BvaW50JykgYW5hbHl6ZVBvaW50KG9iai5jb29yZGluYXRlcyk7XG5cdCAgICBlbHNlIGlmIChvYmoudHlwZSA9PT0gJ011bHRpUG9pbnQnKSBhbmFseXplUG9pbnRzKG9iai5jb29yZGluYXRlcyk7XG5cdCAgICBlbHNlIGlmIChvYmoudHlwZSA9PT0gJ0dlb21ldHJ5Q29sbGVjdGlvbicpIHtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgb2JqLmdlb21ldHJpZXMubGVuZ3RoOyBpKyspIGFuYWx5emUob2JqLmdlb21ldHJpZXNbaV0pO1xuXHQgICAgfVxuXHQgICAgZWxzZSBpZiAob2JqLnR5cGUgPT09ICdMaW5lU3RyaW5nJykgYW5hbHl6ZVBvaW50cyhvYmouY29vcmRpbmF0ZXMpO1xuXHQgICAgZWxzZSBpZiAob2JqLnR5cGUgPT09ICdQb2x5Z29uJyB8fCBvYmoudHlwZSA9PT0gJ011bHRpTGluZVN0cmluZycpIGFuYWx5emVNdWx0aUxpbmUob2JqLmNvb3JkaW5hdGVzKTtcblx0ICAgIGVsc2UgaWYgKG9iai50eXBlID09PSAnTXVsdGlQb2x5Z29uJykge1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBvYmouY29vcmRpbmF0ZXMubGVuZ3RoOyBpKyspIGFuYWx5emVNdWx0aUxpbmUob2JqLmNvb3JkaW5hdGVzW2ldKTtcblx0ICAgIH1cblx0XG5cdCAgICBmb3IgKGtleSBpbiBvYmopIHtcblx0ICAgICAgICBpZiAoIWlzU3BlY2lhbEtleShrZXksIG9iai50eXBlKSkgc2F2ZUtleShrZXkpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhbmFseXplTXVsdGlMaW5lKGNvb3Jkcykge1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIGFuYWx5emVQb2ludHMoY29vcmRzW2ldKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYW5hbHl6ZVBvaW50cyhjb29yZHMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSBhbmFseXplUG9pbnQoY29vcmRzW2ldKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYW5hbHl6ZVBvaW50KHBvaW50KSB7XG5cdCAgICBkaW0gPSBNYXRoLm1heChkaW0sIHBvaW50Lmxlbmd0aCk7XG5cdFxuXHQgICAgLy8gZmluZCBtYXggcHJlY2lzaW9uXG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvaW50Lmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgd2hpbGUgKE1hdGgucm91bmQocG9pbnRbaV0gKiBlKSAvIGUgIT09IHBvaW50W2ldICYmIGUgPCBtYXhQcmVjaXNpb24pIGUgKj0gMTA7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNhdmVLZXkoa2V5KSB7XG5cdCAgICBpZiAoa2V5c1trZXldID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICBrZXlzQXJyLnB1c2goa2V5KTtcblx0ICAgICAgICBrZXlzW2tleV0gPSBrZXlzTnVtKys7XG5cdCAgICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlRmVhdHVyZUNvbGxlY3Rpb24ob2JqLCBwYmYpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgcGJmLndyaXRlTWVzc2FnZSgxLCB3cml0ZUZlYXR1cmUsIG9iai5mZWF0dXJlc1tpXSk7XG5cdCAgICB9XG5cdCAgICB3cml0ZVByb3BzKG9iaiwgcGJmLCB0cnVlKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gd3JpdGVGZWF0dXJlKGZlYXR1cmUsIHBiZikge1xuXHQgICAgaWYgKGZlYXR1cmUuZ2VvbWV0cnkgIT09IG51bGwpIHBiZi53cml0ZU1lc3NhZ2UoMSwgd3JpdGVHZW9tZXRyeSwgZmVhdHVyZS5nZW9tZXRyeSk7XG5cdFxuXHQgICAgaWYgKGZlYXR1cmUuaWQgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgZmVhdHVyZS5pZCA9PT0gJ251bWJlcicgJiYgZmVhdHVyZS5pZCAlIDEgPT09IDApIHBiZi53cml0ZVNWYXJpbnRGaWVsZCgxMiwgZmVhdHVyZS5pZCk7XG5cdCAgICAgICAgZWxzZSBwYmYud3JpdGVTdHJpbmdGaWVsZCgxMSwgZmVhdHVyZS5pZCk7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGZlYXR1cmUucHJvcGVydGllcykgd3JpdGVQcm9wcyhmZWF0dXJlLnByb3BlcnRpZXMsIHBiZik7XG5cdCAgICB3cml0ZVByb3BzKGZlYXR1cmUsIHBiZiwgdHJ1ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlR2VvbWV0cnkoZ2VvbSwgcGJmKSB7XG5cdCAgICBwYmYud3JpdGVWYXJpbnRGaWVsZCgxLCBnZW9tZXRyeVR5cGVzW2dlb20udHlwZV0pO1xuXHRcblx0ICAgIHZhciBjb29yZHMgPSBnZW9tLmNvb3JkaW5hdGVzO1xuXHRcblx0ICAgIGlmIChnZW9tLnR5cGUgPT09ICdQb2ludCcpIHdyaXRlUG9pbnQoY29vcmRzLCBwYmYpO1xuXHQgICAgZWxzZSBpZiAoZ2VvbS50eXBlID09PSAnTXVsdGlQb2ludCcpIHdyaXRlTGluZShjb29yZHMsIHBiZiwgdHJ1ZSk7XG5cdCAgICBlbHNlIGlmIChnZW9tLnR5cGUgPT09ICdMaW5lU3RyaW5nJykgd3JpdGVMaW5lKGNvb3JkcywgcGJmKTtcblx0ICAgIGVsc2UgaWYgKGdlb20udHlwZSA9PT0gJ011bHRpTGluZVN0cmluZycpIHdyaXRlTXVsdGlMaW5lKGNvb3JkcywgcGJmKTtcblx0ICAgIGVsc2UgaWYgKGdlb20udHlwZSA9PT0gJ1BvbHlnb24nKSB3cml0ZU11bHRpTGluZShjb29yZHMsIHBiZiwgdHJ1ZSk7XG5cdCAgICBlbHNlIGlmIChnZW9tLnR5cGUgPT09ICdNdWx0aVBvbHlnb24nKSB3cml0ZU11bHRpUG9seWdvbihjb29yZHMsIHBiZik7XG5cdCAgICBlbHNlIGlmIChnZW9tLnR5cGUgPT09ICdHZW9tZXRyeUNvbGxlY3Rpb24nKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZW9tLmdlb21ldHJpZXMubGVuZ3RoOyBpKyspIHBiZi53cml0ZU1lc3NhZ2UoNCwgd3JpdGVHZW9tZXRyeSwgZ2VvbS5nZW9tZXRyaWVzW2ldKTtcblx0ICAgIH1cblx0XG5cdCAgICB3cml0ZVByb3BzKGdlb20sIHBiZiwgdHJ1ZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlUHJvcHMocHJvcHMsIHBiZiwgaXNDdXN0b20pIHtcblx0ICAgIHZhciBpbmRleGVzID0gW10sXG5cdCAgICAgICAgdmFsdWVJbmRleCA9IDA7XG5cdFxuXHQgICAgZm9yICh2YXIga2V5IGluIHByb3BzKSB7XG5cdCAgICAgICAgaWYgKGlzQ3VzdG9tICYmIGlzU3BlY2lhbEtleShrZXksIHByb3BzLnR5cGUpKSB7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBwYmYud3JpdGVNZXNzYWdlKDEzLCB3cml0ZVZhbHVlLCBwcm9wc1trZXldKTtcblx0ICAgICAgICBpbmRleGVzLnB1c2goa2V5c1trZXldKTtcblx0ICAgICAgICBpbmRleGVzLnB1c2godmFsdWVJbmRleCsrKTtcblx0ICAgIH1cblx0ICAgIHBiZi53cml0ZVBhY2tlZFZhcmludChpc0N1c3RvbSA/IDE1IDogMTQsIGluZGV4ZXMpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZVZhbHVlKHZhbHVlLCBwYmYpIHtcblx0ICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuO1xuXHRcblx0ICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHRcblx0ICAgIGlmICh0eXBlID09PSAnc3RyaW5nJykgcGJmLndyaXRlU3RyaW5nRmllbGQoMSwgdmFsdWUpO1xuXHQgICAgZWxzZSBpZiAodHlwZSA9PT0gJ2Jvb2xlYW4nKSBwYmYud3JpdGVCb29sZWFuRmllbGQoNSwgdmFsdWUpO1xuXHQgICAgZWxzZSBpZiAodHlwZSA9PT0gJ29iamVjdCcpIHBiZi53cml0ZVN0cmluZ0ZpZWxkKDYsIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG5cdCAgICBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJykge1xuXHQgICAgICAgIGlmICh2YWx1ZSAlIDEgIT09IDApIHBiZi53cml0ZURvdWJsZUZpZWxkKDIsIHZhbHVlKTtcblx0ICAgICAgICBlbHNlIGlmICh2YWx1ZSA+PSAwKSBwYmYud3JpdGVWYXJpbnRGaWVsZCgzLCB2YWx1ZSk7XG5cdCAgICAgICAgZWxzZSBwYmYud3JpdGVWYXJpbnRGaWVsZCg0LCAtdmFsdWUpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZVBvaW50KHBvaW50LCBwYmYpIHtcblx0ICAgIHZhciBjb29yZHMgPSBbXTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltOyBpKyspIGNvb3Jkcy5wdXNoKE1hdGgucm91bmQocG9pbnRbaV0gKiBlKSk7XG5cdCAgICBwYmYud3JpdGVQYWNrZWRTVmFyaW50KDMsIGNvb3Jkcyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlTGluZShsaW5lLCBwYmYpIHtcblx0ICAgIHZhciBjb29yZHMgPSBbXTtcblx0ICAgIHBvcHVsYXRlTGluZShjb29yZHMsIGxpbmUpO1xuXHQgICAgcGJmLndyaXRlUGFja2VkU1ZhcmludCgzLCBjb29yZHMpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZU11bHRpTGluZShsaW5lcywgcGJmLCBjbG9zZWQpIHtcblx0ICAgIHZhciBsZW4gPSBsaW5lcy5sZW5ndGgsXG5cdCAgICAgICAgaTtcblx0ICAgIGlmIChsZW4gIT09IDEpIHtcblx0ICAgICAgICB2YXIgbGVuZ3RocyA9IFtdO1xuXHQgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgbGVuZ3Rocy5wdXNoKGxpbmVzW2ldLmxlbmd0aCAtIChjbG9zZWQgPyAxIDogMCkpO1xuXHQgICAgICAgIHBiZi53cml0ZVBhY2tlZFZhcmludCgyLCBsZW5ndGhzKTtcblx0ICAgICAgICAvLyBUT0RPIGZhc3RlciB3aXRoIGN1c3RvbSB3cml0ZU1lc3NhZ2U/XG5cdCAgICB9XG5cdCAgICB2YXIgY29vcmRzID0gW107XG5cdCAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHBvcHVsYXRlTGluZShjb29yZHMsIGxpbmVzW2ldLCBjbG9zZWQpO1xuXHQgICAgcGJmLndyaXRlUGFja2VkU1ZhcmludCgzLCBjb29yZHMpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZU11bHRpUG9seWdvbihwb2x5Z29ucywgcGJmKSB7XG5cdCAgICB2YXIgbGVuID0gcG9seWdvbnMubGVuZ3RoLFxuXHQgICAgICAgIGksIGo7XG5cdCAgICBpZiAobGVuICE9PSAxIHx8IHBvbHlnb25zWzBdLmxlbmd0aCAhPT0gMSkge1xuXHQgICAgICAgIHZhciBsZW5ndGhzID0gW2xlbl07XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cdCAgICAgICAgICAgIGxlbmd0aHMucHVzaChwb2x5Z29uc1tpXS5sZW5ndGgpO1xuXHQgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgcG9seWdvbnNbaV0ubGVuZ3RoOyBqKyspIGxlbmd0aHMucHVzaChwb2x5Z29uc1tpXVtqXS5sZW5ndGggLSAxKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcGJmLndyaXRlUGFja2VkVmFyaW50KDIsIGxlbmd0aHMpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjb29yZHMgPSBbXTtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgIGZvciAoaiA9IDA7IGogPCBwb2x5Z29uc1tpXS5sZW5ndGg7IGorKykgcG9wdWxhdGVMaW5lKGNvb3JkcywgcG9seWdvbnNbaV1bal0sIHRydWUpO1xuXHQgICAgfVxuXHQgICAgcGJmLndyaXRlUGFja2VkU1ZhcmludCgzLCBjb29yZHMpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwb3B1bGF0ZUxpbmUoY29vcmRzLCBsaW5lLCBjbG9zZWQpIHtcblx0ICAgIHZhciBpLCBqLFxuXHQgICAgICAgIGxlbiA9IGxpbmUubGVuZ3RoIC0gKGNsb3NlZCA/IDEgOiAwKSxcblx0ICAgICAgICBzdW0gPSBuZXcgQXJyYXkoZGltKTtcblx0ICAgIGZvciAoaiA9IDA7IGogPCBkaW07IGorKykgc3VtW2pdID0gMDtcblx0ICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgIGZvciAoaiA9IDA7IGogPCBkaW07IGorKykge1xuXHQgICAgICAgICAgICB2YXIgbiA9IE1hdGgucm91bmQobGluZVtpXVtqXSAqIGUpIC0gc3VtW2pdO1xuXHQgICAgICAgICAgICBjb29yZHMucHVzaChuKTtcblx0ICAgICAgICAgICAgc3VtW2pdICs9IG47XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1NwZWNpYWxLZXkoa2V5LCB0eXBlKSB7XG5cdCAgICBpZiAoa2V5ID09PSAndHlwZScpIHJldHVybiB0cnVlO1xuXHQgICAgZWxzZSBpZiAodHlwZSA9PT0gJ0ZlYXR1cmVDb2xsZWN0aW9uJykge1xuXHQgICAgICAgIGlmIChrZXkgPT09ICdmZWF0dXJlcycpIHJldHVybiB0cnVlO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlID09PSAnRmVhdHVyZScpIHtcblx0ICAgICAgICBpZiAoa2V5ID09PSAnaWQnIHx8IGtleSA9PT0gJ3Byb3BlcnRpZXMnIHx8IGtleSA9PT0gJ2dlb21ldHJ5JykgcmV0dXJuIHRydWU7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdHZW9tZXRyeUNvbGxlY3Rpb24nKSB7XG5cdCAgICAgICAgaWYgKGtleSA9PT0gJ2dlb21ldHJpZXMnKSByZXR1cm4gdHJ1ZTtcblx0ICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnY29vcmRpbmF0ZXMnKSByZXR1cm4gdHJ1ZTtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0fVxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNTc6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkZWNvZGU7XG5cdFxuXHR2YXIga2V5cywgdmFsdWVzLCBsZW5ndGhzLCBkaW0sIGU7XG5cdFxuXHR2YXIgZ2VvbWV0cnlUeXBlcyA9IFtcblx0ICAgICdQb2ludCcsICdNdWx0aVBvaW50JywgJ0xpbmVTdHJpbmcnLCAnTXVsdGlMaW5lU3RyaW5nJyxcblx0ICAgICdQb2x5Z29uJywgJ011bHRpUG9seWdvbicsICdHZW9tZXRyeUNvbGxlY3Rpb24nXTtcblx0XG5cdGZ1bmN0aW9uIGRlY29kZShwYmYpIHtcblx0ICAgIGRpbSA9IDI7XG5cdCAgICBlID0gTWF0aC5wb3coMTAsIDYpO1xuXHQgICAgbGVuZ3RocyA9IG51bGw7XG5cdFxuXHQgICAga2V5cyA9IFtdO1xuXHQgICAgdmFsdWVzID0gW107XG5cdCAgICB2YXIgb2JqID0gcGJmLnJlYWRGaWVsZHMocmVhZERhdGFGaWVsZCwge30pO1xuXHQgICAga2V5cyA9IG51bGw7XG5cdFxuXHQgICAgcmV0dXJuIG9iajtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZERhdGFGaWVsZCh0YWcsIG9iaiwgcGJmKSB7XG5cdCAgICBpZiAodGFnID09PSAxKSBrZXlzLnB1c2gocGJmLnJlYWRTdHJpbmcoKSk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDIpIGRpbSA9IHBiZi5yZWFkVmFyaW50KCk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDMpIGUgPSBNYXRoLnBvdygxMCwgcGJmLnJlYWRWYXJpbnQoKSk7XG5cdFxuXHQgICAgZWxzZSBpZiAodGFnID09PSA0KSByZWFkRmVhdHVyZUNvbGxlY3Rpb24ocGJmLCBvYmopO1xuXHQgICAgZWxzZSBpZiAodGFnID09PSA1KSByZWFkRmVhdHVyZShwYmYsIG9iaik7XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDYpIHJlYWRHZW9tZXRyeShwYmYsIG9iaik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRGZWF0dXJlQ29sbGVjdGlvbihwYmYsIG9iaikge1xuXHQgICAgb2JqLnR5cGUgPSAnRmVhdHVyZUNvbGxlY3Rpb24nO1xuXHQgICAgb2JqLmZlYXR1cmVzID0gW107XG5cdCAgICByZXR1cm4gcGJmLnJlYWRNZXNzYWdlKHJlYWRGZWF0dXJlQ29sbGVjdGlvbkZpZWxkLCBvYmopO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkRmVhdHVyZShwYmYsIGZlYXR1cmUpIHtcblx0ICAgIGZlYXR1cmUudHlwZSA9ICdGZWF0dXJlJztcblx0ICAgIHZhciBmID0gcGJmLnJlYWRNZXNzYWdlKHJlYWRGZWF0dXJlRmllbGQsIGZlYXR1cmUpO1xuXHQgICAgaWYgKCFmLmhhc093blByb3BlcnR5KCdnZW9tZXRyeScpKSBmLmdlb21ldHJ5ID0gbnVsbDtcblx0ICAgIHJldHVybiBmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkR2VvbWV0cnkocGJmLCBnZW9tKSB7XG5cdCAgICByZXR1cm4gcGJmLnJlYWRNZXNzYWdlKHJlYWRHZW9tZXRyeUZpZWxkLCBnZW9tKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZEZlYXR1cmVDb2xsZWN0aW9uRmllbGQodGFnLCBvYmosIHBiZikge1xuXHQgICAgaWYgKHRhZyA9PT0gMSkgb2JqLmZlYXR1cmVzLnB1c2gocmVhZEZlYXR1cmUocGJmLCB7fSkpO1xuXHRcblx0ICAgIGVsc2UgaWYgKHRhZyA9PT0gMTMpIHZhbHVlcy5wdXNoKHJlYWRWYWx1ZShwYmYpKTtcblx0ICAgIGVsc2UgaWYgKHRhZyA9PT0gMTUpIHJlYWRQcm9wcyhwYmYsIG9iaik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRGZWF0dXJlRmllbGQodGFnLCBmZWF0dXJlLCBwYmYpIHtcblx0ICAgIGlmICh0YWcgPT09IDEpIGZlYXR1cmUuZ2VvbWV0cnkgPSByZWFkR2VvbWV0cnkocGJmLCB7fSk7XG5cdFxuXHQgICAgZWxzZSBpZiAodGFnID09PSAxMSkgZmVhdHVyZS5pZCA9IHBiZi5yZWFkU3RyaW5nKCk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDEyKSBmZWF0dXJlLmlkID0gcGJmLnJlYWRTVmFyaW50KCk7XG5cdFxuXHQgICAgZWxzZSBpZiAodGFnID09PSAxMykgdmFsdWVzLnB1c2gocmVhZFZhbHVlKHBiZikpO1xuXHQgICAgZWxzZSBpZiAodGFnID09PSAxNCkgZmVhdHVyZS5wcm9wZXJ0aWVzID0gcmVhZFByb3BzKHBiZiwge30pO1xuXHQgICAgZWxzZSBpZiAodGFnID09PSAxNSkgcmVhZFByb3BzKHBiZiwgZmVhdHVyZSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRHZW9tZXRyeUZpZWxkKHRhZywgZ2VvbSwgcGJmKSB7XG5cdCAgICBpZiAodGFnID09PSAxKSBnZW9tLnR5cGUgPSBnZW9tZXRyeVR5cGVzW3BiZi5yZWFkVmFyaW50KCldO1xuXHRcblx0ICAgIGVsc2UgaWYgKHRhZyA9PT0gMikgbGVuZ3RocyA9IHBiZi5yZWFkUGFja2VkVmFyaW50KCk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDMpIHJlYWRDb29yZHMoZ2VvbSwgcGJmLCBnZW9tLnR5cGUpO1xuXHQgICAgZWxzZSBpZiAodGFnID09PSA0KSB7XG5cdCAgICAgICAgZ2VvbS5nZW9tZXRyaWVzID0gZ2VvbS5nZW9tZXRyaWVzIHx8IFtdO1xuXHQgICAgICAgIGdlb20uZ2VvbWV0cmllcy5wdXNoKHJlYWRHZW9tZXRyeShwYmYsIHt9KSk7XG5cdCAgICB9XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDEzKSB2YWx1ZXMucHVzaChyZWFkVmFsdWUocGJmKSk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDE1KSByZWFkUHJvcHMocGJmLCBnZW9tKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZENvb3JkcyhnZW9tLCBwYmYsIHR5cGUpIHtcblx0ICAgIGlmICh0eXBlID09PSAnUG9pbnQnKSBnZW9tLmNvb3JkaW5hdGVzID0gcmVhZFBvaW50KHBiZik7XG5cdCAgICBlbHNlIGlmICh0eXBlID09PSAnTXVsdGlQb2ludCcpIGdlb20uY29vcmRpbmF0ZXMgPSByZWFkTGluZShwYmYsIHRydWUpO1xuXHQgICAgZWxzZSBpZiAodHlwZSA9PT0gJ0xpbmVTdHJpbmcnKSBnZW9tLmNvb3JkaW5hdGVzID0gcmVhZExpbmUocGJmKTtcblx0ICAgIGVsc2UgaWYgKHR5cGUgPT09ICdNdWx0aUxpbmVTdHJpbmcnKSBnZW9tLmNvb3JkaW5hdGVzID0gcmVhZE11bHRpTGluZShwYmYpO1xuXHQgICAgZWxzZSBpZiAodHlwZSA9PT0gJ1BvbHlnb24nKSBnZW9tLmNvb3JkaW5hdGVzID0gcmVhZE11bHRpTGluZShwYmYsIHRydWUpO1xuXHQgICAgZWxzZSBpZiAodHlwZSA9PT0gJ011bHRpUG9seWdvbicpIGdlb20uY29vcmRpbmF0ZXMgPSByZWFkTXVsdGlQb2x5Z29uKHBiZik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRWYWx1ZShwYmYpIHtcblx0ICAgIHZhciBlbmQgPSBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcyxcblx0ICAgICAgICB2YWx1ZSA9IG51bGw7XG5cdFxuXHQgICAgd2hpbGUgKHBiZi5wb3MgPCBlbmQpIHtcblx0ICAgICAgICB2YXIgdmFsID0gcGJmLnJlYWRWYXJpbnQoKSxcblx0ICAgICAgICAgICAgdGFnID0gdmFsID4+IDM7XG5cdFxuXHQgICAgICAgIGlmICh0YWcgPT09IDEpIHZhbHVlID0gcGJmLnJlYWRTdHJpbmcoKTtcblx0ICAgICAgICBlbHNlIGlmICh0YWcgPT09IDIpIHZhbHVlID0gcGJmLnJlYWREb3VibGUoKTtcblx0ICAgICAgICBlbHNlIGlmICh0YWcgPT09IDMpIHZhbHVlID0gcGJmLnJlYWRWYXJpbnQoKTtcblx0ICAgICAgICBlbHNlIGlmICh0YWcgPT09IDQpIHZhbHVlID0gLXBiZi5yZWFkVmFyaW50KCk7XG5cdCAgICAgICAgZWxzZSBpZiAodGFnID09PSA1KSB2YWx1ZSA9IHBiZi5yZWFkQm9vbGVhbigpO1xuXHQgICAgICAgIGVsc2UgaWYgKHRhZyA9PT0gNikgdmFsdWUgPSBKU09OLnBhcnNlKHBiZi5yZWFkU3RyaW5nKCkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkUHJvcHMocGJmLCBwcm9wcykge1xuXHQgICAgdmFyIGVuZCA9IHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zO1xuXHQgICAgd2hpbGUgKHBiZi5wb3MgPCBlbmQpIHByb3BzW2tleXNbcGJmLnJlYWRWYXJpbnQoKV1dID0gdmFsdWVzW3BiZi5yZWFkVmFyaW50KCldO1xuXHQgICAgdmFsdWVzID0gW107XG5cdCAgICByZXR1cm4gcHJvcHM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRQb2ludChwYmYpIHtcblx0ICAgIHZhciBlbmQgPSBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcyxcblx0ICAgICAgICBjb29yZHMgPSBbXTtcblx0ICAgIHdoaWxlIChwYmYucG9zIDwgZW5kKSBjb29yZHMucHVzaChwYmYucmVhZFNWYXJpbnQoKSAvIGUpO1xuXHQgICAgcmV0dXJuIGNvb3Jkcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZExpbmVQYXJ0KHBiZiwgZW5kLCBsZW4sIGNsb3NlZCkge1xuXHQgICAgdmFyIGkgPSAwLFxuXHQgICAgICAgIGNvb3JkcyA9IFtdLFxuXHQgICAgICAgIHAsIGQ7XG5cdFxuXHQgICAgdmFyIHByZXZQID0gW107XG5cdCAgICBmb3IgKGQgPSAwOyBkIDwgZGltOyBkKyspIHByZXZQW2RdID0gMDtcblx0XG5cdCAgICB3aGlsZSAobGVuID8gaSA8IGxlbiA6IHBiZi5wb3MgPCBlbmQpIHtcblx0ICAgICAgICBwID0gW107XG5cdCAgICAgICAgZm9yIChkID0gMDsgZCA8IGRpbTsgZCsrKSB7XG5cdCAgICAgICAgICAgIHByZXZQW2RdICs9IHBiZi5yZWFkU1ZhcmludCgpO1xuXHQgICAgICAgICAgICBwW2RdID0gcHJldlBbZF0gLyBlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjb29yZHMucHVzaChwKTtcblx0ICAgICAgICBpKys7XG5cdCAgICB9XG5cdCAgICBpZiAoY2xvc2VkKSBjb29yZHMucHVzaChjb29yZHNbMF0pO1xuXHRcblx0ICAgIHJldHVybiBjb29yZHM7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRMaW5lKHBiZikge1xuXHQgICAgcmV0dXJuIHJlYWRMaW5lUGFydChwYmYsIHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZE11bHRpTGluZShwYmYsIGNsb3NlZCkge1xuXHQgICAgdmFyIGVuZCA9IHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zO1xuXHQgICAgaWYgKCFsZW5ndGhzKSByZXR1cm4gW3JlYWRMaW5lUGFydChwYmYsIGVuZCwgbnVsbCwgY2xvc2VkKV07XG5cdFxuXHQgICAgdmFyIGNvb3JkcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGhzLmxlbmd0aDsgaSsrKSBjb29yZHMucHVzaChyZWFkTGluZVBhcnQocGJmLCBlbmQsIGxlbmd0aHNbaV0sIGNsb3NlZCkpO1xuXHQgICAgbGVuZ3RocyA9IG51bGw7XG5cdCAgICByZXR1cm4gY29vcmRzO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkTXVsdGlQb2x5Z29uKHBiZikge1xuXHQgICAgdmFyIGVuZCA9IHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zO1xuXHQgICAgaWYgKCFsZW5ndGhzKSByZXR1cm4gW1tyZWFkTGluZVBhcnQocGJmLCBlbmQsIG51bGwsIHRydWUpXV07XG5cdFxuXHQgICAgdmFyIGNvb3JkcyA9IFtdO1xuXHQgICAgdmFyIGogPSAxO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGhzWzBdOyBpKyspIHtcblx0ICAgICAgICB2YXIgcmluZ3MgPSBbXTtcblx0ICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGxlbmd0aHNbal07IGsrKykgcmluZ3MucHVzaChyZWFkTGluZVBhcnQocGJmLCBlbmQsIGxlbmd0aHNbaiArIDEgKyBrXSwgdHJ1ZSkpO1xuXHQgICAgICAgIGogKz0gbGVuZ3Roc1tqXSArIDE7XG5cdCAgICAgICAgY29vcmRzLnB1c2gocmluZ3MpO1xuXHQgICAgfVxuXHQgICAgbGVuZ3RocyA9IG51bGw7XG5cdCAgICByZXR1cm4gY29vcmRzO1xuXHR9XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM1ODpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFBiZjtcblx0XG5cdHZhciBpZWVlNzU0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNTkpO1xuXHRcblx0ZnVuY3Rpb24gUGJmKGJ1Zikge1xuXHQgICAgdGhpcy5idWYgPSBBcnJheUJ1ZmZlci5pc1ZpZXcgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KGJ1ZikgPyBidWYgOiBuZXcgVWludDhBcnJheShidWYgfHwgMCk7XG5cdCAgICB0aGlzLnBvcyA9IDA7XG5cdCAgICB0aGlzLnR5cGUgPSAwO1xuXHQgICAgdGhpcy5sZW5ndGggPSB0aGlzLmJ1Zi5sZW5ndGg7XG5cdH1cblx0XG5cdFBiZi5WYXJpbnQgID0gMDsgLy8gdmFyaW50OiBpbnQzMiwgaW50NjQsIHVpbnQzMiwgdWludDY0LCBzaW50MzIsIHNpbnQ2NCwgYm9vbCwgZW51bVxuXHRQYmYuRml4ZWQ2NCA9IDE7IC8vIDY0LWJpdDogZG91YmxlLCBmaXhlZDY0LCBzZml4ZWQ2NFxuXHRQYmYuQnl0ZXMgICA9IDI7IC8vIGxlbmd0aC1kZWxpbWl0ZWQ6IHN0cmluZywgYnl0ZXMsIGVtYmVkZGVkIG1lc3NhZ2VzLCBwYWNrZWQgcmVwZWF0ZWQgZmllbGRzXG5cdFBiZi5GaXhlZDMyID0gNTsgLy8gMzItYml0OiBmbG9hdCwgZml4ZWQzMiwgc2ZpeGVkMzJcblx0XG5cdHZhciBTSElGVF9MRUZUXzMyID0gKDEgPDwgMTYpICogKDEgPDwgMTYpLFxuXHQgICAgU0hJRlRfUklHSFRfMzIgPSAxIC8gU0hJRlRfTEVGVF8zMjtcblx0XG5cdFBiZi5wcm90b3R5cGUgPSB7XG5cdFxuXHQgICAgZGVzdHJveTogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdGhpcy5idWYgPSBudWxsO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyA9PT0gUkVBRElORyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXHRcblx0ICAgIHJlYWRGaWVsZHM6IGZ1bmN0aW9uKHJlYWRGaWVsZCwgcmVzdWx0LCBlbmQpIHtcblx0ICAgICAgICBlbmQgPSBlbmQgfHwgdGhpcy5sZW5ndGg7XG5cdFxuXHQgICAgICAgIHdoaWxlICh0aGlzLnBvcyA8IGVuZCkge1xuXHQgICAgICAgICAgICB2YXIgdmFsID0gdGhpcy5yZWFkVmFyaW50KCksXG5cdCAgICAgICAgICAgICAgICB0YWcgPSB2YWwgPj4gMyxcblx0ICAgICAgICAgICAgICAgIHN0YXJ0UG9zID0gdGhpcy5wb3M7XG5cdFxuXHQgICAgICAgICAgICB0aGlzLnR5cGUgPSB2YWwgJiAweDc7XG5cdCAgICAgICAgICAgIHJlYWRGaWVsZCh0YWcsIHJlc3VsdCwgdGhpcyk7XG5cdFxuXHQgICAgICAgICAgICBpZiAodGhpcy5wb3MgPT09IHN0YXJ0UG9zKSB0aGlzLnNraXAodmFsKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVhZE1lc3NhZ2U6IGZ1bmN0aW9uKHJlYWRGaWVsZCwgcmVzdWx0KSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMucmVhZEZpZWxkcyhyZWFkRmllbGQsIHJlc3VsdCwgdGhpcy5yZWFkVmFyaW50KCkgKyB0aGlzLnBvcyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlYWRGaXhlZDMyOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgdmFsID0gcmVhZFVJbnQzMih0aGlzLmJ1ZiwgdGhpcy5wb3MpO1xuXHQgICAgICAgIHRoaXMucG9zICs9IDQ7XG5cdCAgICAgICAgcmV0dXJuIHZhbDtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVhZFNGaXhlZDMyOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgdmFsID0gcmVhZEludDMyKHRoaXMuYnVmLCB0aGlzLnBvcyk7XG5cdCAgICAgICAgdGhpcy5wb3MgKz0gNDtcblx0ICAgICAgICByZXR1cm4gdmFsO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyA2NC1iaXQgaW50IGhhbmRsaW5nIGlzIGJhc2VkIG9uIGdpdGh1Yi5jb20vZHB3L25vZGUtYnVmZmVyLW1vcmUtaW50cyAoTUlULWxpY2Vuc2VkKVxuXHRcblx0ICAgIHJlYWRGaXhlZDY0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgdmFsID0gcmVhZFVJbnQzMih0aGlzLmJ1ZiwgdGhpcy5wb3MpICsgcmVhZFVJbnQzMih0aGlzLmJ1ZiwgdGhpcy5wb3MgKyA0KSAqIFNISUZUX0xFRlRfMzI7XG5cdCAgICAgICAgdGhpcy5wb3MgKz0gODtcblx0ICAgICAgICByZXR1cm4gdmFsO1xuXHQgICAgfSxcblx0XG5cdCAgICByZWFkU0ZpeGVkNjQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciB2YWwgPSByZWFkVUludDMyKHRoaXMuYnVmLCB0aGlzLnBvcykgKyByZWFkSW50MzIodGhpcy5idWYsIHRoaXMucG9zICsgNCkgKiBTSElGVF9MRUZUXzMyO1xuXHQgICAgICAgIHRoaXMucG9zICs9IDg7XG5cdCAgICAgICAgcmV0dXJuIHZhbDtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVhZEZsb2F0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgdmFsID0gaWVlZTc1NC5yZWFkKHRoaXMuYnVmLCB0aGlzLnBvcywgdHJ1ZSwgMjMsIDQpO1xuXHQgICAgICAgIHRoaXMucG9zICs9IDQ7XG5cdCAgICAgICAgcmV0dXJuIHZhbDtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVhZERvdWJsZTogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHZhbCA9IGllZWU3NTQucmVhZCh0aGlzLmJ1ZiwgdGhpcy5wb3MsIHRydWUsIDUyLCA4KTtcblx0ICAgICAgICB0aGlzLnBvcyArPSA4O1xuXHQgICAgICAgIHJldHVybiB2YWw7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlYWRWYXJpbnQ6IGZ1bmN0aW9uKGlzU2lnbmVkKSB7XG5cdCAgICAgICAgdmFyIGJ1ZiA9IHRoaXMuYnVmLFxuXHQgICAgICAgICAgICB2YWwsIGI7XG5cdFxuXHQgICAgICAgIGIgPSBidWZbdGhpcy5wb3MrK107IHZhbCAgPSAgYiAmIDB4N2Y7ICAgICAgICBpZiAoYiA8IDB4ODApIHJldHVybiB2YWw7XG5cdCAgICAgICAgYiA9IGJ1Zlt0aGlzLnBvcysrXTsgdmFsIHw9IChiICYgMHg3ZikgPDwgNzsgIGlmIChiIDwgMHg4MCkgcmV0dXJuIHZhbDtcblx0ICAgICAgICBiID0gYnVmW3RoaXMucG9zKytdOyB2YWwgfD0gKGIgJiAweDdmKSA8PCAxNDsgaWYgKGIgPCAweDgwKSByZXR1cm4gdmFsO1xuXHQgICAgICAgIGIgPSBidWZbdGhpcy5wb3MrK107IHZhbCB8PSAoYiAmIDB4N2YpIDw8IDIxOyBpZiAoYiA8IDB4ODApIHJldHVybiB2YWw7XG5cdCAgICAgICAgYiA9IGJ1Zlt0aGlzLnBvc107ICAgdmFsIHw9IChiICYgMHgwZikgPDwgMjg7XG5cdFxuXHQgICAgICAgIHJldHVybiByZWFkVmFyaW50UmVtYWluZGVyKHZhbCwgaXNTaWduZWQsIHRoaXMpO1xuXHQgICAgfSxcblx0XG5cdCAgICByZWFkVmFyaW50NjQ6IGZ1bmN0aW9uKCkgeyAvLyBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHYyLjAuMVxuXHQgICAgICAgIHJldHVybiB0aGlzLnJlYWRWYXJpbnQodHJ1ZSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlYWRTVmFyaW50OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgbnVtID0gdGhpcy5yZWFkVmFyaW50KCk7XG5cdCAgICAgICAgcmV0dXJuIG51bSAlIDIgPT09IDEgPyAobnVtICsgMSkgLyAtMiA6IG51bSAvIDI7IC8vIHppZ3phZyBlbmNvZGluZ1xuXHQgICAgfSxcblx0XG5cdCAgICByZWFkQm9vbGVhbjogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5yZWFkVmFyaW50KCkpO1xuXHQgICAgfSxcblx0XG5cdCAgICByZWFkU3RyaW5nOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgZW5kID0gdGhpcy5yZWFkVmFyaW50KCkgKyB0aGlzLnBvcyxcblx0ICAgICAgICAgICAgc3RyID0gcmVhZFV0ZjgodGhpcy5idWYsIHRoaXMucG9zLCBlbmQpO1xuXHQgICAgICAgIHRoaXMucG9zID0gZW5kO1xuXHQgICAgICAgIHJldHVybiBzdHI7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlYWRCeXRlczogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIGVuZCA9IHRoaXMucmVhZFZhcmludCgpICsgdGhpcy5wb3MsXG5cdCAgICAgICAgICAgIGJ1ZmZlciA9IHRoaXMuYnVmLnN1YmFycmF5KHRoaXMucG9zLCBlbmQpO1xuXHQgICAgICAgIHRoaXMucG9zID0gZW5kO1xuXHQgICAgICAgIHJldHVybiBidWZmZXI7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIHZlcmJvc2UgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnM7IGRvZXNuJ3QgYWZmZWN0IGd6aXBwZWQgc2l6ZVxuXHRcblx0ICAgIHJlYWRQYWNrZWRWYXJpbnQ6IGZ1bmN0aW9uKGFyciwgaXNTaWduZWQpIHtcblx0ICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRWYXJpbnQoaXNTaWduZWQpKTtcblx0ICAgICAgICB2YXIgZW5kID0gcmVhZFBhY2tlZEVuZCh0aGlzKTtcblx0ICAgICAgICBhcnIgPSBhcnIgfHwgW107XG5cdCAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRWYXJpbnQoaXNTaWduZWQpKTtcblx0ICAgICAgICByZXR1cm4gYXJyO1xuXHQgICAgfSxcblx0ICAgIHJlYWRQYWNrZWRTVmFyaW50OiBmdW5jdGlvbihhcnIpIHtcblx0ICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRTVmFyaW50KCkpO1xuXHQgICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuXHQgICAgICAgIGFyciA9IGFyciB8fCBbXTtcblx0ICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZFNWYXJpbnQoKSk7XG5cdCAgICAgICAgcmV0dXJuIGFycjtcblx0ICAgIH0sXG5cdCAgICByZWFkUGFja2VkQm9vbGVhbjogZnVuY3Rpb24oYXJyKSB7XG5cdCAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkQm9vbGVhbigpKTtcblx0ICAgICAgICB2YXIgZW5kID0gcmVhZFBhY2tlZEVuZCh0aGlzKTtcblx0ICAgICAgICBhcnIgPSBhcnIgfHwgW107XG5cdCAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRCb29sZWFuKCkpO1xuXHQgICAgICAgIHJldHVybiBhcnI7XG5cdCAgICB9LFxuXHQgICAgcmVhZFBhY2tlZEZsb2F0OiBmdW5jdGlvbihhcnIpIHtcblx0ICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRGbG9hdCgpKTtcblx0ICAgICAgICB2YXIgZW5kID0gcmVhZFBhY2tlZEVuZCh0aGlzKTtcblx0ICAgICAgICBhcnIgPSBhcnIgfHwgW107XG5cdCAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRGbG9hdCgpKTtcblx0ICAgICAgICByZXR1cm4gYXJyO1xuXHQgICAgfSxcblx0ICAgIHJlYWRQYWNrZWREb3VibGU6IGZ1bmN0aW9uKGFycikge1xuXHQgICAgICAgIGlmICh0aGlzLnR5cGUgIT09IFBiZi5CeXRlcykgcmV0dXJuIGFyci5wdXNoKHRoaXMucmVhZERvdWJsZSgpKTtcblx0ICAgICAgICB2YXIgZW5kID0gcmVhZFBhY2tlZEVuZCh0aGlzKTtcblx0ICAgICAgICBhcnIgPSBhcnIgfHwgW107XG5cdCAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWREb3VibGUoKSk7XG5cdCAgICAgICAgcmV0dXJuIGFycjtcblx0ICAgIH0sXG5cdCAgICByZWFkUGFja2VkRml4ZWQzMjogZnVuY3Rpb24oYXJyKSB7XG5cdCAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkRml4ZWQzMigpKTtcblx0ICAgICAgICB2YXIgZW5kID0gcmVhZFBhY2tlZEVuZCh0aGlzKTtcblx0ICAgICAgICBhcnIgPSBhcnIgfHwgW107XG5cdCAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRGaXhlZDMyKCkpO1xuXHQgICAgICAgIHJldHVybiBhcnI7XG5cdCAgICB9LFxuXHQgICAgcmVhZFBhY2tlZFNGaXhlZDMyOiBmdW5jdGlvbihhcnIpIHtcblx0ICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRTRml4ZWQzMigpKTtcblx0ICAgICAgICB2YXIgZW5kID0gcmVhZFBhY2tlZEVuZCh0aGlzKTtcblx0ICAgICAgICBhcnIgPSBhcnIgfHwgW107XG5cdCAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRTRml4ZWQzMigpKTtcblx0ICAgICAgICByZXR1cm4gYXJyO1xuXHQgICAgfSxcblx0ICAgIHJlYWRQYWNrZWRGaXhlZDY0OiBmdW5jdGlvbihhcnIpIHtcblx0ICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRGaXhlZDY0KCkpO1xuXHQgICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuXHQgICAgICAgIGFyciA9IGFyciB8fCBbXTtcblx0ICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZEZpeGVkNjQoKSk7XG5cdCAgICAgICAgcmV0dXJuIGFycjtcblx0ICAgIH0sXG5cdCAgICByZWFkUGFja2VkU0ZpeGVkNjQ6IGZ1bmN0aW9uKGFycikge1xuXHQgICAgICAgIGlmICh0aGlzLnR5cGUgIT09IFBiZi5CeXRlcykgcmV0dXJuIGFyci5wdXNoKHRoaXMucmVhZFNGaXhlZDY0KCkpO1xuXHQgICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuXHQgICAgICAgIGFyciA9IGFyciB8fCBbXTtcblx0ICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZFNGaXhlZDY0KCkpO1xuXHQgICAgICAgIHJldHVybiBhcnI7XG5cdCAgICB9LFxuXHRcblx0ICAgIHNraXA6IGZ1bmN0aW9uKHZhbCkge1xuXHQgICAgICAgIHZhciB0eXBlID0gdmFsICYgMHg3O1xuXHQgICAgICAgIGlmICh0eXBlID09PSBQYmYuVmFyaW50KSB3aGlsZSAodGhpcy5idWZbdGhpcy5wb3MrK10gPiAweDdmKSB7fVxuXHQgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IFBiZi5CeXRlcykgdGhpcy5wb3MgPSB0aGlzLnJlYWRWYXJpbnQoKSArIHRoaXMucG9zO1xuXHQgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IFBiZi5GaXhlZDMyKSB0aGlzLnBvcyArPSA0O1xuXHQgICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IFBiZi5GaXhlZDY0KSB0aGlzLnBvcyArPSA4O1xuXHQgICAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yKCdVbmltcGxlbWVudGVkIHR5cGU6ICcgKyB0eXBlKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLy8gPT09IFdSSVRJTkcgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgICB3cml0ZVRhZzogZnVuY3Rpb24odGFnLCB0eXBlKSB7XG5cdCAgICAgICAgdGhpcy53cml0ZVZhcmludCgodGFnIDw8IDMpIHwgdHlwZSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlYWxsb2M6IGZ1bmN0aW9uKG1pbikge1xuXHQgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAxNjtcblx0XG5cdCAgICAgICAgd2hpbGUgKGxlbmd0aCA8IHRoaXMucG9zICsgbWluKSBsZW5ndGggKj0gMjtcblx0XG5cdCAgICAgICAgaWYgKGxlbmd0aCAhPT0gdGhpcy5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG5cdCAgICAgICAgICAgIGJ1Zi5zZXQodGhpcy5idWYpO1xuXHQgICAgICAgICAgICB0aGlzLmJ1ZiA9IGJ1Zjtcblx0ICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBmaW5pc2g6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5wb3M7XG5cdCAgICAgICAgdGhpcy5wb3MgPSAwO1xuXHQgICAgICAgIHJldHVybiB0aGlzLmJ1Zi5zdWJhcnJheSgwLCB0aGlzLmxlbmd0aCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHdyaXRlRml4ZWQzMjogZnVuY3Rpb24odmFsKSB7XG5cdCAgICAgICAgdGhpcy5yZWFsbG9jKDQpO1xuXHQgICAgICAgIHdyaXRlSW50MzIodGhpcy5idWYsIHZhbCwgdGhpcy5wb3MpO1xuXHQgICAgICAgIHRoaXMucG9zICs9IDQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIHdyaXRlU0ZpeGVkMzI6IGZ1bmN0aW9uKHZhbCkge1xuXHQgICAgICAgIHRoaXMucmVhbGxvYyg0KTtcblx0ICAgICAgICB3cml0ZUludDMyKHRoaXMuYnVmLCB2YWwsIHRoaXMucG9zKTtcblx0ICAgICAgICB0aGlzLnBvcyArPSA0O1xuXHQgICAgfSxcblx0XG5cdCAgICB3cml0ZUZpeGVkNjQ6IGZ1bmN0aW9uKHZhbCkge1xuXHQgICAgICAgIHRoaXMucmVhbGxvYyg4KTtcblx0ICAgICAgICB3cml0ZUludDMyKHRoaXMuYnVmLCB2YWwgJiAtMSwgdGhpcy5wb3MpO1xuXHQgICAgICAgIHdyaXRlSW50MzIodGhpcy5idWYsIE1hdGguZmxvb3IodmFsICogU0hJRlRfUklHSFRfMzIpLCB0aGlzLnBvcyArIDQpO1xuXHQgICAgICAgIHRoaXMucG9zICs9IDg7XG5cdCAgICB9LFxuXHRcblx0ICAgIHdyaXRlU0ZpeGVkNjQ6IGZ1bmN0aW9uKHZhbCkge1xuXHQgICAgICAgIHRoaXMucmVhbGxvYyg4KTtcblx0ICAgICAgICB3cml0ZUludDMyKHRoaXMuYnVmLCB2YWwgJiAtMSwgdGhpcy5wb3MpO1xuXHQgICAgICAgIHdyaXRlSW50MzIodGhpcy5idWYsIE1hdGguZmxvb3IodmFsICogU0hJRlRfUklHSFRfMzIpLCB0aGlzLnBvcyArIDQpO1xuXHQgICAgICAgIHRoaXMucG9zICs9IDg7XG5cdCAgICB9LFxuXHRcblx0ICAgIHdyaXRlVmFyaW50OiBmdW5jdGlvbih2YWwpIHtcblx0ICAgICAgICB2YWwgPSArdmFsIHx8IDA7XG5cdFxuXHQgICAgICAgIGlmICh2YWwgPiAweGZmZmZmZmYgfHwgdmFsIDwgMCkge1xuXHQgICAgICAgICAgICB3cml0ZUJpZ1ZhcmludCh2YWwsIHRoaXMpO1xuXHQgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICB0aGlzLnJlYWxsb2MoNCk7XG5cdFxuXHQgICAgICAgIHRoaXMuYnVmW3RoaXMucG9zKytdID0gICAgICAgICAgIHZhbCAmIDB4N2YgIHwgKHZhbCA+IDB4N2YgPyAweDgwIDogMCk7IGlmICh2YWwgPD0gMHg3ZikgcmV0dXJuO1xuXHQgICAgICAgIHRoaXMuYnVmW3RoaXMucG9zKytdID0gKCh2YWwgPj4+PSA3KSAmIDB4N2YpIHwgKHZhbCA+IDB4N2YgPyAweDgwIDogMCk7IGlmICh2YWwgPD0gMHg3ZikgcmV0dXJuO1xuXHQgICAgICAgIHRoaXMuYnVmW3RoaXMucG9zKytdID0gKCh2YWwgPj4+PSA3KSAmIDB4N2YpIHwgKHZhbCA+IDB4N2YgPyAweDgwIDogMCk7IGlmICh2YWwgPD0gMHg3ZikgcmV0dXJuO1xuXHQgICAgICAgIHRoaXMuYnVmW3RoaXMucG9zKytdID0gICAodmFsID4+PiA3KSAmIDB4N2Y7XG5cdCAgICB9LFxuXHRcblx0ICAgIHdyaXRlU1ZhcmludDogZnVuY3Rpb24odmFsKSB7XG5cdCAgICAgICAgdGhpcy53cml0ZVZhcmludCh2YWwgPCAwID8gLXZhbCAqIDIgLSAxIDogdmFsICogMik7XG5cdCAgICB9LFxuXHRcblx0ICAgIHdyaXRlQm9vbGVhbjogZnVuY3Rpb24odmFsKSB7XG5cdCAgICAgICAgdGhpcy53cml0ZVZhcmludChCb29sZWFuKHZhbCkpO1xuXHQgICAgfSxcblx0XG5cdCAgICB3cml0ZVN0cmluZzogZnVuY3Rpb24oc3RyKSB7XG5cdCAgICAgICAgc3RyID0gU3RyaW5nKHN0cik7XG5cdCAgICAgICAgdGhpcy5yZWFsbG9jKHN0ci5sZW5ndGggKiA0KTtcblx0XG5cdCAgICAgICAgdGhpcy5wb3MrKzsgLy8gcmVzZXJ2ZSAxIGJ5dGUgZm9yIHNob3J0IHN0cmluZyBsZW5ndGhcblx0XG5cdCAgICAgICAgdmFyIHN0YXJ0UG9zID0gdGhpcy5wb3M7XG5cdCAgICAgICAgLy8gd3JpdGUgdGhlIHN0cmluZyBkaXJlY3RseSB0byB0aGUgYnVmZmVyIGFuZCBzZWUgaG93IG11Y2ggd2FzIHdyaXR0ZW5cblx0ICAgICAgICB0aGlzLnBvcyA9IHdyaXRlVXRmOCh0aGlzLmJ1Ziwgc3RyLCB0aGlzLnBvcyk7XG5cdCAgICAgICAgdmFyIGxlbiA9IHRoaXMucG9zIC0gc3RhcnRQb3M7XG5cdFxuXHQgICAgICAgIGlmIChsZW4gPj0gMHg4MCkgbWFrZVJvb21Gb3JFeHRyYUxlbmd0aChzdGFydFBvcywgbGVuLCB0aGlzKTtcblx0XG5cdCAgICAgICAgLy8gZmluYWxseSwgd3JpdGUgdGhlIG1lc3NhZ2UgbGVuZ3RoIGluIHRoZSByZXNlcnZlZCBwbGFjZSBhbmQgcmVzdG9yZSB0aGUgcG9zaXRpb25cblx0ICAgICAgICB0aGlzLnBvcyA9IHN0YXJ0UG9zIC0gMTtcblx0ICAgICAgICB0aGlzLndyaXRlVmFyaW50KGxlbik7XG5cdCAgICAgICAgdGhpcy5wb3MgKz0gbGVuO1xuXHQgICAgfSxcblx0XG5cdCAgICB3cml0ZUZsb2F0OiBmdW5jdGlvbih2YWwpIHtcblx0ICAgICAgICB0aGlzLnJlYWxsb2MoNCk7XG5cdCAgICAgICAgaWVlZTc1NC53cml0ZSh0aGlzLmJ1ZiwgdmFsLCB0aGlzLnBvcywgdHJ1ZSwgMjMsIDQpO1xuXHQgICAgICAgIHRoaXMucG9zICs9IDQ7XG5cdCAgICB9LFxuXHRcblx0ICAgIHdyaXRlRG91YmxlOiBmdW5jdGlvbih2YWwpIHtcblx0ICAgICAgICB0aGlzLnJlYWxsb2MoOCk7XG5cdCAgICAgICAgaWVlZTc1NC53cml0ZSh0aGlzLmJ1ZiwgdmFsLCB0aGlzLnBvcywgdHJ1ZSwgNTIsIDgpO1xuXHQgICAgICAgIHRoaXMucG9zICs9IDg7XG5cdCAgICB9LFxuXHRcblx0ICAgIHdyaXRlQnl0ZXM6IGZ1bmN0aW9uKGJ1ZmZlcikge1xuXHQgICAgICAgIHZhciBsZW4gPSBidWZmZXIubGVuZ3RoO1xuXHQgICAgICAgIHRoaXMud3JpdGVWYXJpbnQobGVuKTtcblx0ICAgICAgICB0aGlzLnJlYWxsb2MobGVuKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB0aGlzLmJ1Zlt0aGlzLnBvcysrXSA9IGJ1ZmZlcltpXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgd3JpdGVSYXdNZXNzYWdlOiBmdW5jdGlvbihmbiwgb2JqKSB7XG5cdCAgICAgICAgdGhpcy5wb3MrKzsgLy8gcmVzZXJ2ZSAxIGJ5dGUgZm9yIHNob3J0IG1lc3NhZ2UgbGVuZ3RoXG5cdFxuXHQgICAgICAgIC8vIHdyaXRlIHRoZSBtZXNzYWdlIGRpcmVjdGx5IHRvIHRoZSBidWZmZXIgYW5kIHNlZSBob3cgbXVjaCB3YXMgd3JpdHRlblxuXHQgICAgICAgIHZhciBzdGFydFBvcyA9IHRoaXMucG9zO1xuXHQgICAgICAgIGZuKG9iaiwgdGhpcyk7XG5cdCAgICAgICAgdmFyIGxlbiA9IHRoaXMucG9zIC0gc3RhcnRQb3M7XG5cdFxuXHQgICAgICAgIGlmIChsZW4gPj0gMHg4MCkgbWFrZVJvb21Gb3JFeHRyYUxlbmd0aChzdGFydFBvcywgbGVuLCB0aGlzKTtcblx0XG5cdCAgICAgICAgLy8gZmluYWxseSwgd3JpdGUgdGhlIG1lc3NhZ2UgbGVuZ3RoIGluIHRoZSByZXNlcnZlZCBwbGFjZSBhbmQgcmVzdG9yZSB0aGUgcG9zaXRpb25cblx0ICAgICAgICB0aGlzLnBvcyA9IHN0YXJ0UG9zIC0gMTtcblx0ICAgICAgICB0aGlzLndyaXRlVmFyaW50KGxlbik7XG5cdCAgICAgICAgdGhpcy5wb3MgKz0gbGVuO1xuXHQgICAgfSxcblx0XG5cdCAgICB3cml0ZU1lc3NhZ2U6IGZ1bmN0aW9uKHRhZywgZm4sIG9iaikge1xuXHQgICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuQnl0ZXMpO1xuXHQgICAgICAgIHRoaXMud3JpdGVSYXdNZXNzYWdlKGZuLCBvYmopO1xuXHQgICAgfSxcblx0XG5cdCAgICB3cml0ZVBhY2tlZFZhcmludDogICBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZFZhcmludCwgYXJyKTsgICB9LFxuXHQgICAgd3JpdGVQYWNrZWRTVmFyaW50OiAgZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWRTVmFyaW50LCBhcnIpOyAgfSxcblx0ICAgIHdyaXRlUGFja2VkQm9vbGVhbjogIGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkQm9vbGVhbiwgYXJyKTsgIH0sXG5cdCAgICB3cml0ZVBhY2tlZEZsb2F0OiAgICBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZEZsb2F0LCBhcnIpOyAgICB9LFxuXHQgICAgd3JpdGVQYWNrZWREb3VibGU6ICAgZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWREb3VibGUsIGFycik7ICAgfSxcblx0ICAgIHdyaXRlUGFja2VkRml4ZWQzMjogIGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkRml4ZWQzMiwgYXJyKTsgIH0sXG5cdCAgICB3cml0ZVBhY2tlZFNGaXhlZDMyOiBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZFNGaXhlZDMyLCBhcnIpOyB9LFxuXHQgICAgd3JpdGVQYWNrZWRGaXhlZDY0OiAgZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWRGaXhlZDY0LCBhcnIpOyAgfSxcblx0ICAgIHdyaXRlUGFja2VkU0ZpeGVkNjQ6IGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkU0ZpeGVkNjQsIGFycik7IH0sXG5cdFxuXHQgICAgd3JpdGVCeXRlc0ZpZWxkOiBmdW5jdGlvbih0YWcsIGJ1ZmZlcikge1xuXHQgICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuQnl0ZXMpO1xuXHQgICAgICAgIHRoaXMud3JpdGVCeXRlcyhidWZmZXIpO1xuXHQgICAgfSxcblx0ICAgIHdyaXRlRml4ZWQzMkZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuXHQgICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuRml4ZWQzMik7XG5cdCAgICAgICAgdGhpcy53cml0ZUZpeGVkMzIodmFsKTtcblx0ICAgIH0sXG5cdCAgICB3cml0ZVNGaXhlZDMyRmllbGQ6IGZ1bmN0aW9uKHRhZywgdmFsKSB7XG5cdCAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5GaXhlZDMyKTtcblx0ICAgICAgICB0aGlzLndyaXRlU0ZpeGVkMzIodmFsKTtcblx0ICAgIH0sXG5cdCAgICB3cml0ZUZpeGVkNjRGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcblx0ICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkZpeGVkNjQpO1xuXHQgICAgICAgIHRoaXMud3JpdGVGaXhlZDY0KHZhbCk7XG5cdCAgICB9LFxuXHQgICAgd3JpdGVTRml4ZWQ2NEZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuXHQgICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuRml4ZWQ2NCk7XG5cdCAgICAgICAgdGhpcy53cml0ZVNGaXhlZDY0KHZhbCk7XG5cdCAgICB9LFxuXHQgICAgd3JpdGVWYXJpbnRGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcblx0ICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLlZhcmludCk7XG5cdCAgICAgICAgdGhpcy53cml0ZVZhcmludCh2YWwpO1xuXHQgICAgfSxcblx0ICAgIHdyaXRlU1ZhcmludEZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuXHQgICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuVmFyaW50KTtcblx0ICAgICAgICB0aGlzLndyaXRlU1ZhcmludCh2YWwpO1xuXHQgICAgfSxcblx0ICAgIHdyaXRlU3RyaW5nRmllbGQ6IGZ1bmN0aW9uKHRhZywgc3RyKSB7XG5cdCAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5CeXRlcyk7XG5cdCAgICAgICAgdGhpcy53cml0ZVN0cmluZyhzdHIpO1xuXHQgICAgfSxcblx0ICAgIHdyaXRlRmxvYXRGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcblx0ICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkZpeGVkMzIpO1xuXHQgICAgICAgIHRoaXMud3JpdGVGbG9hdCh2YWwpO1xuXHQgICAgfSxcblx0ICAgIHdyaXRlRG91YmxlRmllbGQ6IGZ1bmN0aW9uKHRhZywgdmFsKSB7XG5cdCAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5GaXhlZDY0KTtcblx0ICAgICAgICB0aGlzLndyaXRlRG91YmxlKHZhbCk7XG5cdCAgICB9LFxuXHQgICAgd3JpdGVCb29sZWFuRmllbGQ6IGZ1bmN0aW9uKHRhZywgdmFsKSB7XG5cdCAgICAgICAgdGhpcy53cml0ZVZhcmludEZpZWxkKHRhZywgQm9vbGVhbih2YWwpKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIHJlYWRWYXJpbnRSZW1haW5kZXIobCwgcywgcCkge1xuXHQgICAgdmFyIGJ1ZiA9IHAuYnVmLFxuXHQgICAgICAgIGgsIGI7XG5cdFxuXHQgICAgYiA9IGJ1ZltwLnBvcysrXTsgaCAgPSAoYiAmIDB4NzApID4+IDQ7ICBpZiAoYiA8IDB4ODApIHJldHVybiB0b051bShsLCBoLCBzKTtcblx0ICAgIGIgPSBidWZbcC5wb3MrK107IGggfD0gKGIgJiAweDdmKSA8PCAzOyAgaWYgKGIgPCAweDgwKSByZXR1cm4gdG9OdW0obCwgaCwgcyk7XG5cdCAgICBiID0gYnVmW3AucG9zKytdOyBoIHw9IChiICYgMHg3ZikgPDwgMTA7IGlmIChiIDwgMHg4MCkgcmV0dXJuIHRvTnVtKGwsIGgsIHMpO1xuXHQgICAgYiA9IGJ1ZltwLnBvcysrXTsgaCB8PSAoYiAmIDB4N2YpIDw8IDE3OyBpZiAoYiA8IDB4ODApIHJldHVybiB0b051bShsLCBoLCBzKTtcblx0ICAgIGIgPSBidWZbcC5wb3MrK107IGggfD0gKGIgJiAweDdmKSA8PCAyNDsgaWYgKGIgPCAweDgwKSByZXR1cm4gdG9OdW0obCwgaCwgcyk7XG5cdCAgICBiID0gYnVmW3AucG9zKytdOyBoIHw9IChiICYgMHgwMSkgPDwgMzE7IGlmIChiIDwgMHg4MCkgcmV0dXJuIHRvTnVtKGwsIGgsIHMpO1xuXHRcblx0ICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgdmFyaW50IG5vdCBtb3JlIHRoYW4gMTAgYnl0ZXMnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZFBhY2tlZEVuZChwYmYpIHtcblx0ICAgIHJldHVybiBwYmYudHlwZSA9PT0gUGJmLkJ5dGVzID9cblx0ICAgICAgICBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcyA6IHBiZi5wb3MgKyAxO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b051bShsb3csIGhpZ2gsIGlzU2lnbmVkKSB7XG5cdCAgICBpZiAoaXNTaWduZWQpIHtcblx0ICAgICAgICByZXR1cm4gaGlnaCAqIDB4MTAwMDAwMDAwICsgKGxvdyA+Pj4gMCk7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuICgoaGlnaCA+Pj4gMCkgKiAweDEwMDAwMDAwMCkgKyAobG93ID4+PiAwKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gd3JpdGVCaWdWYXJpbnQodmFsLCBwYmYpIHtcblx0ICAgIHZhciBsb3csIGhpZ2g7XG5cdFxuXHQgICAgaWYgKHZhbCA+PSAwKSB7XG5cdCAgICAgICAgbG93ICA9ICh2YWwgJSAweDEwMDAwMDAwMCkgfCAwO1xuXHQgICAgICAgIGhpZ2ggPSAodmFsIC8gMHgxMDAwMDAwMDApIHwgMDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbG93ICA9IH4oLXZhbCAlIDB4MTAwMDAwMDAwKTtcblx0ICAgICAgICBoaWdoID0gfigtdmFsIC8gMHgxMDAwMDAwMDApO1xuXHRcblx0ICAgICAgICBpZiAobG93IF4gMHhmZmZmZmZmZikge1xuXHQgICAgICAgICAgICBsb3cgPSAobG93ICsgMSkgfCAwO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIGxvdyA9IDA7XG5cdCAgICAgICAgICAgIGhpZ2ggPSAoaGlnaCArIDEpIHwgMDtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHZhbCA+PSAweDEwMDAwMDAwMDAwMDAwMDAwIHx8IHZhbCA8IC0weDEwMDAwMDAwMDAwMDAwMDAwKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHaXZlbiB2YXJpbnQgZG9lc25cXCd0IGZpdCBpbnRvIDEwIGJ5dGVzJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgcGJmLnJlYWxsb2MoMTApO1xuXHRcblx0ICAgIHdyaXRlQmlnVmFyaW50TG93KGxvdywgaGlnaCwgcGJmKTtcblx0ICAgIHdyaXRlQmlnVmFyaW50SGlnaChoaWdoLCBwYmYpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZUJpZ1ZhcmludExvdyhsb3csIGhpZ2gsIHBiZikge1xuXHQgICAgcGJmLmJ1ZltwYmYucG9zKytdID0gbG93ICYgMHg3ZiB8IDB4ODA7IGxvdyA+Pj49IDc7XG5cdCAgICBwYmYuYnVmW3BiZi5wb3MrK10gPSBsb3cgJiAweDdmIHwgMHg4MDsgbG93ID4+Pj0gNztcblx0ICAgIHBiZi5idWZbcGJmLnBvcysrXSA9IGxvdyAmIDB4N2YgfCAweDgwOyBsb3cgPj4+PSA3O1xuXHQgICAgcGJmLmJ1ZltwYmYucG9zKytdID0gbG93ICYgMHg3ZiB8IDB4ODA7IGxvdyA+Pj49IDc7XG5cdCAgICBwYmYuYnVmW3BiZi5wb3NdICAgPSBsb3cgJiAweDdmO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZUJpZ1ZhcmludEhpZ2goaGlnaCwgcGJmKSB7XG5cdCAgICB2YXIgbHNiID0gKGhpZ2ggJiAweDA3KSA8PCA0O1xuXHRcblx0ICAgIHBiZi5idWZbcGJmLnBvcysrXSB8PSBsc2IgICAgICAgICB8ICgoaGlnaCA+Pj49IDMpID8gMHg4MCA6IDApOyBpZiAoIWhpZ2gpIHJldHVybjtcblx0ICAgIHBiZi5idWZbcGJmLnBvcysrXSAgPSBoaWdoICYgMHg3ZiB8ICgoaGlnaCA+Pj49IDcpID8gMHg4MCA6IDApOyBpZiAoIWhpZ2gpIHJldHVybjtcblx0ICAgIHBiZi5idWZbcGJmLnBvcysrXSAgPSBoaWdoICYgMHg3ZiB8ICgoaGlnaCA+Pj49IDcpID8gMHg4MCA6IDApOyBpZiAoIWhpZ2gpIHJldHVybjtcblx0ICAgIHBiZi5idWZbcGJmLnBvcysrXSAgPSBoaWdoICYgMHg3ZiB8ICgoaGlnaCA+Pj49IDcpID8gMHg4MCA6IDApOyBpZiAoIWhpZ2gpIHJldHVybjtcblx0ICAgIHBiZi5idWZbcGJmLnBvcysrXSAgPSBoaWdoICYgMHg3ZiB8ICgoaGlnaCA+Pj49IDcpID8gMHg4MCA6IDApOyBpZiAoIWhpZ2gpIHJldHVybjtcblx0ICAgIHBiZi5idWZbcGJmLnBvcysrXSAgPSBoaWdoICYgMHg3Zjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWFrZVJvb21Gb3JFeHRyYUxlbmd0aChzdGFydFBvcywgbGVuLCBwYmYpIHtcblx0ICAgIHZhciBleHRyYUxlbiA9XG5cdCAgICAgICAgbGVuIDw9IDB4M2ZmZiA/IDEgOlxuXHQgICAgICAgIGxlbiA8PSAweDFmZmZmZiA/IDIgOlxuXHQgICAgICAgIGxlbiA8PSAweGZmZmZmZmYgPyAzIDogTWF0aC5mbG9vcihNYXRoLmxvZyhsZW4pIC8gKE1hdGguTE4yICogNykpO1xuXHRcblx0ICAgIC8vIGlmIDEgYnl0ZSBpc24ndCBlbm91Z2ggZm9yIGVuY29kaW5nIG1lc3NhZ2UgbGVuZ3RoLCBzaGlmdCB0aGUgZGF0YSB0byB0aGUgcmlnaHRcblx0ICAgIHBiZi5yZWFsbG9jKGV4dHJhTGVuKTtcblx0ICAgIGZvciAodmFyIGkgPSBwYmYucG9zIC0gMTsgaSA+PSBzdGFydFBvczsgaS0tKSBwYmYuYnVmW2kgKyBleHRyYUxlbl0gPSBwYmYuYnVmW2ldO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB3cml0ZVBhY2tlZFZhcmludChhcnIsIHBiZikgICB7IGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSBwYmYud3JpdGVWYXJpbnQoYXJyW2ldKTsgICB9XG5cdGZ1bmN0aW9uIHdyaXRlUGFja2VkU1ZhcmludChhcnIsIHBiZikgIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZVNWYXJpbnQoYXJyW2ldKTsgIH1cblx0ZnVuY3Rpb24gd3JpdGVQYWNrZWRGbG9hdChhcnIsIHBiZikgICAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlRmxvYXQoYXJyW2ldKTsgICAgfVxuXHRmdW5jdGlvbiB3cml0ZVBhY2tlZERvdWJsZShhcnIsIHBiZikgICB7IGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSBwYmYud3JpdGVEb3VibGUoYXJyW2ldKTsgICB9XG5cdGZ1bmN0aW9uIHdyaXRlUGFja2VkQm9vbGVhbihhcnIsIHBiZikgIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZUJvb2xlYW4oYXJyW2ldKTsgIH1cblx0ZnVuY3Rpb24gd3JpdGVQYWNrZWRGaXhlZDMyKGFyciwgcGJmKSAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlRml4ZWQzMihhcnJbaV0pOyAgfVxuXHRmdW5jdGlvbiB3cml0ZVBhY2tlZFNGaXhlZDMyKGFyciwgcGJmKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSBwYmYud3JpdGVTRml4ZWQzMihhcnJbaV0pOyB9XG5cdGZ1bmN0aW9uIHdyaXRlUGFja2VkRml4ZWQ2NChhcnIsIHBiZikgIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZUZpeGVkNjQoYXJyW2ldKTsgIH1cblx0ZnVuY3Rpb24gd3JpdGVQYWNrZWRTRml4ZWQ2NChhcnIsIHBiZikgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlU0ZpeGVkNjQoYXJyW2ldKTsgfVxuXHRcblx0Ly8gQnVmZmVyIGNvZGUgYmVsb3cgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlciwgTUlULWxpY2Vuc2VkXG5cdFxuXHRmdW5jdGlvbiByZWFkVUludDMyKGJ1ZiwgcG9zKSB7XG5cdCAgICByZXR1cm4gKChidWZbcG9zXSkgfFxuXHQgICAgICAgIChidWZbcG9zICsgMV0gPDwgOCkgfFxuXHQgICAgICAgIChidWZbcG9zICsgMl0gPDwgMTYpKSArXG5cdCAgICAgICAgKGJ1Zltwb3MgKyAzXSAqIDB4MTAwMDAwMCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHdyaXRlSW50MzIoYnVmLCB2YWwsIHBvcykge1xuXHQgICAgYnVmW3Bvc10gPSB2YWw7XG5cdCAgICBidWZbcG9zICsgMV0gPSAodmFsID4+PiA4KTtcblx0ICAgIGJ1Zltwb3MgKyAyXSA9ICh2YWwgPj4+IDE2KTtcblx0ICAgIGJ1Zltwb3MgKyAzXSA9ICh2YWwgPj4+IDI0KTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZEludDMyKGJ1ZiwgcG9zKSB7XG5cdCAgICByZXR1cm4gKChidWZbcG9zXSkgfFxuXHQgICAgICAgIChidWZbcG9zICsgMV0gPDwgOCkgfFxuXHQgICAgICAgIChidWZbcG9zICsgMl0gPDwgMTYpKSArXG5cdCAgICAgICAgKGJ1Zltwb3MgKyAzXSA8PCAyNCk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRVdGY4KGJ1ZiwgcG9zLCBlbmQpIHtcblx0ICAgIHZhciBzdHIgPSAnJztcblx0ICAgIHZhciBpID0gcG9zO1xuXHRcblx0ICAgIHdoaWxlIChpIDwgZW5kKSB7XG5cdCAgICAgICAgdmFyIGIwID0gYnVmW2ldO1xuXHQgICAgICAgIHZhciBjID0gbnVsbDsgLy8gY29kZXBvaW50XG5cdCAgICAgICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPVxuXHQgICAgICAgICAgICBiMCA+IDB4RUYgPyA0IDpcblx0ICAgICAgICAgICAgYjAgPiAweERGID8gMyA6XG5cdCAgICAgICAgICAgIGIwID4gMHhCRiA/IDIgOiAxO1xuXHRcblx0ICAgICAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPiBlbmQpIGJyZWFrO1xuXHRcblx0ICAgICAgICB2YXIgYjEsIGIyLCBiMztcblx0XG5cdCAgICAgICAgaWYgKGJ5dGVzUGVyU2VxdWVuY2UgPT09IDEpIHtcblx0ICAgICAgICAgICAgaWYgKGIwIDwgMHg4MCkge1xuXHQgICAgICAgICAgICAgICAgYyA9IGIwO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGlmIChieXRlc1BlclNlcXVlbmNlID09PSAyKSB7XG5cdCAgICAgICAgICAgIGIxID0gYnVmW2kgKyAxXTtcblx0ICAgICAgICAgICAgaWYgKChiMSAmIDB4QzApID09PSAweDgwKSB7XG5cdCAgICAgICAgICAgICAgICBjID0gKGIwICYgMHgxRikgPDwgMHg2IHwgKGIxICYgMHgzRik7XG5cdCAgICAgICAgICAgICAgICBpZiAoYyA8PSAweDdGKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYyA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKGJ5dGVzUGVyU2VxdWVuY2UgPT09IDMpIHtcblx0ICAgICAgICAgICAgYjEgPSBidWZbaSArIDFdO1xuXHQgICAgICAgICAgICBiMiA9IGJ1ZltpICsgMl07XG5cdCAgICAgICAgICAgIGlmICgoYjEgJiAweEMwKSA9PT0gMHg4MCAmJiAoYjIgJiAweEMwKSA9PT0gMHg4MCkge1xuXHQgICAgICAgICAgICAgICAgYyA9IChiMCAmIDB4RikgPDwgMHhDIHwgKGIxICYgMHgzRikgPDwgMHg2IHwgKGIyICYgMHgzRik7XG5cdCAgICAgICAgICAgICAgICBpZiAoYyA8PSAweDdGRiB8fCAoYyA+PSAweEQ4MDAgJiYgYyA8PSAweERGRkYpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYyA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKGJ5dGVzUGVyU2VxdWVuY2UgPT09IDQpIHtcblx0ICAgICAgICAgICAgYjEgPSBidWZbaSArIDFdO1xuXHQgICAgICAgICAgICBiMiA9IGJ1ZltpICsgMl07XG5cdCAgICAgICAgICAgIGIzID0gYnVmW2kgKyAzXTtcblx0ICAgICAgICAgICAgaWYgKChiMSAmIDB4QzApID09PSAweDgwICYmIChiMiAmIDB4QzApID09PSAweDgwICYmIChiMyAmIDB4QzApID09PSAweDgwKSB7XG5cdCAgICAgICAgICAgICAgICBjID0gKGIwICYgMHhGKSA8PCAweDEyIHwgKGIxICYgMHgzRikgPDwgMHhDIHwgKGIyICYgMHgzRikgPDwgMHg2IHwgKGIzICYgMHgzRik7XG5cdCAgICAgICAgICAgICAgICBpZiAoYyA8PSAweEZGRkYgfHwgYyA+PSAweDExMDAwMCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGMgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoYyA9PT0gbnVsbCkge1xuXHQgICAgICAgICAgICBjID0gMHhGRkZEO1xuXHQgICAgICAgICAgICBieXRlc1BlclNlcXVlbmNlID0gMTtcblx0XG5cdCAgICAgICAgfSBlbHNlIGlmIChjID4gMHhGRkZGKSB7XG5cdCAgICAgICAgICAgIGMgLT0gMHgxMDAwMDtcblx0ICAgICAgICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCk7XG5cdCAgICAgICAgICAgIGMgPSAweERDMDAgfCBjICYgMHgzRkY7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjKTtcblx0ICAgICAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2U7XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIHN0cjtcblx0fVxuXHRcblx0ZnVuY3Rpb24gd3JpdGVVdGY4KGJ1Ziwgc3RyLCBwb3MpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBjLCBsZWFkOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpOyAvLyBjb2RlIHBvaW50XG5cdFxuXHQgICAgICAgIGlmIChjID4gMHhEN0ZGICYmIGMgPCAweEUwMDApIHtcblx0ICAgICAgICAgICAgaWYgKGxlYWQpIHtcblx0ICAgICAgICAgICAgICAgIGlmIChjIDwgMHhEQzAwKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4RUY7XG5cdCAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4QkY7XG5cdCAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4QkQ7XG5cdCAgICAgICAgICAgICAgICAgICAgbGVhZCA9IGM7XG5cdCAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIGMgPSBsZWFkIC0gMHhEODAwIDw8IDEwIHwgYyAtIDB4REMwMCB8IDB4MTAwMDA7XG5cdCAgICAgICAgICAgICAgICAgICAgbGVhZCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICBpZiAoYyA+IDB4REJGRiB8fCAoaSArIDEgPT09IHN0ci5sZW5ndGgpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4RUY7XG5cdCAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4QkY7XG5cdCAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4QkQ7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIGxlYWQgPSBjO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2UgaWYgKGxlYWQpIHtcblx0ICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4RUY7XG5cdCAgICAgICAgICAgIGJ1Zltwb3MrK10gPSAweEJGO1xuXHQgICAgICAgICAgICBidWZbcG9zKytdID0gMHhCRDtcblx0ICAgICAgICAgICAgbGVhZCA9IG51bGw7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAoYyA8IDB4ODApIHtcblx0ICAgICAgICAgICAgYnVmW3BvcysrXSA9IGM7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgaWYgKGMgPCAweDgwMCkge1xuXHQgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IGMgPj4gMHg2IHwgMHhDMDtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgIGlmIChjIDwgMHgxMDAwMCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSBjID4+IDB4QyB8IDB4RTA7XG5cdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSBjID4+IDB4MTIgfCAweEYwO1xuXHQgICAgICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSBjID4+IDB4QyAmIDB4M0YgfCAweDgwO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IGMgPj4gMHg2ICYgMHgzRiB8IDB4ODA7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgYnVmW3BvcysrXSA9IGMgJiAweDNGIHwgMHg4MDtcblx0ICAgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcG9zO1xuXHR9XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM1OTpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuXHQgIHZhciBlLCBtXG5cdCAgdmFyIGVMZW4gPSAobkJ5dGVzICogOCkgLSBtTGVuIC0gMVxuXHQgIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG5cdCAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG5cdCAgdmFyIG5CaXRzID0gLTdcblx0ICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG5cdCAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG5cdCAgdmFyIHMgPSBidWZmZXJbb2Zmc2V0ICsgaV1cblx0XG5cdCAgaSArPSBkXG5cdFxuXHQgIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG5cdCAgcyA+Pj0gKC1uQml0cylcblx0ICBuQml0cyArPSBlTGVuXG5cdCAgZm9yICg7IG5CaXRzID4gMDsgZSA9IChlICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXHRcblx0ICBtID0gZSAmICgoMSA8PCAoLW5CaXRzKSkgLSAxKVxuXHQgIGUgPj49ICgtbkJpdHMpXG5cdCAgbkJpdHMgKz0gbUxlblxuXHQgIGZvciAoOyBuQml0cyA+IDA7IG0gPSAobSAqIDI1NikgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblx0XG5cdCAgaWYgKGUgPT09IDApIHtcblx0ICAgIGUgPSAxIC0gZUJpYXNcblx0ICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcblx0ICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuXHQgIH0gZWxzZSB7XG5cdCAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pXG5cdCAgICBlID0gZSAtIGVCaWFzXG5cdCAgfVxuXHQgIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pXG5cdH1cblx0XG5cdGV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcblx0ICB2YXIgZSwgbSwgY1xuXHQgIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDFcblx0ICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuXHQgIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuXHQgIHZhciBydCA9IChtTGVuID09PSAyMyA/IE1hdGgucG93KDIsIC0yNCkgLSBNYXRoLnBvdygyLCAtNzcpIDogMClcblx0ICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG5cdCAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG5cdCAgdmFyIHMgPSB2YWx1ZSA8IDAgfHwgKHZhbHVlID09PSAwICYmIDEgLyB2YWx1ZSA8IDApID8gMSA6IDBcblx0XG5cdCAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblx0XG5cdCAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcblx0ICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuXHQgICAgZSA9IGVNYXhcblx0ICB9IGVsc2Uge1xuXHQgICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG5cdCAgICBpZiAodmFsdWUgKiAoYyA9IE1hdGgucG93KDIsIC1lKSkgPCAxKSB7XG5cdCAgICAgIGUtLVxuXHQgICAgICBjICo9IDJcblx0ICAgIH1cblx0ICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuXHQgICAgICB2YWx1ZSArPSBydCAvIGNcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuXHQgICAgfVxuXHQgICAgaWYgKHZhbHVlICogYyA+PSAyKSB7XG5cdCAgICAgIGUrK1xuXHQgICAgICBjIC89IDJcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcblx0ICAgICAgbSA9IDBcblx0ICAgICAgZSA9IGVNYXhcblx0ICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcblx0ICAgICAgbSA9ICgodmFsdWUgKiBjKSAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcblx0ICAgICAgZSA9IGUgKyBlQmlhc1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbSA9IHZhbHVlICogTWF0aC5wb3coMiwgZUJpYXMgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG5cdCAgICAgIGUgPSAwXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fVxuXHRcblx0ICBlID0gKGUgPDwgbUxlbikgfCBtXG5cdCAgZUxlbiArPSBtTGVuXG5cdCAgZm9yICg7IGVMZW4gPiAwOyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBlICYgMHhmZiwgaSArPSBkLCBlIC89IDI1NiwgZUxlbiAtPSA4KSB7fVxuXHRcblx0ICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjhcblx0fVxuXG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNjA6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMuVmVjdG9yVGlsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzYxKTtcblx0bW9kdWxlLmV4cG9ydHMuVmVjdG9yVGlsZUZlYXR1cmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Myk7XG5cdG1vZHVsZS5leHBvcnRzLlZlY3RvclRpbGVMYXllciA9IF9fd2VicGFja19yZXF1aXJlX18oMzYyKTtcblxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzYxOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBWZWN0b3JUaWxlTGF5ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Mik7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFZlY3RvclRpbGU7XG5cdFxuXHRmdW5jdGlvbiBWZWN0b3JUaWxlKHBiZiwgZW5kKSB7XG5cdCAgICB0aGlzLmxheWVycyA9IHBiZi5yZWFkRmllbGRzKHJlYWRUaWxlLCB7fSwgZW5kKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZFRpbGUodGFnLCBsYXllcnMsIHBiZikge1xuXHQgICAgaWYgKHRhZyA9PT0gMykge1xuXHQgICAgICAgIHZhciBsYXllciA9IG5ldyBWZWN0b3JUaWxlTGF5ZXIocGJmLCBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcyk7XG5cdCAgICAgICAgaWYgKGxheWVyLmxlbmd0aCkgbGF5ZXJzW2xheWVyLm5hbWVdID0gbGF5ZXI7XG5cdCAgICB9XG5cdH1cblx0XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM2Mjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgVmVjdG9yVGlsZUZlYXR1cmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2Myk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFZlY3RvclRpbGVMYXllcjtcblx0XG5cdGZ1bmN0aW9uIFZlY3RvclRpbGVMYXllcihwYmYsIGVuZCkge1xuXHQgICAgLy8gUHVibGljXG5cdCAgICB0aGlzLnZlcnNpb24gPSAxO1xuXHQgICAgdGhpcy5uYW1lID0gbnVsbDtcblx0ICAgIHRoaXMuZXh0ZW50ID0gNDA5Njtcblx0ICAgIHRoaXMubGVuZ3RoID0gMDtcblx0XG5cdCAgICAvLyBQcml2YXRlXG5cdCAgICB0aGlzLl9wYmYgPSBwYmY7XG5cdCAgICB0aGlzLl9rZXlzID0gW107XG5cdCAgICB0aGlzLl92YWx1ZXMgPSBbXTtcblx0ICAgIHRoaXMuX2ZlYXR1cmVzID0gW107XG5cdFxuXHQgICAgcGJmLnJlYWRGaWVsZHMocmVhZExheWVyLCB0aGlzLCBlbmQpO1xuXHRcblx0ICAgIHRoaXMubGVuZ3RoID0gdGhpcy5fZmVhdHVyZXMubGVuZ3RoO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkTGF5ZXIodGFnLCBsYXllciwgcGJmKSB7XG5cdCAgICBpZiAodGFnID09PSAxNSkgbGF5ZXIudmVyc2lvbiA9IHBiZi5yZWFkVmFyaW50KCk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT09IDEpIGxheWVyLm5hbWUgPSBwYmYucmVhZFN0cmluZygpO1xuXHQgICAgZWxzZSBpZiAodGFnID09PSA1KSBsYXllci5leHRlbnQgPSBwYmYucmVhZFZhcmludCgpO1xuXHQgICAgZWxzZSBpZiAodGFnID09PSAyKSBsYXllci5fZmVhdHVyZXMucHVzaChwYmYucG9zKTtcblx0ICAgIGVsc2UgaWYgKHRhZyA9PT0gMykgbGF5ZXIuX2tleXMucHVzaChwYmYucmVhZFN0cmluZygpKTtcblx0ICAgIGVsc2UgaWYgKHRhZyA9PT0gNCkgbGF5ZXIuX3ZhbHVlcy5wdXNoKHJlYWRWYWx1ZU1lc3NhZ2UocGJmKSk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHJlYWRWYWx1ZU1lc3NhZ2UocGJmKSB7XG5cdCAgICB2YXIgdmFsdWUgPSBudWxsLFxuXHQgICAgICAgIGVuZCA9IHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zO1xuXHRcblx0ICAgIHdoaWxlIChwYmYucG9zIDwgZW5kKSB7XG5cdCAgICAgICAgdmFyIHRhZyA9IHBiZi5yZWFkVmFyaW50KCkgPj4gMztcblx0XG5cdCAgICAgICAgdmFsdWUgPSB0YWcgPT09IDEgPyBwYmYucmVhZFN0cmluZygpIDpcblx0ICAgICAgICAgICAgdGFnID09PSAyID8gcGJmLnJlYWRGbG9hdCgpIDpcblx0ICAgICAgICAgICAgdGFnID09PSAzID8gcGJmLnJlYWREb3VibGUoKSA6XG5cdCAgICAgICAgICAgIHRhZyA9PT0gNCA/IHBiZi5yZWFkVmFyaW50NjQoKSA6XG5cdCAgICAgICAgICAgIHRhZyA9PT0gNSA/IHBiZi5yZWFkVmFyaW50KCkgOlxuXHQgICAgICAgICAgICB0YWcgPT09IDYgPyBwYmYucmVhZFNWYXJpbnQoKSA6XG5cdCAgICAgICAgICAgIHRhZyA9PT0gNyA/IHBiZi5yZWFkQm9vbGVhbigpIDogbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdH1cblx0XG5cdC8vIHJldHVybiBmZWF0dXJlIGBpYCBmcm9tIHRoaXMgbGF5ZXIgYXMgYSBgVmVjdG9yVGlsZUZlYXR1cmVgXG5cdFZlY3RvclRpbGVMYXllci5wcm90b3R5cGUuZmVhdHVyZSA9IGZ1bmN0aW9uKGkpIHtcblx0ICAgIGlmIChpIDwgMCB8fCBpID49IHRoaXMuX2ZlYXR1cmVzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdmZWF0dXJlIGluZGV4IG91dCBvZiBib3VuZHMnKTtcblx0XG5cdCAgICB0aGlzLl9wYmYucG9zID0gdGhpcy5fZmVhdHVyZXNbaV07XG5cdFxuXHQgICAgdmFyIGVuZCA9IHRoaXMuX3BiZi5yZWFkVmFyaW50KCkgKyB0aGlzLl9wYmYucG9zO1xuXHQgICAgcmV0dXJuIG5ldyBWZWN0b3JUaWxlRmVhdHVyZSh0aGlzLl9wYmYsIGVuZCwgdGhpcy5leHRlbnQsIHRoaXMuX2tleXMsIHRoaXMuX3ZhbHVlcyk7XG5cdH07XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM2Mzpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgUG9pbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM2NCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFZlY3RvclRpbGVGZWF0dXJlO1xuXHRcblx0ZnVuY3Rpb24gVmVjdG9yVGlsZUZlYXR1cmUocGJmLCBlbmQsIGV4dGVudCwga2V5cywgdmFsdWVzKSB7XG5cdCAgICAvLyBQdWJsaWNcblx0ICAgIHRoaXMucHJvcGVydGllcyA9IHt9O1xuXHQgICAgdGhpcy5leHRlbnQgPSBleHRlbnQ7XG5cdCAgICB0aGlzLnR5cGUgPSAwO1xuXHRcblx0ICAgIC8vIFByaXZhdGVcblx0ICAgIHRoaXMuX3BiZiA9IHBiZjtcblx0ICAgIHRoaXMuX2dlb21ldHJ5ID0gLTE7XG5cdCAgICB0aGlzLl9rZXlzID0ga2V5cztcblx0ICAgIHRoaXMuX3ZhbHVlcyA9IHZhbHVlcztcblx0XG5cdCAgICBwYmYucmVhZEZpZWxkcyhyZWFkRmVhdHVyZSwgdGhpcywgZW5kKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVhZEZlYXR1cmUodGFnLCBmZWF0dXJlLCBwYmYpIHtcblx0ICAgIGlmICh0YWcgPT0gMSkgZmVhdHVyZS5pZCA9IHBiZi5yZWFkVmFyaW50KCk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT0gMikgcmVhZFRhZyhwYmYsIGZlYXR1cmUpO1xuXHQgICAgZWxzZSBpZiAodGFnID09IDMpIGZlYXR1cmUudHlwZSA9IHBiZi5yZWFkVmFyaW50KCk7XG5cdCAgICBlbHNlIGlmICh0YWcgPT0gNCkgZmVhdHVyZS5fZ2VvbWV0cnkgPSBwYmYucG9zO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiByZWFkVGFnKHBiZiwgZmVhdHVyZSkge1xuXHQgICAgdmFyIGVuZCA9IHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zO1xuXHRcblx0ICAgIHdoaWxlIChwYmYucG9zIDwgZW5kKSB7XG5cdCAgICAgICAgdmFyIGtleSA9IGZlYXR1cmUuX2tleXNbcGJmLnJlYWRWYXJpbnQoKV0sXG5cdCAgICAgICAgICAgIHZhbHVlID0gZmVhdHVyZS5fdmFsdWVzW3BiZi5yZWFkVmFyaW50KCldO1xuXHQgICAgICAgIGZlYXR1cmUucHJvcGVydGllc1trZXldID0gdmFsdWU7XG5cdCAgICB9XG5cdH1cblx0XG5cdFZlY3RvclRpbGVGZWF0dXJlLnR5cGVzID0gWydVbmtub3duJywgJ1BvaW50JywgJ0xpbmVTdHJpbmcnLCAnUG9seWdvbiddO1xuXHRcblx0VmVjdG9yVGlsZUZlYXR1cmUucHJvdG90eXBlLmxvYWRHZW9tZXRyeSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIHBiZiA9IHRoaXMuX3BiZjtcblx0ICAgIHBiZi5wb3MgPSB0aGlzLl9nZW9tZXRyeTtcblx0XG5cdCAgICB2YXIgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3MsXG5cdCAgICAgICAgY21kID0gMSxcblx0ICAgICAgICBsZW5ndGggPSAwLFxuXHQgICAgICAgIHggPSAwLFxuXHQgICAgICAgIHkgPSAwLFxuXHQgICAgICAgIGxpbmVzID0gW10sXG5cdCAgICAgICAgbGluZTtcblx0XG5cdCAgICB3aGlsZSAocGJmLnBvcyA8IGVuZCkge1xuXHQgICAgICAgIGlmIChsZW5ndGggPD0gMCkge1xuXHQgICAgICAgICAgICB2YXIgY21kTGVuID0gcGJmLnJlYWRWYXJpbnQoKTtcblx0ICAgICAgICAgICAgY21kID0gY21kTGVuICYgMHg3O1xuXHQgICAgICAgICAgICBsZW5ndGggPSBjbWRMZW4gPj4gMztcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGxlbmd0aC0tO1xuXHRcblx0ICAgICAgICBpZiAoY21kID09PSAxIHx8IGNtZCA9PT0gMikge1xuXHQgICAgICAgICAgICB4ICs9IHBiZi5yZWFkU1ZhcmludCgpO1xuXHQgICAgICAgICAgICB5ICs9IHBiZi5yZWFkU1ZhcmludCgpO1xuXHRcblx0ICAgICAgICAgICAgaWYgKGNtZCA9PT0gMSkgeyAvLyBtb3ZlVG9cblx0ICAgICAgICAgICAgICAgIGlmIChsaW5lKSBsaW5lcy5wdXNoKGxpbmUpO1xuXHQgICAgICAgICAgICAgICAgbGluZSA9IFtdO1xuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICBsaW5lLnB1c2gobmV3IFBvaW50KHgsIHkpKTtcblx0XG5cdCAgICAgICAgfSBlbHNlIGlmIChjbWQgPT09IDcpIHtcblx0XG5cdCAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvbWFwbmlrLXZlY3Rvci10aWxlL2lzc3Vlcy85MFxuXHQgICAgICAgICAgICBpZiAobGluZSkge1xuXHQgICAgICAgICAgICAgICAgbGluZS5wdXNoKGxpbmVbMF0uY2xvbmUoKSk7IC8vIGNsb3NlUG9seWdvblxuXHQgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBjb21tYW5kICcgKyBjbWQpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAobGluZSkgbGluZXMucHVzaChsaW5lKTtcblx0XG5cdCAgICByZXR1cm4gbGluZXM7XG5cdH07XG5cdFxuXHRWZWN0b3JUaWxlRmVhdHVyZS5wcm90b3R5cGUuYmJveCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIHBiZiA9IHRoaXMuX3BiZjtcblx0ICAgIHBiZi5wb3MgPSB0aGlzLl9nZW9tZXRyeTtcblx0XG5cdCAgICB2YXIgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3MsXG5cdCAgICAgICAgY21kID0gMSxcblx0ICAgICAgICBsZW5ndGggPSAwLFxuXHQgICAgICAgIHggPSAwLFxuXHQgICAgICAgIHkgPSAwLFxuXHQgICAgICAgIHgxID0gSW5maW5pdHksXG5cdCAgICAgICAgeDIgPSAtSW5maW5pdHksXG5cdCAgICAgICAgeTEgPSBJbmZpbml0eSxcblx0ICAgICAgICB5MiA9IC1JbmZpbml0eTtcblx0XG5cdCAgICB3aGlsZSAocGJmLnBvcyA8IGVuZCkge1xuXHQgICAgICAgIGlmIChsZW5ndGggPD0gMCkge1xuXHQgICAgICAgICAgICB2YXIgY21kTGVuID0gcGJmLnJlYWRWYXJpbnQoKTtcblx0ICAgICAgICAgICAgY21kID0gY21kTGVuICYgMHg3O1xuXHQgICAgICAgICAgICBsZW5ndGggPSBjbWRMZW4gPj4gMztcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGxlbmd0aC0tO1xuXHRcblx0ICAgICAgICBpZiAoY21kID09PSAxIHx8IGNtZCA9PT0gMikge1xuXHQgICAgICAgICAgICB4ICs9IHBiZi5yZWFkU1ZhcmludCgpO1xuXHQgICAgICAgICAgICB5ICs9IHBiZi5yZWFkU1ZhcmludCgpO1xuXHQgICAgICAgICAgICBpZiAoeCA8IHgxKSB4MSA9IHg7XG5cdCAgICAgICAgICAgIGlmICh4ID4geDIpIHgyID0geDtcblx0ICAgICAgICAgICAgaWYgKHkgPCB5MSkgeTEgPSB5O1xuXHQgICAgICAgICAgICBpZiAoeSA+IHkyKSB5MiA9IHk7XG5cdFxuXHQgICAgICAgIH0gZWxzZSBpZiAoY21kICE9PSA3KSB7XG5cdCAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBjb21tYW5kICcgKyBjbWQpO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gW3gxLCB5MSwgeDIsIHkyXTtcblx0fTtcblx0XG5cdFZlY3RvclRpbGVGZWF0dXJlLnByb3RvdHlwZS50b0dlb0pTT04gPSBmdW5jdGlvbih4LCB5LCB6KSB7XG5cdCAgICB2YXIgc2l6ZSA9IHRoaXMuZXh0ZW50ICogTWF0aC5wb3coMiwgeiksXG5cdCAgICAgICAgeDAgPSB0aGlzLmV4dGVudCAqIHgsXG5cdCAgICAgICAgeTAgPSB0aGlzLmV4dGVudCAqIHksXG5cdCAgICAgICAgY29vcmRzID0gdGhpcy5sb2FkR2VvbWV0cnkoKSxcblx0ICAgICAgICB0eXBlID0gVmVjdG9yVGlsZUZlYXR1cmUudHlwZXNbdGhpcy50eXBlXSxcblx0ICAgICAgICBpLCBqO1xuXHRcblx0ICAgIGZ1bmN0aW9uIHByb2plY3QobGluZSkge1xuXHQgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGluZS5sZW5ndGg7IGorKykge1xuXHQgICAgICAgICAgICB2YXIgcCA9IGxpbmVbal0sIHkyID0gMTgwIC0gKHAueSArIHkwKSAqIDM2MCAvIHNpemU7XG5cdCAgICAgICAgICAgIGxpbmVbal0gPSBbXG5cdCAgICAgICAgICAgICAgICAocC54ICsgeDApICogMzYwIC8gc2l6ZSAtIDE4MCxcblx0ICAgICAgICAgICAgICAgIDM2MCAvIE1hdGguUEkgKiBNYXRoLmF0YW4oTWF0aC5leHAoeTIgKiBNYXRoLlBJIC8gMTgwKSkgLSA5MFxuXHQgICAgICAgICAgICBdO1xuXHQgICAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xuXHQgICAgY2FzZSAxOlxuXHQgICAgICAgIHZhciBwb2ludHMgPSBbXTtcblx0ICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIHBvaW50c1tpXSA9IGNvb3Jkc1tpXVswXTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY29vcmRzID0gcG9pbnRzO1xuXHQgICAgICAgIHByb2plY3QoY29vcmRzKTtcblx0ICAgICAgICBicmVhaztcblx0XG5cdCAgICBjYXNlIDI6XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBwcm9qZWN0KGNvb3Jkc1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGJyZWFrO1xuXHRcblx0ICAgIGNhc2UgMzpcblx0ICAgICAgICBjb29yZHMgPSBjbGFzc2lmeVJpbmdzKGNvb3Jkcyk7XG5cdCAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgY29vcmRzW2ldLmxlbmd0aDsgaisrKSB7XG5cdCAgICAgICAgICAgICAgICBwcm9qZWN0KGNvb3Jkc1tpXVtqXSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKGNvb3Jkcy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICBjb29yZHMgPSBjb29yZHNbMF07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAgIHR5cGUgPSAnTXVsdGknICsgdHlwZTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgcmVzdWx0ID0ge1xuXHQgICAgICAgIHR5cGU6IFwiRmVhdHVyZVwiLFxuXHQgICAgICAgIGdlb21ldHJ5OiB7XG5cdCAgICAgICAgICAgIHR5cGU6IHR5cGUsXG5cdCAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZHNcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHByb3BlcnRpZXM6IHRoaXMucHJvcGVydGllc1xuXHQgICAgfTtcblx0XG5cdCAgICBpZiAoJ2lkJyBpbiB0aGlzKSB7XG5cdCAgICAgICAgcmVzdWx0LmlkID0gdGhpcy5pZDtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHR9O1xuXHRcblx0Ly8gY2xhc3NpZmllcyBhbiBhcnJheSBvZiByaW5ncyBpbnRvIHBvbHlnb25zIHdpdGggb3V0ZXIgcmluZ3MgYW5kIGhvbGVzXG5cdFxuXHRmdW5jdGlvbiBjbGFzc2lmeVJpbmdzKHJpbmdzKSB7XG5cdCAgICB2YXIgbGVuID0gcmluZ3MubGVuZ3RoO1xuXHRcblx0ICAgIGlmIChsZW4gPD0gMSkgcmV0dXJuIFtyaW5nc107XG5cdFxuXHQgICAgdmFyIHBvbHlnb25zID0gW10sXG5cdCAgICAgICAgcG9seWdvbixcblx0ICAgICAgICBjY3c7XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgIHZhciBhcmVhID0gc2lnbmVkQXJlYShyaW5nc1tpXSk7XG5cdCAgICAgICAgaWYgKGFyZWEgPT09IDApIGNvbnRpbnVlO1xuXHRcblx0ICAgICAgICBpZiAoY2N3ID09PSB1bmRlZmluZWQpIGNjdyA9IGFyZWEgPCAwO1xuXHRcblx0ICAgICAgICBpZiAoY2N3ID09PSBhcmVhIDwgMCkge1xuXHQgICAgICAgICAgICBpZiAocG9seWdvbikgcG9seWdvbnMucHVzaChwb2x5Z29uKTtcblx0ICAgICAgICAgICAgcG9seWdvbiA9IFtyaW5nc1tpXV07XG5cdFxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHBvbHlnb24ucHVzaChyaW5nc1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKHBvbHlnb24pIHBvbHlnb25zLnB1c2gocG9seWdvbik7XG5cdFxuXHQgICAgcmV0dXJuIHBvbHlnb25zO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzaWduZWRBcmVhKHJpbmcpIHtcblx0ICAgIHZhciBzdW0gPSAwO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJpbmcubGVuZ3RoLCBqID0gbGVuIC0gMSwgcDEsIHAyOyBpIDwgbGVuOyBqID0gaSsrKSB7XG5cdCAgICAgICAgcDEgPSByaW5nW2ldO1xuXHQgICAgICAgIHAyID0gcmluZ1tqXTtcblx0ICAgICAgICBzdW0gKz0gKHAyLnggLSBwMS54KSAqIChwMS55ICsgcDIueSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gc3VtO1xuXHR9XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM2NDpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFBvaW50O1xuXHRcblx0LyoqXG5cdCAqIEEgc3RhbmRhbG9uZSBwb2ludCBnZW9tZXRyeSB3aXRoIHVzZWZ1bCBhY2Nlc3NvciwgY29tcGFyaXNvbiwgYW5kXG5cdCAqIG1vZGlmaWNhdGlvbiBtZXRob2RzLlxuXHQgKlxuXHQgKiBAY2xhc3MgUG9pbnRcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHggdGhlIHgtY29vcmRpbmF0ZS4gdGhpcyBjb3VsZCBiZSBsb25naXR1ZGUgb3Igc2NyZWVuXG5cdCAqIHBpeGVscywgb3IgYW55IG90aGVyIHNvcnQgb2YgdW5pdC5cblx0ICogQHBhcmFtIHtOdW1iZXJ9IHkgdGhlIHktY29vcmRpbmF0ZS4gdGhpcyBjb3VsZCBiZSBsYXRpdHVkZSBvciBzY3JlZW5cblx0ICogcGl4ZWxzLCBvciBhbnkgb3RoZXIgc29ydCBvZiB1bml0LlxuXHQgKiBAZXhhbXBsZVxuXHQgKiB2YXIgcG9pbnQgPSBuZXcgUG9pbnQoLTc3LCAzOCk7XG5cdCAqL1xuXHRmdW5jdGlvbiBQb2ludCh4LCB5KSB7XG5cdCAgICB0aGlzLnggPSB4O1xuXHQgICAgdGhpcy55ID0geTtcblx0fVxuXHRcblx0UG9pbnQucHJvdG90eXBlID0ge1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQ2xvbmUgdGhpcyBwb2ludCwgcmV0dXJuaW5nIGEgbmV3IHBvaW50IHRoYXQgY2FuIGJlIG1vZGlmaWVkXG5cdCAgICAgKiB3aXRob3V0IGFmZmVjdGluZyB0aGUgb2xkIG9uZS5cblx0ICAgICAqIEByZXR1cm4ge1BvaW50fSB0aGUgY2xvbmVcblx0ICAgICAqL1xuXHQgICAgY2xvbmU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmV3IFBvaW50KHRoaXMueCwgdGhpcy55KTsgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEFkZCB0aGlzIHBvaW50J3MgeCAmIHkgY29vcmRpbmF0ZXMgdG8gYW5vdGhlciBwb2ludCxcblx0ICAgICAqIHlpZWxkaW5nIGEgbmV3IHBvaW50LlxuXHQgICAgICogQHBhcmFtIHtQb2ludH0gcCB0aGUgb3RoZXIgcG9pbnRcblx0ICAgICAqIEByZXR1cm4ge1BvaW50fSBvdXRwdXQgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgYWRkOiAgICAgZnVuY3Rpb24ocCkgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9hZGQocCk7IH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTdWJ0cmFjdCB0aGlzIHBvaW50J3MgeCAmIHkgY29vcmRpbmF0ZXMgdG8gZnJvbSBwb2ludCxcblx0ICAgICAqIHlpZWxkaW5nIGEgbmV3IHBvaW50LlxuXHQgICAgICogQHBhcmFtIHtQb2ludH0gcCB0aGUgb3RoZXIgcG9pbnRcblx0ICAgICAqIEByZXR1cm4ge1BvaW50fSBvdXRwdXQgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgc3ViOiAgICAgZnVuY3Rpb24ocCkgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9zdWIocCk7IH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBNdWx0aXBseSB0aGlzIHBvaW50J3MgeCAmIHkgY29vcmRpbmF0ZXMgYnkgcG9pbnQsXG5cdCAgICAgKiB5aWVsZGluZyBhIG5ldyBwb2ludC5cblx0ICAgICAqIEBwYXJhbSB7UG9pbnR9IHAgdGhlIG90aGVyIHBvaW50XG5cdCAgICAgKiBAcmV0dXJuIHtQb2ludH0gb3V0cHV0IHBvaW50XG5cdCAgICAgKi9cblx0ICAgIG11bHRCeVBvaW50OiAgICBmdW5jdGlvbihwKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX211bHRCeVBvaW50KHApOyB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogRGl2aWRlIHRoaXMgcG9pbnQncyB4ICYgeSBjb29yZGluYXRlcyBieSBwb2ludCxcblx0ICAgICAqIHlpZWxkaW5nIGEgbmV3IHBvaW50LlxuXHQgICAgICogQHBhcmFtIHtQb2ludH0gcCB0aGUgb3RoZXIgcG9pbnRcblx0ICAgICAqIEByZXR1cm4ge1BvaW50fSBvdXRwdXQgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgZGl2QnlQb2ludDogICAgIGZ1bmN0aW9uKHApIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fZGl2QnlQb2ludChwKTsgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIE11bHRpcGx5IHRoaXMgcG9pbnQncyB4ICYgeSBjb29yZGluYXRlcyBieSBhIGZhY3Rvcixcblx0ICAgICAqIHlpZWxkaW5nIGEgbmV3IHBvaW50LlxuXHQgICAgICogQHBhcmFtIHtQb2ludH0gayBmYWN0b3Jcblx0ICAgICAqIEByZXR1cm4ge1BvaW50fSBvdXRwdXQgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgbXVsdDogICAgZnVuY3Rpb24oaykgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9tdWx0KGspOyB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogRGl2aWRlIHRoaXMgcG9pbnQncyB4ICYgeSBjb29yZGluYXRlcyBieSBhIGZhY3Rvcixcblx0ICAgICAqIHlpZWxkaW5nIGEgbmV3IHBvaW50LlxuXHQgICAgICogQHBhcmFtIHtQb2ludH0gayBmYWN0b3Jcblx0ICAgICAqIEByZXR1cm4ge1BvaW50fSBvdXRwdXQgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgZGl2OiAgICAgZnVuY3Rpb24oaykgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9kaXYoayk7IH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSb3RhdGUgdGhpcyBwb2ludCBhcm91bmQgdGhlIDAsIDAgb3JpZ2luIGJ5IGFuIGFuZ2xlIGEsXG5cdCAgICAgKiBnaXZlbiBpbiByYWRpYW5zXG5cdCAgICAgKiBAcGFyYW0ge051bWJlcn0gYSBhbmdsZSB0byByb3RhdGUgYXJvdW5kLCBpbiByYWRpYW5zXG5cdCAgICAgKiBAcmV0dXJuIHtQb2ludH0gb3V0cHV0IHBvaW50XG5cdCAgICAgKi9cblx0ICAgIHJvdGF0ZTogIGZ1bmN0aW9uKGEpIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fcm90YXRlKGEpOyB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUm90YXRlIHRoaXMgcG9pbnQgYXJvdW5kIHAgcG9pbnQgYnkgYW4gYW5nbGUgYSxcblx0ICAgICAqIGdpdmVuIGluIHJhZGlhbnNcblx0ICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhIGFuZ2xlIHRvIHJvdGF0ZSBhcm91bmQsIGluIHJhZGlhbnNcblx0ICAgICAqIEBwYXJhbSB7UG9pbnR9IHAgUG9pbnQgdG8gcm90YXRlIGFyb3VuZFxuXHQgICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuXHQgICAgICovXG5cdCAgICByb3RhdGVBcm91bmQ6ICBmdW5jdGlvbihhLHApIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fcm90YXRlQXJvdW5kKGEscCk7IH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBNdWx0aXBseSB0aGlzIHBvaW50IGJ5IGEgNHgxIHRyYW5zZm9ybWF0aW9uIG1hdHJpeFxuXHQgICAgICogQHBhcmFtIHtBcnJheTxOdW1iZXI+fSBtIHRyYW5zZm9ybWF0aW9uIG1hdHJpeFxuXHQgICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuXHQgICAgICovXG5cdCAgICBtYXRNdWx0OiBmdW5jdGlvbihtKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX21hdE11bHQobSk7IH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBDYWxjdWxhdGUgdGhpcyBwb2ludCBidXQgYXMgYSB1bml0IHZlY3RvciBmcm9tIDAsIDAsIG1lYW5pbmdcblx0ICAgICAqIHRoYXQgdGhlIGRpc3RhbmNlIGZyb20gdGhlIHJlc3VsdGluZyBwb2ludCB0byB0aGUgMCwgMFxuXHQgICAgICogY29vcmRpbmF0ZSB3aWxsIGJlIGVxdWFsIHRvIDEgYW5kIHRoZSBhbmdsZSBmcm9tIHRoZSByZXN1bHRpbmdcblx0ICAgICAqIHBvaW50IHRvIHRoZSAwLCAwIGNvb3JkaW5hdGUgd2lsbCBiZSB0aGUgc2FtZSBhcyBiZWZvcmUuXG5cdCAgICAgKiBAcmV0dXJuIHtQb2ludH0gdW5pdCB2ZWN0b3IgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgdW5pdDogICAgZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX3VuaXQoKTsgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENvbXB1dGUgYSBwZXJwZW5kaWN1bGFyIHBvaW50LCB3aGVyZSB0aGUgbmV3IHkgY29vcmRpbmF0ZVxuXHQgICAgICogaXMgdGhlIG9sZCB4IGNvb3JkaW5hdGUgYW5kIHRoZSBuZXcgeCBjb29yZGluYXRlIGlzIHRoZSBvbGQgeVxuXHQgICAgICogY29vcmRpbmF0ZSBtdWx0aXBsaWVkIGJ5IC0xXG5cdCAgICAgKiBAcmV0dXJuIHtQb2ludH0gcGVycGVuZGljdWxhciBwb2ludFxuXHQgICAgICovXG5cdCAgICBwZXJwOiAgICBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fcGVycCgpOyB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmV0dXJuIGEgdmVyc2lvbiBvZiB0aGlzIHBvaW50IHdpdGggdGhlIHggJiB5IGNvb3JkaW5hdGVzXG5cdCAgICAgKiByb3VuZGVkIHRvIGludGVnZXJzLlxuXHQgICAgICogQHJldHVybiB7UG9pbnR9IHJvdW5kZWQgcG9pbnRcblx0ICAgICAqL1xuXHQgICAgcm91bmQ6ICAgZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX3JvdW5kKCk7IH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZXR1cm4gdGhlIG1hZ2l0dWRlIG9mIHRoaXMgcG9pbnQ6IHRoaXMgaXMgdGhlIEV1Y2xpZGVhblxuXHQgICAgICogZGlzdGFuY2UgZnJvbSB0aGUgMCwgMCBjb29yZGluYXRlIHRvIHRoaXMgcG9pbnQncyB4IGFuZCB5XG5cdCAgICAgKiBjb29yZGluYXRlcy5cblx0ICAgICAqIEByZXR1cm4ge051bWJlcn0gbWFnbml0dWRlXG5cdCAgICAgKi9cblx0ICAgIG1hZzogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkpO1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEp1ZGdlIHdoZXRoZXIgdGhpcyBwb2ludCBpcyBlcXVhbCB0byBhbm90aGVyIHBvaW50LCByZXR1cm5pbmdcblx0ICAgICAqIHRydWUgb3IgZmFsc2UuXG5cdCAgICAgKiBAcGFyYW0ge1BvaW50fSBvdGhlciB0aGUgb3RoZXIgcG9pbnRcblx0ICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHdoZXRoZXIgdGhlIHBvaW50cyBhcmUgZXF1YWxcblx0ICAgICAqL1xuXHQgICAgZXF1YWxzOiBmdW5jdGlvbihvdGhlcikge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnggPT09IG90aGVyLnggJiZcblx0ICAgICAgICAgICAgICAgdGhpcy55ID09PSBvdGhlci55O1xuXHQgICAgfSxcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENhbGN1bGF0ZSB0aGUgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnRcblx0ICAgICAqIEBwYXJhbSB7UG9pbnR9IHAgdGhlIG90aGVyIHBvaW50XG5cdCAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IGRpc3RhbmNlXG5cdCAgICAgKi9cblx0ICAgIGRpc3Q6IGZ1bmN0aW9uKHApIHtcblx0ICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMuZGlzdFNxcihwKSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQ2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBmcm9tIHRoaXMgcG9pbnQgdG8gYW5vdGhlciBwb2ludCxcblx0ICAgICAqIHdpdGhvdXQgdGhlIHNxdWFyZSByb290IHN0ZXAuIFVzZWZ1bCBpZiB5b3UncmUgY29tcGFyaW5nXG5cdCAgICAgKiByZWxhdGl2ZSBkaXN0YW5jZXMuXG5cdCAgICAgKiBAcGFyYW0ge1BvaW50fSBwIHRoZSBvdGhlciBwb2ludFxuXHQgICAgICogQHJldHVybiB7TnVtYmVyfSBkaXN0YW5jZVxuXHQgICAgICovXG5cdCAgICBkaXN0U3FyOiBmdW5jdGlvbihwKSB7XG5cdCAgICAgICAgdmFyIGR4ID0gcC54IC0gdGhpcy54LFxuXHQgICAgICAgICAgICBkeSA9IHAueSAtIHRoaXMueTtcblx0ICAgICAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogR2V0IHRoZSBhbmdsZSBmcm9tIHRoZSAwLCAwIGNvb3JkaW5hdGUgdG8gdGhpcyBwb2ludCwgaW4gcmFkaWFuc1xuXHQgICAgICogY29vcmRpbmF0ZXMuXG5cdCAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IGFuZ2xlXG5cdCAgICAgKi9cblx0ICAgIGFuZ2xlOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLnksIHRoaXMueCk7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogR2V0IHRoZSBhbmdsZSBmcm9tIHRoaXMgcG9pbnQgdG8gYW5vdGhlciBwb2ludCwgaW4gcmFkaWFuc1xuXHQgICAgICogQHBhcmFtIHtQb2ludH0gYiB0aGUgb3RoZXIgcG9pbnRcblx0ICAgICAqIEByZXR1cm4ge051bWJlcn0gYW5nbGVcblx0ICAgICAqL1xuXHQgICAgYW5nbGVUbzogZnVuY3Rpb24oYikge1xuXHQgICAgICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMueSAtIGIueSwgdGhpcy54IC0gYi54KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXQgdGhlIGFuZ2xlIGJldHdlZW4gdGhpcyBwb2ludCBhbmQgYW5vdGhlciBwb2ludCwgaW4gcmFkaWFuc1xuXHQgICAgICogQHBhcmFtIHtQb2ludH0gYiB0aGUgb3RoZXIgcG9pbnRcblx0ICAgICAqIEByZXR1cm4ge051bWJlcn0gYW5nbGVcblx0ICAgICAqL1xuXHQgICAgYW5nbGVXaXRoOiBmdW5jdGlvbihiKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuYW5nbGVXaXRoU2VwKGIueCwgYi55KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgLypcblx0ICAgICAqIEZpbmQgdGhlIGFuZ2xlIG9mIHRoZSB0d28gdmVjdG9ycywgc29sdmluZyB0aGUgZm9ybXVsYSBmb3Jcblx0ICAgICAqIHRoZSBjcm9zcyBwcm9kdWN0IGEgeCBiID0gfGF8fGJ8c2luKM64KSBmb3IgzrguXG5cdCAgICAgKiBAcGFyYW0ge051bWJlcn0geCB0aGUgeC1jb29yZGluYXRlXG5cdCAgICAgKiBAcGFyYW0ge051bWJlcn0geSB0aGUgeS1jb29yZGluYXRlXG5cdCAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IHRoZSBhbmdsZSBpbiByYWRpYW5zXG5cdCAgICAgKi9cblx0ICAgIGFuZ2xlV2l0aFNlcDogZnVuY3Rpb24oeCwgeSkge1xuXHQgICAgICAgIHJldHVybiBNYXRoLmF0YW4yKFxuXHQgICAgICAgICAgICB0aGlzLnggKiB5IC0gdGhpcy55ICogeCxcblx0ICAgICAgICAgICAgdGhpcy54ICogeCArIHRoaXMueSAqIHkpO1xuXHQgICAgfSxcblx0XG5cdCAgICBfbWF0TXVsdDogZnVuY3Rpb24obSkge1xuXHQgICAgICAgIHZhciB4ID0gbVswXSAqIHRoaXMueCArIG1bMV0gKiB0aGlzLnksXG5cdCAgICAgICAgICAgIHkgPSBtWzJdICogdGhpcy54ICsgbVszXSAqIHRoaXMueTtcblx0ICAgICAgICB0aGlzLnggPSB4O1xuXHQgICAgICAgIHRoaXMueSA9IHk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIF9hZGQ6IGZ1bmN0aW9uKHApIHtcblx0ICAgICAgICB0aGlzLnggKz0gcC54O1xuXHQgICAgICAgIHRoaXMueSArPSBwLnk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIF9zdWI6IGZ1bmN0aW9uKHApIHtcblx0ICAgICAgICB0aGlzLnggLT0gcC54O1xuXHQgICAgICAgIHRoaXMueSAtPSBwLnk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIF9tdWx0OiBmdW5jdGlvbihrKSB7XG5cdCAgICAgICAgdGhpcy54ICo9IGs7XG5cdCAgICAgICAgdGhpcy55ICo9IGs7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9LFxuXHRcblx0ICAgIF9kaXY6IGZ1bmN0aW9uKGspIHtcblx0ICAgICAgICB0aGlzLnggLz0gaztcblx0ICAgICAgICB0aGlzLnkgLz0gaztcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgX211bHRCeVBvaW50OiBmdW5jdGlvbihwKSB7XG5cdCAgICAgICAgdGhpcy54ICo9IHAueDtcblx0ICAgICAgICB0aGlzLnkgKj0gcC55O1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICBfZGl2QnlQb2ludDogZnVuY3Rpb24ocCkge1xuXHQgICAgICAgIHRoaXMueCAvPSBwLng7XG5cdCAgICAgICAgdGhpcy55IC89IHAueTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgX3VuaXQ6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHRoaXMuX2Rpdih0aGlzLm1hZygpKTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgX3BlcnA6IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciB5ID0gdGhpcy55O1xuXHQgICAgICAgIHRoaXMueSA9IHRoaXMueDtcblx0ICAgICAgICB0aGlzLnggPSAteTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgX3JvdGF0ZTogZnVuY3Rpb24oYW5nbGUpIHtcblx0ICAgICAgICB2YXIgY29zID0gTWF0aC5jb3MoYW5nbGUpLFxuXHQgICAgICAgICAgICBzaW4gPSBNYXRoLnNpbihhbmdsZSksXG5cdCAgICAgICAgICAgIHggPSBjb3MgKiB0aGlzLnggLSBzaW4gKiB0aGlzLnksXG5cdCAgICAgICAgICAgIHkgPSBzaW4gKiB0aGlzLnggKyBjb3MgKiB0aGlzLnk7XG5cdCAgICAgICAgdGhpcy54ID0geDtcblx0ICAgICAgICB0aGlzLnkgPSB5O1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfSxcblx0XG5cdCAgICBfcm90YXRlQXJvdW5kOiBmdW5jdGlvbihhbmdsZSwgcCkge1xuXHQgICAgICAgIHZhciBjb3MgPSBNYXRoLmNvcyhhbmdsZSksXG5cdCAgICAgICAgICAgIHNpbiA9IE1hdGguc2luKGFuZ2xlKSxcblx0ICAgICAgICAgICAgeCA9IHAueCArIGNvcyAqICh0aGlzLnggLSBwLngpIC0gc2luICogKHRoaXMueSAtIHAueSksXG5cdCAgICAgICAgICAgIHkgPSBwLnkgKyBzaW4gKiAodGhpcy54IC0gcC54KSArIGNvcyAqICh0aGlzLnkgLSBwLnkpO1xuXHQgICAgICAgIHRoaXMueCA9IHg7XG5cdCAgICAgICAgdGhpcy55ID0geTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH0sXG5cdFxuXHQgICAgX3JvdW5kOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB0aGlzLnggPSBNYXRoLnJvdW5kKHRoaXMueCk7XG5cdCAgICAgICAgdGhpcy55ID0gTWF0aC5yb3VuZCh0aGlzLnkpO1xuXHQgICAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENvbnN0cnVjdCBhIHBvaW50IGZyb20gYW4gYXJyYXkgaWYgbmVjZXNzYXJ5LCBvdGhlcndpc2UgaWYgdGhlIGlucHV0XG5cdCAqIGlzIGFscmVhZHkgYSBQb2ludCwgb3IgYW4gdW5rbm93biB0eXBlLCByZXR1cm4gaXQgdW5jaGFuZ2VkXG5cdCAqIEBwYXJhbSB7QXJyYXk8TnVtYmVyPnxQb2ludHwqfSBhIGFueSBraW5kIG9mIGlucHV0IHZhbHVlXG5cdCAqIEByZXR1cm4ge1BvaW50fSBjb25zdHJ1Y3RlZCBwb2ludCwgb3IgcGFzc2VkLXRocm91Z2ggdmFsdWUuXG5cdCAqIEBleGFtcGxlXG5cdCAqIC8vIHRoaXNcblx0ICogdmFyIHBvaW50ID0gUG9pbnQuY29udmVydChbMCwgMV0pO1xuXHQgKiAvLyBpcyBlcXVpdmFsZW50IHRvXG5cdCAqIHZhciBwb2ludCA9IG5ldyBQb2ludCgwLCAxKTtcblx0ICovXG5cdFBvaW50LmNvbnZlcnQgPSBmdW5jdGlvbiAoYSkge1xuXHQgICAgaWYgKGEgaW5zdGFuY2VvZiBQb2ludCkge1xuXHQgICAgICAgIHJldHVybiBhO1xuXHQgICAgfVxuXHQgICAgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFBvaW50KGFbMF0sIGFbMV0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGE7XG5cdH07XG5cblxuLyoqKi8gfSksXG5cbi8qKiovIDM2ODpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSByZXF1ZXN0O1xuXHRcblx0dmFyIF9heGlvcyA9IF9fd2VicGFja19yZXF1aXJlX18oMzI4KTtcblx0XG5cdHZhciBfYXhpb3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXhpb3MpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGZ1bmN0aW9uIHJlcXVlc3QoX3JlZikge1xuXHQgIHZhciB1cmwgPSBfcmVmLnVybCxcblx0ICAgICAgX3JlZiRyZXNwb25zZVR5cGUgPSBfcmVmLnJlc3BvbnNlVHlwZSxcblx0ICAgICAgcmVzcG9uc2VUeXBlID0gX3JlZiRyZXNwb25zZVR5cGUgPT09IHVuZGVmaW5lZCA/ICdqc29uJyA6IF9yZWYkcmVzcG9uc2VUeXBlO1xuXHRcblx0ICB2YXIgZmV0Y2hEYXRhID0gZnVuY3Rpb24gZmV0Y2hEYXRhKCkge1xuXHQgICAgcmV0dXJuICgwLCBfYXhpb3MyLmRlZmF1bHQpKHtcblx0ICAgICAgdXJsOiB1cmwsXG5cdCAgICAgIHJlc3BvbnNlVHlwZTogcmVzcG9uc2VUeXBlXG5cdCAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmMikge1xuXHQgICAgICB2YXIgZGF0YSA9IF9yZWYyLmRhdGE7XG5cdFxuXHQgICAgICByZXR1cm4gZGF0YTtcblx0ICAgIH0pO1xuXHQgIH07XG5cdCAgcmV0dXJuIGZldGNoRGF0YSgpO1xuXHR9XG5cbi8qKiovIH0pLFxuXG4vKioqLyAzNzA6XG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHRlbXBsYXRlO1xuXHR2YXIgdGVtcGxhdGVSZSA9IC9cXHsgKihbXFx3Xy1dKykgKlxcfS9nO1xuXHRcblx0Ly8gQGZ1bmN0aW9uIHRlbXBsYXRlKHN0cjogU3RyaW5nLCBkYXRhOiBPYmplY3QpOiBTdHJpbmdcblx0Ly8gU2ltcGxlIHRlbXBsYXRpbmcgZmFjaWxpdHksIGFjY2VwdHMgYSB0ZW1wbGF0ZSBzdHJpbmcgb2YgdGhlIGZvcm0gYCdIZWxsbyB7YX0sIHtifSdgXG5cdC8vIGFuZCBhIGRhdGEgb2JqZWN0IGxpa2UgYHthOiAnZm9vJywgYjogJ2Jhcid9YCwgcmV0dXJucyBldmFsdWF0ZWQgc3RyaW5nXG5cdC8vIGAoJ0hlbGxvIGZvbywgYmFyJylgLiBZb3UgY2FuIGFsc28gc3BlY2lmeSBmdW5jdGlvbnMgaW5zdGVhZCBvZiBzdHJpbmdzIGZvclxuXHQvLyBkYXRhIHZhbHVlcyDigJQgdGhleSB3aWxsIGJlIGV2YWx1YXRlZCBwYXNzaW5nIGBkYXRhYCBhcyBhbiBhcmd1bWVudC5cblx0ZnVuY3Rpb24gdGVtcGxhdGUoc3RyLCBkYXRhKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKHRlbXBsYXRlUmUsIGZ1bmN0aW9uIChzdHIsIGtleSkge1xuXHQgICAgdmFyIHZhbHVlID0gZGF0YVtrZXldO1xuXHRcblx0ICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdmFsdWUgcHJvdmlkZWQgZm9yIHZhcmlhYmxlICcgKyBzdHIpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdmFsdWUgPSB2YWx1ZShkYXRhKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9KTtcblx0fVxuXG4vKioqLyB9KSxcblxuLyoqKi8gMzcxOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSBnZXRUaW1lTGFiZWw7XG5cdHZhciB0aW1lTGFiZWxQcmVmaXggPSAn4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4pao4paoICc7XG5cdFxuXHRmdW5jdGlvbiBnZXRUaW1lTGFiZWwobGFiZWwpIHtcblx0ICByZXR1cm4gdGltZUxhYmVsUHJlZml4ICsgJyAnICsgbGFiZWw7XG5cdH1cblxuLyoqKi8gfSksXG5cbi8qKiovIDM3Mjpcbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5zdHJpbmdpZnkgPSBleHBvcnRzLmV4cGFuZGVkTG9nID0gdW5kZWZpbmVkO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIF9pc29iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMzczKTtcblx0XG5cdHZhciBfaXNvYmplY3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaXNvYmplY3QpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBNQVhfREVQVEggPSAxMDA7XG5cdFxuXHRmdW5jdGlvbiBleHBhbmRlZExvZyhpdGVtLCBkZXB0aCkge1xuXHQgIGRlcHRoID0gZGVwdGggfHwgMzA7XG5cdFxuXHQgIGlmIChkZXB0aCA+IE1BWF9ERVBUSCkge1xuXHQgICAgY29uc29sZS5sb2coaXRlbSk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICBpZiAoKDAsIF9pc29iamVjdDIuZGVmYXVsdCkoaXRlbSkpIHtcblx0ICAgIGZvciAodmFyIHByb3AgaW4gaXRlbSkge1xuXHQgICAgICBjb25zb2xlLmxvZyhwcm9wLCBpdGVtW3Byb3BdKTtcblx0ICAgICAgY29uc29sZS5ncm91cChwcm9wICsgJyA6ICcgKyBfdHlwZW9mKGl0ZW1bcHJvcF0pKTtcblx0ICAgICAgZXhwYW5kZWRMb2coaXRlbVtwcm9wXSwgZGVwdGggKyAxKTtcblx0ICAgICAgY29uc29sZS5ncm91cEVuZCgpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBjb25zb2xlLmxvZyhpdGVtKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0cmluZ2lmeShvYmplY3QsIHNwYWNlKSB7XG5cdCAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iamVjdCwgbnVsbCwgc3BhY2UpO1xuXHR9XG5cdFxuXHRleHBvcnRzLmV4cGFuZGVkTG9nID0gZXhwYW5kZWRMb2c7XG5cdGV4cG9ydHMuc3RyaW5naWZ5ID0gc3RyaW5naWZ5O1xuXG4vKioqLyB9KSxcblxuLyoqKi8gMzczOlxuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0gaXNPYmplY3Q7XG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qb25zY2hsaW5rZXJ0L2lzb2JqZWN0L2Jsb2IvbWFzdGVyL2luZGV4LmpzXG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuXHQgIHJldHVybiB2YWwgIT0gbnVsbCAmJiAodHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YodmFsKSkgPT09ICdvYmplY3QnICYmIEFycmF5LmlzQXJyYXkodmFsKSA9PT0gZmFsc2U7XG5cdH07XG5cbi8qKiovIH0pXG5cbn0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBsb2FkLmpzIiwiaW1wb3J0ICdiYWJlbC1wb2x5ZmlsbCc7XG5pbXBvcnQgQXBwIGZyb20gJy4vQXBwJztcbmltcG9ydCBLZXlDb2RlIGZyb20gJy4uLy4uLy4uL3NyYy9jb25zdHMvS2V5Q29kZSc7XG5cblxuKGZ1bmN0aW9uICgpIHtcbiAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWFpbiA9IG5ldyBNYWluKCk7XG4gICAgfVxufSgpKTtcblxuY2xhc3MgTWFpbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICB0aGlzLmFkZEV2ZW50KCk7XG4gICAgICAgIHRoaXMub25yZXNpemUoKTtcbiAgICB9XG5cbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLmFwcCA9IG5ldyBBcHAoKTtcbiAgICB9XG5cbiAgICBhZGRFdmVudCgpIHtcbiAgICAgICAgd2luZG93Lm9ucmVzaXplID0gdGhpcy5vbnJlc2l6ZS5iaW5kKHRoaXMpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLm9ua2V5dXAuYmluZCh0aGlzKSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5vbmtleWRvd24uYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgb25yZXNpemUoKSB7XG4gICAgICAgIHRoaXMuYXBwLnJlc2l6ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIGZ1bmMge0Z1bmN0aW9ufVxuICAgICAqIEBwYXJhbSBwYXJhbXNcbiAgICAgKiBAcmV0dXJucyB7aW50ZXJ2YWxGdW5jfVxuICAgICAqL1xuICAgIGdldEludGVydmFsRnVuY3Rpb24odGhlQXJnLCBmdW5jLCAuLi5wYXJhbXMpIHtcbiAgICAgICAgZnVuY3Rpb24gaW50ZXJ2YWxGdW5jKCkge1xuICAgICAgICAgICAgZnVuYy5hcHBseSh0aGVBcmcsIHBhcmFtcyk7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5rZXlJbnRlcnZhbElkKTtcbiAgICAgICAgICAgIHRoaXMua2V5SW50ZXJ2YWxJZCA9IHNldFRpbWVvdXQoaW50ZXJ2YWxGdW5jLmJpbmQodGhpcyksIDIwMCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW50ZXJ2YWxGdW5jLmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgY2xlYXJJbnRlckZ1bmN0aW9uKCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5rZXlJbnRlcnZhbElkKTtcbiAgICB9XG5cbiAgICBvbmtleWRvd24oZXZlbnQpIHtcbiAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuVVA6XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5tb3ZlQ2FtZXJhLCAneScsIC0xKSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLkRPV046XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5tb3ZlQ2FtZXJhLCAneScsIDEpKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTEVGVDpcbiAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLm1vdmVDYW1lcmEsICd4JywgLTEpKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuUklHSFQ6XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5tb3ZlQ2FtZXJhLCAneCcsIDEpKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuUEFHRV9VUDpcbiAgICAgICAgICAgICAgICB0aGlzLmdldEludGVydmFsRnVuY3Rpb24odGhpcy5hcHAsIHRoaXMuYXBwLm1vdmVDYW1lcmEsICd6JywgMSkoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5QQUdFX0RPV046XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5tb3ZlQ2FtZXJhLCAneicsIC0xKSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl80OlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd5JywgLTAuMDEpKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNQkVSXzY6XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5yb3RhdGVXb3JsZCwgJ3knLCAwLjAxKSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl84OlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd4JywgLTAuMDEpKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNQkVSXzI6XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5yb3RhdGVXb3JsZCwgJ3gnLCAwLjAxKSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl83OlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd6JywgLTAuMDEpKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNQkVSXzE6XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5yb3RhdGVXb3JsZCwgJ3onLCAwLjAxKSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl85OlxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0SW50ZXJ2YWxGdW5jdGlvbih0aGlzLmFwcCwgdGhpcy5hcHAucm90YXRlV29ybGQsICd6JywgLTAuMDEpKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNQkVSXzM6XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRJbnRlcnZhbEZ1bmN0aW9uKHRoaXMuYXBwLCB0aGlzLmFwcC5yb3RhdGVXb3JsZCwgJ3onLCAwLjAxKSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTVBBRF9BREQ6XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAuem9vbUluKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNUEFEX1NVQlRSQUNUOlxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnpvb21PdXQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5OVU1QQURfRU5URVI6XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAuem9vbU91dCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLk5VTUJFUl8wOlxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuVzpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5TOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLkE6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuRDpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9ua2V5dXAoZXZlbnQpIHtcbiAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuRVNDQVBFOlxuICAgICAgICAgICAgICAgIGNvbnNvbGUuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLlNQQUNFOlxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFwcC5ndWkuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLmd1aS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC5ndWkuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5VUDpcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5ET1dOOlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLkxFRlQ6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuUklHSFQ6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuUEFHRV9VUDpcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5QQUdFX0RPV046XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNQkVSXzQ6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNQkVSXzY6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNQkVSXzg6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNQkVSXzI6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNQkVSXzc6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNQkVSXzE6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNQkVSXzk6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNQkVSXzM6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuTlVNUEFEX0FERDpcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5OVU1QQURfU1VCVFJBQ1Q6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuVzpcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZS5TOlxuICAgICAgICAgICAgY2FzZSBLZXlDb2RlLkE6XG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuRDpcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFySW50ZXJGdW5jdGlvbigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBjYXNlIEtleUNvZGUuQkFDS1NQQUNFOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL21hcC9wYmYvbG9hZC9pbmRleC5qcyIsImltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7XG5pbXBvcnQgZ2VvYnVmIGZyb20gJ2dlb2J1Zic7XG5pbXBvcnQgUGJmIGZyb20gJ3BiZic7XG5pbXBvcnQgUHJvdG9CdWYgZnJvbSAncGJmJztcbmltcG9ydCByZXF1ZXN0IGZyb20gJy4uLy4uLy4uL3NyYy9uZXQvcmVxdWVzdCc7XG5pbXBvcnQgdGVtcGxhdGUgZnJvbSAnLi4vLi4vLi4vc3JjL3N0cmluZy90ZW1wbGF0ZSc7XG5pbXBvcnQgZ2V0VGltZUxhYmVsIGZyb20gJy4uLy4uLy4uL3NyYy9jb25zb2xlL2dldFRpbWVMYWJlbCc7XG5pbXBvcnQgeyBleHBhbmRlZExvZywgc3RyaW5naWZ5IH0gZnJvbSAnLi4vLi4vLi4vc3JjL2NvbnNvbGUvZXhwYW5kZWRMb2cnO1xuaW1wb3J0IHsgVmVjdG9yVGlsZSB9IGZyb20gJ0BtYXBib3gvdmVjdG9yLXRpbGUnO1xuXG4vKipcbiAqIOyVhOuemCDso7zshozsnZggcGJm66W8IOy9lOunjOuPhOydmCDsiqTtg4DsnbzsnYQg7KeB7KCRIOuCtOugpOuwm+yVhOyEnCDtjIzsi7HtlZwg6rKD6rO8IOyYpOyhtOydmCDqsoPsnYQg67Cb7JWE7IScIO2ZleyduCDtlanri4jri6QuXG4gKiBodHRwczovL21hcC5uYXZlci5jb20vdjUvP2M9MTQxNDk2NzIuNzM3ODgxNyw0NDkxMTk5LjcyMTk5NTAsMTUsMCwwLDAsZGhcbiAqIOq3uOumrOqzoCDrsJvqs6Ag7YyM7Iux7ZWY64qUIOu5hOyaqSDqsJzsgrDsnYQg7ZWp64uI64ukLlxuICovXG5jb25zdCB4eXogPSB7eDogMjc5NTMsIHk6IDEyNzExLCB6OiAxNX07XG5jb25zdCB1cmxzID0ge1xuICBidXM6ICdodHRwczovL21hcC5wc3RhdGljLm5ldC9udmIvd210cy9idXMvZDJlMzY0YzktYjc1ZS00ZmQ3LTgwMjAtYzRiMjZmODJiOWNlL2dldFRpbGUve3h9L3t5fS97en0vcGJmJyxcbiAgcG9pX3dlYjogJ2h0dHBzOi8vbWFwLnBzdGF0aWMubmV0L252Yi93bXRzL3BvaV93ZWIvOGZlNjg4M2UtNTUyNS00NWY4LThmNTUtNWUzMGJjNDk4MWYxL2dldFRpbGUve3h9L3t5fS97en0vcGJmJyxcbiAgcG9pNG9zbTogJ2h0dHBzOi8vbWFwLnBzdGF0aWMubmV0L252YnBjL3dtdHMvb3NtX25hdmVyX3BvaS81NjUzZTc1Ny05YmYxLTRhMmUtYjIwZi04NmJiNGMwYjk5MTIvZ2V0VGlsZS97eH0ve3l9L3t6fS9wYmYnLFxuICBjY3R2OiAnaHR0cHM6Ly9tYXAucHN0YXRpYy5uZXQvbnZicGMvd210cy9jY3R2L2FiNTBiMjZjLTg0MmQtNGJlNS04YjBjLTQ2MDE5ZjVlNzlhMS9nZXRUaWxlL3t4fS97eX0ve3p9L3BiZicsXG4gIG96b25lOiAnaHR0cHM6Ly9tYXAucHN0YXRpYy5uZXQvb3pvbmUvcGJmL2dlb2pzb24vUE9JPycgK1xuICAgICd4PScgKyB4eXoueCArICcmJyArXG4gICAgJ3k9JyArIHh5ei55ICsgJyAmJyArXG4gICAgJ3o9JyArIHh5ei56ICsgJyYnICtcbiAgICAnbmFtZT1vc21fbmF2ZXJfcG9pJicgK1xuICAgICd2ZXJzaW9uQ29kZT01NjUzZTc1Ny05YmYxLTRhMmUtYjIwZi04NmJiNGMwYjk5MTImJyArXG4gICAgJ3BpeGVsUmF0aW89MiYnICtcbiAgICAnaW1hZ2VUeXBlPXNwcml0ZSYnICtcbiAgICAnbGFuZ3VhZ2U9a28mJyArXG4gICAgJ21hcFR5cGU9Tk9STUFMJicgK1xuICAgICdxdWFsaXR5PW5vcm1hbCdcbn07XG5cbmZvciAoY29uc3QgcHJvcCBpbiB1cmxzKSB7XG4gIHVybHNbcHJvcF0gPSB0ZW1wbGF0ZSh1cmxzW3Byb3BdLCB4eXopO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcHAge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyB0aGlzLnRlc3RQYmYodXJscy5idXMsICdidXMnKTtcbiAgICAvLyB0aGlzLnRlc3RQYmYodXJscy5jY3R2LCAnY2N0dicpO1xuICAgIHRoaXMudGVzdFBiZih1cmxzLnBvaV93ZWIsICdwb2lfd2ViJyk7XG4gICAgdGhpcy50ZXN0UGJmKHVybHMucG9pNG9zbSwgJ3BvaTRvc20nKTtcbiAgICB0aGlzLnRlc3RPem9uZSh1cmxzLm96b25lLCAnb3pvbmUnKTtcbiAgfVxuXG4gIHBhcnNlKCkge1xuICAgIC8vIGNvbnN0IHBiZiA9IG5ldyBQYmYobmV3IFVpbnQ4QXJyYXkocmVzcG9uc2UpKTtcbiAgICAvLyBjb25zdCB0aWxlID0gbmV3IFZlY3RvclRpbGUocGJmKTtcbiAgICAvLyBjb25zdCB0aWxlID0gbmV3IFZlY3RvclRpbGUobmV3IFByb3RvQnVmKGJ1ZmZlcikpO1xuICB9XG5cbiAgdGVzdFBiZih1cmwsIHRpbWVMYWJlbCkge1xuICAgIGNvbnNvbGUudGltZShnZXRUaW1lTGFiZWwoYCR7dGltZUxhYmVsfSDroZzrk5xgKSk7XG4gICAgcmVxdWVzdCh7XG4gICAgICB1cmwsXG4gICAgICByZXNwb25zZVR5cGU6ICdhcnJheWJ1ZmZlcicsXG4gICAgfSkudGhlbihidWZmZXIgPT4ge1xuICAgICAgY29uc29sZS50aW1lRW5kKGdldFRpbWVMYWJlbChgJHt0aW1lTGFiZWx9IOuhnOuTnGApKTtcbiAgICAgIGNvbnNvbGUudGltZShnZXRUaW1lTGFiZWwoYCR7dGltZUxhYmVsfSBwYmYg7YyM7IuxYCkpO1xuICAgICAgY29uc3QgdGlsZSA9IG5ldyBWZWN0b3JUaWxlKG5ldyBQcm90b0J1ZihidWZmZXIpKTtcbiAgICAgIGNvbnNvbGUudGltZUVuZChnZXRUaW1lTGFiZWwoYCR7dGltZUxhYmVsfSBwYmYg7YyM7IuxYCkpO1xuICAgICAgLy8gY29uc29sZS5sb2coc3RyaW5naWZ5KHRpbGUsIDIpKTtcbiAgICAgIGNvbnNvbGUubG9nKHRpbGUpO1xuICAgICAgY29uc29sZS50aW1lKGdldFRpbWVMYWJlbChgJHt0aW1lTGFiZWx9IO2UvOyzkCDsg53shLFgKSk7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5nZXRGZWF0dXJlcyh0aWxlKTtcbiAgICAgIGNvbnNvbGUudGltZUVuZChnZXRUaW1lTGFiZWwoYCR7dGltZUxhYmVsfSDtlLzss5Ag7IOd7ISxYCkpO1xuICAgICAgY29uc29sZS5sb2coJ2ZlYXR1cmVzJywgY29sbGVjdGlvbi5mZWF0dXJlcyk7XG4gICAgfSk7XG4gIH1cblxuICB0ZXN0T3pvbmUodXJsLCB0aW1lTGFiZWwpIHtcbiAgICBjb25zb2xlLnRpbWUoZ2V0VGltZUxhYmVsKGAke3RpbWVMYWJlbH0g66Gc65OcYCkpO1xuICAgIHJlcXVlc3Qoe1xuICAgICAgdXJsLFxuICAgICAgcmVzcG9uc2VUeXBlOiAnYXJyYXlidWZmZXInLFxuICAgIH0pLnRoZW4oYnVmZmVyID0+IHtcbiAgICAgIGNvbnNvbGUudGltZUVuZChnZXRUaW1lTGFiZWwoYCR7dGltZUxhYmVsfSDroZzrk5xgKSk7XG4gICAgICBjb25zb2xlLnRpbWUoZ2V0VGltZUxhYmVsKGAke3RpbWVMYWJlbH0gcGJmIO2MjOyLsSDrsI8g7ZS87LOQIOyDneyEsWApKTtcblxuICAgICAgbGV0IGNvbGxlY3Rpb24gPSB7XG4gICAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICAgIGZlYXR1cmVzOiBbXVxuICAgICAgfTtcblxuICAgICAgY29sbGVjdGlvbiA9IGdlb2J1Zi5kZWNvZGUobmV3IFByb3RvQnVmKGJ1ZmZlcikpO1xuICAgICAgY29uc29sZS50aW1lRW5kKGdldFRpbWVMYWJlbChgJHt0aW1lTGFiZWx9IHBiZiDtjIzsi7Eg67CPIO2UvOyzkCDsg53shLFgKSk7XG4gICAgICBjb25zb2xlLmxvZygnZmVhdHVyZXMnLCBjb2xsZWN0aW9uLmZlYXR1cmVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEZlYXR1cmVzKHRpbGUpIHtcbiAgICBsZXQgY29sbGVjdGlvbiA9IHtcbiAgICAgIHR5cGU6ICdGZWF0dXJlQ29sbGVjdGlvbicsXG4gICAgICBmZWF0dXJlczogW11cbiAgICB9O1xuXG4gICAgbGV0IGxheWVycyA9IE9iamVjdC5rZXlzKHRpbGUubGF5ZXJzKTtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheShsYXllcnMpKSB7XG4gICAgICBsYXllcnMgPSBbbGF5ZXJzXTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgbGF5ZXJzICgke2xheWVycy5sZW5ndGh9KWApO1xuICAgIGxheWVycy5mb3JFYWNoKChsYXllcklEKSA9PiB7XG4gICAgICBjb25zdCBsYXllciA9IHRpbGUubGF5ZXJzW2xheWVySURdO1xuXG4gICAgICBjb25zdCBsZW4gPSBsYXllci5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG5cbiAgICAgICAgY29uc3QgZmVhdHVyZSA9IHtcbiAgICAgICAgICAuLi5sYXllci5mZWF0dXJlKGkpLnRvR2VvSlNPTih4eXoueCwgeHl6LnksIHh5ei56KVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChsZW4gPiAwKSB7XG4gICAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzLmxheWVyID0gbGF5ZXJJRDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdmZWF0dXJlJywgZmVhdHVyZSk7XG4gICAgICAgIGNvbGxlY3Rpb24uZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBjb2xsZWN0aW9uO1xuICB9XG5cbiAgcmVzaXplKCkge1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9tYXAvcGJmL2xvYWQvQXBwLmpzIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9heGlvcycpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMzI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIGJpbmQgPSByZXF1aXJlKCcuL2hlbHBlcnMvYmluZCcpO1xudmFyIEF4aW9zID0gcmVxdWlyZSgnLi9jb3JlL0F4aW9zJyk7XG52YXIgbWVyZ2VDb25maWcgPSByZXF1aXJlKCcuL2NvcmUvbWVyZ2VDb25maWcnKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4vZGVmYXVsdHMnKTtcblxuLyoqXG4gKiBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgQXhpb3NcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVmYXVsdENvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuICogQHJldHVybiB7QXhpb3N9IEEgbmV3IGluc3RhbmNlIG9mIEF4aW9zXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKGRlZmF1bHRDb25maWcpIHtcbiAgdmFyIGNvbnRleHQgPSBuZXcgQXhpb3MoZGVmYXVsdENvbmZpZyk7XG4gIHZhciBpbnN0YW5jZSA9IGJpbmQoQXhpb3MucHJvdG90eXBlLnJlcXVlc3QsIGNvbnRleHQpO1xuXG4gIC8vIENvcHkgYXhpb3MucHJvdG90eXBlIHRvIGluc3RhbmNlXG4gIHV0aWxzLmV4dGVuZChpbnN0YW5jZSwgQXhpb3MucHJvdG90eXBlLCBjb250ZXh0KTtcblxuICAvLyBDb3B5IGNvbnRleHQgdG8gaW5zdGFuY2VcbiAgdXRpbHMuZXh0ZW5kKGluc3RhbmNlLCBjb250ZXh0KTtcblxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5cbi8vIENyZWF0ZSB0aGUgZGVmYXVsdCBpbnN0YW5jZSB0byBiZSBleHBvcnRlZFxudmFyIGF4aW9zID0gY3JlYXRlSW5zdGFuY2UoZGVmYXVsdHMpO1xuXG4vLyBFeHBvc2UgQXhpb3MgY2xhc3MgdG8gYWxsb3cgY2xhc3MgaW5oZXJpdGFuY2VcbmF4aW9zLkF4aW9zID0gQXhpb3M7XG5cbi8vIEZhY3RvcnkgZm9yIGNyZWF0aW5nIG5ldyBpbnN0YW5jZXNcbmF4aW9zLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShpbnN0YW5jZUNvbmZpZykge1xuICByZXR1cm4gY3JlYXRlSW5zdGFuY2UobWVyZ2VDb25maWcoYXhpb3MuZGVmYXVsdHMsIGluc3RhbmNlQ29uZmlnKSk7XG59O1xuXG4vLyBFeHBvc2UgQ2FuY2VsICYgQ2FuY2VsVG9rZW5cbmF4aW9zLkNhbmNlbCA9IHJlcXVpcmUoJy4vY2FuY2VsL0NhbmNlbCcpO1xuYXhpb3MuQ2FuY2VsVG9rZW4gPSByZXF1aXJlKCcuL2NhbmNlbC9DYW5jZWxUb2tlbicpO1xuYXhpb3MuaXNDYW5jZWwgPSByZXF1aXJlKCcuL2NhbmNlbC9pc0NhbmNlbCcpO1xuXG4vLyBFeHBvc2UgYWxsL3NwcmVhZFxuYXhpb3MuYWxsID0gZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7XG4gIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG59O1xuYXhpb3Muc3ByZWFkID0gcmVxdWlyZSgnLi9oZWxwZXJzL3NwcmVhZCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGF4aW9zO1xuXG4vLyBBbGxvdyB1c2Ugb2YgZGVmYXVsdCBpbXBvcnQgc3ludGF4IGluIFR5cGVTY3JpcHRcbm1vZHVsZS5leHBvcnRzLmRlZmF1bHQgPSBheGlvcztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvYXhpb3MuanNcbi8vIG1vZHVsZSBpZCA9IDMyOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBiaW5kID0gcmVxdWlyZSgnLi9oZWxwZXJzL2JpbmQnKTtcbnZhciBpc0J1ZmZlciA9IHJlcXVpcmUoJ2lzLWJ1ZmZlcicpO1xuXG4vKmdsb2JhbCB0b1N0cmluZzp0cnVlKi9cblxuLy8gdXRpbHMgaXMgYSBsaWJyYXJ5IG9mIGdlbmVyaWMgaGVscGVyIGZ1bmN0aW9ucyBub24tc3BlY2lmaWMgdG8gYXhpb3NcblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheVxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5LCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheSh2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBBcnJheUJ1ZmZlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlcih2YWwpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZvcm1EYXRhXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYW4gRm9ybURhdGEsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Zvcm1EYXRhKHZhbCkge1xuICByZXR1cm4gKHR5cGVvZiBGb3JtRGF0YSAhPT0gJ3VuZGVmaW5lZCcpICYmICh2YWwgaW5zdGFuY2VvZiBGb3JtRGF0YSk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSB2aWV3IG9uIGFuIEFycmF5QnVmZmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUJ1ZmZlclZpZXcodmFsKSB7XG4gIHZhciByZXN1bHQ7XG4gIGlmICgodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJykgJiYgKEFycmF5QnVmZmVyLmlzVmlldykpIHtcbiAgICByZXN1bHQgPSBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsKTtcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQgPSAodmFsKSAmJiAodmFsLmJ1ZmZlcikgJiYgKHZhbC5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcik7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFN0cmluZ1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgU3RyaW5nLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJpbmcodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnc3RyaW5nJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIE51bWJlclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB2YWwgVGhlIHZhbHVlIHRvIHRlc3RcbiAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHZhbHVlIGlzIGEgTnVtYmVyLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNOdW1iZXIodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAnbnVtYmVyJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB1bmRlZmluZWRcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCBvdGhlcndpc2UgZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNVbmRlZmluZWQodmFsKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhbiBPYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhbiBPYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIERhdGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIERhdGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0RhdGUodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IERhdGVdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZpbGVcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEZpbGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0ZpbGUodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZpbGVdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEJsb2JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIEJsb2IsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0Jsb2IodmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEJsb2JdJztcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIEZ1bmN0aW9uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdmFsdWUgaXMgYSBGdW5jdGlvbiwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsKSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIGlmIGEgdmFsdWUgaXMgYSBTdHJlYW1cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFN0cmVhbSwgb3RoZXJ3aXNlIGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3RyZWFtKHZhbCkge1xuICByZXR1cm4gaXNPYmplY3QodmFsKSAmJiBpc0Z1bmN0aW9uKHZhbC5waXBlKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3RcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdmFsIFRoZSB2YWx1ZSB0byB0ZXN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB2YWx1ZSBpcyBhIFVSTFNlYXJjaFBhcmFtcyBvYmplY3QsIG90aGVyd2lzZSBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1VSTFNlYXJjaFBhcmFtcyh2YWwpIHtcbiAgcmV0dXJuIHR5cGVvZiBVUkxTZWFyY2hQYXJhbXMgIT09ICd1bmRlZmluZWQnICYmIHZhbCBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcztcbn1cblxuLyoqXG4gKiBUcmltIGV4Y2VzcyB3aGl0ZXNwYWNlIG9mZiB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyIFRoZSBTdHJpbmcgdG8gdHJpbVxuICogQHJldHVybnMge1N0cmluZ30gVGhlIFN0cmluZyBmcmVlZCBvZiBleGNlc3Mgd2hpdGVzcGFjZVxuICovXG5mdW5jdGlvbiB0cmltKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMqLywgJycpLnJlcGxhY2UoL1xccyokLywgJycpO1xufVxuXG4vKipcbiAqIERldGVybWluZSBpZiB3ZSdyZSBydW5uaW5nIGluIGEgc3RhbmRhcmQgYnJvd3NlciBlbnZpcm9ubWVudFxuICpcbiAqIFRoaXMgYWxsb3dzIGF4aW9zIHRvIHJ1biBpbiBhIHdlYiB3b3JrZXIsIGFuZCByZWFjdC1uYXRpdmUuXG4gKiBCb3RoIGVudmlyb25tZW50cyBzdXBwb3J0IFhNTEh0dHBSZXF1ZXN0LCBidXQgbm90IGZ1bGx5IHN0YW5kYXJkIGdsb2JhbHMuXG4gKlxuICogd2ViIHdvcmtlcnM6XG4gKiAgdHlwZW9mIHdpbmRvdyAtPiB1bmRlZmluZWRcbiAqICB0eXBlb2YgZG9jdW1lbnQgLT4gdW5kZWZpbmVkXG4gKlxuICogcmVhY3QtbmF0aXZlOlxuICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdSZWFjdE5hdGl2ZSdcbiAqIG5hdGl2ZXNjcmlwdFxuICogIG5hdmlnYXRvci5wcm9kdWN0IC0+ICdOYXRpdmVTY3JpcHQnIG9yICdOUydcbiAqL1xuZnVuY3Rpb24gaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiAobmF2aWdhdG9yLnByb2R1Y3QgPT09ICdSZWFjdE5hdGl2ZScgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ05hdGl2ZVNjcmlwdCcgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ05TJykpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCdcbiAgKTtcbn1cblxuLyoqXG4gKiBJdGVyYXRlIG92ZXIgYW4gQXJyYXkgb3IgYW4gT2JqZWN0IGludm9raW5nIGEgZnVuY3Rpb24gZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiBgb2JqYCBpcyBhbiBBcnJheSBjYWxsYmFjayB3aWxsIGJlIGNhbGxlZCBwYXNzaW5nXG4gKiB0aGUgdmFsdWUsIGluZGV4LCBhbmQgY29tcGxldGUgYXJyYXkgZm9yIGVhY2ggaXRlbS5cbiAqXG4gKiBJZiAnb2JqJyBpcyBhbiBPYmplY3QgY2FsbGJhY2sgd2lsbCBiZSBjYWxsZWQgcGFzc2luZ1xuICogdGhlIHZhbHVlLCBrZXksIGFuZCBjb21wbGV0ZSBvYmplY3QgZm9yIGVhY2ggcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IG9iaiBUaGUgb2JqZWN0IHRvIGl0ZXJhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBjYWxsYmFjayB0byBpbnZva2UgZm9yIGVhY2ggaXRlbVxuICovXG5mdW5jdGlvbiBmb3JFYWNoKG9iaiwgZm4pIHtcbiAgLy8gRG9uJ3QgYm90aGVyIGlmIG5vIHZhbHVlIHByb3ZpZGVkXG4gIGlmIChvYmogPT09IG51bGwgfHwgdHlwZW9mIG9iaiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBGb3JjZSBhbiBhcnJheSBpZiBub3QgYWxyZWFkeSBzb21ldGhpbmcgaXRlcmFibGVcbiAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnKSB7XG4gICAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gICAgb2JqID0gW29ial07XG4gIH1cblxuICBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGFycmF5IHZhbHVlc1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gb2JqLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZm4uY2FsbChudWxsLCBvYmpbaV0sIGksIG9iaik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIEl0ZXJhdGUgb3ZlciBvYmplY3Qga2V5c1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XG4gICAgICAgIGZuLmNhbGwobnVsbCwgb2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBY2NlcHRzIHZhcmFyZ3MgZXhwZWN0aW5nIGVhY2ggYXJndW1lbnQgdG8gYmUgYW4gb2JqZWN0LCB0aGVuXG4gKiBpbW11dGFibHkgbWVyZ2VzIHRoZSBwcm9wZXJ0aWVzIG9mIGVhY2ggb2JqZWN0IGFuZCByZXR1cm5zIHJlc3VsdC5cbiAqXG4gKiBXaGVuIG11bHRpcGxlIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBrZXkgdGhlIGxhdGVyIG9iamVjdCBpblxuICogdGhlIGFyZ3VtZW50cyBsaXN0IHdpbGwgdGFrZSBwcmVjZWRlbmNlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBganNcbiAqIHZhciByZXN1bHQgPSBtZXJnZSh7Zm9vOiAxMjN9LCB7Zm9vOiA0NTZ9KTtcbiAqIGNvbnNvbGUubG9nKHJlc3VsdC5mb28pOyAvLyBvdXRwdXRzIDQ1NlxuICogYGBgXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG1lcmdlXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXN1bHQgb2YgYWxsIG1lcmdlIHByb3BlcnRpZXNcbiAqL1xuZnVuY3Rpb24gbWVyZ2UoLyogb2JqMSwgb2JqMiwgb2JqMywgLi4uICovKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAodHlwZW9mIHJlc3VsdFtrZXldID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVzdWx0W2tleV0gPSBtZXJnZShyZXN1bHRba2V5XSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0W2tleV0gPSB2YWw7XG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZm9yRWFjaChhcmd1bWVudHNbaV0sIGFzc2lnblZhbHVlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEZ1bmN0aW9uIGVxdWFsIHRvIG1lcmdlIHdpdGggdGhlIGRpZmZlcmVuY2UgYmVpbmcgdGhhdCBubyByZWZlcmVuY2VcbiAqIHRvIG9yaWdpbmFsIG9iamVjdHMgaXMga2VwdC5cbiAqXG4gKiBAc2VlIG1lcmdlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqMSBPYmplY3QgdG8gbWVyZ2VcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJlc3VsdCBvZiBhbGwgbWVyZ2UgcHJvcGVydGllc1xuICovXG5mdW5jdGlvbiBkZWVwTWVyZ2UoLyogb2JqMSwgb2JqMiwgb2JqMywgLi4uICovKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcbiAgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAodHlwZW9mIHJlc3VsdFtrZXldID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVzdWx0W2tleV0gPSBkZWVwTWVyZ2UocmVzdWx0W2tleV0sIHZhbCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVzdWx0W2tleV0gPSBkZWVwTWVyZ2Uoe30sIHZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFtrZXldID0gdmFsO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGZvckVhY2goYXJndW1lbnRzW2ldLCBhc3NpZ25WYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBFeHRlbmRzIG9iamVjdCBhIGJ5IG11dGFibHkgYWRkaW5nIHRvIGl0IHRoZSBwcm9wZXJ0aWVzIG9mIG9iamVjdCBiLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhIFRoZSBvYmplY3QgdG8gYmUgZXh0ZW5kZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBiIFRoZSBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzQXJnIFRoZSBvYmplY3QgdG8gYmluZCBmdW5jdGlvbiB0b1xuICogQHJldHVybiB7T2JqZWN0fSBUaGUgcmVzdWx0aW5nIHZhbHVlIG9mIG9iamVjdCBhXG4gKi9cbmZ1bmN0aW9uIGV4dGVuZChhLCBiLCB0aGlzQXJnKSB7XG4gIGZvckVhY2goYiwgZnVuY3Rpb24gYXNzaWduVmFsdWUodmFsLCBrZXkpIHtcbiAgICBpZiAodGhpc0FyZyAmJiB0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBhW2tleV0gPSBiaW5kKHZhbCwgdGhpc0FyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFba2V5XSA9IHZhbDtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gYTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGlzQXJyYXk6IGlzQXJyYXksXG4gIGlzQXJyYXlCdWZmZXI6IGlzQXJyYXlCdWZmZXIsXG4gIGlzQnVmZmVyOiBpc0J1ZmZlcixcbiAgaXNGb3JtRGF0YTogaXNGb3JtRGF0YSxcbiAgaXNBcnJheUJ1ZmZlclZpZXc6IGlzQXJyYXlCdWZmZXJWaWV3LFxuICBpc1N0cmluZzogaXNTdHJpbmcsXG4gIGlzTnVtYmVyOiBpc051bWJlcixcbiAgaXNPYmplY3Q6IGlzT2JqZWN0LFxuICBpc1VuZGVmaW5lZDogaXNVbmRlZmluZWQsXG4gIGlzRGF0ZTogaXNEYXRlLFxuICBpc0ZpbGU6IGlzRmlsZSxcbiAgaXNCbG9iOiBpc0Jsb2IsXG4gIGlzRnVuY3Rpb246IGlzRnVuY3Rpb24sXG4gIGlzU3RyZWFtOiBpc1N0cmVhbSxcbiAgaXNVUkxTZWFyY2hQYXJhbXM6IGlzVVJMU2VhcmNoUGFyYW1zLFxuICBpc1N0YW5kYXJkQnJvd3NlckVudjogaXNTdGFuZGFyZEJyb3dzZXJFbnYsXG4gIGZvckVhY2g6IGZvckVhY2gsXG4gIG1lcmdlOiBtZXJnZSxcbiAgZGVlcE1lcmdlOiBkZWVwTWVyZ2UsXG4gIGV4dGVuZDogZXh0ZW5kLFxuICB0cmltOiB0cmltXG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi91dGlscy5qc1xuLy8gbW9kdWxlIGlkID0gMzMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBiaW5kKGZuLCB0aGlzQXJnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwKCkge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xuICB9O1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvaGVscGVycy9iaW5kLmpzXG4vLyBtb2R1bGUgaWQgPSAzMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyohXG4gKiBEZXRlcm1pbmUgaWYgYW4gb2JqZWN0IGlzIGEgQnVmZmVyXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGh0dHBzOi8vZmVyb3NzLm9yZz5cbiAqIEBsaWNlbnNlICBNSVRcbiAqL1xuXG4vLyBUaGUgX2lzQnVmZmVyIGNoZWNrIGlzIGZvciBTYWZhcmkgNS03IHN1cHBvcnQsIGJlY2F1c2UgaXQncyBtaXNzaW5nXG4vLyBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yLiBSZW1vdmUgdGhpcyBldmVudHVhbGx5XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIG9iaiAhPSBudWxsICYmIChpc0J1ZmZlcihvYmopIHx8IGlzU2xvd0J1ZmZlcihvYmopIHx8ICEhb2JqLl9pc0J1ZmZlcilcbn1cblxuZnVuY3Rpb24gaXNCdWZmZXIgKG9iaikge1xuICByZXR1cm4gISFvYmouY29uc3RydWN0b3IgJiYgdHlwZW9mIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIob2JqKVxufVxuXG4vLyBGb3IgTm9kZSB2MC4xMCBzdXBwb3J0LiBSZW1vdmUgdGhpcyBldmVudHVhbGx5LlxuZnVuY3Rpb24gaXNTbG93QnVmZmVyIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmoucmVhZEZsb2F0TEUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9iai5zbGljZSA9PT0gJ2Z1bmN0aW9uJyAmJiBpc0J1ZmZlcihvYmouc2xpY2UoMCwgMCkpXG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaXMtYnVmZmVyL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG52YXIgYnVpbGRVUkwgPSByZXF1aXJlKCcuLi9oZWxwZXJzL2J1aWxkVVJMJyk7XG52YXIgSW50ZXJjZXB0b3JNYW5hZ2VyID0gcmVxdWlyZSgnLi9JbnRlcmNlcHRvck1hbmFnZXInKTtcbnZhciBkaXNwYXRjaFJlcXVlc3QgPSByZXF1aXJlKCcuL2Rpc3BhdGNoUmVxdWVzdCcpO1xudmFyIG1lcmdlQ29uZmlnID0gcmVxdWlyZSgnLi9tZXJnZUNvbmZpZycpO1xuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBBeGlvc1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0YW5jZUNvbmZpZyBUaGUgZGVmYXVsdCBjb25maWcgZm9yIHRoZSBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBBeGlvcyhpbnN0YW5jZUNvbmZpZykge1xuICB0aGlzLmRlZmF1bHRzID0gaW5zdGFuY2VDb25maWc7XG4gIHRoaXMuaW50ZXJjZXB0b3JzID0ge1xuICAgIHJlcXVlc3Q6IG5ldyBJbnRlcmNlcHRvck1hbmFnZXIoKSxcbiAgICByZXNwb25zZTogbmV3IEludGVyY2VwdG9yTWFuYWdlcigpXG4gIH07XG59XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXF1ZXN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHNwZWNpZmljIGZvciB0aGlzIHJlcXVlc3QgKG1lcmdlZCB3aXRoIHRoaXMuZGVmYXVsdHMpXG4gKi9cbkF4aW9zLnByb3RvdHlwZS5yZXF1ZXN0ID0gZnVuY3Rpb24gcmVxdWVzdChjb25maWcpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIC8vIEFsbG93IGZvciBheGlvcygnZXhhbXBsZS91cmwnWywgY29uZmlnXSkgYSBsYSBmZXRjaCBBUElcbiAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgY29uZmlnID0gYXJndW1lbnRzWzFdIHx8IHt9O1xuICAgIGNvbmZpZy51cmwgPSBhcmd1bWVudHNbMF07XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnID0gY29uZmlnIHx8IHt9O1xuICB9XG5cbiAgY29uZmlnID0gbWVyZ2VDb25maWcodGhpcy5kZWZhdWx0cywgY29uZmlnKTtcbiAgY29uZmlnLm1ldGhvZCA9IGNvbmZpZy5tZXRob2QgPyBjb25maWcubWV0aG9kLnRvTG93ZXJDYXNlKCkgOiAnZ2V0JztcblxuICAvLyBIb29rIHVwIGludGVyY2VwdG9ycyBtaWRkbGV3YXJlXG4gIHZhciBjaGFpbiA9IFtkaXNwYXRjaFJlcXVlc3QsIHVuZGVmaW5lZF07XG4gIHZhciBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKGNvbmZpZyk7XG5cbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVxdWVzdC5mb3JFYWNoKGZ1bmN0aW9uIHVuc2hpZnRSZXF1ZXN0SW50ZXJjZXB0b3JzKGludGVyY2VwdG9yKSB7XG4gICAgY2hhaW4udW5zaGlmdChpbnRlcmNlcHRvci5mdWxmaWxsZWQsIGludGVyY2VwdG9yLnJlamVjdGVkKTtcbiAgfSk7XG5cbiAgdGhpcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UuZm9yRWFjaChmdW5jdGlvbiBwdXNoUmVzcG9uc2VJbnRlcmNlcHRvcnMoaW50ZXJjZXB0b3IpIHtcbiAgICBjaGFpbi5wdXNoKGludGVyY2VwdG9yLmZ1bGZpbGxlZCwgaW50ZXJjZXB0b3IucmVqZWN0ZWQpO1xuICB9KTtcblxuICB3aGlsZSAoY2hhaW4ubGVuZ3RoKSB7XG4gICAgcHJvbWlzZSA9IHByb21pc2UudGhlbihjaGFpbi5zaGlmdCgpLCBjaGFpbi5zaGlmdCgpKTtcbiAgfVxuXG4gIHJldHVybiBwcm9taXNlO1xufTtcblxuQXhpb3MucHJvdG90eXBlLmdldFVyaSA9IGZ1bmN0aW9uIGdldFVyaShjb25maWcpIHtcbiAgY29uZmlnID0gbWVyZ2VDb25maWcodGhpcy5kZWZhdWx0cywgY29uZmlnKTtcbiAgcmV0dXJuIGJ1aWxkVVJMKGNvbmZpZy51cmwsIGNvbmZpZy5wYXJhbXMsIGNvbmZpZy5wYXJhbXNTZXJpYWxpemVyKS5yZXBsYWNlKC9eXFw/LywgJycpO1xufTtcblxuLy8gUHJvdmlkZSBhbGlhc2VzIGZvciBzdXBwb3J0ZWQgcmVxdWVzdCBtZXRob2RzXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJywgJ29wdGlvbnMnXSwgZnVuY3Rpb24gZm9yRWFjaE1ldGhvZE5vRGF0YShtZXRob2QpIHtcbiAgLyplc2xpbnQgZnVuYy1uYW1lczowKi9cbiAgQXhpb3MucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih1cmwsIGNvbmZpZykge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QodXRpbHMubWVyZ2UoY29uZmlnIHx8IHt9LCB7XG4gICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgIHVybDogdXJsXG4gICAgfSkpO1xuICB9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIC8qZXNsaW50IGZ1bmMtbmFtZXM6MCovXG4gIEF4aW9zLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24odXJsLCBkYXRhLCBjb25maWcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHV0aWxzLm1lcmdlKGNvbmZpZyB8fCB7fSwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICB1cmw6IHVybCxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9KSk7XG4gIH07XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBeGlvcztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY29yZS9BeGlvcy5qc1xuLy8gbW9kdWxlIGlkID0gMzMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5mdW5jdGlvbiBlbmNvZGUodmFsKSB7XG4gIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsKS5cbiAgICByZXBsYWNlKC8lNDAvZ2ksICdAJykuXG4gICAgcmVwbGFjZSgvJTNBL2dpLCAnOicpLlxuICAgIHJlcGxhY2UoLyUyNC9nLCAnJCcpLlxuICAgIHJlcGxhY2UoLyUyQy9naSwgJywnKS5cbiAgICByZXBsYWNlKC8lMjAvZywgJysnKS5cbiAgICByZXBsYWNlKC8lNUIvZ2ksICdbJykuXG4gICAgcmVwbGFjZSgvJTVEL2dpLCAnXScpO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgVVJMIGJ5IGFwcGVuZGluZyBwYXJhbXMgdG8gdGhlIGVuZFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgVGhlIGJhc2Ugb2YgdGhlIHVybCAoZS5nLiwgaHR0cDovL3d3dy5nb29nbGUuY29tKVxuICogQHBhcmFtIHtvYmplY3R9IFtwYXJhbXNdIFRoZSBwYXJhbXMgdG8gYmUgYXBwZW5kZWRcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBmb3JtYXR0ZWQgdXJsXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYnVpbGRVUkwodXJsLCBwYXJhbXMsIHBhcmFtc1NlcmlhbGl6ZXIpIHtcbiAgLyplc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246MCovXG4gIGlmICghcGFyYW1zKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuXG4gIHZhciBzZXJpYWxpemVkUGFyYW1zO1xuICBpZiAocGFyYW1zU2VyaWFsaXplcikge1xuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXNTZXJpYWxpemVyKHBhcmFtcyk7XG4gIH0gZWxzZSBpZiAodXRpbHMuaXNVUkxTZWFyY2hQYXJhbXMocGFyYW1zKSkge1xuICAgIHNlcmlhbGl6ZWRQYXJhbXMgPSBwYXJhbXMudG9TdHJpbmcoKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcGFydHMgPSBbXTtcblxuICAgIHV0aWxzLmZvckVhY2gocGFyYW1zLCBmdW5jdGlvbiBzZXJpYWxpemUodmFsLCBrZXkpIHtcbiAgICAgIGlmICh2YWwgPT09IG51bGwgfHwgdHlwZW9mIHZhbCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAodXRpbHMuaXNBcnJheSh2YWwpKSB7XG4gICAgICAgIGtleSA9IGtleSArICdbXSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWwgPSBbdmFsXTtcbiAgICAgIH1cblxuICAgICAgdXRpbHMuZm9yRWFjaCh2YWwsIGZ1bmN0aW9uIHBhcnNlVmFsdWUodikge1xuICAgICAgICBpZiAodXRpbHMuaXNEYXRlKHYpKSB7XG4gICAgICAgICAgdiA9IHYudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfSBlbHNlIGlmICh1dGlscy5pc09iamVjdCh2KSkge1xuICAgICAgICAgIHYgPSBKU09OLnN0cmluZ2lmeSh2KTtcbiAgICAgICAgfVxuICAgICAgICBwYXJ0cy5wdXNoKGVuY29kZShrZXkpICsgJz0nICsgZW5jb2RlKHYpKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgc2VyaWFsaXplZFBhcmFtcyA9IHBhcnRzLmpvaW4oJyYnKTtcbiAgfVxuXG4gIGlmIChzZXJpYWxpemVkUGFyYW1zKSB7XG4gICAgdmFyIGhhc2htYXJrSW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xuICAgIGlmIChoYXNobWFya0luZGV4ICE9PSAtMSkge1xuICAgICAgdXJsID0gdXJsLnNsaWNlKDAsIGhhc2htYXJrSW5kZXgpO1xuICAgIH1cblxuICAgIHVybCArPSAodXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJicpICsgc2VyaWFsaXplZFBhcmFtcztcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2J1aWxkVVJMLmpzXG4vLyBtb2R1bGUgaWQgPSAzMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbmZ1bmN0aW9uIEludGVyY2VwdG9yTWFuYWdlcigpIHtcbiAgdGhpcy5oYW5kbGVycyA9IFtdO1xufVxuXG4vKipcbiAqIEFkZCBhIG5ldyBpbnRlcmNlcHRvciB0byB0aGUgc3RhY2tcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdWxmaWxsZWQgVGhlIGZ1bmN0aW9uIHRvIGhhbmRsZSBgdGhlbmAgZm9yIGEgYFByb21pc2VgXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3RlZCBUaGUgZnVuY3Rpb24gdG8gaGFuZGxlIGByZWplY3RgIGZvciBhIGBQcm9taXNlYFxuICpcbiAqIEByZXR1cm4ge051bWJlcn0gQW4gSUQgdXNlZCB0byByZW1vdmUgaW50ZXJjZXB0b3IgbGF0ZXJcbiAqL1xuSW50ZXJjZXB0b3JNYW5hZ2VyLnByb3RvdHlwZS51c2UgPSBmdW5jdGlvbiB1c2UoZnVsZmlsbGVkLCByZWplY3RlZCkge1xuICB0aGlzLmhhbmRsZXJzLnB1c2goe1xuICAgIGZ1bGZpbGxlZDogZnVsZmlsbGVkLFxuICAgIHJlamVjdGVkOiByZWplY3RlZFxuICB9KTtcbiAgcmV0dXJuIHRoaXMuaGFuZGxlcnMubGVuZ3RoIC0gMTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFuIGludGVyY2VwdG9yIGZyb20gdGhlIHN0YWNrXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGlkIFRoZSBJRCB0aGF0IHdhcyByZXR1cm5lZCBieSBgdXNlYFxuICovXG5JbnRlcmNlcHRvck1hbmFnZXIucHJvdG90eXBlLmVqZWN0ID0gZnVuY3Rpb24gZWplY3QoaWQpIHtcbiAgaWYgKHRoaXMuaGFuZGxlcnNbaWRdKSB7XG4gICAgdGhpcy5oYW5kbGVyc1tpZF0gPSBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbGwgdGhlIHJlZ2lzdGVyZWQgaW50ZXJjZXB0b3JzXG4gKlxuICogVGhpcyBtZXRob2QgaXMgcGFydGljdWxhcmx5IHVzZWZ1bCBmb3Igc2tpcHBpbmcgb3ZlciBhbnlcbiAqIGludGVyY2VwdG9ycyB0aGF0IG1heSBoYXZlIGJlY29tZSBgbnVsbGAgY2FsbGluZyBgZWplY3RgLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIGludGVyY2VwdG9yXG4gKi9cbkludGVyY2VwdG9yTWFuYWdlci5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIGZvckVhY2goZm4pIHtcbiAgdXRpbHMuZm9yRWFjaCh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbiBmb3JFYWNoSGFuZGxlcihoKSB7XG4gICAgaWYgKGggIT09IG51bGwpIHtcbiAgICAgIGZuKGgpO1xuICAgIH1cbiAgfSk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEludGVyY2VwdG9yTWFuYWdlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY29yZS9JbnRlcmNlcHRvck1hbmFnZXIuanNcbi8vIG1vZHVsZSBpZCA9IDMzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciB0cmFuc2Zvcm1EYXRhID0gcmVxdWlyZSgnLi90cmFuc2Zvcm1EYXRhJyk7XG52YXIgaXNDYW5jZWwgPSByZXF1aXJlKCcuLi9jYW5jZWwvaXNDYW5jZWwnKTtcbnZhciBkZWZhdWx0cyA9IHJlcXVpcmUoJy4uL2RlZmF1bHRzJyk7XG52YXIgaXNBYnNvbHV0ZVVSTCA9IHJlcXVpcmUoJy4vLi4vaGVscGVycy9pc0Fic29sdXRlVVJMJyk7XG52YXIgY29tYmluZVVSTHMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvY29tYmluZVVSTHMnKTtcblxuLyoqXG4gKiBUaHJvd3MgYSBgQ2FuY2VsYCBpZiBjYW5jZWxsYXRpb24gaGFzIGJlZW4gcmVxdWVzdGVkLlxuICovXG5mdW5jdGlvbiB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZykge1xuICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG4gICAgY29uZmlnLmNhbmNlbFRva2VuLnRocm93SWZSZXF1ZXN0ZWQoKTtcbiAgfVxufVxuXG4vKipcbiAqIERpc3BhdGNoIGEgcmVxdWVzdCB0byB0aGUgc2VydmVyIHVzaW5nIHRoZSBjb25maWd1cmVkIGFkYXB0ZXIuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGNvbmZpZyBUaGUgY29uZmlnIHRoYXQgaXMgdG8gYmUgdXNlZCBmb3IgdGhlIHJlcXVlc3RcbiAqIEByZXR1cm5zIHtQcm9taXNlfSBUaGUgUHJvbWlzZSB0byBiZSBmdWxmaWxsZWRcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkaXNwYXRjaFJlcXVlc3QoY29uZmlnKSB7XG4gIHRocm93SWZDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoY29uZmlnKTtcblxuICAvLyBTdXBwb3J0IGJhc2VVUkwgY29uZmlnXG4gIGlmIChjb25maWcuYmFzZVVSTCAmJiAhaXNBYnNvbHV0ZVVSTChjb25maWcudXJsKSkge1xuICAgIGNvbmZpZy51cmwgPSBjb21iaW5lVVJMcyhjb25maWcuYmFzZVVSTCwgY29uZmlnLnVybCk7XG4gIH1cblxuICAvLyBFbnN1cmUgaGVhZGVycyBleGlzdFxuICBjb25maWcuaGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzIHx8IHt9O1xuXG4gIC8vIFRyYW5zZm9ybSByZXF1ZXN0IGRhdGFcbiAgY29uZmlnLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuICAgIGNvbmZpZy5kYXRhLFxuICAgIGNvbmZpZy5oZWFkZXJzLFxuICAgIGNvbmZpZy50cmFuc2Zvcm1SZXF1ZXN0XG4gICk7XG5cbiAgLy8gRmxhdHRlbiBoZWFkZXJzXG4gIGNvbmZpZy5oZWFkZXJzID0gdXRpbHMubWVyZ2UoXG4gICAgY29uZmlnLmhlYWRlcnMuY29tbW9uIHx8IHt9LFxuICAgIGNvbmZpZy5oZWFkZXJzW2NvbmZpZy5tZXRob2RdIHx8IHt9LFxuICAgIGNvbmZpZy5oZWFkZXJzIHx8IHt9XG4gICk7XG5cbiAgdXRpbHMuZm9yRWFjaChcbiAgICBbJ2RlbGV0ZScsICdnZXQnLCAnaGVhZCcsICdwb3N0JywgJ3B1dCcsICdwYXRjaCcsICdjb21tb24nXSxcbiAgICBmdW5jdGlvbiBjbGVhbkhlYWRlckNvbmZpZyhtZXRob2QpIHtcbiAgICAgIGRlbGV0ZSBjb25maWcuaGVhZGVyc1ttZXRob2RdO1xuICAgIH1cbiAgKTtcblxuICB2YXIgYWRhcHRlciA9IGNvbmZpZy5hZGFwdGVyIHx8IGRlZmF1bHRzLmFkYXB0ZXI7XG5cbiAgcmV0dXJuIGFkYXB0ZXIoY29uZmlnKS50aGVuKGZ1bmN0aW9uIG9uQWRhcHRlclJlc29sdXRpb24ocmVzcG9uc2UpIHtcbiAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAvLyBUcmFuc2Zvcm0gcmVzcG9uc2UgZGF0YVxuICAgIHJlc3BvbnNlLmRhdGEgPSB0cmFuc2Zvcm1EYXRhKFxuICAgICAgcmVzcG9uc2UuZGF0YSxcbiAgICAgIHJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICBjb25maWcudHJhbnNmb3JtUmVzcG9uc2VcbiAgICApO1xuXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9LCBmdW5jdGlvbiBvbkFkYXB0ZXJSZWplY3Rpb24ocmVhc29uKSB7XG4gICAgaWYgKCFpc0NhbmNlbChyZWFzb24pKSB7XG4gICAgICB0aHJvd0lmQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKGNvbmZpZyk7XG5cbiAgICAgIC8vIFRyYW5zZm9ybSByZXNwb25zZSBkYXRhXG4gICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5yZXNwb25zZSkge1xuICAgICAgICByZWFzb24ucmVzcG9uc2UuZGF0YSA9IHRyYW5zZm9ybURhdGEoXG4gICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmRhdGEsXG4gICAgICAgICAgcmVhc29uLnJlc3BvbnNlLmhlYWRlcnMsXG4gICAgICAgICAgY29uZmlnLnRyYW5zZm9ybVJlc3BvbnNlXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KHJlYXNvbik7XG4gIH0pO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY29yZS9kaXNwYXRjaFJlcXVlc3QuanNcbi8vIG1vZHVsZSBpZCA9IDMzNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuLyoqXG4gKiBUcmFuc2Zvcm0gdGhlIGRhdGEgZm9yIGEgcmVxdWVzdCBvciBhIHJlc3BvbnNlXG4gKlxuICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfSBkYXRhIFRoZSBkYXRhIHRvIGJlIHRyYW5zZm9ybWVkXG4gKiBAcGFyYW0ge0FycmF5fSBoZWFkZXJzIFRoZSBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdCBvciByZXNwb25zZVxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gZm5zIEEgc2luZ2xlIGZ1bmN0aW9uIG9yIEFycmF5IG9mIGZ1bmN0aW9uc1xuICogQHJldHVybnMgeyp9IFRoZSByZXN1bHRpbmcgdHJhbnNmb3JtZWQgZGF0YVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHRyYW5zZm9ybURhdGEoZGF0YSwgaGVhZGVycywgZm5zKSB7XG4gIC8qZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOjAqL1xuICB1dGlscy5mb3JFYWNoKGZucywgZnVuY3Rpb24gdHJhbnNmb3JtKGZuKSB7XG4gICAgZGF0YSA9IGZuKGRhdGEsIGhlYWRlcnMpO1xuICB9KTtcblxuICByZXR1cm4gZGF0YTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NvcmUvdHJhbnNmb3JtRGF0YS5qc1xuLy8gbW9kdWxlIGlkID0gMzM3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0NhbmNlbCh2YWx1ZSkge1xuICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWUuX19DQU5DRUxfXyk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jYW5jZWwvaXNDYW5jZWwuanNcbi8vIG1vZHVsZSBpZCA9IDMzOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbnZhciBub3JtYWxpemVIZWFkZXJOYW1lID0gcmVxdWlyZSgnLi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUnKTtcblxudmFyIERFRkFVTFRfQ09OVEVOVF9UWVBFID0ge1xuICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCdcbn07XG5cbmZ1bmN0aW9uIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCB2YWx1ZSkge1xuICBpZiAoIXV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnMpICYmIHV0aWxzLmlzVW5kZWZpbmVkKGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddKSkge1xuICAgIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gdmFsdWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGVmYXVsdEFkYXB0ZXIoKSB7XG4gIHZhciBhZGFwdGVyO1xuICAvLyBPbmx5IE5vZGUuSlMgaGFzIGEgcHJvY2VzcyB2YXJpYWJsZSB0aGF0IGlzIG9mIFtbQ2xhc3NdXSBwcm9jZXNzXG4gIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpIHtcbiAgICAvLyBGb3Igbm9kZSB1c2UgSFRUUCBhZGFwdGVyXG4gICAgYWRhcHRlciA9IHJlcXVpcmUoJy4vYWRhcHRlcnMvaHR0cCcpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBGb3IgYnJvd3NlcnMgdXNlIFhIUiBhZGFwdGVyXG4gICAgYWRhcHRlciA9IHJlcXVpcmUoJy4vYWRhcHRlcnMveGhyJyk7XG4gIH1cbiAgcmV0dXJuIGFkYXB0ZXI7XG59XG5cbnZhciBkZWZhdWx0cyA9IHtcbiAgYWRhcHRlcjogZ2V0RGVmYXVsdEFkYXB0ZXIoKSxcblxuICB0cmFuc2Zvcm1SZXF1ZXN0OiBbZnVuY3Rpb24gdHJhbnNmb3JtUmVxdWVzdChkYXRhLCBoZWFkZXJzKSB7XG4gICAgbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCAnQWNjZXB0Jyk7XG4gICAgbm9ybWFsaXplSGVhZGVyTmFtZShoZWFkZXJzLCAnQ29udGVudC1UeXBlJyk7XG4gICAgaWYgKHV0aWxzLmlzRm9ybURhdGEoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQXJyYXlCdWZmZXIoZGF0YSkgfHxcbiAgICAgIHV0aWxzLmlzQnVmZmVyKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc1N0cmVhbShkYXRhKSB8fFxuICAgICAgdXRpbHMuaXNGaWxlKGRhdGEpIHx8XG4gICAgICB1dGlscy5pc0Jsb2IoZGF0YSlcbiAgICApIHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNBcnJheUJ1ZmZlclZpZXcoZGF0YSkpIHtcbiAgICAgIHJldHVybiBkYXRhLmJ1ZmZlcjtcbiAgICB9XG4gICAgaWYgKHV0aWxzLmlzVVJMU2VhcmNoUGFyYW1zKGRhdGEpKSB7XG4gICAgICBzZXRDb250ZW50VHlwZUlmVW5zZXQoaGVhZGVycywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gZGF0YS50b1N0cmluZygpO1xuICAgIH1cbiAgICBpZiAodXRpbHMuaXNPYmplY3QoZGF0YSkpIHtcbiAgICAgIHNldENvbnRlbnRUeXBlSWZVbnNldChoZWFkZXJzLCAnYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04Jyk7XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XSxcblxuICB0cmFuc2Zvcm1SZXNwb25zZTogW2Z1bmN0aW9uIHRyYW5zZm9ybVJlc3BvbnNlKGRhdGEpIHtcbiAgICAvKmVzbGludCBuby1wYXJhbS1yZWFzc2lnbjowKi9cbiAgICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0cnkge1xuICAgICAgICBkYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHsgLyogSWdub3JlICovIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1dLFxuXG4gIC8qKlxuICAgKiBBIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzIHRvIGFib3J0IGEgcmVxdWVzdC4gSWYgc2V0IHRvIDAgKGRlZmF1bHQpIGFcbiAgICogdGltZW91dCBpcyBub3QgY3JlYXRlZC5cbiAgICovXG4gIHRpbWVvdXQ6IDAsXG5cbiAgeHNyZkNvb2tpZU5hbWU6ICdYU1JGLVRPS0VOJyxcbiAgeHNyZkhlYWRlck5hbWU6ICdYLVhTUkYtVE9LRU4nLFxuXG4gIG1heENvbnRlbnRMZW5ndGg6IC0xLFxuXG4gIHZhbGlkYXRlU3RhdHVzOiBmdW5jdGlvbiB2YWxpZGF0ZVN0YXR1cyhzdGF0dXMpIHtcbiAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDA7XG4gIH1cbn07XG5cbmRlZmF1bHRzLmhlYWRlcnMgPSB7XG4gIGNvbW1vbjoge1xuICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qJ1xuICB9XG59O1xuXG51dGlscy5mb3JFYWNoKFsnZGVsZXRlJywgJ2dldCcsICdoZWFkJ10sIGZ1bmN0aW9uIGZvckVhY2hNZXRob2ROb0RhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHt9O1xufSk7XG5cbnV0aWxzLmZvckVhY2goWydwb3N0JywgJ3B1dCcsICdwYXRjaCddLCBmdW5jdGlvbiBmb3JFYWNoTWV0aG9kV2l0aERhdGEobWV0aG9kKSB7XG4gIGRlZmF1bHRzLmhlYWRlcnNbbWV0aG9kXSA9IHV0aWxzLm1lcmdlKERFRkFVTFRfQ09OVEVOVF9UWVBFKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlZmF1bHRzO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9kZWZhdWx0cy5qc1xuLy8gbW9kdWxlIGlkID0gMzM5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vcHJvY2Vzcy9icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAzNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG5vcm1hbGl6ZUhlYWRlck5hbWUoaGVhZGVycywgbm9ybWFsaXplZE5hbWUpIHtcbiAgdXRpbHMuZm9yRWFjaChoZWFkZXJzLCBmdW5jdGlvbiBwcm9jZXNzSGVhZGVyKHZhbHVlLCBuYW1lKSB7XG4gICAgaWYgKG5hbWUgIT09IG5vcm1hbGl6ZWROYW1lICYmIG5hbWUudG9VcHBlckNhc2UoKSA9PT0gbm9ybWFsaXplZE5hbWUudG9VcHBlckNhc2UoKSkge1xuICAgICAgaGVhZGVyc1tub3JtYWxpemVkTmFtZV0gPSB2YWx1ZTtcbiAgICAgIGRlbGV0ZSBoZWFkZXJzW25hbWVdO1xuICAgIH1cbiAgfSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9oZWxwZXJzL25vcm1hbGl6ZUhlYWRlck5hbWUuanNcbi8vIG1vZHVsZSBpZCA9IDM0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcbnZhciBzZXR0bGUgPSByZXF1aXJlKCcuLy4uL2NvcmUvc2V0dGxlJyk7XG52YXIgYnVpbGRVUkwgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvYnVpbGRVUkwnKTtcbnZhciBwYXJzZUhlYWRlcnMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvcGFyc2VIZWFkZXJzJyk7XG52YXIgaXNVUkxTYW1lT3JpZ2luID0gcmVxdWlyZSgnLi8uLi9oZWxwZXJzL2lzVVJMU2FtZU9yaWdpbicpO1xudmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnLi4vY29yZS9jcmVhdGVFcnJvcicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHhockFkYXB0ZXIoY29uZmlnKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiBkaXNwYXRjaFhoclJlcXVlc3QocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIHJlcXVlc3REYXRhID0gY29uZmlnLmRhdGE7XG4gICAgdmFyIHJlcXVlc3RIZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XG5cbiAgICBpZiAodXRpbHMuaXNGb3JtRGF0YShyZXF1ZXN0RGF0YSkpIHtcbiAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1snQ29udGVudC1UeXBlJ107IC8vIExldCB0aGUgYnJvd3NlciBzZXQgaXRcbiAgICB9XG5cbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgLy8gSFRUUCBiYXNpYyBhdXRoZW50aWNhdGlvblxuICAgIGlmIChjb25maWcuYXV0aCkge1xuICAgICAgdmFyIHVzZXJuYW1lID0gY29uZmlnLmF1dGgudXNlcm5hbWUgfHwgJyc7XG4gICAgICB2YXIgcGFzc3dvcmQgPSBjb25maWcuYXV0aC5wYXNzd29yZCB8fCAnJztcbiAgICAgIHJlcXVlc3RIZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyAnOicgKyBwYXNzd29yZCk7XG4gICAgfVxuXG4gICAgcmVxdWVzdC5vcGVuKGNvbmZpZy5tZXRob2QudG9VcHBlckNhc2UoKSwgYnVpbGRVUkwoY29uZmlnLnVybCwgY29uZmlnLnBhcmFtcywgY29uZmlnLnBhcmFtc1NlcmlhbGl6ZXIpLCB0cnVlKTtcblxuICAgIC8vIFNldCB0aGUgcmVxdWVzdCB0aW1lb3V0IGluIE1TXG4gICAgcmVxdWVzdC50aW1lb3V0ID0gY29uZmlnLnRpbWVvdXQ7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIHJlYWR5IHN0YXRlXG4gICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiBoYW5kbGVMb2FkKCkge1xuICAgICAgaWYgKCFyZXF1ZXN0IHx8IHJlcXVlc3QucmVhZHlTdGF0ZSAhPT0gNCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSByZXF1ZXN0IGVycm9yZWQgb3V0IGFuZCB3ZSBkaWRuJ3QgZ2V0IGEgcmVzcG9uc2UsIHRoaXMgd2lsbCBiZVxuICAgICAgLy8gaGFuZGxlZCBieSBvbmVycm9yIGluc3RlYWRcbiAgICAgIC8vIFdpdGggb25lIGV4Y2VwdGlvbjogcmVxdWVzdCB0aGF0IHVzaW5nIGZpbGU6IHByb3RvY29sLCBtb3N0IGJyb3dzZXJzXG4gICAgICAvLyB3aWxsIHJldHVybiBzdGF0dXMgYXMgMCBldmVuIHRob3VnaCBpdCdzIGEgc3VjY2Vzc2Z1bCByZXF1ZXN0XG4gICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDAgJiYgIShyZXF1ZXN0LnJlc3BvbnNlVVJMICYmIHJlcXVlc3QucmVzcG9uc2VVUkwuaW5kZXhPZignZmlsZTonKSA9PT0gMCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBQcmVwYXJlIHRoZSByZXNwb25zZVxuICAgICAgdmFyIHJlc3BvbnNlSGVhZGVycyA9ICdnZXRBbGxSZXNwb25zZUhlYWRlcnMnIGluIHJlcXVlc3QgPyBwYXJzZUhlYWRlcnMocmVxdWVzdC5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkgOiBudWxsO1xuICAgICAgdmFyIHJlc3BvbnNlRGF0YSA9ICFjb25maWcucmVzcG9uc2VUeXBlIHx8IGNvbmZpZy5yZXNwb25zZVR5cGUgPT09ICd0ZXh0JyA/IHJlcXVlc3QucmVzcG9uc2VUZXh0IDogcmVxdWVzdC5yZXNwb25zZTtcbiAgICAgIHZhciByZXNwb25zZSA9IHtcbiAgICAgICAgZGF0YTogcmVzcG9uc2VEYXRhLFxuICAgICAgICBzdGF0dXM6IHJlcXVlc3Quc3RhdHVzLFxuICAgICAgICBzdGF0dXNUZXh0OiByZXF1ZXN0LnN0YXR1c1RleHQsXG4gICAgICAgIGhlYWRlcnM6IHJlc3BvbnNlSGVhZGVycyxcbiAgICAgICAgY29uZmlnOiBjb25maWcsXG4gICAgICAgIHJlcXVlc3Q6IHJlcXVlc3RcbiAgICAgIH07XG5cbiAgICAgIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKTtcblxuICAgICAgLy8gQ2xlYW4gdXAgcmVxdWVzdFxuICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgfTtcblxuICAgIC8vIEhhbmRsZSBicm93c2VyIHJlcXVlc3QgY2FuY2VsbGF0aW9uIChhcyBvcHBvc2VkIHRvIGEgbWFudWFsIGNhbmNlbGxhdGlvbilcbiAgICByZXF1ZXN0Lm9uYWJvcnQgPSBmdW5jdGlvbiBoYW5kbGVBYm9ydCgpIHtcbiAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcignUmVxdWVzdCBhYm9ydGVkJywgY29uZmlnLCAnRUNPTk5BQk9SVEVEJywgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIGxvdyBsZXZlbCBuZXR3b3JrIGVycm9yc1xuICAgIHJlcXVlc3Qub25lcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUVycm9yKCkge1xuICAgICAgLy8gUmVhbCBlcnJvcnMgYXJlIGhpZGRlbiBmcm9tIHVzIGJ5IHRoZSBicm93c2VyXG4gICAgICAvLyBvbmVycm9yIHNob3VsZCBvbmx5IGZpcmUgaWYgaXQncyBhIG5ldHdvcmsgZXJyb3JcbiAgICAgIHJlamVjdChjcmVhdGVFcnJvcignTmV0d29yayBFcnJvcicsIGNvbmZpZywgbnVsbCwgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gSGFuZGxlIHRpbWVvdXRcbiAgICByZXF1ZXN0Lm9udGltZW91dCA9IGZ1bmN0aW9uIGhhbmRsZVRpbWVvdXQoKSB7XG4gICAgICByZWplY3QoY3JlYXRlRXJyb3IoJ3RpbWVvdXQgb2YgJyArIGNvbmZpZy50aW1lb3V0ICsgJ21zIGV4Y2VlZGVkJywgY29uZmlnLCAnRUNPTk5BQk9SVEVEJyxcbiAgICAgICAgcmVxdWVzdCkpO1xuXG4gICAgICAvLyBDbGVhbiB1cCByZXF1ZXN0XG4gICAgICByZXF1ZXN0ID0gbnVsbDtcbiAgICB9O1xuXG4gICAgLy8gQWRkIHhzcmYgaGVhZGVyXG4gICAgLy8gVGhpcyBpcyBvbmx5IGRvbmUgaWYgcnVubmluZyBpbiBhIHN0YW5kYXJkIGJyb3dzZXIgZW52aXJvbm1lbnQuXG4gICAgLy8gU3BlY2lmaWNhbGx5IG5vdCBpZiB3ZSdyZSBpbiBhIHdlYiB3b3JrZXIsIG9yIHJlYWN0LW5hdGl2ZS5cbiAgICBpZiAodXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSkge1xuICAgICAgdmFyIGNvb2tpZXMgPSByZXF1aXJlKCcuLy4uL2hlbHBlcnMvY29va2llcycpO1xuXG4gICAgICAvLyBBZGQgeHNyZiBoZWFkZXJcbiAgICAgIHZhciB4c3JmVmFsdWUgPSAoY29uZmlnLndpdGhDcmVkZW50aWFscyB8fCBpc1VSTFNhbWVPcmlnaW4oY29uZmlnLnVybCkpICYmIGNvbmZpZy54c3JmQ29va2llTmFtZSA/XG4gICAgICAgIGNvb2tpZXMucmVhZChjb25maWcueHNyZkNvb2tpZU5hbWUpIDpcbiAgICAgICAgdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoeHNyZlZhbHVlKSB7XG4gICAgICAgIHJlcXVlc3RIZWFkZXJzW2NvbmZpZy54c3JmSGVhZGVyTmFtZV0gPSB4c3JmVmFsdWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIGhlYWRlcnMgdG8gdGhlIHJlcXVlc3RcbiAgICBpZiAoJ3NldFJlcXVlc3RIZWFkZXInIGluIHJlcXVlc3QpIHtcbiAgICAgIHV0aWxzLmZvckVhY2gocmVxdWVzdEhlYWRlcnMsIGZ1bmN0aW9uIHNldFJlcXVlc3RIZWFkZXIodmFsLCBrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZXF1ZXN0RGF0YSA9PT0gJ3VuZGVmaW5lZCcgJiYga2V5LnRvTG93ZXJDYXNlKCkgPT09ICdjb250ZW50LXR5cGUnKSB7XG4gICAgICAgICAgLy8gUmVtb3ZlIENvbnRlbnQtVHlwZSBpZiBkYXRhIGlzIHVuZGVmaW5lZFxuICAgICAgICAgIGRlbGV0ZSByZXF1ZXN0SGVhZGVyc1trZXldO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE90aGVyd2lzZSBhZGQgaGVhZGVyIHRvIHRoZSByZXF1ZXN0XG4gICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKGtleSwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHdpdGhDcmVkZW50aWFscyB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChjb25maWcud2l0aENyZWRlbnRpYWxzKSB7XG4gICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgfVxuXG4gICAgLy8gQWRkIHJlc3BvbnNlVHlwZSB0byByZXF1ZXN0IGlmIG5lZWRlZFxuICAgIGlmIChjb25maWcucmVzcG9uc2VUeXBlKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXF1ZXN0LnJlc3BvbnNlVHlwZSA9IGNvbmZpZy5yZXNwb25zZVR5cGU7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIEV4cGVjdGVkIERPTUV4Y2VwdGlvbiB0aHJvd24gYnkgYnJvd3NlcnMgbm90IGNvbXBhdGlibGUgWE1MSHR0cFJlcXVlc3QgTGV2ZWwgMi5cbiAgICAgICAgLy8gQnV0LCB0aGlzIGNhbiBiZSBzdXBwcmVzc2VkIGZvciAnanNvbicgdHlwZSBhcyBpdCBjYW4gYmUgcGFyc2VkIGJ5IGRlZmF1bHQgJ3RyYW5zZm9ybVJlc3BvbnNlJyBmdW5jdGlvbi5cbiAgICAgICAgaWYgKGNvbmZpZy5yZXNwb25zZVR5cGUgIT09ICdqc29uJykge1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgcHJvZ3Jlc3MgaWYgbmVlZGVkXG4gICAgaWYgKHR5cGVvZiBjb25maWcub25Eb3dubG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3Byb2dyZXNzJywgY29uZmlnLm9uRG93bmxvYWRQcm9ncmVzcyk7XG4gICAgfVxuXG4gICAgLy8gTm90IGFsbCBicm93c2VycyBzdXBwb3J0IHVwbG9hZCBldmVudHNcbiAgICBpZiAodHlwZW9mIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzID09PSAnZnVuY3Rpb24nICYmIHJlcXVlc3QudXBsb2FkKSB7XG4gICAgICByZXF1ZXN0LnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIGNvbmZpZy5vblVwbG9hZFByb2dyZXNzKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlnLmNhbmNlbFRva2VuKSB7XG4gICAgICAvLyBIYW5kbGUgY2FuY2VsbGF0aW9uXG4gICAgICBjb25maWcuY2FuY2VsVG9rZW4ucHJvbWlzZS50aGVuKGZ1bmN0aW9uIG9uQ2FuY2VsZWQoY2FuY2VsKSB7XG4gICAgICAgIGlmICghcmVxdWVzdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlcXVlc3QuYWJvcnQoKTtcbiAgICAgICAgcmVqZWN0KGNhbmNlbCk7XG4gICAgICAgIC8vIENsZWFuIHVwIHJlcXVlc3RcbiAgICAgICAgcmVxdWVzdCA9IG51bGw7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAocmVxdWVzdERhdGEgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmVxdWVzdERhdGEgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNlbmQgdGhlIHJlcXVlc3RcbiAgICByZXF1ZXN0LnNlbmQocmVxdWVzdERhdGEpO1xuICB9KTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2FkYXB0ZXJzL3hoci5qc1xuLy8gbW9kdWxlIGlkID0gMzQyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGNyZWF0ZUVycm9yID0gcmVxdWlyZSgnLi9jcmVhdGVFcnJvcicpO1xuXG4vKipcbiAqIFJlc29sdmUgb3IgcmVqZWN0IGEgUHJvbWlzZSBiYXNlZCBvbiByZXNwb25zZSBzdGF0dXMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZSBBIGZ1bmN0aW9uIHRoYXQgcmVzb2x2ZXMgdGhlIHByb21pc2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSByZWplY3QgQSBmdW5jdGlvbiB0aGF0IHJlamVjdHMgdGhlIHByb21pc2UuXG4gKiBAcGFyYW0ge29iamVjdH0gcmVzcG9uc2UgVGhlIHJlc3BvbnNlLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHJlc3BvbnNlKSB7XG4gIHZhciB2YWxpZGF0ZVN0YXR1cyA9IHJlc3BvbnNlLmNvbmZpZy52YWxpZGF0ZVN0YXR1cztcbiAgaWYgKCF2YWxpZGF0ZVN0YXR1cyB8fCB2YWxpZGF0ZVN0YXR1cyhyZXNwb25zZS5zdGF0dXMpKSB7XG4gICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gIH0gZWxzZSB7XG4gICAgcmVqZWN0KGNyZWF0ZUVycm9yKFxuICAgICAgJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUgJyArIHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgIHJlc3BvbnNlLmNvbmZpZyxcbiAgICAgIG51bGwsXG4gICAgICByZXNwb25zZS5yZXF1ZXN0LFxuICAgICAgcmVzcG9uc2VcbiAgICApKTtcbiAgfVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY29yZS9zZXR0bGUuanNcbi8vIG1vZHVsZSBpZCA9IDM0M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBlbmhhbmNlRXJyb3IgPSByZXF1aXJlKCcuL2VuaGFuY2VFcnJvcicpO1xuXG4vKipcbiAqIENyZWF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSwgY29uZmlnLCBlcnJvciBjb2RlLCByZXF1ZXN0IGFuZCByZXNwb25zZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSBUaGUgZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgY3JlYXRlZCBlcnJvci5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVFcnJvcihtZXNzYWdlLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIHZhciBlcnJvciA9IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgcmV0dXJuIGVuaGFuY2VFcnJvcihlcnJvciwgY29uZmlnLCBjb2RlLCByZXF1ZXN0LCByZXNwb25zZSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL2NyZWF0ZUVycm9yLmpzXG4vLyBtb2R1bGUgaWQgPSAzNDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVwZGF0ZSBhbiBFcnJvciB3aXRoIHRoZSBzcGVjaWZpZWQgY29uZmlnLCBlcnJvciBjb2RlLCBhbmQgcmVzcG9uc2UuXG4gKlxuICogQHBhcmFtIHtFcnJvcn0gZXJyb3IgVGhlIGVycm9yIHRvIHVwZGF0ZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcgVGhlIGNvbmZpZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29kZV0gVGhlIGVycm9yIGNvZGUgKGZvciBleGFtcGxlLCAnRUNPTk5BQk9SVEVEJykuXG4gKiBAcGFyYW0ge09iamVjdH0gW3JlcXVlc3RdIFRoZSByZXF1ZXN0LlxuICogQHBhcmFtIHtPYmplY3R9IFtyZXNwb25zZV0gVGhlIHJlc3BvbnNlLlxuICogQHJldHVybnMge0Vycm9yfSBUaGUgZXJyb3IuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW5oYW5jZUVycm9yKGVycm9yLCBjb25maWcsIGNvZGUsIHJlcXVlc3QsIHJlc3BvbnNlKSB7XG4gIGVycm9yLmNvbmZpZyA9IGNvbmZpZztcbiAgaWYgKGNvZGUpIHtcbiAgICBlcnJvci5jb2RlID0gY29kZTtcbiAgfVxuXG4gIGVycm9yLnJlcXVlc3QgPSByZXF1ZXN0O1xuICBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICBlcnJvci5pc0F4aW9zRXJyb3IgPSB0cnVlO1xuXG4gIGVycm9yLnRvSlNPTiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAvLyBTdGFuZGFyZFxuICAgICAgbWVzc2FnZTogdGhpcy5tZXNzYWdlLFxuICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgLy8gTWljcm9zb2Z0XG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgIG51bWJlcjogdGhpcy5udW1iZXIsXG4gICAgICAvLyBNb3ppbGxhXG4gICAgICBmaWxlTmFtZTogdGhpcy5maWxlTmFtZSxcbiAgICAgIGxpbmVOdW1iZXI6IHRoaXMubGluZU51bWJlcixcbiAgICAgIGNvbHVtbk51bWJlcjogdGhpcy5jb2x1bW5OdW1iZXIsXG4gICAgICBzdGFjazogdGhpcy5zdGFjayxcbiAgICAgIC8vIEF4aW9zXG4gICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgY29kZTogdGhpcy5jb2RlXG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIGVycm9yO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9heGlvcy9saWIvY29yZS9lbmhhbmNlRXJyb3IuanNcbi8vIG1vZHVsZSBpZCA9IDM0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMnKTtcblxuLy8gSGVhZGVycyB3aG9zZSBkdXBsaWNhdGVzIGFyZSBpZ25vcmVkIGJ5IG5vZGVcbi8vIGMuZi4gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9odHRwLmh0bWwjaHR0cF9tZXNzYWdlX2hlYWRlcnNcbnZhciBpZ25vcmVEdXBsaWNhdGVPZiA9IFtcbiAgJ2FnZScsICdhdXRob3JpemF0aW9uJywgJ2NvbnRlbnQtbGVuZ3RoJywgJ2NvbnRlbnQtdHlwZScsICdldGFnJyxcbiAgJ2V4cGlyZXMnLCAnZnJvbScsICdob3N0JywgJ2lmLW1vZGlmaWVkLXNpbmNlJywgJ2lmLXVubW9kaWZpZWQtc2luY2UnLFxuICAnbGFzdC1tb2RpZmllZCcsICdsb2NhdGlvbicsICdtYXgtZm9yd2FyZHMnLCAncHJveHktYXV0aG9yaXphdGlvbicsXG4gICdyZWZlcmVyJywgJ3JldHJ5LWFmdGVyJywgJ3VzZXItYWdlbnQnXG5dO1xuXG4vKipcbiAqIFBhcnNlIGhlYWRlcnMgaW50byBhbiBvYmplY3RcbiAqXG4gKiBgYGBcbiAqIERhdGU6IFdlZCwgMjcgQXVnIDIwMTQgMDg6NTg6NDkgR01UXG4gKiBDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2pzb25cbiAqIENvbm5lY3Rpb246IGtlZXAtYWxpdmVcbiAqIFRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gaGVhZGVycyBIZWFkZXJzIG5lZWRpbmcgdG8gYmUgcGFyc2VkXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBIZWFkZXJzIHBhcnNlZCBpbnRvIGFuIG9iamVjdFxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHBhcnNlSGVhZGVycyhoZWFkZXJzKSB7XG4gIHZhciBwYXJzZWQgPSB7fTtcbiAgdmFyIGtleTtcbiAgdmFyIHZhbDtcbiAgdmFyIGk7XG5cbiAgaWYgKCFoZWFkZXJzKSB7IHJldHVybiBwYXJzZWQ7IH1cblxuICB1dGlscy5mb3JFYWNoKGhlYWRlcnMuc3BsaXQoJ1xcbicpLCBmdW5jdGlvbiBwYXJzZXIobGluZSkge1xuICAgIGkgPSBsaW5lLmluZGV4T2YoJzonKTtcbiAgICBrZXkgPSB1dGlscy50cmltKGxpbmUuc3Vic3RyKDAsIGkpKS50b0xvd2VyQ2FzZSgpO1xuICAgIHZhbCA9IHV0aWxzLnRyaW0obGluZS5zdWJzdHIoaSArIDEpKTtcblxuICAgIGlmIChrZXkpIHtcbiAgICAgIGlmIChwYXJzZWRba2V5XSAmJiBpZ25vcmVEdXBsaWNhdGVPZi5pbmRleE9mKGtleSkgPj0gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoa2V5ID09PSAnc2V0LWNvb2tpZScpIHtcbiAgICAgICAgcGFyc2VkW2tleV0gPSAocGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSA6IFtdKS5jb25jYXQoW3ZhbF0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgJywgJyArIHZhbCA6IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBwYXJzZWQ7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9oZWxwZXJzL3BhcnNlSGVhZGVycy5qc1xuLy8gbW9kdWxlIGlkID0gMzQ2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi8uLi91dGlscycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgdXRpbHMuaXNTdGFuZGFyZEJyb3dzZXJFbnYoKSA/XG5cbiAgLy8gU3RhbmRhcmQgYnJvd3NlciBlbnZzIGhhdmUgZnVsbCBzdXBwb3J0IG9mIHRoZSBBUElzIG5lZWRlZCB0byB0ZXN0XG4gIC8vIHdoZXRoZXIgdGhlIHJlcXVlc3QgVVJMIGlzIG9mIHRoZSBzYW1lIG9yaWdpbiBhcyBjdXJyZW50IGxvY2F0aW9uLlxuICAgIChmdW5jdGlvbiBzdGFuZGFyZEJyb3dzZXJFbnYoKSB7XG4gICAgICB2YXIgbXNpZSA9IC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgICB2YXIgdXJsUGFyc2luZ05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICB2YXIgb3JpZ2luVVJMO1xuXG4gICAgICAvKipcbiAgICAqIFBhcnNlIGEgVVJMIHRvIGRpc2NvdmVyIGl0J3MgY29tcG9uZW50c1xuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSB1cmwgVGhlIFVSTCB0byBiZSBwYXJzZWRcbiAgICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAgKi9cbiAgICAgIGZ1bmN0aW9uIHJlc29sdmVVUkwodXJsKSB7XG4gICAgICAgIHZhciBocmVmID0gdXJsO1xuXG4gICAgICAgIGlmIChtc2llKSB7XG4gICAgICAgIC8vIElFIG5lZWRzIGF0dHJpYnV0ZSBzZXQgdHdpY2UgdG8gbm9ybWFsaXplIHByb3BlcnRpZXNcbiAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBocmVmKTtcbiAgICAgICAgICBocmVmID0gdXJsUGFyc2luZ05vZGUuaHJlZjtcbiAgICAgICAgfVxuXG4gICAgICAgIHVybFBhcnNpbmdOb2RlLnNldEF0dHJpYnV0ZSgnaHJlZicsIGhyZWYpO1xuXG4gICAgICAgIC8vIHVybFBhcnNpbmdOb2RlIHByb3ZpZGVzIHRoZSBVcmxVdGlscyBpbnRlcmZhY2UgLSBodHRwOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsdXRpbHNcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBocmVmOiB1cmxQYXJzaW5nTm9kZS5ocmVmLFxuICAgICAgICAgIHByb3RvY29sOiB1cmxQYXJzaW5nTm9kZS5wcm90b2NvbCA/IHVybFBhcnNpbmdOb2RlLnByb3RvY29sLnJlcGxhY2UoLzokLywgJycpIDogJycsXG4gICAgICAgICAgaG9zdDogdXJsUGFyc2luZ05vZGUuaG9zdCxcbiAgICAgICAgICBzZWFyY2g6IHVybFBhcnNpbmdOb2RlLnNlYXJjaCA/IHVybFBhcnNpbmdOb2RlLnNlYXJjaC5yZXBsYWNlKC9eXFw/LywgJycpIDogJycsXG4gICAgICAgICAgaGFzaDogdXJsUGFyc2luZ05vZGUuaGFzaCA/IHVybFBhcnNpbmdOb2RlLmhhc2gucmVwbGFjZSgvXiMvLCAnJykgOiAnJyxcbiAgICAgICAgICBob3N0bmFtZTogdXJsUGFyc2luZ05vZGUuaG9zdG5hbWUsXG4gICAgICAgICAgcG9ydDogdXJsUGFyc2luZ05vZGUucG9ydCxcbiAgICAgICAgICBwYXRobmFtZTogKHVybFBhcnNpbmdOb2RlLnBhdGhuYW1lLmNoYXJBdCgwKSA9PT0gJy8nKSA/XG4gICAgICAgICAgICB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZSA6XG4gICAgICAgICAgICAnLycgKyB1cmxQYXJzaW5nTm9kZS5wYXRobmFtZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBvcmlnaW5VUkwgPSByZXNvbHZlVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcblxuICAgICAgLyoqXG4gICAgKiBEZXRlcm1pbmUgaWYgYSBVUkwgc2hhcmVzIHRoZSBzYW1lIG9yaWdpbiBhcyB0aGUgY3VycmVudCBsb2NhdGlvblxuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSByZXF1ZXN0VVJMIFRoZSBVUkwgdG8gdGVzdFxuICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgVVJMIHNoYXJlcyB0aGUgc2FtZSBvcmlnaW4sIG90aGVyd2lzZSBmYWxzZVxuICAgICovXG4gICAgICByZXR1cm4gZnVuY3Rpb24gaXNVUkxTYW1lT3JpZ2luKHJlcXVlc3RVUkwpIHtcbiAgICAgICAgdmFyIHBhcnNlZCA9ICh1dGlscy5pc1N0cmluZyhyZXF1ZXN0VVJMKSkgPyByZXNvbHZlVVJMKHJlcXVlc3RVUkwpIDogcmVxdWVzdFVSTDtcbiAgICAgICAgcmV0dXJuIChwYXJzZWQucHJvdG9jb2wgPT09IG9yaWdpblVSTC5wcm90b2NvbCAmJlxuICAgICAgICAgICAgcGFyc2VkLmhvc3QgPT09IG9yaWdpblVSTC5ob3N0KTtcbiAgICAgIH07XG4gICAgfSkoKSA6XG5cbiAgLy8gTm9uIHN0YW5kYXJkIGJyb3dzZXIgZW52cyAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGlzVVJMU2FtZU9yaWdpbigpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9O1xuICAgIH0pKClcbik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvaXNVUkxTYW1lT3JpZ2luLmpzXG4vLyBtb2R1bGUgaWQgPSAzNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKFxuICB1dGlscy5pc1N0YW5kYXJkQnJvd3NlckVudigpID9cblxuICAvLyBTdGFuZGFyZCBicm93c2VyIGVudnMgc3VwcG9ydCBkb2N1bWVudC5jb29raWVcbiAgICAoZnVuY3Rpb24gc3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKG5hbWUsIHZhbHVlLCBleHBpcmVzLCBwYXRoLCBkb21haW4sIHNlY3VyZSkge1xuICAgICAgICAgIHZhciBjb29raWUgPSBbXTtcbiAgICAgICAgICBjb29raWUucHVzaChuYW1lICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XG5cbiAgICAgICAgICBpZiAodXRpbHMuaXNOdW1iZXIoZXhwaXJlcykpIHtcbiAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmVzKS50b0dNVFN0cmluZygpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcocGF0aCkpIHtcbiAgICAgICAgICAgIGNvb2tpZS5wdXNoKCdwYXRoPScgKyBwYXRoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodXRpbHMuaXNTdHJpbmcoZG9tYWluKSkge1xuICAgICAgICAgICAgY29va2llLnB1c2goJ2RvbWFpbj0nICsgZG9tYWluKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VjdXJlID09PSB0cnVlKSB7XG4gICAgICAgICAgICBjb29raWUucHVzaCgnc2VjdXJlJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZG9jdW1lbnQuY29va2llID0gY29va2llLmpvaW4oJzsgJyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVhZDogZnVuY3Rpb24gcmVhZChuYW1lKSB7XG4gICAgICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKG5ldyBSZWdFeHAoJyhefDtcXFxccyopKCcgKyBuYW1lICsgJyk9KFteO10qKScpKTtcbiAgICAgICAgICByZXR1cm4gKG1hdGNoID8gZGVjb2RlVVJJQ29tcG9uZW50KG1hdGNoWzNdKSA6IG51bGwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5hbWUpIHtcbiAgICAgICAgICB0aGlzLndyaXRlKG5hbWUsICcnLCBEYXRlLm5vdygpIC0gODY0MDAwMDApO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0pKCkgOlxuXG4gIC8vIE5vbiBzdGFuZGFyZCBicm93c2VyIGVudiAod2ViIHdvcmtlcnMsIHJlYWN0LW5hdGl2ZSkgbGFjayBuZWVkZWQgc3VwcG9ydC5cbiAgICAoZnVuY3Rpb24gbm9uU3RhbmRhcmRCcm93c2VyRW52KCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKCkge30sXG4gICAgICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQoKSB7IHJldHVybiBudWxsOyB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHt9XG4gICAgICB9O1xuICAgIH0pKClcbik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvY29va2llcy5qc1xuLy8gbW9kdWxlIGlkID0gMzQ4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIFRoZSBVUkwgdG8gdGVzdFxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIHNwZWNpZmllZCBVUkwgaXMgYWJzb2x1dGUsIG90aGVyd2lzZSBmYWxzZVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGlzQWJzb2x1dGVVUkwodXJsKSB7XG4gIC8vIEEgVVJMIGlzIGNvbnNpZGVyZWQgYWJzb2x1dGUgaWYgaXQgYmVnaW5zIHdpdGggXCI8c2NoZW1lPjovL1wiIG9yIFwiLy9cIiAocHJvdG9jb2wtcmVsYXRpdmUgVVJMKS5cbiAgLy8gUkZDIDM5ODYgZGVmaW5lcyBzY2hlbWUgbmFtZSBhcyBhIHNlcXVlbmNlIG9mIGNoYXJhY3RlcnMgYmVnaW5uaW5nIHdpdGggYSBsZXR0ZXIgYW5kIGZvbGxvd2VkXG4gIC8vIGJ5IGFueSBjb21iaW5hdGlvbiBvZiBsZXR0ZXJzLCBkaWdpdHMsIHBsdXMsIHBlcmlvZCwgb3IgaHlwaGVuLlxuICByZXR1cm4gL14oW2Etel1bYS16XFxkXFwrXFwtXFwuXSo6KT9cXC9cXC8vaS50ZXN0KHVybCk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9oZWxwZXJzL2lzQWJzb2x1dGVVUkwuanNcbi8vIG1vZHVsZSBpZCA9IDM0OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBVUkwgYnkgY29tYmluaW5nIHRoZSBzcGVjaWZpZWQgVVJMc1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJMIFRoZSBiYXNlIFVSTFxuICogQHBhcmFtIHtzdHJpbmd9IHJlbGF0aXZlVVJMIFRoZSByZWxhdGl2ZSBVUkxcbiAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBjb21iaW5lZCBVUkxcbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjb21iaW5lVVJMcyhiYXNlVVJMLCByZWxhdGl2ZVVSTCkge1xuICByZXR1cm4gcmVsYXRpdmVVUkxcbiAgICA/IGJhc2VVUkwucmVwbGFjZSgvXFwvKyQvLCAnJykgKyAnLycgKyByZWxhdGl2ZVVSTC5yZXBsYWNlKC9eXFwvKy8sICcnKVxuICAgIDogYmFzZVVSTDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvY29tYmluZVVSTHMuanNcbi8vIG1vZHVsZSBpZCA9IDM1MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XG5cbi8qKlxuICogQ29uZmlnLXNwZWNpZmljIG1lcmdlLWZ1bmN0aW9uIHdoaWNoIGNyZWF0ZXMgYSBuZXcgY29uZmlnLW9iamVjdFxuICogYnkgbWVyZ2luZyB0d28gY29uZmlndXJhdGlvbiBvYmplY3RzIHRvZ2V0aGVyLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWcxXG4gKiBAcGFyYW0ge09iamVjdH0gY29uZmlnMlxuICogQHJldHVybnMge09iamVjdH0gTmV3IG9iamVjdCByZXN1bHRpbmcgZnJvbSBtZXJnaW5nIGNvbmZpZzIgdG8gY29uZmlnMVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1lcmdlQ29uZmlnKGNvbmZpZzEsIGNvbmZpZzIpIHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gIGNvbmZpZzIgPSBjb25maWcyIHx8IHt9O1xuICB2YXIgY29uZmlnID0ge307XG5cbiAgdXRpbHMuZm9yRWFjaChbJ3VybCcsICdtZXRob2QnLCAncGFyYW1zJywgJ2RhdGEnXSwgZnVuY3Rpb24gdmFsdWVGcm9tQ29uZmlnMihwcm9wKSB7XG4gICAgaWYgKHR5cGVvZiBjb25maWcyW3Byb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMltwcm9wXTtcbiAgICB9XG4gIH0pO1xuXG4gIHV0aWxzLmZvckVhY2goWydoZWFkZXJzJywgJ2F1dGgnLCAncHJveHknXSwgZnVuY3Rpb24gbWVyZ2VEZWVwUHJvcGVydGllcyhwcm9wKSB7XG4gICAgaWYgKHV0aWxzLmlzT2JqZWN0KGNvbmZpZzJbcHJvcF0pKSB7XG4gICAgICBjb25maWdbcHJvcF0gPSB1dGlscy5kZWVwTWVyZ2UoY29uZmlnMVtwcm9wXSwgY29uZmlnMltwcm9wXSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnMltwcm9wXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbmZpZ1twcm9wXSA9IGNvbmZpZzJbcHJvcF07XG4gICAgfSBlbHNlIGlmICh1dGlscy5pc09iamVjdChjb25maWcxW3Byb3BdKSkge1xuICAgICAgY29uZmlnW3Byb3BdID0gdXRpbHMuZGVlcE1lcmdlKGNvbmZpZzFbcHJvcF0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNvbmZpZzFbcHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25maWdbcHJvcF0gPSBjb25maWcxW3Byb3BdO1xuICAgIH1cbiAgfSk7XG5cbiAgdXRpbHMuZm9yRWFjaChbXG4gICAgJ2Jhc2VVUkwnLCAndHJhbnNmb3JtUmVxdWVzdCcsICd0cmFuc2Zvcm1SZXNwb25zZScsICdwYXJhbXNTZXJpYWxpemVyJyxcbiAgICAndGltZW91dCcsICd3aXRoQ3JlZGVudGlhbHMnLCAnYWRhcHRlcicsICdyZXNwb25zZVR5cGUnLCAneHNyZkNvb2tpZU5hbWUnLFxuICAgICd4c3JmSGVhZGVyTmFtZScsICdvblVwbG9hZFByb2dyZXNzJywgJ29uRG93bmxvYWRQcm9ncmVzcycsICdtYXhDb250ZW50TGVuZ3RoJyxcbiAgICAndmFsaWRhdGVTdGF0dXMnLCAnbWF4UmVkaXJlY3RzJywgJ2h0dHBBZ2VudCcsICdodHRwc0FnZW50JywgJ2NhbmNlbFRva2VuJyxcbiAgICAnc29ja2V0UGF0aCdcbiAgXSwgZnVuY3Rpb24gZGVmYXVsdFRvQ29uZmlnMihwcm9wKSB7XG4gICAgaWYgKHR5cGVvZiBjb25maWcyW3Byb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMltwcm9wXTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWcxW3Byb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uZmlnW3Byb3BdID0gY29uZmlnMVtwcm9wXTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBjb25maWc7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jb3JlL21lcmdlQ29uZmlnLmpzXG4vLyBtb2R1bGUgaWQgPSAzNTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEEgYENhbmNlbGAgaXMgYW4gb2JqZWN0IHRoYXQgaXMgdGhyb3duIHdoZW4gYW4gb3BlcmF0aW9uIGlzIGNhbmNlbGVkLlxuICpcbiAqIEBjbGFzc1xuICogQHBhcmFtIHtzdHJpbmc9fSBtZXNzYWdlIFRoZSBtZXNzYWdlLlxuICovXG5mdW5jdGlvbiBDYW5jZWwobWVzc2FnZSkge1xuICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xufVxuXG5DYW5jZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gIHJldHVybiAnQ2FuY2VsJyArICh0aGlzLm1lc3NhZ2UgPyAnOiAnICsgdGhpcy5tZXNzYWdlIDogJycpO1xufTtcblxuQ2FuY2VsLnByb3RvdHlwZS5fX0NBTkNFTF9fID0gdHJ1ZTtcblxubW9kdWxlLmV4cG9ydHMgPSBDYW5jZWw7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2NhbmNlbC9DYW5jZWwuanNcbi8vIG1vZHVsZSBpZCA9IDM1MlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBDYW5jZWwgPSByZXF1aXJlKCcuL0NhbmNlbCcpO1xuXG4vKipcbiAqIEEgYENhbmNlbFRva2VuYCBpcyBhbiBvYmplY3QgdGhhdCBjYW4gYmUgdXNlZCB0byByZXF1ZXN0IGNhbmNlbGxhdGlvbiBvZiBhbiBvcGVyYXRpb24uXG4gKlxuICogQGNsYXNzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBleGVjdXRvciBUaGUgZXhlY3V0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIENhbmNlbFRva2VuKGV4ZWN1dG9yKSB7XG4gIGlmICh0eXBlb2YgZXhlY3V0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdleGVjdXRvciBtdXN0IGJlIGEgZnVuY3Rpb24uJyk7XG4gIH1cblxuICB2YXIgcmVzb2x2ZVByb21pc2U7XG4gIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIHByb21pc2VFeGVjdXRvcihyZXNvbHZlKSB7XG4gICAgcmVzb2x2ZVByb21pc2UgPSByZXNvbHZlO1xuICB9KTtcblxuICB2YXIgdG9rZW4gPSB0aGlzO1xuICBleGVjdXRvcihmdW5jdGlvbiBjYW5jZWwobWVzc2FnZSkge1xuICAgIGlmICh0b2tlbi5yZWFzb24pIHtcbiAgICAgIC8vIENhbmNlbGxhdGlvbiBoYXMgYWxyZWFkeSBiZWVuIHJlcXVlc3RlZFxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRva2VuLnJlYXNvbiA9IG5ldyBDYW5jZWwobWVzc2FnZSk7XG4gICAgcmVzb2x2ZVByb21pc2UodG9rZW4ucmVhc29uKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVGhyb3dzIGEgYENhbmNlbGAgaWYgY2FuY2VsbGF0aW9uIGhhcyBiZWVuIHJlcXVlc3RlZC5cbiAqL1xuQ2FuY2VsVG9rZW4ucHJvdG90eXBlLnRocm93SWZSZXF1ZXN0ZWQgPSBmdW5jdGlvbiB0aHJvd0lmUmVxdWVzdGVkKCkge1xuICBpZiAodGhpcy5yZWFzb24pIHtcbiAgICB0aHJvdyB0aGlzLnJlYXNvbjtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIGEgbmV3IGBDYW5jZWxUb2tlbmAgYW5kIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsXG4gKiBjYW5jZWxzIHRoZSBgQ2FuY2VsVG9rZW5gLlxuICovXG5DYW5jZWxUb2tlbi5zb3VyY2UgPSBmdW5jdGlvbiBzb3VyY2UoKSB7XG4gIHZhciBjYW5jZWw7XG4gIHZhciB0b2tlbiA9IG5ldyBDYW5jZWxUb2tlbihmdW5jdGlvbiBleGVjdXRvcihjKSB7XG4gICAgY2FuY2VsID0gYztcbiAgfSk7XG4gIHJldHVybiB7XG4gICAgdG9rZW46IHRva2VuLFxuICAgIGNhbmNlbDogY2FuY2VsXG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbmNlbFRva2VuO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2F4aW9zL2xpYi9jYW5jZWwvQ2FuY2VsVG9rZW4uanNcbi8vIG1vZHVsZSBpZCA9IDM1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbi8qKlxuICogU3ludGFjdGljIHN1Z2FyIGZvciBpbnZva2luZyBhIGZ1bmN0aW9uIGFuZCBleHBhbmRpbmcgYW4gYXJyYXkgZm9yIGFyZ3VtZW50cy5cbiAqXG4gKiBDb21tb24gdXNlIGNhc2Ugd291bGQgYmUgdG8gdXNlIGBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHlgLlxuICpcbiAqICBgYGBqc1xuICogIGZ1bmN0aW9uIGYoeCwgeSwgeikge31cbiAqICB2YXIgYXJncyA9IFsxLCAyLCAzXTtcbiAqICBmLmFwcGx5KG51bGwsIGFyZ3MpO1xuICogIGBgYFxuICpcbiAqIFdpdGggYHNwcmVhZGAgdGhpcyBleGFtcGxlIGNhbiBiZSByZS13cml0dGVuLlxuICpcbiAqICBgYGBqc1xuICogIHNwcmVhZChmdW5jdGlvbih4LCB5LCB6KSB7fSkoWzEsIDIsIDNdKTtcbiAqICBgYGBcbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHNwcmVhZChjYWxsYmFjaykge1xuICByZXR1cm4gZnVuY3Rpb24gd3JhcChhcnIpIHtcbiAgICByZXR1cm4gY2FsbGJhY2suYXBwbHkobnVsbCwgYXJyKTtcbiAgfTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vYXhpb3MvbGliL2hlbHBlcnMvc3ByZWFkLmpzXG4vLyBtb2R1bGUgaWQgPSAzNTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzLmVuY29kZSA9IHJlcXVpcmUoJy4vZW5jb2RlJyk7XG5leHBvcnRzLmRlY29kZSA9IHJlcXVpcmUoJy4vZGVjb2RlJyk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vZ2VvYnVmL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVuY29kZTtcblxudmFyIGtleXMsIGtleXNOdW0sIGtleXNBcnIsIGRpbSwgZSxcbiAgICBtYXhQcmVjaXNpb24gPSAxZTY7XG5cbnZhciBnZW9tZXRyeVR5cGVzID0ge1xuICAgICdQb2ludCc6IDAsXG4gICAgJ011bHRpUG9pbnQnOiAxLFxuICAgICdMaW5lU3RyaW5nJzogMixcbiAgICAnTXVsdGlMaW5lU3RyaW5nJzogMyxcbiAgICAnUG9seWdvbic6IDQsXG4gICAgJ011bHRpUG9seWdvbic6IDUsXG4gICAgJ0dlb21ldHJ5Q29sbGVjdGlvbic6IDZcbn07XG5cbmZ1bmN0aW9uIGVuY29kZShvYmosIHBiZikge1xuICAgIGtleXMgPSB7fTtcbiAgICBrZXlzQXJyID0gW107XG4gICAga2V5c051bSA9IDA7XG4gICAgZGltID0gMDtcbiAgICBlID0gMTtcblxuICAgIGFuYWx5emUob2JqKTtcblxuICAgIGUgPSBNYXRoLm1pbihlLCBtYXhQcmVjaXNpb24pO1xuICAgIHZhciBwcmVjaXNpb24gPSBNYXRoLmNlaWwoTWF0aC5sb2coZSkgLyBNYXRoLkxOMTApO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlzQXJyLmxlbmd0aDsgaSsrKSBwYmYud3JpdGVTdHJpbmdGaWVsZCgxLCBrZXlzQXJyW2ldKTtcbiAgICBpZiAoZGltICE9PSAyKSBwYmYud3JpdGVWYXJpbnRGaWVsZCgyLCBkaW0pO1xuICAgIGlmIChwcmVjaXNpb24gIT09IDYpIHBiZi53cml0ZVZhcmludEZpZWxkKDMsIHByZWNpc2lvbik7XG5cbiAgICBpZiAob2JqLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHBiZi53cml0ZU1lc3NhZ2UoNCwgd3JpdGVGZWF0dXJlQ29sbGVjdGlvbiwgb2JqKTtcbiAgICBlbHNlIGlmIChvYmoudHlwZSA9PT0gJ0ZlYXR1cmUnKSBwYmYud3JpdGVNZXNzYWdlKDUsIHdyaXRlRmVhdHVyZSwgb2JqKTtcbiAgICBlbHNlIHBiZi53cml0ZU1lc3NhZ2UoNiwgd3JpdGVHZW9tZXRyeSwgb2JqKTtcblxuICAgIGtleXMgPSBudWxsO1xuXG4gICAgcmV0dXJuIHBiZi5maW5pc2goKTtcbn1cblxuZnVuY3Rpb24gYW5hbHl6ZShvYmopIHtcbiAgICB2YXIgaSwga2V5O1xuXG4gICAgaWYgKG9iai50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBvYmouZmVhdHVyZXMubGVuZ3RoOyBpKyspIGFuYWx5emUob2JqLmZlYXR1cmVzW2ldKTtcblxuICAgIH0gZWxzZSBpZiAob2JqLnR5cGUgPT09ICdGZWF0dXJlJykge1xuICAgICAgICBpZiAob2JqLmdlb21ldHJ5ICE9PSBudWxsKSBhbmFseXplKG9iai5nZW9tZXRyeSk7XG4gICAgICAgIGZvciAoa2V5IGluIG9iai5wcm9wZXJ0aWVzKSBzYXZlS2V5KGtleSk7XG5cbiAgICB9IGVsc2UgaWYgKG9iai50eXBlID09PSAnUG9pbnQnKSBhbmFseXplUG9pbnQob2JqLmNvb3JkaW5hdGVzKTtcbiAgICBlbHNlIGlmIChvYmoudHlwZSA9PT0gJ011bHRpUG9pbnQnKSBhbmFseXplUG9pbnRzKG9iai5jb29yZGluYXRlcyk7XG4gICAgZWxzZSBpZiAob2JqLnR5cGUgPT09ICdHZW9tZXRyeUNvbGxlY3Rpb24nKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBvYmouZ2VvbWV0cmllcy5sZW5ndGg7IGkrKykgYW5hbHl6ZShvYmouZ2VvbWV0cmllc1tpXSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG9iai50eXBlID09PSAnTGluZVN0cmluZycpIGFuYWx5emVQb2ludHMob2JqLmNvb3JkaW5hdGVzKTtcbiAgICBlbHNlIGlmIChvYmoudHlwZSA9PT0gJ1BvbHlnb24nIHx8IG9iai50eXBlID09PSAnTXVsdGlMaW5lU3RyaW5nJykgYW5hbHl6ZU11bHRpTGluZShvYmouY29vcmRpbmF0ZXMpO1xuICAgIGVsc2UgaWYgKG9iai50eXBlID09PSAnTXVsdGlQb2x5Z29uJykge1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgb2JqLmNvb3JkaW5hdGVzLmxlbmd0aDsgaSsrKSBhbmFseXplTXVsdGlMaW5lKG9iai5jb29yZGluYXRlc1tpXSk7XG4gICAgfVxuXG4gICAgZm9yIChrZXkgaW4gb2JqKSB7XG4gICAgICAgIGlmICghaXNTcGVjaWFsS2V5KGtleSwgb2JqLnR5cGUpKSBzYXZlS2V5KGtleSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhbmFseXplTXVsdGlMaW5lKGNvb3Jkcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSBhbmFseXplUG9pbnRzKGNvb3Jkc1tpXSk7XG59XG5cbmZ1bmN0aW9uIGFuYWx5emVQb2ludHMoY29vcmRzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb29yZHMubGVuZ3RoOyBpKyspIGFuYWx5emVQb2ludChjb29yZHNbaV0pO1xufVxuXG5mdW5jdGlvbiBhbmFseXplUG9pbnQocG9pbnQpIHtcbiAgICBkaW0gPSBNYXRoLm1heChkaW0sIHBvaW50Lmxlbmd0aCk7XG5cbiAgICAvLyBmaW5kIG1heCBwcmVjaXNpb25cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBvaW50Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHdoaWxlIChNYXRoLnJvdW5kKHBvaW50W2ldICogZSkgLyBlICE9PSBwb2ludFtpXSAmJiBlIDwgbWF4UHJlY2lzaW9uKSBlICo9IDEwO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2F2ZUtleShrZXkpIHtcbiAgICBpZiAoa2V5c1trZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAga2V5c0Fyci5wdXNoKGtleSk7XG4gICAgICAgIGtleXNba2V5XSA9IGtleXNOdW0rKztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHdyaXRlRmVhdHVyZUNvbGxlY3Rpb24ob2JqLCBwYmYpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iai5mZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBwYmYud3JpdGVNZXNzYWdlKDEsIHdyaXRlRmVhdHVyZSwgb2JqLmZlYXR1cmVzW2ldKTtcbiAgICB9XG4gICAgd3JpdGVQcm9wcyhvYmosIHBiZiwgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRmVhdHVyZShmZWF0dXJlLCBwYmYpIHtcbiAgICBpZiAoZmVhdHVyZS5nZW9tZXRyeSAhPT0gbnVsbCkgcGJmLndyaXRlTWVzc2FnZSgxLCB3cml0ZUdlb21ldHJ5LCBmZWF0dXJlLmdlb21ldHJ5KTtcblxuICAgIGlmIChmZWF0dXJlLmlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmZWF0dXJlLmlkID09PSAnbnVtYmVyJyAmJiBmZWF0dXJlLmlkICUgMSA9PT0gMCkgcGJmLndyaXRlU1ZhcmludEZpZWxkKDEyLCBmZWF0dXJlLmlkKTtcbiAgICAgICAgZWxzZSBwYmYud3JpdGVTdHJpbmdGaWVsZCgxMSwgZmVhdHVyZS5pZCk7XG4gICAgfVxuXG4gICAgaWYgKGZlYXR1cmUucHJvcGVydGllcykgd3JpdGVQcm9wcyhmZWF0dXJlLnByb3BlcnRpZXMsIHBiZik7XG4gICAgd3JpdGVQcm9wcyhmZWF0dXJlLCBwYmYsIHRydWUpO1xufVxuXG5mdW5jdGlvbiB3cml0ZUdlb21ldHJ5KGdlb20sIHBiZikge1xuICAgIHBiZi53cml0ZVZhcmludEZpZWxkKDEsIGdlb21ldHJ5VHlwZXNbZ2VvbS50eXBlXSk7XG5cbiAgICB2YXIgY29vcmRzID0gZ2VvbS5jb29yZGluYXRlcztcblxuICAgIGlmIChnZW9tLnR5cGUgPT09ICdQb2ludCcpIHdyaXRlUG9pbnQoY29vcmRzLCBwYmYpO1xuICAgIGVsc2UgaWYgKGdlb20udHlwZSA9PT0gJ011bHRpUG9pbnQnKSB3cml0ZUxpbmUoY29vcmRzLCBwYmYsIHRydWUpO1xuICAgIGVsc2UgaWYgKGdlb20udHlwZSA9PT0gJ0xpbmVTdHJpbmcnKSB3cml0ZUxpbmUoY29vcmRzLCBwYmYpO1xuICAgIGVsc2UgaWYgKGdlb20udHlwZSA9PT0gJ011bHRpTGluZVN0cmluZycpIHdyaXRlTXVsdGlMaW5lKGNvb3JkcywgcGJmKTtcbiAgICBlbHNlIGlmIChnZW9tLnR5cGUgPT09ICdQb2x5Z29uJykgd3JpdGVNdWx0aUxpbmUoY29vcmRzLCBwYmYsIHRydWUpO1xuICAgIGVsc2UgaWYgKGdlb20udHlwZSA9PT0gJ011bHRpUG9seWdvbicpIHdyaXRlTXVsdGlQb2x5Z29uKGNvb3JkcywgcGJmKTtcbiAgICBlbHNlIGlmIChnZW9tLnR5cGUgPT09ICdHZW9tZXRyeUNvbGxlY3Rpb24nKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2VvbS5nZW9tZXRyaWVzLmxlbmd0aDsgaSsrKSBwYmYud3JpdGVNZXNzYWdlKDQsIHdyaXRlR2VvbWV0cnksIGdlb20uZ2VvbWV0cmllc1tpXSk7XG4gICAgfVxuXG4gICAgd3JpdGVQcm9wcyhnZW9tLCBwYmYsIHRydWUpO1xufVxuXG5mdW5jdGlvbiB3cml0ZVByb3BzKHByb3BzLCBwYmYsIGlzQ3VzdG9tKSB7XG4gICAgdmFyIGluZGV4ZXMgPSBbXSxcbiAgICAgICAgdmFsdWVJbmRleCA9IDA7XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHtcbiAgICAgICAgaWYgKGlzQ3VzdG9tICYmIGlzU3BlY2lhbEtleShrZXksIHByb3BzLnR5cGUpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBwYmYud3JpdGVNZXNzYWdlKDEzLCB3cml0ZVZhbHVlLCBwcm9wc1trZXldKTtcbiAgICAgICAgaW5kZXhlcy5wdXNoKGtleXNba2V5XSk7XG4gICAgICAgIGluZGV4ZXMucHVzaCh2YWx1ZUluZGV4KyspO1xuICAgIH1cbiAgICBwYmYud3JpdGVQYWNrZWRWYXJpbnQoaXNDdXN0b20gPyAxNSA6IDE0LCBpbmRleGVzKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVWYWx1ZSh2YWx1ZSwgcGJmKSB7XG4gICAgaWYgKHZhbHVlID09PSBudWxsKSByZXR1cm47XG5cbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuICAgIGlmICh0eXBlID09PSAnc3RyaW5nJykgcGJmLndyaXRlU3RyaW5nRmllbGQoMSwgdmFsdWUpO1xuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdib29sZWFuJykgcGJmLndyaXRlQm9vbGVhbkZpZWxkKDUsIHZhbHVlKTtcbiAgICBlbHNlIGlmICh0eXBlID09PSAnb2JqZWN0JykgcGJmLndyaXRlU3RyaW5nRmllbGQoNiwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICBlbHNlIGlmICh0eXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICBpZiAodmFsdWUgJSAxICE9PSAwKSBwYmYud3JpdGVEb3VibGVGaWVsZCgyLCB2YWx1ZSk7XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID49IDApIHBiZi53cml0ZVZhcmludEZpZWxkKDMsIHZhbHVlKTtcbiAgICAgICAgZWxzZSBwYmYud3JpdGVWYXJpbnRGaWVsZCg0LCAtdmFsdWUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gd3JpdGVQb2ludChwb2ludCwgcGJmKSB7XG4gICAgdmFyIGNvb3JkcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltOyBpKyspIGNvb3Jkcy5wdXNoKE1hdGgucm91bmQocG9pbnRbaV0gKiBlKSk7XG4gICAgcGJmLndyaXRlUGFja2VkU1ZhcmludCgzLCBjb29yZHMpO1xufVxuXG5mdW5jdGlvbiB3cml0ZUxpbmUobGluZSwgcGJmKSB7XG4gICAgdmFyIGNvb3JkcyA9IFtdO1xuICAgIHBvcHVsYXRlTGluZShjb29yZHMsIGxpbmUpO1xuICAgIHBiZi53cml0ZVBhY2tlZFNWYXJpbnQoMywgY29vcmRzKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVNdWx0aUxpbmUobGluZXMsIHBiZiwgY2xvc2VkKSB7XG4gICAgdmFyIGxlbiA9IGxpbmVzLmxlbmd0aCxcbiAgICAgICAgaTtcbiAgICBpZiAobGVuICE9PSAxKSB7XG4gICAgICAgIHZhciBsZW5ndGhzID0gW107XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgbGVuZ3Rocy5wdXNoKGxpbmVzW2ldLmxlbmd0aCAtIChjbG9zZWQgPyAxIDogMCkpO1xuICAgICAgICBwYmYud3JpdGVQYWNrZWRWYXJpbnQoMiwgbGVuZ3Rocyk7XG4gICAgICAgIC8vIFRPRE8gZmFzdGVyIHdpdGggY3VzdG9tIHdyaXRlTWVzc2FnZT9cbiAgICB9XG4gICAgdmFyIGNvb3JkcyA9IFtdO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykgcG9wdWxhdGVMaW5lKGNvb3JkcywgbGluZXNbaV0sIGNsb3NlZCk7XG4gICAgcGJmLndyaXRlUGFja2VkU1ZhcmludCgzLCBjb29yZHMpO1xufVxuXG5mdW5jdGlvbiB3cml0ZU11bHRpUG9seWdvbihwb2x5Z29ucywgcGJmKSB7XG4gICAgdmFyIGxlbiA9IHBvbHlnb25zLmxlbmd0aCxcbiAgICAgICAgaSwgajtcbiAgICBpZiAobGVuICE9PSAxIHx8IHBvbHlnb25zWzBdLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICB2YXIgbGVuZ3RocyA9IFtsZW5dO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGxlbmd0aHMucHVzaChwb2x5Z29uc1tpXS5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IHBvbHlnb25zW2ldLmxlbmd0aDsgaisrKSBsZW5ndGhzLnB1c2gocG9seWdvbnNbaV1bal0ubGVuZ3RoIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgcGJmLndyaXRlUGFja2VkVmFyaW50KDIsIGxlbmd0aHMpO1xuICAgIH1cblxuICAgIHZhciBjb29yZHMgPSBbXTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IHBvbHlnb25zW2ldLmxlbmd0aDsgaisrKSBwb3B1bGF0ZUxpbmUoY29vcmRzLCBwb2x5Z29uc1tpXVtqXSwgdHJ1ZSk7XG4gICAgfVxuICAgIHBiZi53cml0ZVBhY2tlZFNWYXJpbnQoMywgY29vcmRzKTtcbn1cblxuZnVuY3Rpb24gcG9wdWxhdGVMaW5lKGNvb3JkcywgbGluZSwgY2xvc2VkKSB7XG4gICAgdmFyIGksIGosXG4gICAgICAgIGxlbiA9IGxpbmUubGVuZ3RoIC0gKGNsb3NlZCA/IDEgOiAwKSxcbiAgICAgICAgc3VtID0gbmV3IEFycmF5KGRpbSk7XG4gICAgZm9yIChqID0gMDsgaiA8IGRpbTsgaisrKSBzdW1bal0gPSAwO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBmb3IgKGogPSAwOyBqIDwgZGltOyBqKyspIHtcbiAgICAgICAgICAgIHZhciBuID0gTWF0aC5yb3VuZChsaW5lW2ldW2pdICogZSkgLSBzdW1bal07XG4gICAgICAgICAgICBjb29yZHMucHVzaChuKTtcbiAgICAgICAgICAgIHN1bVtqXSArPSBuO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc1NwZWNpYWxLZXkoa2V5LCB0eXBlKSB7XG4gICAgaWYgKGtleSA9PT0gJ3R5cGUnKSByZXR1cm4gdHJ1ZTtcbiAgICBlbHNlIGlmICh0eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB7XG4gICAgICAgIGlmIChrZXkgPT09ICdmZWF0dXJlcycpIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ0ZlYXR1cmUnKSB7XG4gICAgICAgIGlmIChrZXkgPT09ICdpZCcgfHwga2V5ID09PSAncHJvcGVydGllcycgfHwga2V5ID09PSAnZ2VvbWV0cnknKSByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdHZW9tZXRyeUNvbGxlY3Rpb24nKSB7XG4gICAgICAgIGlmIChrZXkgPT09ICdnZW9tZXRyaWVzJykgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChrZXkgPT09ICdjb29yZGluYXRlcycpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9nZW9idWYvZW5jb2RlLmpzXG4vLyBtb2R1bGUgaWQgPSAzNTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGRlY29kZTtcblxudmFyIGtleXMsIHZhbHVlcywgbGVuZ3RocywgZGltLCBlO1xuXG52YXIgZ2VvbWV0cnlUeXBlcyA9IFtcbiAgICAnUG9pbnQnLCAnTXVsdGlQb2ludCcsICdMaW5lU3RyaW5nJywgJ011bHRpTGluZVN0cmluZycsXG4gICAgJ1BvbHlnb24nLCAnTXVsdGlQb2x5Z29uJywgJ0dlb21ldHJ5Q29sbGVjdGlvbiddO1xuXG5mdW5jdGlvbiBkZWNvZGUocGJmKSB7XG4gICAgZGltID0gMjtcbiAgICBlID0gTWF0aC5wb3coMTAsIDYpO1xuICAgIGxlbmd0aHMgPSBudWxsO1xuXG4gICAga2V5cyA9IFtdO1xuICAgIHZhbHVlcyA9IFtdO1xuICAgIHZhciBvYmogPSBwYmYucmVhZEZpZWxkcyhyZWFkRGF0YUZpZWxkLCB7fSk7XG4gICAga2V5cyA9IG51bGw7XG5cbiAgICByZXR1cm4gb2JqO1xufVxuXG5mdW5jdGlvbiByZWFkRGF0YUZpZWxkKHRhZywgb2JqLCBwYmYpIHtcbiAgICBpZiAodGFnID09PSAxKSBrZXlzLnB1c2gocGJmLnJlYWRTdHJpbmcoKSk7XG4gICAgZWxzZSBpZiAodGFnID09PSAyKSBkaW0gPSBwYmYucmVhZFZhcmludCgpO1xuICAgIGVsc2UgaWYgKHRhZyA9PT0gMykgZSA9IE1hdGgucG93KDEwLCBwYmYucmVhZFZhcmludCgpKTtcblxuICAgIGVsc2UgaWYgKHRhZyA9PT0gNCkgcmVhZEZlYXR1cmVDb2xsZWN0aW9uKHBiZiwgb2JqKTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDUpIHJlYWRGZWF0dXJlKHBiZiwgb2JqKTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDYpIHJlYWRHZW9tZXRyeShwYmYsIG9iaik7XG59XG5cbmZ1bmN0aW9uIHJlYWRGZWF0dXJlQ29sbGVjdGlvbihwYmYsIG9iaikge1xuICAgIG9iai50eXBlID0gJ0ZlYXR1cmVDb2xsZWN0aW9uJztcbiAgICBvYmouZmVhdHVyZXMgPSBbXTtcbiAgICByZXR1cm4gcGJmLnJlYWRNZXNzYWdlKHJlYWRGZWF0dXJlQ29sbGVjdGlvbkZpZWxkLCBvYmopO1xufVxuXG5mdW5jdGlvbiByZWFkRmVhdHVyZShwYmYsIGZlYXR1cmUpIHtcbiAgICBmZWF0dXJlLnR5cGUgPSAnRmVhdHVyZSc7XG4gICAgdmFyIGYgPSBwYmYucmVhZE1lc3NhZ2UocmVhZEZlYXR1cmVGaWVsZCwgZmVhdHVyZSk7XG4gICAgaWYgKCFmLmhhc093blByb3BlcnR5KCdnZW9tZXRyeScpKSBmLmdlb21ldHJ5ID0gbnVsbDtcbiAgICByZXR1cm4gZjtcbn1cblxuZnVuY3Rpb24gcmVhZEdlb21ldHJ5KHBiZiwgZ2VvbSkge1xuICAgIHJldHVybiBwYmYucmVhZE1lc3NhZ2UocmVhZEdlb21ldHJ5RmllbGQsIGdlb20pO1xufVxuXG5mdW5jdGlvbiByZWFkRmVhdHVyZUNvbGxlY3Rpb25GaWVsZCh0YWcsIG9iaiwgcGJmKSB7XG4gICAgaWYgKHRhZyA9PT0gMSkgb2JqLmZlYXR1cmVzLnB1c2gocmVhZEZlYXR1cmUocGJmLCB7fSkpO1xuXG4gICAgZWxzZSBpZiAodGFnID09PSAxMykgdmFsdWVzLnB1c2gocmVhZFZhbHVlKHBiZikpO1xuICAgIGVsc2UgaWYgKHRhZyA9PT0gMTUpIHJlYWRQcm9wcyhwYmYsIG9iaik7XG59XG5cbmZ1bmN0aW9uIHJlYWRGZWF0dXJlRmllbGQodGFnLCBmZWF0dXJlLCBwYmYpIHtcbiAgICBpZiAodGFnID09PSAxKSBmZWF0dXJlLmdlb21ldHJ5ID0gcmVhZEdlb21ldHJ5KHBiZiwge30pO1xuXG4gICAgZWxzZSBpZiAodGFnID09PSAxMSkgZmVhdHVyZS5pZCA9IHBiZi5yZWFkU3RyaW5nKCk7XG4gICAgZWxzZSBpZiAodGFnID09PSAxMikgZmVhdHVyZS5pZCA9IHBiZi5yZWFkU1ZhcmludCgpO1xuXG4gICAgZWxzZSBpZiAodGFnID09PSAxMykgdmFsdWVzLnB1c2gocmVhZFZhbHVlKHBiZikpO1xuICAgIGVsc2UgaWYgKHRhZyA9PT0gMTQpIGZlYXR1cmUucHJvcGVydGllcyA9IHJlYWRQcm9wcyhwYmYsIHt9KTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDE1KSByZWFkUHJvcHMocGJmLCBmZWF0dXJlKTtcbn1cblxuZnVuY3Rpb24gcmVhZEdlb21ldHJ5RmllbGQodGFnLCBnZW9tLCBwYmYpIHtcbiAgICBpZiAodGFnID09PSAxKSBnZW9tLnR5cGUgPSBnZW9tZXRyeVR5cGVzW3BiZi5yZWFkVmFyaW50KCldO1xuXG4gICAgZWxzZSBpZiAodGFnID09PSAyKSBsZW5ndGhzID0gcGJmLnJlYWRQYWNrZWRWYXJpbnQoKTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDMpIHJlYWRDb29yZHMoZ2VvbSwgcGJmLCBnZW9tLnR5cGUpO1xuICAgIGVsc2UgaWYgKHRhZyA9PT0gNCkge1xuICAgICAgICBnZW9tLmdlb21ldHJpZXMgPSBnZW9tLmdlb21ldHJpZXMgfHwgW107XG4gICAgICAgIGdlb20uZ2VvbWV0cmllcy5wdXNoKHJlYWRHZW9tZXRyeShwYmYsIHt9KSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRhZyA9PT0gMTMpIHZhbHVlcy5wdXNoKHJlYWRWYWx1ZShwYmYpKTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDE1KSByZWFkUHJvcHMocGJmLCBnZW9tKTtcbn1cblxuZnVuY3Rpb24gcmVhZENvb3JkcyhnZW9tLCBwYmYsIHR5cGUpIHtcbiAgICBpZiAodHlwZSA9PT0gJ1BvaW50JykgZ2VvbS5jb29yZGluYXRlcyA9IHJlYWRQb2ludChwYmYpO1xuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdNdWx0aVBvaW50JykgZ2VvbS5jb29yZGluYXRlcyA9IHJlYWRMaW5lKHBiZiwgdHJ1ZSk7XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ0xpbmVTdHJpbmcnKSBnZW9tLmNvb3JkaW5hdGVzID0gcmVhZExpbmUocGJmKTtcbiAgICBlbHNlIGlmICh0eXBlID09PSAnTXVsdGlMaW5lU3RyaW5nJykgZ2VvbS5jb29yZGluYXRlcyA9IHJlYWRNdWx0aUxpbmUocGJmKTtcbiAgICBlbHNlIGlmICh0eXBlID09PSAnUG9seWdvbicpIGdlb20uY29vcmRpbmF0ZXMgPSByZWFkTXVsdGlMaW5lKHBiZiwgdHJ1ZSk7XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ011bHRpUG9seWdvbicpIGdlb20uY29vcmRpbmF0ZXMgPSByZWFkTXVsdGlQb2x5Z29uKHBiZik7XG59XG5cbmZ1bmN0aW9uIHJlYWRWYWx1ZShwYmYpIHtcbiAgICB2YXIgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3MsXG4gICAgICAgIHZhbHVlID0gbnVsbDtcblxuICAgIHdoaWxlIChwYmYucG9zIDwgZW5kKSB7XG4gICAgICAgIHZhciB2YWwgPSBwYmYucmVhZFZhcmludCgpLFxuICAgICAgICAgICAgdGFnID0gdmFsID4+IDM7XG5cbiAgICAgICAgaWYgKHRhZyA9PT0gMSkgdmFsdWUgPSBwYmYucmVhZFN0cmluZygpO1xuICAgICAgICBlbHNlIGlmICh0YWcgPT09IDIpIHZhbHVlID0gcGJmLnJlYWREb3VibGUoKTtcbiAgICAgICAgZWxzZSBpZiAodGFnID09PSAzKSB2YWx1ZSA9IHBiZi5yZWFkVmFyaW50KCk7XG4gICAgICAgIGVsc2UgaWYgKHRhZyA9PT0gNCkgdmFsdWUgPSAtcGJmLnJlYWRWYXJpbnQoKTtcbiAgICAgICAgZWxzZSBpZiAodGFnID09PSA1KSB2YWx1ZSA9IHBiZi5yZWFkQm9vbGVhbigpO1xuICAgICAgICBlbHNlIGlmICh0YWcgPT09IDYpIHZhbHVlID0gSlNPTi5wYXJzZShwYmYucmVhZFN0cmluZygpKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiByZWFkUHJvcHMocGJmLCBwcm9wcykge1xuICAgIHZhciBlbmQgPSBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcztcbiAgICB3aGlsZSAocGJmLnBvcyA8IGVuZCkgcHJvcHNba2V5c1twYmYucmVhZFZhcmludCgpXV0gPSB2YWx1ZXNbcGJmLnJlYWRWYXJpbnQoKV07XG4gICAgdmFsdWVzID0gW107XG4gICAgcmV0dXJuIHByb3BzO1xufVxuXG5mdW5jdGlvbiByZWFkUG9pbnQocGJmKSB7XG4gICAgdmFyIGVuZCA9IHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zLFxuICAgICAgICBjb29yZHMgPSBbXTtcbiAgICB3aGlsZSAocGJmLnBvcyA8IGVuZCkgY29vcmRzLnB1c2gocGJmLnJlYWRTVmFyaW50KCkgLyBlKTtcbiAgICByZXR1cm4gY29vcmRzO1xufVxuXG5mdW5jdGlvbiByZWFkTGluZVBhcnQocGJmLCBlbmQsIGxlbiwgY2xvc2VkKSB7XG4gICAgdmFyIGkgPSAwLFxuICAgICAgICBjb29yZHMgPSBbXSxcbiAgICAgICAgcCwgZDtcblxuICAgIHZhciBwcmV2UCA9IFtdO1xuICAgIGZvciAoZCA9IDA7IGQgPCBkaW07IGQrKykgcHJldlBbZF0gPSAwO1xuXG4gICAgd2hpbGUgKGxlbiA/IGkgPCBsZW4gOiBwYmYucG9zIDwgZW5kKSB7XG4gICAgICAgIHAgPSBbXTtcbiAgICAgICAgZm9yIChkID0gMDsgZCA8IGRpbTsgZCsrKSB7XG4gICAgICAgICAgICBwcmV2UFtkXSArPSBwYmYucmVhZFNWYXJpbnQoKTtcbiAgICAgICAgICAgIHBbZF0gPSBwcmV2UFtkXSAvIGU7XG4gICAgICAgIH1cbiAgICAgICAgY29vcmRzLnB1c2gocCk7XG4gICAgICAgIGkrKztcbiAgICB9XG4gICAgaWYgKGNsb3NlZCkgY29vcmRzLnB1c2goY29vcmRzWzBdKTtcblxuICAgIHJldHVybiBjb29yZHM7XG59XG5cbmZ1bmN0aW9uIHJlYWRMaW5lKHBiZikge1xuICAgIHJldHVybiByZWFkTGluZVBhcnQocGJmLCBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcyk7XG59XG5cbmZ1bmN0aW9uIHJlYWRNdWx0aUxpbmUocGJmLCBjbG9zZWQpIHtcbiAgICB2YXIgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3M7XG4gICAgaWYgKCFsZW5ndGhzKSByZXR1cm4gW3JlYWRMaW5lUGFydChwYmYsIGVuZCwgbnVsbCwgY2xvc2VkKV07XG5cbiAgICB2YXIgY29vcmRzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGhzLmxlbmd0aDsgaSsrKSBjb29yZHMucHVzaChyZWFkTGluZVBhcnQocGJmLCBlbmQsIGxlbmd0aHNbaV0sIGNsb3NlZCkpO1xuICAgIGxlbmd0aHMgPSBudWxsO1xuICAgIHJldHVybiBjb29yZHM7XG59XG5cbmZ1bmN0aW9uIHJlYWRNdWx0aVBvbHlnb24ocGJmKSB7XG4gICAgdmFyIGVuZCA9IHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zO1xuICAgIGlmICghbGVuZ3RocykgcmV0dXJuIFtbcmVhZExpbmVQYXJ0KHBiZiwgZW5kLCBudWxsLCB0cnVlKV1dO1xuXG4gICAgdmFyIGNvb3JkcyA9IFtdO1xuICAgIHZhciBqID0gMTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aHNbMF07IGkrKykge1xuICAgICAgICB2YXIgcmluZ3MgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBsZW5ndGhzW2pdOyBrKyspIHJpbmdzLnB1c2gocmVhZExpbmVQYXJ0KHBiZiwgZW5kLCBsZW5ndGhzW2ogKyAxICsga10sIHRydWUpKTtcbiAgICAgICAgaiArPSBsZW5ndGhzW2pdICsgMTtcbiAgICAgICAgY29vcmRzLnB1c2gocmluZ3MpO1xuICAgIH1cbiAgICBsZW5ndGhzID0gbnVsbDtcbiAgICByZXR1cm4gY29vcmRzO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L2dlb2J1Zi9kZWNvZGUuanNcbi8vIG1vZHVsZSBpZCA9IDM1N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gUGJmO1xuXG52YXIgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKTtcblxuZnVuY3Rpb24gUGJmKGJ1Zikge1xuICAgIHRoaXMuYnVmID0gQXJyYXlCdWZmZXIuaXNWaWV3ICYmIEFycmF5QnVmZmVyLmlzVmlldyhidWYpID8gYnVmIDogbmV3IFVpbnQ4QXJyYXkoYnVmIHx8IDApO1xuICAgIHRoaXMucG9zID0gMDtcbiAgICB0aGlzLnR5cGUgPSAwO1xuICAgIHRoaXMubGVuZ3RoID0gdGhpcy5idWYubGVuZ3RoO1xufVxuXG5QYmYuVmFyaW50ICA9IDA7IC8vIHZhcmludDogaW50MzIsIGludDY0LCB1aW50MzIsIHVpbnQ2NCwgc2ludDMyLCBzaW50NjQsIGJvb2wsIGVudW1cblBiZi5GaXhlZDY0ID0gMTsgLy8gNjQtYml0OiBkb3VibGUsIGZpeGVkNjQsIHNmaXhlZDY0XG5QYmYuQnl0ZXMgICA9IDI7IC8vIGxlbmd0aC1kZWxpbWl0ZWQ6IHN0cmluZywgYnl0ZXMsIGVtYmVkZGVkIG1lc3NhZ2VzLCBwYWNrZWQgcmVwZWF0ZWQgZmllbGRzXG5QYmYuRml4ZWQzMiA9IDU7IC8vIDMyLWJpdDogZmxvYXQsIGZpeGVkMzIsIHNmaXhlZDMyXG5cbnZhciBTSElGVF9MRUZUXzMyID0gKDEgPDwgMTYpICogKDEgPDwgMTYpLFxuICAgIFNISUZUX1JJR0hUXzMyID0gMSAvIFNISUZUX0xFRlRfMzI7XG5cblBiZi5wcm90b3R5cGUgPSB7XG5cbiAgICBkZXN0cm95OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5idWYgPSBudWxsO1xuICAgIH0sXG5cbiAgICAvLyA9PT0gUkVBRElORyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgcmVhZEZpZWxkczogZnVuY3Rpb24ocmVhZEZpZWxkLCByZXN1bHQsIGVuZCkge1xuICAgICAgICBlbmQgPSBlbmQgfHwgdGhpcy5sZW5ndGg7XG5cbiAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gdGhpcy5yZWFkVmFyaW50KCksXG4gICAgICAgICAgICAgICAgdGFnID0gdmFsID4+IDMsXG4gICAgICAgICAgICAgICAgc3RhcnRQb3MgPSB0aGlzLnBvcztcblxuICAgICAgICAgICAgdGhpcy50eXBlID0gdmFsICYgMHg3O1xuICAgICAgICAgICAgcmVhZEZpZWxkKHRhZywgcmVzdWx0LCB0aGlzKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucG9zID09PSBzdGFydFBvcykgdGhpcy5za2lwKHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgcmVhZE1lc3NhZ2U6IGZ1bmN0aW9uKHJlYWRGaWVsZCwgcmVzdWx0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWRGaWVsZHMocmVhZEZpZWxkLCByZXN1bHQsIHRoaXMucmVhZFZhcmludCgpICsgdGhpcy5wb3MpO1xuICAgIH0sXG5cbiAgICByZWFkRml4ZWQzMjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2YWwgPSByZWFkVUludDMyKHRoaXMuYnVmLCB0aGlzLnBvcyk7XG4gICAgICAgIHRoaXMucG9zICs9IDQ7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfSxcblxuICAgIHJlYWRTRml4ZWQzMjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2YWwgPSByZWFkSW50MzIodGhpcy5idWYsIHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9LFxuXG4gICAgLy8gNjQtYml0IGludCBoYW5kbGluZyBpcyBiYXNlZCBvbiBnaXRodWIuY29tL2Rwdy9ub2RlLWJ1ZmZlci1tb3JlLWludHMgKE1JVC1saWNlbnNlZClcblxuICAgIHJlYWRGaXhlZDY0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbCA9IHJlYWRVSW50MzIodGhpcy5idWYsIHRoaXMucG9zKSArIHJlYWRVSW50MzIodGhpcy5idWYsIHRoaXMucG9zICsgNCkgKiBTSElGVF9MRUZUXzMyO1xuICAgICAgICB0aGlzLnBvcyArPSA4O1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH0sXG5cbiAgICByZWFkU0ZpeGVkNjQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmFsID0gcmVhZFVJbnQzMih0aGlzLmJ1ZiwgdGhpcy5wb3MpICsgcmVhZEludDMyKHRoaXMuYnVmLCB0aGlzLnBvcyArIDQpICogU0hJRlRfTEVGVF8zMjtcbiAgICAgICAgdGhpcy5wb3MgKz0gODtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9LFxuXG4gICAgcmVhZEZsb2F0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbCA9IGllZWU3NTQucmVhZCh0aGlzLmJ1ZiwgdGhpcy5wb3MsIHRydWUsIDIzLCA0KTtcbiAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9LFxuXG4gICAgcmVhZERvdWJsZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2YWwgPSBpZWVlNzU0LnJlYWQodGhpcy5idWYsIHRoaXMucG9zLCB0cnVlLCA1MiwgOCk7XG4gICAgICAgIHRoaXMucG9zICs9IDg7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfSxcblxuICAgIHJlYWRWYXJpbnQ6IGZ1bmN0aW9uKGlzU2lnbmVkKSB7XG4gICAgICAgIHZhciBidWYgPSB0aGlzLmJ1ZixcbiAgICAgICAgICAgIHZhbCwgYjtcblxuICAgICAgICBiID0gYnVmW3RoaXMucG9zKytdOyB2YWwgID0gIGIgJiAweDdmOyAgICAgICAgaWYgKGIgPCAweDgwKSByZXR1cm4gdmFsO1xuICAgICAgICBiID0gYnVmW3RoaXMucG9zKytdOyB2YWwgfD0gKGIgJiAweDdmKSA8PCA3OyAgaWYgKGIgPCAweDgwKSByZXR1cm4gdmFsO1xuICAgICAgICBiID0gYnVmW3RoaXMucG9zKytdOyB2YWwgfD0gKGIgJiAweDdmKSA8PCAxNDsgaWYgKGIgPCAweDgwKSByZXR1cm4gdmFsO1xuICAgICAgICBiID0gYnVmW3RoaXMucG9zKytdOyB2YWwgfD0gKGIgJiAweDdmKSA8PCAyMTsgaWYgKGIgPCAweDgwKSByZXR1cm4gdmFsO1xuICAgICAgICBiID0gYnVmW3RoaXMucG9zXTsgICB2YWwgfD0gKGIgJiAweDBmKSA8PCAyODtcblxuICAgICAgICByZXR1cm4gcmVhZFZhcmludFJlbWFpbmRlcih2YWwsIGlzU2lnbmVkLCB0aGlzKTtcbiAgICB9LFxuXG4gICAgcmVhZFZhcmludDY0OiBmdW5jdGlvbigpIHsgLy8gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCB2Mi4wLjFcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZFZhcmludCh0cnVlKTtcbiAgICB9LFxuXG4gICAgcmVhZFNWYXJpbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgbnVtID0gdGhpcy5yZWFkVmFyaW50KCk7XG4gICAgICAgIHJldHVybiBudW0gJSAyID09PSAxID8gKG51bSArIDEpIC8gLTIgOiBudW0gLyAyOyAvLyB6aWd6YWcgZW5jb2RpbmdcbiAgICB9LFxuXG4gICAgcmVhZEJvb2xlYW46IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLnJlYWRWYXJpbnQoKSk7XG4gICAgfSxcblxuICAgIHJlYWRTdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgZW5kID0gdGhpcy5yZWFkVmFyaW50KCkgKyB0aGlzLnBvcyxcbiAgICAgICAgICAgIHN0ciA9IHJlYWRVdGY4KHRoaXMuYnVmLCB0aGlzLnBvcywgZW5kKTtcbiAgICAgICAgdGhpcy5wb3MgPSBlbmQ7XG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgfSxcblxuICAgIHJlYWRCeXRlczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBlbmQgPSB0aGlzLnJlYWRWYXJpbnQoKSArIHRoaXMucG9zLFxuICAgICAgICAgICAgYnVmZmVyID0gdGhpcy5idWYuc3ViYXJyYXkodGhpcy5wb3MsIGVuZCk7XG4gICAgICAgIHRoaXMucG9zID0gZW5kO1xuICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH0sXG5cbiAgICAvLyB2ZXJib3NlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zOyBkb2Vzbid0IGFmZmVjdCBnemlwcGVkIHNpemVcblxuICAgIHJlYWRQYWNrZWRWYXJpbnQ6IGZ1bmN0aW9uKGFyciwgaXNTaWduZWQpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkVmFyaW50KGlzU2lnbmVkKSk7XG4gICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuICAgICAgICBhcnIgPSBhcnIgfHwgW107XG4gICAgICAgIHdoaWxlICh0aGlzLnBvcyA8IGVuZCkgYXJyLnB1c2godGhpcy5yZWFkVmFyaW50KGlzU2lnbmVkKSk7XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgfSxcbiAgICByZWFkUGFja2VkU1ZhcmludDogZnVuY3Rpb24oYXJyKSB7XG4gICAgICAgIGlmICh0aGlzLnR5cGUgIT09IFBiZi5CeXRlcykgcmV0dXJuIGFyci5wdXNoKHRoaXMucmVhZFNWYXJpbnQoKSk7XG4gICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuICAgICAgICBhcnIgPSBhcnIgfHwgW107XG4gICAgICAgIHdoaWxlICh0aGlzLnBvcyA8IGVuZCkgYXJyLnB1c2godGhpcy5yZWFkU1ZhcmludCgpKTtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9LFxuICAgIHJlYWRQYWNrZWRCb29sZWFuOiBmdW5jdGlvbihhcnIpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkQm9vbGVhbigpKTtcbiAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG4gICAgICAgIGFyciA9IGFyciB8fCBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRCb29sZWFuKCkpO1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH0sXG4gICAgcmVhZFBhY2tlZEZsb2F0OiBmdW5jdGlvbihhcnIpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkRmxvYXQoKSk7XG4gICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuICAgICAgICBhcnIgPSBhcnIgfHwgW107XG4gICAgICAgIHdoaWxlICh0aGlzLnBvcyA8IGVuZCkgYXJyLnB1c2godGhpcy5yZWFkRmxvYXQoKSk7XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgfSxcbiAgICByZWFkUGFja2VkRG91YmxlOiBmdW5jdGlvbihhcnIpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkRG91YmxlKCkpO1xuICAgICAgICB2YXIgZW5kID0gcmVhZFBhY2tlZEVuZCh0aGlzKTtcbiAgICAgICAgYXJyID0gYXJyIHx8IFtdO1xuICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZERvdWJsZSgpKTtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9LFxuICAgIHJlYWRQYWNrZWRGaXhlZDMyOiBmdW5jdGlvbihhcnIpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkRml4ZWQzMigpKTtcbiAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG4gICAgICAgIGFyciA9IGFyciB8fCBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRGaXhlZDMyKCkpO1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH0sXG4gICAgcmVhZFBhY2tlZFNGaXhlZDMyOiBmdW5jdGlvbihhcnIpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkU0ZpeGVkMzIoKSk7XG4gICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuICAgICAgICBhcnIgPSBhcnIgfHwgW107XG4gICAgICAgIHdoaWxlICh0aGlzLnBvcyA8IGVuZCkgYXJyLnB1c2godGhpcy5yZWFkU0ZpeGVkMzIoKSk7XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgfSxcbiAgICByZWFkUGFja2VkRml4ZWQ2NDogZnVuY3Rpb24oYXJyKSB7XG4gICAgICAgIGlmICh0aGlzLnR5cGUgIT09IFBiZi5CeXRlcykgcmV0dXJuIGFyci5wdXNoKHRoaXMucmVhZEZpeGVkNjQoKSk7XG4gICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuICAgICAgICBhcnIgPSBhcnIgfHwgW107XG4gICAgICAgIHdoaWxlICh0aGlzLnBvcyA8IGVuZCkgYXJyLnB1c2godGhpcy5yZWFkRml4ZWQ2NCgpKTtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9LFxuICAgIHJlYWRQYWNrZWRTRml4ZWQ2NDogZnVuY3Rpb24oYXJyKSB7XG4gICAgICAgIGlmICh0aGlzLnR5cGUgIT09IFBiZi5CeXRlcykgcmV0dXJuIGFyci5wdXNoKHRoaXMucmVhZFNGaXhlZDY0KCkpO1xuICAgICAgICB2YXIgZW5kID0gcmVhZFBhY2tlZEVuZCh0aGlzKTtcbiAgICAgICAgYXJyID0gYXJyIHx8IFtdO1xuICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZFNGaXhlZDY0KCkpO1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH0sXG5cbiAgICBza2lwOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgdmFyIHR5cGUgPSB2YWwgJiAweDc7XG4gICAgICAgIGlmICh0eXBlID09PSBQYmYuVmFyaW50KSB3aGlsZSAodGhpcy5idWZbdGhpcy5wb3MrK10gPiAweDdmKSB7fVxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSBQYmYuQnl0ZXMpIHRoaXMucG9zID0gdGhpcy5yZWFkVmFyaW50KCkgKyB0aGlzLnBvcztcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gUGJmLkZpeGVkMzIpIHRoaXMucG9zICs9IDQ7XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IFBiZi5GaXhlZDY0KSB0aGlzLnBvcyArPSA4O1xuICAgICAgICBlbHNlIHRocm93IG5ldyBFcnJvcignVW5pbXBsZW1lbnRlZCB0eXBlOiAnICsgdHlwZSk7XG4gICAgfSxcblxuICAgIC8vID09PSBXUklUSU5HID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICB3cml0ZVRhZzogZnVuY3Rpb24odGFnLCB0eXBlKSB7XG4gICAgICAgIHRoaXMud3JpdGVWYXJpbnQoKHRhZyA8PCAzKSB8IHR5cGUpO1xuICAgIH0sXG5cbiAgICByZWFsbG9jOiBmdW5jdGlvbihtaW4pIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDE2O1xuXG4gICAgICAgIHdoaWxlIChsZW5ndGggPCB0aGlzLnBvcyArIG1pbikgbGVuZ3RoICo9IDI7XG5cbiAgICAgICAgaWYgKGxlbmd0aCAhPT0gdGhpcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBidWYgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICAgICAgICAgICAgYnVmLnNldCh0aGlzLmJ1Zik7XG4gICAgICAgICAgICB0aGlzLmJ1ZiA9IGJ1ZjtcbiAgICAgICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGZpbmlzaDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5wb3M7XG4gICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmLnN1YmFycmF5KDAsIHRoaXMubGVuZ3RoKTtcbiAgICB9LFxuXG4gICAgd3JpdGVGaXhlZDMyOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgdGhpcy5yZWFsbG9jKDQpO1xuICAgICAgICB3cml0ZUludDMyKHRoaXMuYnVmLCB2YWwsIHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICB9LFxuXG4gICAgd3JpdGVTRml4ZWQzMjogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHRoaXMucmVhbGxvYyg0KTtcbiAgICAgICAgd3JpdGVJbnQzMih0aGlzLmJ1ZiwgdmFsLCB0aGlzLnBvcyk7XG4gICAgICAgIHRoaXMucG9zICs9IDQ7XG4gICAgfSxcblxuICAgIHdyaXRlRml4ZWQ2NDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHRoaXMucmVhbGxvYyg4KTtcbiAgICAgICAgd3JpdGVJbnQzMih0aGlzLmJ1ZiwgdmFsICYgLTEsIHRoaXMucG9zKTtcbiAgICAgICAgd3JpdGVJbnQzMih0aGlzLmJ1ZiwgTWF0aC5mbG9vcih2YWwgKiBTSElGVF9SSUdIVF8zMiksIHRoaXMucG9zICsgNCk7XG4gICAgICAgIHRoaXMucG9zICs9IDg7XG4gICAgfSxcblxuICAgIHdyaXRlU0ZpeGVkNjQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICB0aGlzLnJlYWxsb2MoOCk7XG4gICAgICAgIHdyaXRlSW50MzIodGhpcy5idWYsIHZhbCAmIC0xLCB0aGlzLnBvcyk7XG4gICAgICAgIHdyaXRlSW50MzIodGhpcy5idWYsIE1hdGguZmxvb3IodmFsICogU0hJRlRfUklHSFRfMzIpLCB0aGlzLnBvcyArIDQpO1xuICAgICAgICB0aGlzLnBvcyArPSA4O1xuICAgIH0sXG5cbiAgICB3cml0ZVZhcmludDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHZhbCA9ICt2YWwgfHwgMDtcblxuICAgICAgICBpZiAodmFsID4gMHhmZmZmZmZmIHx8IHZhbCA8IDApIHtcbiAgICAgICAgICAgIHdyaXRlQmlnVmFyaW50KHZhbCwgdGhpcyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlYWxsb2MoNCk7XG5cbiAgICAgICAgdGhpcy5idWZbdGhpcy5wb3MrK10gPSAgICAgICAgICAgdmFsICYgMHg3ZiAgfCAodmFsID4gMHg3ZiA/IDB4ODAgOiAwKTsgaWYgKHZhbCA8PSAweDdmKSByZXR1cm47XG4gICAgICAgIHRoaXMuYnVmW3RoaXMucG9zKytdID0gKCh2YWwgPj4+PSA3KSAmIDB4N2YpIHwgKHZhbCA+IDB4N2YgPyAweDgwIDogMCk7IGlmICh2YWwgPD0gMHg3ZikgcmV0dXJuO1xuICAgICAgICB0aGlzLmJ1Zlt0aGlzLnBvcysrXSA9ICgodmFsID4+Pj0gNykgJiAweDdmKSB8ICh2YWwgPiAweDdmID8gMHg4MCA6IDApOyBpZiAodmFsIDw9IDB4N2YpIHJldHVybjtcbiAgICAgICAgdGhpcy5idWZbdGhpcy5wb3MrK10gPSAgICh2YWwgPj4+IDcpICYgMHg3ZjtcbiAgICB9LFxuXG4gICAgd3JpdGVTVmFyaW50OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVZhcmludCh2YWwgPCAwID8gLXZhbCAqIDIgLSAxIDogdmFsICogMik7XG4gICAgfSxcblxuICAgIHdyaXRlQm9vbGVhbjogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHRoaXMud3JpdGVWYXJpbnQoQm9vbGVhbih2YWwpKTtcbiAgICB9LFxuXG4gICAgd3JpdGVTdHJpbmc6IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICBzdHIgPSBTdHJpbmcoc3RyKTtcbiAgICAgICAgdGhpcy5yZWFsbG9jKHN0ci5sZW5ndGggKiA0KTtcblxuICAgICAgICB0aGlzLnBvcysrOyAvLyByZXNlcnZlIDEgYnl0ZSBmb3Igc2hvcnQgc3RyaW5nIGxlbmd0aFxuXG4gICAgICAgIHZhciBzdGFydFBvcyA9IHRoaXMucG9zO1xuICAgICAgICAvLyB3cml0ZSB0aGUgc3RyaW5nIGRpcmVjdGx5IHRvIHRoZSBidWZmZXIgYW5kIHNlZSBob3cgbXVjaCB3YXMgd3JpdHRlblxuICAgICAgICB0aGlzLnBvcyA9IHdyaXRlVXRmOCh0aGlzLmJ1Ziwgc3RyLCB0aGlzLnBvcyk7XG4gICAgICAgIHZhciBsZW4gPSB0aGlzLnBvcyAtIHN0YXJ0UG9zO1xuXG4gICAgICAgIGlmIChsZW4gPj0gMHg4MCkgbWFrZVJvb21Gb3JFeHRyYUxlbmd0aChzdGFydFBvcywgbGVuLCB0aGlzKTtcblxuICAgICAgICAvLyBmaW5hbGx5LCB3cml0ZSB0aGUgbWVzc2FnZSBsZW5ndGggaW4gdGhlIHJlc2VydmVkIHBsYWNlIGFuZCByZXN0b3JlIHRoZSBwb3NpdGlvblxuICAgICAgICB0aGlzLnBvcyA9IHN0YXJ0UG9zIC0gMTtcbiAgICAgICAgdGhpcy53cml0ZVZhcmludChsZW4pO1xuICAgICAgICB0aGlzLnBvcyArPSBsZW47XG4gICAgfSxcblxuICAgIHdyaXRlRmxvYXQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICB0aGlzLnJlYWxsb2MoNCk7XG4gICAgICAgIGllZWU3NTQud3JpdGUodGhpcy5idWYsIHZhbCwgdGhpcy5wb3MsIHRydWUsIDIzLCA0KTtcbiAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICB9LFxuXG4gICAgd3JpdGVEb3VibGU6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICB0aGlzLnJlYWxsb2MoOCk7XG4gICAgICAgIGllZWU3NTQud3JpdGUodGhpcy5idWYsIHZhbCwgdGhpcy5wb3MsIHRydWUsIDUyLCA4KTtcbiAgICAgICAgdGhpcy5wb3MgKz0gODtcbiAgICB9LFxuXG4gICAgd3JpdGVCeXRlczogZnVuY3Rpb24oYnVmZmVyKSB7XG4gICAgICAgIHZhciBsZW4gPSBidWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLndyaXRlVmFyaW50KGxlbik7XG4gICAgICAgIHRoaXMucmVhbGxvYyhsZW4pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB0aGlzLmJ1Zlt0aGlzLnBvcysrXSA9IGJ1ZmZlcltpXTtcbiAgICB9LFxuXG4gICAgd3JpdGVSYXdNZXNzYWdlOiBmdW5jdGlvbihmbiwgb2JqKSB7XG4gICAgICAgIHRoaXMucG9zKys7IC8vIHJlc2VydmUgMSBieXRlIGZvciBzaG9ydCBtZXNzYWdlIGxlbmd0aFxuXG4gICAgICAgIC8vIHdyaXRlIHRoZSBtZXNzYWdlIGRpcmVjdGx5IHRvIHRoZSBidWZmZXIgYW5kIHNlZSBob3cgbXVjaCB3YXMgd3JpdHRlblxuICAgICAgICB2YXIgc3RhcnRQb3MgPSB0aGlzLnBvcztcbiAgICAgICAgZm4ob2JqLCB0aGlzKTtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMucG9zIC0gc3RhcnRQb3M7XG5cbiAgICAgICAgaWYgKGxlbiA+PSAweDgwKSBtYWtlUm9vbUZvckV4dHJhTGVuZ3RoKHN0YXJ0UG9zLCBsZW4sIHRoaXMpO1xuXG4gICAgICAgIC8vIGZpbmFsbHksIHdyaXRlIHRoZSBtZXNzYWdlIGxlbmd0aCBpbiB0aGUgcmVzZXJ2ZWQgcGxhY2UgYW5kIHJlc3RvcmUgdGhlIHBvc2l0aW9uXG4gICAgICAgIHRoaXMucG9zID0gc3RhcnRQb3MgLSAxO1xuICAgICAgICB0aGlzLndyaXRlVmFyaW50KGxlbik7XG4gICAgICAgIHRoaXMucG9zICs9IGxlbjtcbiAgICB9LFxuXG4gICAgd3JpdGVNZXNzYWdlOiBmdW5jdGlvbih0YWcsIGZuLCBvYmopIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5CeXRlcyk7XG4gICAgICAgIHRoaXMud3JpdGVSYXdNZXNzYWdlKGZuLCBvYmopO1xuICAgIH0sXG5cbiAgICB3cml0ZVBhY2tlZFZhcmludDogICBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZFZhcmludCwgYXJyKTsgICB9LFxuICAgIHdyaXRlUGFja2VkU1ZhcmludDogIGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkU1ZhcmludCwgYXJyKTsgIH0sXG4gICAgd3JpdGVQYWNrZWRCb29sZWFuOiAgZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWRCb29sZWFuLCBhcnIpOyAgfSxcbiAgICB3cml0ZVBhY2tlZEZsb2F0OiAgICBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZEZsb2F0LCBhcnIpOyAgICB9LFxuICAgIHdyaXRlUGFja2VkRG91YmxlOiAgIGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkRG91YmxlLCBhcnIpOyAgIH0sXG4gICAgd3JpdGVQYWNrZWRGaXhlZDMyOiAgZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWRGaXhlZDMyLCBhcnIpOyAgfSxcbiAgICB3cml0ZVBhY2tlZFNGaXhlZDMyOiBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZFNGaXhlZDMyLCBhcnIpOyB9LFxuICAgIHdyaXRlUGFja2VkRml4ZWQ2NDogIGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkRml4ZWQ2NCwgYXJyKTsgIH0sXG4gICAgd3JpdGVQYWNrZWRTRml4ZWQ2NDogZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWRTRml4ZWQ2NCwgYXJyKTsgfSxcblxuICAgIHdyaXRlQnl0ZXNGaWVsZDogZnVuY3Rpb24odGFnLCBidWZmZXIpIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5CeXRlcyk7XG4gICAgICAgIHRoaXMud3JpdGVCeXRlcyhidWZmZXIpO1xuICAgIH0sXG4gICAgd3JpdGVGaXhlZDMyRmllbGQ6IGZ1bmN0aW9uKHRhZywgdmFsKSB7XG4gICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuRml4ZWQzMik7XG4gICAgICAgIHRoaXMud3JpdGVGaXhlZDMyKHZhbCk7XG4gICAgfSxcbiAgICB3cml0ZVNGaXhlZDMyRmllbGQ6IGZ1bmN0aW9uKHRhZywgdmFsKSB7XG4gICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuRml4ZWQzMik7XG4gICAgICAgIHRoaXMud3JpdGVTRml4ZWQzMih2YWwpO1xuICAgIH0sXG4gICAgd3JpdGVGaXhlZDY0RmllbGQ6IGZ1bmN0aW9uKHRhZywgdmFsKSB7XG4gICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuRml4ZWQ2NCk7XG4gICAgICAgIHRoaXMud3JpdGVGaXhlZDY0KHZhbCk7XG4gICAgfSxcbiAgICB3cml0ZVNGaXhlZDY0RmllbGQ6IGZ1bmN0aW9uKHRhZywgdmFsKSB7XG4gICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuRml4ZWQ2NCk7XG4gICAgICAgIHRoaXMud3JpdGVTRml4ZWQ2NCh2YWwpO1xuICAgIH0sXG4gICAgd3JpdGVWYXJpbnRGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5WYXJpbnQpO1xuICAgICAgICB0aGlzLndyaXRlVmFyaW50KHZhbCk7XG4gICAgfSxcbiAgICB3cml0ZVNWYXJpbnRGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5WYXJpbnQpO1xuICAgICAgICB0aGlzLndyaXRlU1ZhcmludCh2YWwpO1xuICAgIH0sXG4gICAgd3JpdGVTdHJpbmdGaWVsZDogZnVuY3Rpb24odGFnLCBzdHIpIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5CeXRlcyk7XG4gICAgICAgIHRoaXMud3JpdGVTdHJpbmcoc3RyKTtcbiAgICB9LFxuICAgIHdyaXRlRmxvYXRGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5GaXhlZDMyKTtcbiAgICAgICAgdGhpcy53cml0ZUZsb2F0KHZhbCk7XG4gICAgfSxcbiAgICB3cml0ZURvdWJsZUZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkZpeGVkNjQpO1xuICAgICAgICB0aGlzLndyaXRlRG91YmxlKHZhbCk7XG4gICAgfSxcbiAgICB3cml0ZUJvb2xlYW5GaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVZhcmludEZpZWxkKHRhZywgQm9vbGVhbih2YWwpKTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiByZWFkVmFyaW50UmVtYWluZGVyKGwsIHMsIHApIHtcbiAgICB2YXIgYnVmID0gcC5idWYsXG4gICAgICAgIGgsIGI7XG5cbiAgICBiID0gYnVmW3AucG9zKytdOyBoICA9IChiICYgMHg3MCkgPj4gNDsgIGlmIChiIDwgMHg4MCkgcmV0dXJuIHRvTnVtKGwsIGgsIHMpO1xuICAgIGIgPSBidWZbcC5wb3MrK107IGggfD0gKGIgJiAweDdmKSA8PCAzOyAgaWYgKGIgPCAweDgwKSByZXR1cm4gdG9OdW0obCwgaCwgcyk7XG4gICAgYiA9IGJ1ZltwLnBvcysrXTsgaCB8PSAoYiAmIDB4N2YpIDw8IDEwOyBpZiAoYiA8IDB4ODApIHJldHVybiB0b051bShsLCBoLCBzKTtcbiAgICBiID0gYnVmW3AucG9zKytdOyBoIHw9IChiICYgMHg3ZikgPDwgMTc7IGlmIChiIDwgMHg4MCkgcmV0dXJuIHRvTnVtKGwsIGgsIHMpO1xuICAgIGIgPSBidWZbcC5wb3MrK107IGggfD0gKGIgJiAweDdmKSA8PCAyNDsgaWYgKGIgPCAweDgwKSByZXR1cm4gdG9OdW0obCwgaCwgcyk7XG4gICAgYiA9IGJ1ZltwLnBvcysrXTsgaCB8PSAoYiAmIDB4MDEpIDw8IDMxOyBpZiAoYiA8IDB4ODApIHJldHVybiB0b051bShsLCBoLCBzKTtcblxuICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgdmFyaW50IG5vdCBtb3JlIHRoYW4gMTAgYnl0ZXMnKTtcbn1cblxuZnVuY3Rpb24gcmVhZFBhY2tlZEVuZChwYmYpIHtcbiAgICByZXR1cm4gcGJmLnR5cGUgPT09IFBiZi5CeXRlcyA/XG4gICAgICAgIHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zIDogcGJmLnBvcyArIDE7XG59XG5cbmZ1bmN0aW9uIHRvTnVtKGxvdywgaGlnaCwgaXNTaWduZWQpIHtcbiAgICBpZiAoaXNTaWduZWQpIHtcbiAgICAgICAgcmV0dXJuIGhpZ2ggKiAweDEwMDAwMDAwMCArIChsb3cgPj4+IDApO1xuICAgIH1cblxuICAgIHJldHVybiAoKGhpZ2ggPj4+IDApICogMHgxMDAwMDAwMDApICsgKGxvdyA+Pj4gMCk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlQmlnVmFyaW50KHZhbCwgcGJmKSB7XG4gICAgdmFyIGxvdywgaGlnaDtcblxuICAgIGlmICh2YWwgPj0gMCkge1xuICAgICAgICBsb3cgID0gKHZhbCAlIDB4MTAwMDAwMDAwKSB8IDA7XG4gICAgICAgIGhpZ2ggPSAodmFsIC8gMHgxMDAwMDAwMDApIHwgMDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBsb3cgID0gfigtdmFsICUgMHgxMDAwMDAwMDApO1xuICAgICAgICBoaWdoID0gfigtdmFsIC8gMHgxMDAwMDAwMDApO1xuXG4gICAgICAgIGlmIChsb3cgXiAweGZmZmZmZmZmKSB7XG4gICAgICAgICAgICBsb3cgPSAobG93ICsgMSkgfCAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG93ID0gMDtcbiAgICAgICAgICAgIGhpZ2ggPSAoaGlnaCArIDEpIHwgMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh2YWwgPj0gMHgxMDAwMDAwMDAwMDAwMDAwMCB8fCB2YWwgPCAtMHgxMDAwMDAwMDAwMDAwMDAwMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dpdmVuIHZhcmludCBkb2VzblxcJ3QgZml0IGludG8gMTAgYnl0ZXMnKTtcbiAgICB9XG5cbiAgICBwYmYucmVhbGxvYygxMCk7XG5cbiAgICB3cml0ZUJpZ1ZhcmludExvdyhsb3csIGhpZ2gsIHBiZik7XG4gICAgd3JpdGVCaWdWYXJpbnRIaWdoKGhpZ2gsIHBiZik7XG59XG5cbmZ1bmN0aW9uIHdyaXRlQmlnVmFyaW50TG93KGxvdywgaGlnaCwgcGJmKSB7XG4gICAgcGJmLmJ1ZltwYmYucG9zKytdID0gbG93ICYgMHg3ZiB8IDB4ODA7IGxvdyA+Pj49IDc7XG4gICAgcGJmLmJ1ZltwYmYucG9zKytdID0gbG93ICYgMHg3ZiB8IDB4ODA7IGxvdyA+Pj49IDc7XG4gICAgcGJmLmJ1ZltwYmYucG9zKytdID0gbG93ICYgMHg3ZiB8IDB4ODA7IGxvdyA+Pj49IDc7XG4gICAgcGJmLmJ1ZltwYmYucG9zKytdID0gbG93ICYgMHg3ZiB8IDB4ODA7IGxvdyA+Pj49IDc7XG4gICAgcGJmLmJ1ZltwYmYucG9zXSAgID0gbG93ICYgMHg3Zjtcbn1cblxuZnVuY3Rpb24gd3JpdGVCaWdWYXJpbnRIaWdoKGhpZ2gsIHBiZikge1xuICAgIHZhciBsc2IgPSAoaGlnaCAmIDB4MDcpIDw8IDQ7XG5cbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gfD0gbHNiICAgICAgICAgfCAoKGhpZ2ggPj4+PSAzKSA/IDB4ODAgOiAwKTsgaWYgKCFoaWdoKSByZXR1cm47XG4gICAgcGJmLmJ1ZltwYmYucG9zKytdICA9IGhpZ2ggJiAweDdmIHwgKChoaWdoID4+Pj0gNykgPyAweDgwIDogMCk7IGlmICghaGlnaCkgcmV0dXJuO1xuICAgIHBiZi5idWZbcGJmLnBvcysrXSAgPSBoaWdoICYgMHg3ZiB8ICgoaGlnaCA+Pj49IDcpID8gMHg4MCA6IDApOyBpZiAoIWhpZ2gpIHJldHVybjtcbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gID0gaGlnaCAmIDB4N2YgfCAoKGhpZ2ggPj4+PSA3KSA/IDB4ODAgOiAwKTsgaWYgKCFoaWdoKSByZXR1cm47XG4gICAgcGJmLmJ1ZltwYmYucG9zKytdICA9IGhpZ2ggJiAweDdmIHwgKChoaWdoID4+Pj0gNykgPyAweDgwIDogMCk7IGlmICghaGlnaCkgcmV0dXJuO1xuICAgIHBiZi5idWZbcGJmLnBvcysrXSAgPSBoaWdoICYgMHg3Zjtcbn1cblxuZnVuY3Rpb24gbWFrZVJvb21Gb3JFeHRyYUxlbmd0aChzdGFydFBvcywgbGVuLCBwYmYpIHtcbiAgICB2YXIgZXh0cmFMZW4gPVxuICAgICAgICBsZW4gPD0gMHgzZmZmID8gMSA6XG4gICAgICAgIGxlbiA8PSAweDFmZmZmZiA/IDIgOlxuICAgICAgICBsZW4gPD0gMHhmZmZmZmZmID8gMyA6IE1hdGguZmxvb3IoTWF0aC5sb2cobGVuKSAvIChNYXRoLkxOMiAqIDcpKTtcblxuICAgIC8vIGlmIDEgYnl0ZSBpc24ndCBlbm91Z2ggZm9yIGVuY29kaW5nIG1lc3NhZ2UgbGVuZ3RoLCBzaGlmdCB0aGUgZGF0YSB0byB0aGUgcmlnaHRcbiAgICBwYmYucmVhbGxvYyhleHRyYUxlbik7XG4gICAgZm9yICh2YXIgaSA9IHBiZi5wb3MgLSAxOyBpID49IHN0YXJ0UG9zOyBpLS0pIHBiZi5idWZbaSArIGV4dHJhTGVuXSA9IHBiZi5idWZbaV07XG59XG5cbmZ1bmN0aW9uIHdyaXRlUGFja2VkVmFyaW50KGFyciwgcGJmKSAgIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZVZhcmludChhcnJbaV0pOyAgIH1cbmZ1bmN0aW9uIHdyaXRlUGFja2VkU1ZhcmludChhcnIsIHBiZikgIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZVNWYXJpbnQoYXJyW2ldKTsgIH1cbmZ1bmN0aW9uIHdyaXRlUGFja2VkRmxvYXQoYXJyLCBwYmYpICAgIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZUZsb2F0KGFycltpXSk7ICAgIH1cbmZ1bmN0aW9uIHdyaXRlUGFja2VkRG91YmxlKGFyciwgcGJmKSAgIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZURvdWJsZShhcnJbaV0pOyAgIH1cbmZ1bmN0aW9uIHdyaXRlUGFja2VkQm9vbGVhbihhcnIsIHBiZikgIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZUJvb2xlYW4oYXJyW2ldKTsgIH1cbmZ1bmN0aW9uIHdyaXRlUGFja2VkRml4ZWQzMihhcnIsIHBiZikgIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZUZpeGVkMzIoYXJyW2ldKTsgIH1cbmZ1bmN0aW9uIHdyaXRlUGFja2VkU0ZpeGVkMzIoYXJyLCBwYmYpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZVNGaXhlZDMyKGFycltpXSk7IH1cbmZ1bmN0aW9uIHdyaXRlUGFja2VkRml4ZWQ2NChhcnIsIHBiZikgIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZUZpeGVkNjQoYXJyW2ldKTsgIH1cbmZ1bmN0aW9uIHdyaXRlUGFja2VkU0ZpeGVkNjQoYXJyLCBwYmYpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHBiZi53cml0ZVNGaXhlZDY0KGFycltpXSk7IH1cblxuLy8gQnVmZmVyIGNvZGUgYmVsb3cgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlciwgTUlULWxpY2Vuc2VkXG5cbmZ1bmN0aW9uIHJlYWRVSW50MzIoYnVmLCBwb3MpIHtcbiAgICByZXR1cm4gKChidWZbcG9zXSkgfFxuICAgICAgICAoYnVmW3BvcyArIDFdIDw8IDgpIHxcbiAgICAgICAgKGJ1Zltwb3MgKyAyXSA8PCAxNikpICtcbiAgICAgICAgKGJ1Zltwb3MgKyAzXSAqIDB4MTAwMDAwMCk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlSW50MzIoYnVmLCB2YWwsIHBvcykge1xuICAgIGJ1Zltwb3NdID0gdmFsO1xuICAgIGJ1Zltwb3MgKyAxXSA9ICh2YWwgPj4+IDgpO1xuICAgIGJ1Zltwb3MgKyAyXSA9ICh2YWwgPj4+IDE2KTtcbiAgICBidWZbcG9zICsgM10gPSAodmFsID4+PiAyNCk7XG59XG5cbmZ1bmN0aW9uIHJlYWRJbnQzMihidWYsIHBvcykge1xuICAgIHJldHVybiAoKGJ1Zltwb3NdKSB8XG4gICAgICAgIChidWZbcG9zICsgMV0gPDwgOCkgfFxuICAgICAgICAoYnVmW3BvcyArIDJdIDw8IDE2KSkgK1xuICAgICAgICAoYnVmW3BvcyArIDNdIDw8IDI0KTtcbn1cblxuZnVuY3Rpb24gcmVhZFV0ZjgoYnVmLCBwb3MsIGVuZCkge1xuICAgIHZhciBzdHIgPSAnJztcbiAgICB2YXIgaSA9IHBvcztcblxuICAgIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgICAgIHZhciBiMCA9IGJ1ZltpXTtcbiAgICAgICAgdmFyIGMgPSBudWxsOyAvLyBjb2RlcG9pbnRcbiAgICAgICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPVxuICAgICAgICAgICAgYjAgPiAweEVGID8gNCA6XG4gICAgICAgICAgICBiMCA+IDB4REYgPyAzIDpcbiAgICAgICAgICAgIGIwID4gMHhCRiA/IDIgOiAxO1xuXG4gICAgICAgIGlmIChpICsgYnl0ZXNQZXJTZXF1ZW5jZSA+IGVuZCkgYnJlYWs7XG5cbiAgICAgICAgdmFyIGIxLCBiMiwgYjM7XG5cbiAgICAgICAgaWYgKGJ5dGVzUGVyU2VxdWVuY2UgPT09IDEpIHtcbiAgICAgICAgICAgIGlmIChiMCA8IDB4ODApIHtcbiAgICAgICAgICAgICAgICBjID0gYjA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYnl0ZXNQZXJTZXF1ZW5jZSA9PT0gMikge1xuICAgICAgICAgICAgYjEgPSBidWZbaSArIDFdO1xuICAgICAgICAgICAgaWYgKChiMSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICAgICAgYyA9IChiMCAmIDB4MUYpIDw8IDB4NiB8IChiMSAmIDB4M0YpO1xuICAgICAgICAgICAgICAgIGlmIChjIDw9IDB4N0YpIHtcbiAgICAgICAgICAgICAgICAgICAgYyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGJ5dGVzUGVyU2VxdWVuY2UgPT09IDMpIHtcbiAgICAgICAgICAgIGIxID0gYnVmW2kgKyAxXTtcbiAgICAgICAgICAgIGIyID0gYnVmW2kgKyAyXTtcbiAgICAgICAgICAgIGlmICgoYjEgJiAweEMwKSA9PT0gMHg4MCAmJiAoYjIgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgICAgIGMgPSAoYjAgJiAweEYpIDw8IDB4QyB8IChiMSAmIDB4M0YpIDw8IDB4NiB8IChiMiAmIDB4M0YpO1xuICAgICAgICAgICAgICAgIGlmIChjIDw9IDB4N0ZGIHx8IChjID49IDB4RDgwMCAmJiBjIDw9IDB4REZGRikpIHtcbiAgICAgICAgICAgICAgICAgICAgYyA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGJ5dGVzUGVyU2VxdWVuY2UgPT09IDQpIHtcbiAgICAgICAgICAgIGIxID0gYnVmW2kgKyAxXTtcbiAgICAgICAgICAgIGIyID0gYnVmW2kgKyAyXTtcbiAgICAgICAgICAgIGIzID0gYnVmW2kgKyAzXTtcbiAgICAgICAgICAgIGlmICgoYjEgJiAweEMwKSA9PT0gMHg4MCAmJiAoYjIgJiAweEMwKSA9PT0gMHg4MCAmJiAoYjMgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgICAgIGMgPSAoYjAgJiAweEYpIDw8IDB4MTIgfCAoYjEgJiAweDNGKSA8PCAweEMgfCAoYjIgJiAweDNGKSA8PCAweDYgfCAoYjMgJiAweDNGKTtcbiAgICAgICAgICAgICAgICBpZiAoYyA8PSAweEZGRkYgfHwgYyA+PSAweDExMDAwMCkge1xuICAgICAgICAgICAgICAgICAgICBjID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgYyA9IDB4RkZGRDtcbiAgICAgICAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoYyA+IDB4RkZGRikge1xuICAgICAgICAgICAgYyAtPSAweDEwMDAwO1xuICAgICAgICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMCk7XG4gICAgICAgICAgICBjID0gMHhEQzAwIHwgYyAmIDB4M0ZGO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7XG4gICAgICAgIGkgKz0gYnl0ZXNQZXJTZXF1ZW5jZTtcbiAgICB9XG5cbiAgICByZXR1cm4gc3RyO1xufVxuXG5mdW5jdGlvbiB3cml0ZVV0ZjgoYnVmLCBzdHIsIHBvcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBjLCBsZWFkOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTsgLy8gY29kZSBwb2ludFxuXG4gICAgICAgIGlmIChjID4gMHhEN0ZGICYmIGMgPCAweEUwMDApIHtcbiAgICAgICAgICAgIGlmIChsZWFkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGMgPCAweERDMDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4RUY7XG4gICAgICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSAweEJGO1xuICAgICAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gMHhCRDtcbiAgICAgICAgICAgICAgICAgICAgbGVhZCA9IGM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBsZWFkIC0gMHhEODAwIDw8IDEwIHwgYyAtIDB4REMwMCB8IDB4MTAwMDA7XG4gICAgICAgICAgICAgICAgICAgIGxlYWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGMgPiAweERCRkYgfHwgKGkgKyAxID09PSBzdHIubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gMHhFRjtcbiAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4QkY7XG4gICAgICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSAweEJEO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxlYWQgPSBjO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChsZWFkKSB7XG4gICAgICAgICAgICBidWZbcG9zKytdID0gMHhFRjtcbiAgICAgICAgICAgIGJ1Zltwb3MrK10gPSAweEJGO1xuICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4QkQ7XG4gICAgICAgICAgICBsZWFkID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjIDwgMHg4MCkge1xuICAgICAgICAgICAgYnVmW3BvcysrXSA9IGM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoYyA8IDB4ODAwKSB7XG4gICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IGMgPj4gMHg2IHwgMHhDMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGMgPCAweDEwMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSBjID4+IDB4QyB8IDB4RTA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IGMgPj4gMHgxMiB8IDB4RjA7XG4gICAgICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSBjID4+IDB4QyAmIDB4M0YgfCAweDgwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gYyA+PiAweDYgJiAweDNGIHwgMHg4MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1Zltwb3MrK10gPSBjICYgMHgzRiB8IDB4ODA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvcztcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9wYmYvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDM1OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnRzLnJlYWQgPSBmdW5jdGlvbiAoYnVmZmVyLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbVxuICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgbkJpdHMgPSAtN1xuICB2YXIgaSA9IGlzTEUgPyAobkJ5dGVzIC0gMSkgOiAwXG4gIHZhciBkID0gaXNMRSA/IC0xIDogMVxuICB2YXIgcyA9IGJ1ZmZlcltvZmZzZXQgKyBpXVxuXG4gIGkgKz0gZFxuXG4gIGUgPSBzICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIHMgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IGVMZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgZSA9IChlICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIGUgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IG1MZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IChtICogMjU2KSArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIGlmIChlID09PSAwKSB7XG4gICAgZSA9IDEgLSBlQmlhc1xuICB9IGVsc2UgaWYgKGUgPT09IGVNYXgpIHtcbiAgICByZXR1cm4gbSA/IE5hTiA6ICgocyA/IC0xIDogMSkgKiBJbmZpbml0eSlcbiAgfSBlbHNlIHtcbiAgICBtID0gbSArIE1hdGgucG93KDIsIG1MZW4pXG4gICAgZSA9IGUgLSBlQmlhc1xuICB9XG4gIHJldHVybiAocyA/IC0xIDogMSkgKiBtICogTWF0aC5wb3coMiwgZSAtIG1MZW4pXG59XG5cbmV4cG9ydHMud3JpdGUgPSBmdW5jdGlvbiAoYnVmZmVyLCB2YWx1ZSwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG0sIGNcbiAgdmFyIGVMZW4gPSAobkJ5dGVzICogOCkgLSBtTGVuIC0gMVxuICB2YXIgZU1heCA9ICgxIDw8IGVMZW4pIC0gMVxuICB2YXIgZUJpYXMgPSBlTWF4ID4+IDFcbiAgdmFyIHJ0ID0gKG1MZW4gPT09IDIzID8gTWF0aC5wb3coMiwgLTI0KSAtIE1hdGgucG93KDIsIC03NykgOiAwKVxuICB2YXIgaSA9IGlzTEUgPyAwIDogKG5CeXRlcyAtIDEpXG4gIHZhciBkID0gaXNMRSA/IDEgOiAtMVxuICB2YXIgcyA9IHZhbHVlIDwgMCB8fCAodmFsdWUgPT09IDAgJiYgMSAvIHZhbHVlIDwgMCkgPyAxIDogMFxuXG4gIHZhbHVlID0gTWF0aC5hYnModmFsdWUpXG5cbiAgaWYgKGlzTmFOKHZhbHVlKSB8fCB2YWx1ZSA9PT0gSW5maW5pdHkpIHtcbiAgICBtID0gaXNOYU4odmFsdWUpID8gMSA6IDBcbiAgICBlID0gZU1heFxuICB9IGVsc2Uge1xuICAgIGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4yKVxuICAgIGlmICh2YWx1ZSAqIChjID0gTWF0aC5wb3coMiwgLWUpKSA8IDEpIHtcbiAgICAgIGUtLVxuICAgICAgYyAqPSAyXG4gICAgfVxuICAgIGlmIChlICsgZUJpYXMgPj0gMSkge1xuICAgICAgdmFsdWUgKz0gcnQgLyBjXG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlICs9IHJ0ICogTWF0aC5wb3coMiwgMSAtIGVCaWFzKVxuICAgIH1cbiAgICBpZiAodmFsdWUgKiBjID49IDIpIHtcbiAgICAgIGUrK1xuICAgICAgYyAvPSAyXG4gICAgfVxuXG4gICAgaWYgKGUgKyBlQmlhcyA+PSBlTWF4KSB7XG4gICAgICBtID0gMFxuICAgICAgZSA9IGVNYXhcbiAgICB9IGVsc2UgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICBtID0gKCh2YWx1ZSAqIGMpIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IGUgKyBlQmlhc1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSAwXG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtXG4gIGVMZW4gKz0gbUxlblxuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vaWVlZTc1NC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMzU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzLlZlY3RvclRpbGUgPSByZXF1aXJlKCcuL2xpYi92ZWN0b3J0aWxlLmpzJyk7XG5tb2R1bGUuZXhwb3J0cy5WZWN0b3JUaWxlRmVhdHVyZSA9IHJlcXVpcmUoJy4vbGliL3ZlY3RvcnRpbGVmZWF0dXJlLmpzJyk7XG5tb2R1bGUuZXhwb3J0cy5WZWN0b3JUaWxlTGF5ZXIgPSByZXF1aXJlKCcuL2xpYi92ZWN0b3J0aWxlbGF5ZXIuanMnKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9AbWFwYm94L3ZlY3Rvci10aWxlL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAzNjBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgVmVjdG9yVGlsZUxheWVyID0gcmVxdWlyZSgnLi92ZWN0b3J0aWxlbGF5ZXInKTtcblxubW9kdWxlLmV4cG9ydHMgPSBWZWN0b3JUaWxlO1xuXG5mdW5jdGlvbiBWZWN0b3JUaWxlKHBiZiwgZW5kKSB7XG4gICAgdGhpcy5sYXllcnMgPSBwYmYucmVhZEZpZWxkcyhyZWFkVGlsZSwge30sIGVuZCk7XG59XG5cbmZ1bmN0aW9uIHJlYWRUaWxlKHRhZywgbGF5ZXJzLCBwYmYpIHtcbiAgICBpZiAodGFnID09PSAzKSB7XG4gICAgICAgIHZhciBsYXllciA9IG5ldyBWZWN0b3JUaWxlTGF5ZXIocGJmLCBwYmYucmVhZFZhcmludCgpICsgcGJmLnBvcyk7XG4gICAgICAgIGlmIChsYXllci5sZW5ndGgpIGxheWVyc1tsYXllci5uYW1lXSA9IGxheWVyO1xuICAgIH1cbn1cblxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L0BtYXBib3gvdmVjdG9yLXRpbGUvbGliL3ZlY3RvcnRpbGUuanNcbi8vIG1vZHVsZSBpZCA9IDM2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBWZWN0b3JUaWxlRmVhdHVyZSA9IHJlcXVpcmUoJy4vdmVjdG9ydGlsZWZlYXR1cmUuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBWZWN0b3JUaWxlTGF5ZXI7XG5cbmZ1bmN0aW9uIFZlY3RvclRpbGVMYXllcihwYmYsIGVuZCkge1xuICAgIC8vIFB1YmxpY1xuICAgIHRoaXMudmVyc2lvbiA9IDE7XG4gICAgdGhpcy5uYW1lID0gbnVsbDtcbiAgICB0aGlzLmV4dGVudCA9IDQwOTY7XG4gICAgdGhpcy5sZW5ndGggPSAwO1xuXG4gICAgLy8gUHJpdmF0ZVxuICAgIHRoaXMuX3BiZiA9IHBiZjtcbiAgICB0aGlzLl9rZXlzID0gW107XG4gICAgdGhpcy5fdmFsdWVzID0gW107XG4gICAgdGhpcy5fZmVhdHVyZXMgPSBbXTtcblxuICAgIHBiZi5yZWFkRmllbGRzKHJlYWRMYXllciwgdGhpcywgZW5kKTtcblxuICAgIHRoaXMubGVuZ3RoID0gdGhpcy5fZmVhdHVyZXMubGVuZ3RoO1xufVxuXG5mdW5jdGlvbiByZWFkTGF5ZXIodGFnLCBsYXllciwgcGJmKSB7XG4gICAgaWYgKHRhZyA9PT0gMTUpIGxheWVyLnZlcnNpb24gPSBwYmYucmVhZFZhcmludCgpO1xuICAgIGVsc2UgaWYgKHRhZyA9PT0gMSkgbGF5ZXIubmFtZSA9IHBiZi5yZWFkU3RyaW5nKCk7XG4gICAgZWxzZSBpZiAodGFnID09PSA1KSBsYXllci5leHRlbnQgPSBwYmYucmVhZFZhcmludCgpO1xuICAgIGVsc2UgaWYgKHRhZyA9PT0gMikgbGF5ZXIuX2ZlYXR1cmVzLnB1c2gocGJmLnBvcyk7XG4gICAgZWxzZSBpZiAodGFnID09PSAzKSBsYXllci5fa2V5cy5wdXNoKHBiZi5yZWFkU3RyaW5nKCkpO1xuICAgIGVsc2UgaWYgKHRhZyA9PT0gNCkgbGF5ZXIuX3ZhbHVlcy5wdXNoKHJlYWRWYWx1ZU1lc3NhZ2UocGJmKSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRWYWx1ZU1lc3NhZ2UocGJmKSB7XG4gICAgdmFyIHZhbHVlID0gbnVsbCxcbiAgICAgICAgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3M7XG5cbiAgICB3aGlsZSAocGJmLnBvcyA8IGVuZCkge1xuICAgICAgICB2YXIgdGFnID0gcGJmLnJlYWRWYXJpbnQoKSA+PiAzO1xuXG4gICAgICAgIHZhbHVlID0gdGFnID09PSAxID8gcGJmLnJlYWRTdHJpbmcoKSA6XG4gICAgICAgICAgICB0YWcgPT09IDIgPyBwYmYucmVhZEZsb2F0KCkgOlxuICAgICAgICAgICAgdGFnID09PSAzID8gcGJmLnJlYWREb3VibGUoKSA6XG4gICAgICAgICAgICB0YWcgPT09IDQgPyBwYmYucmVhZFZhcmludDY0KCkgOlxuICAgICAgICAgICAgdGFnID09PSA1ID8gcGJmLnJlYWRWYXJpbnQoKSA6XG4gICAgICAgICAgICB0YWcgPT09IDYgPyBwYmYucmVhZFNWYXJpbnQoKSA6XG4gICAgICAgICAgICB0YWcgPT09IDcgPyBwYmYucmVhZEJvb2xlYW4oKSA6IG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG4vLyByZXR1cm4gZmVhdHVyZSBgaWAgZnJvbSB0aGlzIGxheWVyIGFzIGEgYFZlY3RvclRpbGVGZWF0dXJlYFxuVmVjdG9yVGlsZUxheWVyLnByb3RvdHlwZS5mZWF0dXJlID0gZnVuY3Rpb24oaSkge1xuICAgIGlmIChpIDwgMCB8fCBpID49IHRoaXMuX2ZlYXR1cmVzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKCdmZWF0dXJlIGluZGV4IG91dCBvZiBib3VuZHMnKTtcblxuICAgIHRoaXMuX3BiZi5wb3MgPSB0aGlzLl9mZWF0dXJlc1tpXTtcblxuICAgIHZhciBlbmQgPSB0aGlzLl9wYmYucmVhZFZhcmludCgpICsgdGhpcy5fcGJmLnBvcztcbiAgICByZXR1cm4gbmV3IFZlY3RvclRpbGVGZWF0dXJlKHRoaXMuX3BiZiwgZW5kLCB0aGlzLmV4dGVudCwgdGhpcy5fa2V5cywgdGhpcy5fdmFsdWVzKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL34vQG1hcGJveC92ZWN0b3ItdGlsZS9saWIvdmVjdG9ydGlsZWxheWVyLmpzXG4vLyBtb2R1bGUgaWQgPSAzNjJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9pbnQgPSByZXF1aXJlKCdAbWFwYm94L3BvaW50LWdlb21ldHJ5Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gVmVjdG9yVGlsZUZlYXR1cmU7XG5cbmZ1bmN0aW9uIFZlY3RvclRpbGVGZWF0dXJlKHBiZiwgZW5kLCBleHRlbnQsIGtleXMsIHZhbHVlcykge1xuICAgIC8vIFB1YmxpY1xuICAgIHRoaXMucHJvcGVydGllcyA9IHt9O1xuICAgIHRoaXMuZXh0ZW50ID0gZXh0ZW50O1xuICAgIHRoaXMudHlwZSA9IDA7XG5cbiAgICAvLyBQcml2YXRlXG4gICAgdGhpcy5fcGJmID0gcGJmO1xuICAgIHRoaXMuX2dlb21ldHJ5ID0gLTE7XG4gICAgdGhpcy5fa2V5cyA9IGtleXM7XG4gICAgdGhpcy5fdmFsdWVzID0gdmFsdWVzO1xuXG4gICAgcGJmLnJlYWRGaWVsZHMocmVhZEZlYXR1cmUsIHRoaXMsIGVuZCk7XG59XG5cbmZ1bmN0aW9uIHJlYWRGZWF0dXJlKHRhZywgZmVhdHVyZSwgcGJmKSB7XG4gICAgaWYgKHRhZyA9PSAxKSBmZWF0dXJlLmlkID0gcGJmLnJlYWRWYXJpbnQoKTtcbiAgICBlbHNlIGlmICh0YWcgPT0gMikgcmVhZFRhZyhwYmYsIGZlYXR1cmUpO1xuICAgIGVsc2UgaWYgKHRhZyA9PSAzKSBmZWF0dXJlLnR5cGUgPSBwYmYucmVhZFZhcmludCgpO1xuICAgIGVsc2UgaWYgKHRhZyA9PSA0KSBmZWF0dXJlLl9nZW9tZXRyeSA9IHBiZi5wb3M7XG59XG5cbmZ1bmN0aW9uIHJlYWRUYWcocGJmLCBmZWF0dXJlKSB7XG4gICAgdmFyIGVuZCA9IHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zO1xuXG4gICAgd2hpbGUgKHBiZi5wb3MgPCBlbmQpIHtcbiAgICAgICAgdmFyIGtleSA9IGZlYXR1cmUuX2tleXNbcGJmLnJlYWRWYXJpbnQoKV0sXG4gICAgICAgICAgICB2YWx1ZSA9IGZlYXR1cmUuX3ZhbHVlc1twYmYucmVhZFZhcmludCgpXTtcbiAgICAgICAgZmVhdHVyZS5wcm9wZXJ0aWVzW2tleV0gPSB2YWx1ZTtcbiAgICB9XG59XG5cblZlY3RvclRpbGVGZWF0dXJlLnR5cGVzID0gWydVbmtub3duJywgJ1BvaW50JywgJ0xpbmVTdHJpbmcnLCAnUG9seWdvbiddO1xuXG5WZWN0b3JUaWxlRmVhdHVyZS5wcm90b3R5cGUubG9hZEdlb21ldHJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHBiZiA9IHRoaXMuX3BiZjtcbiAgICBwYmYucG9zID0gdGhpcy5fZ2VvbWV0cnk7XG5cbiAgICB2YXIgZW5kID0gcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3MsXG4gICAgICAgIGNtZCA9IDEsXG4gICAgICAgIGxlbmd0aCA9IDAsXG4gICAgICAgIHggPSAwLFxuICAgICAgICB5ID0gMCxcbiAgICAgICAgbGluZXMgPSBbXSxcbiAgICAgICAgbGluZTtcblxuICAgIHdoaWxlIChwYmYucG9zIDwgZW5kKSB7XG4gICAgICAgIGlmIChsZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgdmFyIGNtZExlbiA9IHBiZi5yZWFkVmFyaW50KCk7XG4gICAgICAgICAgICBjbWQgPSBjbWRMZW4gJiAweDc7XG4gICAgICAgICAgICBsZW5ndGggPSBjbWRMZW4gPj4gMztcbiAgICAgICAgfVxuXG4gICAgICAgIGxlbmd0aC0tO1xuXG4gICAgICAgIGlmIChjbWQgPT09IDEgfHwgY21kID09PSAyKSB7XG4gICAgICAgICAgICB4ICs9IHBiZi5yZWFkU1ZhcmludCgpO1xuICAgICAgICAgICAgeSArPSBwYmYucmVhZFNWYXJpbnQoKTtcblxuICAgICAgICAgICAgaWYgKGNtZCA9PT0gMSkgeyAvLyBtb3ZlVG9cbiAgICAgICAgICAgICAgICBpZiAobGluZSkgbGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgICAgICAgICBsaW5lID0gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxpbmUucHVzaChuZXcgUG9pbnQoeCwgeSkpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY21kID09PSA3KSB7XG5cbiAgICAgICAgICAgIC8vIFdvcmthcm91bmQgZm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXBib3gvbWFwbmlrLXZlY3Rvci10aWxlL2lzc3Vlcy85MFxuICAgICAgICAgICAgaWYgKGxpbmUpIHtcbiAgICAgICAgICAgICAgICBsaW5lLnB1c2gobGluZVswXS5jbG9uZSgpKTsgLy8gY2xvc2VQb2x5Z29uXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5rbm93biBjb21tYW5kICcgKyBjbWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGxpbmUpIGxpbmVzLnB1c2gobGluZSk7XG5cbiAgICByZXR1cm4gbGluZXM7XG59O1xuXG5WZWN0b3JUaWxlRmVhdHVyZS5wcm90b3R5cGUuYmJveCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwYmYgPSB0aGlzLl9wYmY7XG4gICAgcGJmLnBvcyA9IHRoaXMuX2dlb21ldHJ5O1xuXG4gICAgdmFyIGVuZCA9IHBiZi5yZWFkVmFyaW50KCkgKyBwYmYucG9zLFxuICAgICAgICBjbWQgPSAxLFxuICAgICAgICBsZW5ndGggPSAwLFxuICAgICAgICB4ID0gMCxcbiAgICAgICAgeSA9IDAsXG4gICAgICAgIHgxID0gSW5maW5pdHksXG4gICAgICAgIHgyID0gLUluZmluaXR5LFxuICAgICAgICB5MSA9IEluZmluaXR5LFxuICAgICAgICB5MiA9IC1JbmZpbml0eTtcblxuICAgIHdoaWxlIChwYmYucG9zIDwgZW5kKSB7XG4gICAgICAgIGlmIChsZW5ndGggPD0gMCkge1xuICAgICAgICAgICAgdmFyIGNtZExlbiA9IHBiZi5yZWFkVmFyaW50KCk7XG4gICAgICAgICAgICBjbWQgPSBjbWRMZW4gJiAweDc7XG4gICAgICAgICAgICBsZW5ndGggPSBjbWRMZW4gPj4gMztcbiAgICAgICAgfVxuXG4gICAgICAgIGxlbmd0aC0tO1xuXG4gICAgICAgIGlmIChjbWQgPT09IDEgfHwgY21kID09PSAyKSB7XG4gICAgICAgICAgICB4ICs9IHBiZi5yZWFkU1ZhcmludCgpO1xuICAgICAgICAgICAgeSArPSBwYmYucmVhZFNWYXJpbnQoKTtcbiAgICAgICAgICAgIGlmICh4IDwgeDEpIHgxID0geDtcbiAgICAgICAgICAgIGlmICh4ID4geDIpIHgyID0geDtcbiAgICAgICAgICAgIGlmICh5IDwgeTEpIHkxID0geTtcbiAgICAgICAgICAgIGlmICh5ID4geTIpIHkyID0geTtcblxuICAgICAgICB9IGVsc2UgaWYgKGNtZCAhPT0gNykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGNvbW1hbmQgJyArIGNtZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gW3gxLCB5MSwgeDIsIHkyXTtcbn07XG5cblZlY3RvclRpbGVGZWF0dXJlLnByb3RvdHlwZS50b0dlb0pTT04gPSBmdW5jdGlvbih4LCB5LCB6KSB7XG4gICAgdmFyIHNpemUgPSB0aGlzLmV4dGVudCAqIE1hdGgucG93KDIsIHopLFxuICAgICAgICB4MCA9IHRoaXMuZXh0ZW50ICogeCxcbiAgICAgICAgeTAgPSB0aGlzLmV4dGVudCAqIHksXG4gICAgICAgIGNvb3JkcyA9IHRoaXMubG9hZEdlb21ldHJ5KCksXG4gICAgICAgIHR5cGUgPSBWZWN0b3JUaWxlRmVhdHVyZS50eXBlc1t0aGlzLnR5cGVdLFxuICAgICAgICBpLCBqO1xuXG4gICAgZnVuY3Rpb24gcHJvamVjdChsaW5lKSB7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGluZS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgdmFyIHAgPSBsaW5lW2pdLCB5MiA9IDE4MCAtIChwLnkgKyB5MCkgKiAzNjAgLyBzaXplO1xuICAgICAgICAgICAgbGluZVtqXSA9IFtcbiAgICAgICAgICAgICAgICAocC54ICsgeDApICogMzYwIC8gc2l6ZSAtIDE4MCxcbiAgICAgICAgICAgICAgICAzNjAgLyBNYXRoLlBJICogTWF0aC5hdGFuKE1hdGguZXhwKHkyICogTWF0aC5QSSAvIDE4MCkpIC0gOTBcbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRoaXMudHlwZSkge1xuICAgIGNhc2UgMTpcbiAgICAgICAgdmFyIHBvaW50cyA9IFtdO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBwb2ludHNbaV0gPSBjb29yZHNbaV1bMF07XG4gICAgICAgIH1cbiAgICAgICAgY29vcmRzID0gcG9pbnRzO1xuICAgICAgICBwcm9qZWN0KGNvb3Jkcyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSAyOlxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBwcm9qZWN0KGNvb3Jkc1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIDM6XG4gICAgICAgIGNvb3JkcyA9IGNsYXNzaWZ5UmluZ3MoY29vcmRzKTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGNvb3Jkc1tpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHByb2plY3QoY29vcmRzW2ldW2pdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoY29vcmRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb29yZHMgPSBjb29yZHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdHlwZSA9ICdNdWx0aScgKyB0eXBlO1xuICAgIH1cblxuICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgIHR5cGU6IFwiRmVhdHVyZVwiLFxuICAgICAgICBnZW9tZXRyeToge1xuICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiBjb29yZHNcbiAgICAgICAgfSxcbiAgICAgICAgcHJvcGVydGllczogdGhpcy5wcm9wZXJ0aWVzXG4gICAgfTtcblxuICAgIGlmICgnaWQnIGluIHRoaXMpIHtcbiAgICAgICAgcmVzdWx0LmlkID0gdGhpcy5pZDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gY2xhc3NpZmllcyBhbiBhcnJheSBvZiByaW5ncyBpbnRvIHBvbHlnb25zIHdpdGggb3V0ZXIgcmluZ3MgYW5kIGhvbGVzXG5cbmZ1bmN0aW9uIGNsYXNzaWZ5UmluZ3MocmluZ3MpIHtcbiAgICB2YXIgbGVuID0gcmluZ3MubGVuZ3RoO1xuXG4gICAgaWYgKGxlbiA8PSAxKSByZXR1cm4gW3JpbmdzXTtcblxuICAgIHZhciBwb2x5Z29ucyA9IFtdLFxuICAgICAgICBwb2x5Z29uLFxuICAgICAgICBjY3c7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHZhciBhcmVhID0gc2lnbmVkQXJlYShyaW5nc1tpXSk7XG4gICAgICAgIGlmIChhcmVhID09PSAwKSBjb250aW51ZTtcblxuICAgICAgICBpZiAoY2N3ID09PSB1bmRlZmluZWQpIGNjdyA9IGFyZWEgPCAwO1xuXG4gICAgICAgIGlmIChjY3cgPT09IGFyZWEgPCAwKSB7XG4gICAgICAgICAgICBpZiAocG9seWdvbikgcG9seWdvbnMucHVzaChwb2x5Z29uKTtcbiAgICAgICAgICAgIHBvbHlnb24gPSBbcmluZ3NbaV1dO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwb2x5Z29uLnB1c2gocmluZ3NbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChwb2x5Z29uKSBwb2x5Z29ucy5wdXNoKHBvbHlnb24pO1xuXG4gICAgcmV0dXJuIHBvbHlnb25zO1xufVxuXG5mdW5jdGlvbiBzaWduZWRBcmVhKHJpbmcpIHtcbiAgICB2YXIgc3VtID0gMDtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcmluZy5sZW5ndGgsIGogPSBsZW4gLSAxLCBwMSwgcDI7IGkgPCBsZW47IGogPSBpKyspIHtcbiAgICAgICAgcDEgPSByaW5nW2ldO1xuICAgICAgICBwMiA9IHJpbmdbal07XG4gICAgICAgIHN1bSArPSAocDIueCAtIHAxLngpICogKHAxLnkgKyBwMi55KTtcbiAgICB9XG4gICAgcmV0dXJuIHN1bTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vfi9AbWFwYm94L3ZlY3Rvci10aWxlL2xpYi92ZWN0b3J0aWxlZmVhdHVyZS5qc1xuLy8gbW9kdWxlIGlkID0gMzYzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSBQb2ludDtcblxuLyoqXG4gKiBBIHN0YW5kYWxvbmUgcG9pbnQgZ2VvbWV0cnkgd2l0aCB1c2VmdWwgYWNjZXNzb3IsIGNvbXBhcmlzb24sIGFuZFxuICogbW9kaWZpY2F0aW9uIG1ldGhvZHMuXG4gKlxuICogQGNsYXNzIFBvaW50XG4gKiBAcGFyYW0ge051bWJlcn0geCB0aGUgeC1jb29yZGluYXRlLiB0aGlzIGNvdWxkIGJlIGxvbmdpdHVkZSBvciBzY3JlZW5cbiAqIHBpeGVscywgb3IgYW55IG90aGVyIHNvcnQgb2YgdW5pdC5cbiAqIEBwYXJhbSB7TnVtYmVyfSB5IHRoZSB5LWNvb3JkaW5hdGUuIHRoaXMgY291bGQgYmUgbGF0aXR1ZGUgb3Igc2NyZWVuXG4gKiBwaXhlbHMsIG9yIGFueSBvdGhlciBzb3J0IG9mIHVuaXQuXG4gKiBAZXhhbXBsZVxuICogdmFyIHBvaW50ID0gbmV3IFBvaW50KC03NywgMzgpO1xuICovXG5mdW5jdGlvbiBQb2ludCh4LCB5KSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xufVxuXG5Qb2ludC5wcm90b3R5cGUgPSB7XG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSB0aGlzIHBvaW50LCByZXR1cm5pbmcgYSBuZXcgcG9pbnQgdGhhdCBjYW4gYmUgbW9kaWZpZWRcbiAgICAgKiB3aXRob3V0IGFmZmVjdGluZyB0aGUgb2xkIG9uZS5cbiAgICAgKiBAcmV0dXJuIHtQb2ludH0gdGhlIGNsb25lXG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbmV3IFBvaW50KHRoaXMueCwgdGhpcy55KTsgfSxcblxuICAgIC8qKlxuICAgICAqIEFkZCB0aGlzIHBvaW50J3MgeCAmIHkgY29vcmRpbmF0ZXMgdG8gYW5vdGhlciBwb2ludCxcbiAgICAgKiB5aWVsZGluZyBhIG5ldyBwb2ludC5cbiAgICAgKiBAcGFyYW0ge1BvaW50fSBwIHRoZSBvdGhlciBwb2ludFxuICAgICAqIEByZXR1cm4ge1BvaW50fSBvdXRwdXQgcG9pbnRcbiAgICAgKi9cbiAgICBhZGQ6ICAgICBmdW5jdGlvbihwKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX2FkZChwKTsgfSxcblxuICAgIC8qKlxuICAgICAqIFN1YnRyYWN0IHRoaXMgcG9pbnQncyB4ICYgeSBjb29yZGluYXRlcyB0byBmcm9tIHBvaW50LFxuICAgICAqIHlpZWxkaW5nIGEgbmV3IHBvaW50LlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHAgdGhlIG90aGVyIHBvaW50XG4gICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuICAgICAqL1xuICAgIHN1YjogICAgIGZ1bmN0aW9uKHApIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fc3ViKHApOyB9LFxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhpcyBwb2ludCdzIHggJiB5IGNvb3JkaW5hdGVzIGJ5IHBvaW50LFxuICAgICAqIHlpZWxkaW5nIGEgbmV3IHBvaW50LlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHAgdGhlIG90aGVyIHBvaW50XG4gICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuICAgICAqL1xuICAgIG11bHRCeVBvaW50OiAgICBmdW5jdGlvbihwKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX211bHRCeVBvaW50KHApOyB9LFxuXG4gICAgLyoqXG4gICAgICogRGl2aWRlIHRoaXMgcG9pbnQncyB4ICYgeSBjb29yZGluYXRlcyBieSBwb2ludCxcbiAgICAgKiB5aWVsZGluZyBhIG5ldyBwb2ludC5cbiAgICAgKiBAcGFyYW0ge1BvaW50fSBwIHRoZSBvdGhlciBwb2ludFxuICAgICAqIEByZXR1cm4ge1BvaW50fSBvdXRwdXQgcG9pbnRcbiAgICAgKi9cbiAgICBkaXZCeVBvaW50OiAgICAgZnVuY3Rpb24ocCkgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9kaXZCeVBvaW50KHApOyB9LFxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgdGhpcyBwb2ludCdzIHggJiB5IGNvb3JkaW5hdGVzIGJ5IGEgZmFjdG9yLFxuICAgICAqIHlpZWxkaW5nIGEgbmV3IHBvaW50LlxuICAgICAqIEBwYXJhbSB7UG9pbnR9IGsgZmFjdG9yXG4gICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuICAgICAqL1xuICAgIG11bHQ6ICAgIGZ1bmN0aW9uKGspIHsgcmV0dXJuIHRoaXMuY2xvbmUoKS5fbXVsdChrKTsgfSxcblxuICAgIC8qKlxuICAgICAqIERpdmlkZSB0aGlzIHBvaW50J3MgeCAmIHkgY29vcmRpbmF0ZXMgYnkgYSBmYWN0b3IsXG4gICAgICogeWllbGRpbmcgYSBuZXcgcG9pbnQuXG4gICAgICogQHBhcmFtIHtQb2ludH0gayBmYWN0b3JcbiAgICAgKiBAcmV0dXJuIHtQb2ludH0gb3V0cHV0IHBvaW50XG4gICAgICovXG4gICAgZGl2OiAgICAgZnVuY3Rpb24oaykgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9kaXYoayk7IH0sXG5cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgdGhpcyBwb2ludCBhcm91bmQgdGhlIDAsIDAgb3JpZ2luIGJ5IGFuIGFuZ2xlIGEsXG4gICAgICogZ2l2ZW4gaW4gcmFkaWFuc1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhIGFuZ2xlIHRvIHJvdGF0ZSBhcm91bmQsIGluIHJhZGlhbnNcbiAgICAgKiBAcmV0dXJuIHtQb2ludH0gb3V0cHV0IHBvaW50XG4gICAgICovXG4gICAgcm90YXRlOiAgZnVuY3Rpb24oYSkgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9yb3RhdGUoYSk7IH0sXG5cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgdGhpcyBwb2ludCBhcm91bmQgcCBwb2ludCBieSBhbiBhbmdsZSBhLFxuICAgICAqIGdpdmVuIGluIHJhZGlhbnNcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYSBhbmdsZSB0byByb3RhdGUgYXJvdW5kLCBpbiByYWRpYW5zXG4gICAgICogQHBhcmFtIHtQb2ludH0gcCBQb2ludCB0byByb3RhdGUgYXJvdW5kXG4gICAgICogQHJldHVybiB7UG9pbnR9IG91dHB1dCBwb2ludFxuICAgICAqL1xuICAgIHJvdGF0ZUFyb3VuZDogIGZ1bmN0aW9uKGEscCkgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9yb3RhdGVBcm91bmQoYSxwKTsgfSxcblxuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IHRoaXMgcG9pbnQgYnkgYSA0eDEgdHJhbnNmb3JtYXRpb24gbWF0cml4XG4gICAgICogQHBhcmFtIHtBcnJheTxOdW1iZXI+fSBtIHRyYW5zZm9ybWF0aW9uIG1hdHJpeFxuICAgICAqIEByZXR1cm4ge1BvaW50fSBvdXRwdXQgcG9pbnRcbiAgICAgKi9cbiAgICBtYXRNdWx0OiBmdW5jdGlvbihtKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX21hdE11bHQobSk7IH0sXG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhpcyBwb2ludCBidXQgYXMgYSB1bml0IHZlY3RvciBmcm9tIDAsIDAsIG1lYW5pbmdcbiAgICAgKiB0aGF0IHRoZSBkaXN0YW5jZSBmcm9tIHRoZSByZXN1bHRpbmcgcG9pbnQgdG8gdGhlIDAsIDBcbiAgICAgKiBjb29yZGluYXRlIHdpbGwgYmUgZXF1YWwgdG8gMSBhbmQgdGhlIGFuZ2xlIGZyb20gdGhlIHJlc3VsdGluZ1xuICAgICAqIHBvaW50IHRvIHRoZSAwLCAwIGNvb3JkaW5hdGUgd2lsbCBiZSB0aGUgc2FtZSBhcyBiZWZvcmUuXG4gICAgICogQHJldHVybiB7UG9pbnR9IHVuaXQgdmVjdG9yIHBvaW50XG4gICAgICovXG4gICAgdW5pdDogICAgZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX3VuaXQoKTsgfSxcblxuICAgIC8qKlxuICAgICAqIENvbXB1dGUgYSBwZXJwZW5kaWN1bGFyIHBvaW50LCB3aGVyZSB0aGUgbmV3IHkgY29vcmRpbmF0ZVxuICAgICAqIGlzIHRoZSBvbGQgeCBjb29yZGluYXRlIGFuZCB0aGUgbmV3IHggY29vcmRpbmF0ZSBpcyB0aGUgb2xkIHlcbiAgICAgKiBjb29yZGluYXRlIG11bHRpcGxpZWQgYnkgLTFcbiAgICAgKiBAcmV0dXJuIHtQb2ludH0gcGVycGVuZGljdWxhciBwb2ludFxuICAgICAqL1xuICAgIHBlcnA6ICAgIGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcy5jbG9uZSgpLl9wZXJwKCk7IH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSB2ZXJzaW9uIG9mIHRoaXMgcG9pbnQgd2l0aCB0aGUgeCAmIHkgY29vcmRpbmF0ZXNcbiAgICAgKiByb3VuZGVkIHRvIGludGVnZXJzLlxuICAgICAqIEByZXR1cm4ge1BvaW50fSByb3VuZGVkIHBvaW50XG4gICAgICovXG4gICAgcm91bmQ6ICAgZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmNsb25lKCkuX3JvdW5kKCk7IH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdGhlIG1hZ2l0dWRlIG9mIHRoaXMgcG9pbnQ6IHRoaXMgaXMgdGhlIEV1Y2xpZGVhblxuICAgICAqIGRpc3RhbmNlIGZyb20gdGhlIDAsIDAgY29vcmRpbmF0ZSB0byB0aGlzIHBvaW50J3MgeCBhbmQgeVxuICAgICAqIGNvb3JkaW5hdGVzLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gbWFnbml0dWRlXG4gICAgICovXG4gICAgbWFnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydCh0aGlzLnggKiB0aGlzLnggKyB0aGlzLnkgKiB0aGlzLnkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBKdWRnZSB3aGV0aGVyIHRoaXMgcG9pbnQgaXMgZXF1YWwgdG8gYW5vdGhlciBwb2ludCwgcmV0dXJuaW5nXG4gICAgICogdHJ1ZSBvciBmYWxzZS5cbiAgICAgKiBAcGFyYW0ge1BvaW50fSBvdGhlciB0aGUgb3RoZXIgcG9pbnRcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSB3aGV0aGVyIHRoZSBwb2ludHMgYXJlIGVxdWFsXG4gICAgICovXG4gICAgZXF1YWxzOiBmdW5jdGlvbihvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlci54ICYmXG4gICAgICAgICAgICAgICB0aGlzLnkgPT09IG90aGVyLnk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgZGlzdGFuY2UgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnRcbiAgICAgKiBAcGFyYW0ge1BvaW50fSBwIHRoZSBvdGhlciBwb2ludFxuICAgICAqIEByZXR1cm4ge051bWJlcn0gZGlzdGFuY2VcbiAgICAgKi9cbiAgICBkaXN0OiBmdW5jdGlvbihwKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQodGhpcy5kaXN0U3FyKHApKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBmcm9tIHRoaXMgcG9pbnQgdG8gYW5vdGhlciBwb2ludCxcbiAgICAgKiB3aXRob3V0IHRoZSBzcXVhcmUgcm9vdCBzdGVwLiBVc2VmdWwgaWYgeW91J3JlIGNvbXBhcmluZ1xuICAgICAqIHJlbGF0aXZlIGRpc3RhbmNlcy5cbiAgICAgKiBAcGFyYW0ge1BvaW50fSBwIHRoZSBvdGhlciBwb2ludFxuICAgICAqIEByZXR1cm4ge051bWJlcn0gZGlzdGFuY2VcbiAgICAgKi9cbiAgICBkaXN0U3FyOiBmdW5jdGlvbihwKSB7XG4gICAgICAgIHZhciBkeCA9IHAueCAtIHRoaXMueCxcbiAgICAgICAgICAgIGR5ID0gcC55IC0gdGhpcy55O1xuICAgICAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYW5nbGUgZnJvbSB0aGUgMCwgMCBjb29yZGluYXRlIHRvIHRoaXMgcG9pbnQsIGluIHJhZGlhbnNcbiAgICAgKiBjb29yZGluYXRlcy5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IGFuZ2xlXG4gICAgICovXG4gICAgYW5nbGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLnksIHRoaXMueCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgYW5nbGUgZnJvbSB0aGlzIHBvaW50IHRvIGFub3RoZXIgcG9pbnQsIGluIHJhZGlhbnNcbiAgICAgKiBAcGFyYW0ge1BvaW50fSBiIHRoZSBvdGhlciBwb2ludFxuICAgICAqIEByZXR1cm4ge051bWJlcn0gYW5nbGVcbiAgICAgKi9cbiAgICBhbmdsZVRvOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmF0YW4yKHRoaXMueSAtIGIueSwgdGhpcy54IC0gYi54KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBhbmdsZSBiZXR3ZWVuIHRoaXMgcG9pbnQgYW5kIGFub3RoZXIgcG9pbnQsIGluIHJhZGlhbnNcbiAgICAgKiBAcGFyYW0ge1BvaW50fSBiIHRoZSBvdGhlciBwb2ludFxuICAgICAqIEByZXR1cm4ge051bWJlcn0gYW5nbGVcbiAgICAgKi9cbiAgICBhbmdsZVdpdGg6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5nbGVXaXRoU2VwKGIueCwgYi55KTtcbiAgICB9LFxuXG4gICAgLypcbiAgICAgKiBGaW5kIHRoZSBhbmdsZSBvZiB0aGUgdHdvIHZlY3RvcnMsIHNvbHZpbmcgdGhlIGZvcm11bGEgZm9yXG4gICAgICogdGhlIGNyb3NzIHByb2R1Y3QgYSB4IGIgPSB8YXx8YnxzaW4ozrgpIGZvciDOuC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0geCB0aGUgeC1jb29yZGluYXRlXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHkgdGhlIHktY29vcmRpbmF0ZVxuICAgICAqIEByZXR1cm4ge051bWJlcn0gdGhlIGFuZ2xlIGluIHJhZGlhbnNcbiAgICAgKi9cbiAgICBhbmdsZVdpdGhTZXA6IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguYXRhbjIoXG4gICAgICAgICAgICB0aGlzLnggKiB5IC0gdGhpcy55ICogeCxcbiAgICAgICAgICAgIHRoaXMueCAqIHggKyB0aGlzLnkgKiB5KTtcbiAgICB9LFxuXG4gICAgX21hdE11bHQ6IGZ1bmN0aW9uKG0pIHtcbiAgICAgICAgdmFyIHggPSBtWzBdICogdGhpcy54ICsgbVsxXSAqIHRoaXMueSxcbiAgICAgICAgICAgIHkgPSBtWzJdICogdGhpcy54ICsgbVszXSAqIHRoaXMueTtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIF9hZGQ6IGZ1bmN0aW9uKHApIHtcbiAgICAgICAgdGhpcy54ICs9IHAueDtcbiAgICAgICAgdGhpcy55ICs9IHAueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIF9zdWI6IGZ1bmN0aW9uKHApIHtcbiAgICAgICAgdGhpcy54IC09IHAueDtcbiAgICAgICAgdGhpcy55IC09IHAueTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIF9tdWx0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHRoaXMueCAqPSBrO1xuICAgICAgICB0aGlzLnkgKj0gaztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIF9kaXY6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgdGhpcy54IC89IGs7XG4gICAgICAgIHRoaXMueSAvPSBrO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgX211bHRCeVBvaW50OiBmdW5jdGlvbihwKSB7XG4gICAgICAgIHRoaXMueCAqPSBwLng7XG4gICAgICAgIHRoaXMueSAqPSBwLnk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBfZGl2QnlQb2ludDogZnVuY3Rpb24ocCkge1xuICAgICAgICB0aGlzLnggLz0gcC54O1xuICAgICAgICB0aGlzLnkgLz0gcC55O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgX3VuaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLl9kaXYodGhpcy5tYWcoKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBfcGVycDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB5ID0gdGhpcy55O1xuICAgICAgICB0aGlzLnkgPSB0aGlzLng7XG4gICAgICAgIHRoaXMueCA9IC15O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgX3JvdGF0ZTogZnVuY3Rpb24oYW5nbGUpIHtcbiAgICAgICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlKSxcbiAgICAgICAgICAgIHNpbiA9IE1hdGguc2luKGFuZ2xlKSxcbiAgICAgICAgICAgIHggPSBjb3MgKiB0aGlzLnggLSBzaW4gKiB0aGlzLnksXG4gICAgICAgICAgICB5ID0gc2luICogdGhpcy54ICsgY29zICogdGhpcy55O1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgX3JvdGF0ZUFyb3VuZDogZnVuY3Rpb24oYW5nbGUsIHApIHtcbiAgICAgICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlKSxcbiAgICAgICAgICAgIHNpbiA9IE1hdGguc2luKGFuZ2xlKSxcbiAgICAgICAgICAgIHggPSBwLnggKyBjb3MgKiAodGhpcy54IC0gcC54KSAtIHNpbiAqICh0aGlzLnkgLSBwLnkpLFxuICAgICAgICAgICAgeSA9IHAueSArIHNpbiAqICh0aGlzLnggLSBwLngpICsgY29zICogKHRoaXMueSAtIHAueSk7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBfcm91bmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLnggPSBNYXRoLnJvdW5kKHRoaXMueCk7XG4gICAgICAgIHRoaXMueSA9IE1hdGgucm91bmQodGhpcy55KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufTtcblxuLyoqXG4gKiBDb25zdHJ1Y3QgYSBwb2ludCBmcm9tIGFuIGFycmF5IGlmIG5lY2Vzc2FyeSwgb3RoZXJ3aXNlIGlmIHRoZSBpbnB1dFxuICogaXMgYWxyZWFkeSBhIFBvaW50LCBvciBhbiB1bmtub3duIHR5cGUsIHJldHVybiBpdCB1bmNoYW5nZWRcbiAqIEBwYXJhbSB7QXJyYXk8TnVtYmVyPnxQb2ludHwqfSBhIGFueSBraW5kIG9mIGlucHV0IHZhbHVlXG4gKiBAcmV0dXJuIHtQb2ludH0gY29uc3RydWN0ZWQgcG9pbnQsIG9yIHBhc3NlZC10aHJvdWdoIHZhbHVlLlxuICogQGV4YW1wbGVcbiAqIC8vIHRoaXNcbiAqIHZhciBwb2ludCA9IFBvaW50LmNvbnZlcnQoWzAsIDFdKTtcbiAqIC8vIGlzIGVxdWl2YWxlbnQgdG9cbiAqIHZhciBwb2ludCA9IG5ldyBQb2ludCgwLCAxKTtcbiAqL1xuUG9pbnQuY29udmVydCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgaWYgKGEgaW5zdGFuY2VvZiBQb2ludCkge1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludChhWzBdLCBhWzFdKTtcbiAgICB9XG4gICAgcmV0dXJuIGE7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9+L0BtYXBib3gvcG9pbnQtZ2VvbWV0cnkvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDM2NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgYXhpb3MgZnJvbSBcImF4aW9zXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlcXVlc3Qoe3VybCwgcmVzcG9uc2VUeXBlID0gJ2pzb24nfSkge1xuICBjb25zdCBmZXRjaERhdGEgPSAoKSA9PiB7XG4gICAgcmV0dXJuIGF4aW9zKHtcbiAgICAgIHVybCxcbiAgICAgIHJlc3BvbnNlVHlwZSxcbiAgICB9KS50aGVuKCh7ZGF0YX0pID0+IHtcbiAgICAgIHJldHVybiBkYXRhO1xuICAgIH0pO1xuICB9O1xuICByZXR1cm4gZmV0Y2hEYXRhKCk7XG59XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL25ldC9yZXF1ZXN0LmpzIiwidmFyIHRlbXBsYXRlUmUgPSAvXFx7ICooW1xcd18tXSspICpcXH0vZztcblxuLy8gQGZ1bmN0aW9uIHRlbXBsYXRlKHN0cjogU3RyaW5nLCBkYXRhOiBPYmplY3QpOiBTdHJpbmdcbi8vIFNpbXBsZSB0ZW1wbGF0aW5nIGZhY2lsaXR5LCBhY2NlcHRzIGEgdGVtcGxhdGUgc3RyaW5nIG9mIHRoZSBmb3JtIGAnSGVsbG8ge2F9LCB7Yn0nYFxuLy8gYW5kIGEgZGF0YSBvYmplY3QgbGlrZSBge2E6ICdmb28nLCBiOiAnYmFyJ31gLCByZXR1cm5zIGV2YWx1YXRlZCBzdHJpbmdcbi8vIGAoJ0hlbGxvIGZvbywgYmFyJylgLiBZb3UgY2FuIGFsc28gc3BlY2lmeSBmdW5jdGlvbnMgaW5zdGVhZCBvZiBzdHJpbmdzIGZvclxuLy8gZGF0YSB2YWx1ZXMg4oCUIHRoZXkgd2lsbCBiZSBldmFsdWF0ZWQgcGFzc2luZyBgZGF0YWAgYXMgYW4gYXJndW1lbnQuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0ZW1wbGF0ZShzdHIsIGRhdGEpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKHRlbXBsYXRlUmUsIGZ1bmN0aW9uIChzdHIsIGtleSkge1xuICAgIHZhciB2YWx1ZSA9IGRhdGFba2V5XTtcblxuICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHZhbHVlIHByb3ZpZGVkIGZvciB2YXJpYWJsZSAnICsgc3RyKTtcblxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlKGRhdGEpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0pO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9zdHJpbmcvdGVtcGxhdGUuanMiLCJ2YXIgdGltZUxhYmVsUHJlZml4ID0gJ+KWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqOKWqCAnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRUaW1lTGFiZWwobGFiZWwpIHtcbiAgcmV0dXJuIGAke3RpbWVMYWJlbFByZWZpeH0gJHtsYWJlbH1gO1xufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9jb25zb2xlL2dldFRpbWVMYWJlbC5qcyIsImltcG9ydCBpc09iamVjdCBmcm9tICcuLi92YWxpZGF0ZS9pc29iamVjdCdcblxudmFyIE1BWF9ERVBUSCA9IDEwMDtcblxuZnVuY3Rpb24gZXhwYW5kZWRMb2coaXRlbSwgZGVwdGgpe1xuICBkZXB0aCA9IGRlcHRoIHx8IDMwO1xuXG4gIGlmIChkZXB0aCA+IE1BWF9ERVBUSCApIHtcbiAgICBjb25zb2xlLmxvZyhpdGVtKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaXNPYmplY3QoaXRlbSkpIHtcbiAgICBmb3IgKHZhciBwcm9wIGluIGl0ZW0pIHtcbiAgICAgIGNvbnNvbGUubG9nKHByb3AsIGl0ZW1bcHJvcF0pO1xuICAgICAgY29uc29sZS5ncm91cChwcm9wICsgJyA6ICcgKyh0eXBlb2YgaXRlbVtwcm9wXSkpO1xuICAgICAgZXhwYW5kZWRMb2coaXRlbVtwcm9wXSwgZGVwdGggKyAxKTtcbiAgICAgIGNvbnNvbGUuZ3JvdXBFbmQoKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coaXRlbSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc3RyaW5naWZ5KG9iamVjdCwgc3BhY2UpIHtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9iamVjdCwgbnVsbCwgc3BhY2UpXG59XG5cbmV4cG9ydCB7XG4gIGV4cGFuZGVkTG9nLFxuICBzdHJpbmdpZnksXG59IDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29uc29sZS9leHBhbmRlZExvZy5qcyIsIi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qb25zY2hsaW5rZXJ0L2lzb2JqZWN0L2Jsb2IvbWFzdGVyL2luZGV4LmpzXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc09iamVjdCh2YWwpIHtcbiAgcmV0dXJuIHZhbCAhPSBudWxsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnICYmIEFycmF5LmlzQXJyYXkodmFsKSA9PT0gZmFsc2U7XG59O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy92YWxpZGF0ZS9pc29iamVjdC5qcyJdLCJzb3VyY2VSb290IjoiIn0=